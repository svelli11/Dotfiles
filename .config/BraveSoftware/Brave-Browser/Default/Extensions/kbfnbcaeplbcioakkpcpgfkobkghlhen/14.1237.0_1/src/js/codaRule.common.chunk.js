(self.webpackChunk=self.webpackChunk||[]).push([[6011],{4419:(e,t,i)=>{i.d(t,{A:()=>o,C:()=>n});const n="vBars",o="grammarly-extension-vBars"},13204:(e,t,i)=>{i.r(t),i.d(t,{Coda:()=>n,getHideGrammarlyWhenTextFieldIsUnderAnimationSub:()=>N,getInjectionLayoutForGButtonForDocument:()=>O,injectIntegrationRootForMainCanvasOnly:()=>D,isMainCanvas:()=>P});var n,o=i(84714),a=i(44071),l=i(64271),r=i(59179),d=i(24666),s=i(90572),u=i(63532),c=i(20161),p=i(18827),m=i(14969),g=i(2123),f=i(13391),h=i(81446),b=i(4419),C=i(95804),E=i(88030),y=i(67961),v=i(5913),T=i(30821),x=i(95714),I=i(41169),A=i(71497),B=i(29196),S=i(17503),R=i(33148),k=i(38759),U=i(42319),G=i(13255),_=i(2816),w=i(66914),H=i(93995),F=i(93342),M=i(14027);!function(e){function t({changes:e,deltaChange:t}){return e.length>0||t.delta.ops.length>0}function i(i){const n=(0,G.B)(i.field),o=i.experimentClient.isGateEnabled(C.K.CodaUseCSSTransformTranslateForUnderlinePosition),a=i.experimentClient.isGateEnabled(C.K.CodaPositionGbuttonIntoFixedContainer);let l={};if(a){const e=document.querySelector('[data-coda-ui-id="help-button"]');(null==e?void 0:e.parentElement)&&P(i.field)&&(l={...l,...O(e.parentElement)}),l={...l,injectIntegrationRoot:t=>{D(t,e)}}}const s=[],u=f.h.create(!1),c=i.experimentClient.isGateEnabled(C.K.CodaHideUnderlineWhenAnimated),p=i.field.firstElementChild,m=v.S.sec1.pipe((0,r.U)((()=>{var e;for(const t of document.querySelectorAll("span[role=button]"))if("Suggesting edits"===(null===(e=t.textContent)||void 0===e?void 0:e.trim()))return!0;return!1})),(0,d.x)(((e,t)=>e===t)));return{createLayout:()=>(s.push(m.subscribe(h.wW(u))),c&&p&&s.push(N(p)),new I.A7(i.field,{...l,createGbuttonShiftBehavior:()=>u.view((e=>e?{top:self.innerHeight,left:self.innerWidth}:{top:0,left:0})),getFieldSize:(e,t)=>{if(u.get())return{width:0,height:0};const i=o&&e.firstElementChild?(0,A.Bi)(self.getComputedStyle(e.firstElementChild)):void 0;return{width:t.width-((null==i?void 0:i.x)||0),height:t.height-((null==i?void 0:i.y)||0)}}})),createSelectionSource:()=>n,createTextObserver:()=>new w.j(i.field,B.k.fromDiff,n,void 0,e.createTextMapWithoutCodeBlocks,t),extraCondition:()=>y.T.isSupported(),createReplacementService:e=>new S.V0({eventTarget:i.field,textObserver:e,asyncReplaceDelay:100,deletionEvent:"paste",experimentClient:i.experimentClient}),validationRules:[...k.u,(0,U.Uo)(20,135)],onDispose:()=>{s.forEach((e=>e.unsubscribe()))}}}e.MIX_MIN_TEXTAREA_HEIGHT_FOR_GBUTTON=35,e.TEXTAREA_CODA_UI_IDS=["page-title","page-subtitle","page-list-item-title","hyperlink-builder-text-input"],e.isNonEmptyChange=t,e.createTextMapWithoutCodeBlocks=e=>_.Z.create(e,{andFilterNode:(e,t)=>!e.classList.contains("kr-code-block")}),e.shouldHideGButtonInTextarea=t=>{const i=t.editorElement.getAttribute("data-coda-ui-id"),n=t.editorElement.getBoundingClientRect().height;return i&&e.TEXTAREA_CODA_UI_IDS.includes(i)||n<e.MIX_MIN_TEXTAREA_HEIGHT_FOR_GBUTTON},e.getContentIntegrationConfigure=i,e.validateElementByCodaUiId=(e,t)=>({ruleName:e,match:(e,i)=>i.field.getAttribute("data-coda-ui-id")!==t}),e.content=R.T.contentEditable("CodaIO.content",i),e.textareaRule=R.T.textarea("generic",(t=>{const i=t.experimentClient.isGateEnabled(C.K.CodaHideGbuttonForDocumentTitle);return{gbuttonMinimizeState:(0,o.of)(!0),createLayout:()=>new I.A7(t.field,{injectIntegrationRoot:t=>{"gbutton"===t.grammarlyPart&&i&&e.shouldHideGButtonInTextarea(t)||(0,I.Ry)(t)}}),validationRules:[...k.u,(0,U.Uo)(20,45),e.validateElementByCodaUiId("skipTableTitle","tableTitle"),e.validateElementByCodaUiId("skipSharingDialogEmailInput","sharing-dialog-email-input"),e.validateElementByCodaUiId("skipEmbedHyperlinkBuilder","embedHyperlinkBuilder"),e.validateElementByCodaUiId("skipPageAuthorsInput","page-authors-input")]}})),e.page=(0,H.$W)({name:"coda",domain:M.LF},[e.content,F.k.iframeHostRule,e.textareaRule])}(n||(n={}));const O=e=>({customGbuttonPositioning:{injectionElement:e,injectionStyle:{top:"-5px",right:"0px"},createPositionStyleBehavior:e=>e.pipe(r.U((e=>({position:"absolute",width:"auto",height:"auto",pointerEvents:"all",right:-e.left+"px",bottom:-e.top+"px"})))),calculateMetrics:(e,t,i)=>{const n=x.p8.create({top:i.top+-5,left:e.size.width-i.left});return{offset:n,page:x.Cv.fromOffset(n,x.Cv.fromClient(e.client,{top:t.scrollY,left:t.scrollX}),{top:0,left:0}),client:x.Ir.create(x.E9.plus(e.client,n)),effectivePadding:{top:0,right:0,bottom:0,left:0},size:T.V.gButtonMaxSize}}}}),D=(e,t)=>{("gbutton"!==e.grammarlyPart||P(e.editorElement))&&("gbutton"===e.grammarlyPart&&P(e.editorElement)&&!t||(0,I.Ry)(e))},P=e=>e.parentElement&&!(0,g.q2)(e.parentElement,"data-coda-ui-id","editable"),N=e=>{const t=()=>[...document.getElementsByTagName(I.Mf),...document.getElementsByTagName(b.A)],i="data-temp-style";let n=!1;return(0,a.R)(e,"animationstart").pipe((0,s.h)((()=>!n)),(0,u.b)((()=>{n=!0;for(const e of t()){const t=e.getAttribute("style");t&&e.setAttribute(i,t),e.setAttribute("style","display: none")}})),(0,c.w)((()=>(0,l.T)((0,a.R)(e,"animationend").pipe((0,p.g)(E.E0)),v.S.sec2).pipe((0,m.P)())))).subscribe((()=>{for(const e of t()){const t=e.getAttribute(i);t?(e.setAttribute("style",t),e.removeAttribute(i)):e.removeAttribute("style")}n=!1}))}}}]);