var c=Object.defineProperty;var v=s=>{throw TypeError(s)};var x=(s,e,i)=>e in s?c(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var g=(s,e,i)=>x(s,typeof e!="symbol"?e+"":e,i),f=(s,e,i)=>e.has(s)||v("Cannot "+i);var t=(s,e,i)=>(f(s,e,"read from private field"),i?i.call(s):e.get(s)),r=(s,e,i)=>e.has(s)?v("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,i),p=(s,e,i,h)=>(f(s,e,"write to private field"),h?h.call(s,i):e.set(s,i),i),l=(s,e,i)=>(f(s,e,"access private method"),i);import{S as b,k as R}from"./start-BFd-djfI.js";var u,o,n,d,m;class T{constructor(){r(this,d);r(this,u,new b);r(this,o,[]);r(this,n);g(this,"messages",R(t(this,u)))}get textRevision(){return t(this,n)}enqueue(e,i){const{promise:h,resolve:a}=Promise.withResolvers();return t(this,o).push({message:e,textRevision:i,resolve:a,promise:h}),l(this,d,m).call(this),h}pushNewTextRevision(e){(t(this,n)===void 0||e>t(this,n))&&(p(this,n,e),l(this,d,m).call(this))}}u=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakSet,m=function(){if(t(this,n)!==void 0)for(;t(this,o).length>0;){const{message:e,promise:i,textRevision:h,resolve:a}=t(this,o).at(0);if(h!==void 0&&h>t(this,n))break;t(this,o).shift(),a(),i.then(()=>t(this,u).next(e))}};export{T};
//# sourceMappingURL=TextRevisionSynchronizedQueue-DQV4bu5q-DZsfBpcW.js.map
