(self.webpackChunk=self.webpackChunk||[]).push([[5213],{66533:(e,t,a)=>{a.d(t,{v:()=>w});var i=a(88657),n=a(41169),r=a(90023),o=a(12518),c=a(67649),s=a(31491),l=a(29196),d=a(10140),g=a(13255),u=a(2816),p=a(66914);var m=a(13391),f=a(58303),v=a(3601),h=a(16582),x=a(45030);const C=e=>e.createDocument?e.createDocument:t=>x._A.create((e=>e.getDocumentId?e.getDocumentId:()=>{})(e)(t));var y=a(51837),S=a(32504),I=a(28422);const F={ruleName:"isKnowledgeHubEnabled",match:(e,t)=>"test"===t.experimentClient.getTreatment(i.p.KnowledgeHubAtlassian)},M=".ak-renderer-document",w=(T="Jira",b=e=>({createLayout:()=>new n.A7(e.field),validationRules:[F,{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(M)}],textMap:{createFieldTextMap:e=>new u.Z(e,((e,t)=>u.Z.defaultFilterNode(e,t)&&(e=>!e.classList.contains("expand-content-wrapper"))(e)))}}),k=M,{kind:I.A.readonly,name:`readonlyContent.${T}`,contentSelector:k,match:e=>{const t=((e,t,a,i)=>{const n=a(e),o=n.target||e.field,c=n.textMap||{createFieldTextMap:u.Z.create},m=(n.createSelectionSource||(()=>(0,g.B)(o)))();return{target:o,initialState:e.state,integrationName:`contentEditable.${t}`,validationRules:[{ruleName:"notABody",match:(0,s.ff)(d.XD)},{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(i)}],textMap:c,expiration:d.Jj,createSelectionSource:()=>(0,g.B)(o),mapChange:r.yR,...n,selectionSource:m,createTextObserver:()=>new p.j(o,l.k.fromDiff,m,void 0,c.createFieldTextMap)}})(e,T,b,k);return(0,r.zG)((0,y.O)(t.target,e,t.integrationName,t.validationRules),o.UI((()=>({targetField:t.target,matchExpires:t.expiration(t.target),execute:e=>{var a;const i=S.Y.decorate((0,r.zG)(((e,t)=>{var a;const i=t.createTextObserver(),n=t.createHighlightsFilterFactory?t.createHighlightsFilterFactory(i):h.u,r=t.createLayout(t.target);return{doc:C(e)(t.target),textField:t.target,domain:e.pageContext.domain,url:e.pageContext.url,layout:r,createCheckingService:t=>e.createCheckingService(t),mapChange:t.mapChange,state:m.h.create(t.initialState),actions:e.actions,fieldSettings:e.fieldSettings,notifications:(0,v.Cq)(e.app.notifications,"ctx.app.notifications"),gnar:e.gnar,productMetricsCSClient:e.productMetricsCSClient,felog:e.felog,config:e.pageContext.config,experimentClient:e.experimentClient,isCurrentFieldFocused:m.h.create(!1),selectionSource:t.selectionSource,textObserver:i,createAlertProcessor:t.createAlertProcessor,createTextRevisionManager:t.createTextRevisionManager,geometryProvider:t.highlightGeometryProvider,customizations:{...t.customizations,getDocEvents:(null===(a=t.customizations)||void 0===a?void 0:a.getDocEvents)||e.getDocEvents,isGbuttonVisible:m.h.create(!1)},highlightsFilterFactory:n,iframeConnectionId:e.iframeConnectionId,eventPropagationHandler:e.eventPropagationHandler,forceIntegrationEntirelyInsideIframe:e.forceIntegrationEntirelyInsideIframe,pageIntegrationId:e.pageContext.id,integrationName:t.integrationName,fieldIntegrationStore:e.pageContext.fieldIntegrationStore,vBarsIntegrationInfo:f.YP}})(e,t),c.kC,r.a9),t.integrationName,t.target);return null===(a=t.onCreate)||void 0===a||a.call(t),{update(e){i.update(e)},dispose(){var e;i.dispose(),null===(e=t.onDispose)||void 0===e||e.call(t)}}},desiredCustomizations:{capiStartSessionOptions:{...e.capiStartSessionOptions,mode:"READ_ONLY"}}}))))}});var T,b,k},5471:(e,t,a)=>{a.r(t),a.d(t,{Jira:()=>n});var i,n,r=a(41169),o=a(33148),c=a(80908),s=a(51837),l=a(66533),d=a(93995),g=a(14027),u=a(36344),p=a(64271),m=a(14969),f=a(29479),v=a(58303),h=a(10140),x=a(51425),C=a(38759),y=a(98961),S=a(2816);function I(){return x.M.generic((e=>({overwriteGenericOpts:{validationRules:C.u,createLayout:()=>new r.A7(e.field.closest(".ak-editor-content-area, .content-area")||e.field),expiration:e=>{const t=e.closest("body > span > div"),a=t?y.x.observeStyle(t).pipe((0,m.P)((e=>"0"===e.opacity)),(0,f.h)(void 0)):(0,u.c)();return(0,p.T)((0,h.Jj)(e),a)},textMap:{createFieldTextMap:i.createTextMap},getVBarsIntegrationInfo:t=>v.G({kind:"jiraProseMirror",integrationName:t,domain:e.pageContext.domain,isInsideIFrame:!1})}})))}!function(e){e.createTextMap=t=>new S.Z(t,(t=>!e.hasPlaceholder(t))),e.hasPlaceholder=e=>!!e.querySelector(".placeholder-decoration")}(i||(i={})),function(e){const t=I(),a=o.T.textarea("Jira.issuePageDescription",(e=>({validate:(e,t)=>(0,s.O)(e.field,e,t,[{ruleName:"isNearDescriptionWikiEditField",match:e=>!!e.closest("#description-wiki-edit")}]),createLayout:()=>new r.A7(e.field)})));e.page=(0,d.$W)({name:"JIRA-readonly",domain:g.fI},[t,a,(0,c.q)("Jira"),o.T.contentEditable("Jira",(e=>({createLayout:()=>new r.A7(e.field)}))),o.T.textarea("Jira",(e=>({createLayout:()=>new r.A7(e.field)}))),l.v])}(n||(n={}))}}]);