(self.webpackChunk=self.webpackChunk||[]).push([[9513],{1316:(e,t,n)=>{if(n.d(t,{Q:()=>b,f:()=>w}),5526!=n.j)var o=n(84308);if(5526!=n.j)var s=n(954);if(5526!=n.j)var i=n(59179);if(5526!=n.j)var r=n(24666);var a=n(93413);if(5526!=n.j)var c=n(35307);var l=n(29148);if(5526!=n.j)var d=n(99208);var u=n(86819);if(5526!=n.j)var _=n(88305);if(5526!=n.j)var h=n(45246);if(5526!=n.j)var g=n(45511);if(5526!=n.j)var p=n(12002);if(5526!=n.j)var m=n(21883);function f(){document.body.dataset.grAaaNotchConnectionId||(document.body.dataset.grAaaNotchConnectionId=`${Date.now()}-${Math.random()}`);const e=document.body.dataset.grAaaNotchConnectionId;return{toServer:`gr-fieldIntegration-to-aaaNotch-to-server-${e}`,toClient:`gr-fieldIntegration-to-aaaNotch-to-client-${e}`}}const b=e=>{const t=f();return new u.S((0,l.NH)(new a.E(self.document,t.toServer,t.toClient)),{setCheckingStatus:(t,n)=>{e.setCheckingStatus(n)},setTextFieldContent:(t,n)=>{e.setTextFieldContent(n)},setSelectedTextFromIntegration:(t,n)=>{e.setSelectedTextFromIntegration(n)}})};function w(e){if(!(0,p.kR)())return{dispose:_.EI};const t=(()=>{const e=f();return new d.X(new a.E(self.document,e.toClient,e.toServer))})(),n=[];return n.push((0,o.a)([e.checkingStatus,(0,h.qw)(e.textField).pipe((0,s.O)(!0))]).pipe(i.U((([e,t])=>t?e:null)),r.x()).subscribe((e=>{t.api.setCheckingStatus(e)}))),n.push(e.textObserver.contentChanges.async.pipe(i.U((e=>e.newText)),r.x()).subscribe((()=>{const n=e.textObserver.getCurrentTextMap(),o=(0,m.C)(n);t.api.setTextFieldContent(o)}))),e.selectionSource instanceof c.p&&n.push((0,g.b)(e.textObserver,e.selectionSource).subscribe((e=>{t.api.setSelectedTextFromIntegration(e)}))),{dispose:()=>{n.forEach((e=>e.unsubscribe())),t.api.setCheckingStatus(null),t.api.setSelectedTextFromIntegration(""),t.api.setTextFieldContent(""),t.dispose()}}}},45511:(e,t,n)=>{if(n.d(t,{b:()=>a}),5526!=n.j)var o=n(59179);if(5526!=n.j)var s=n(24666);if(5526!=n.j)var i=n(41048);if(5526!=n.j)var r=n(39363);function a(e,t){return t.data.behavior.pipe(o.U(r.Ls),s.x(((e,t)=>(null==e?void 0:e.start)===(null==t?void 0:t.start)&&(null==e?void 0:e.end)===(null==t?void 0:t.end))),o.U((t=>{if(!t||i.SV.isCollapsed(t))return"";return e.getTextSource().getPlainText().slice(t.start,t.end)})))}},77149:(e,t,n)=>{n.r(t),n.d(t,{initAssistant:()=>ae});var o,s=n(13391),i=n(45013);!function(e){e.toClient="cs-to-side-panel-to-client",e.toServer="cs-to-side-panel-to-server"}(o||(o={}));var r=n(99208);class a{constructor(e,t,n){this._messageService=e,this._customInboundEventName=t,this._customOutboundEventName=n,this.inbound={subscribe:e=>{const t=t=>{if(!function(e,t){if(!e||"object"!=typeof e)return!1;const n="type"in e&&e.type===t,o="message"in e;return n&&o}(t,this._customInboundEventName))return;const n=t.message;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._messageService.on(t),{unsubscribe:()=>this._messageService.off(t)}}},this.outbound=e=>{const t={type:this._customOutboundEventName,message:e};this._messageService.sendMessage(t)}}}class c extends r.X{constructor(e){super(new a(e,o.toClient,o.toServer))}}var l=n(32082);function d(e){return e.nodeType===Node.ELEMENT_NODE}const u=["SCRIPT","STYLE","NOSCRIPT"],_=["style","role","title"];function h(e){return!u.includes(e.nodeName)}function g(e){return function(e){return e instanceof HTMLElement}(e)&&(e.checkVisibility()||function(e){return"contents"===self.getComputedStyle(e).display}(e))}function p(e={}){const{tag:t="div",role:n=null,text:o,title:s=null,attributes:i,children:r=[]}=e,a={tag:t,role:n,text:o,title:s,attributes:i,children:r},c=Object.entries(a).filter((([,e])=>Boolean(e)));return Object.fromEntries(c)}const m=new Set(["a","article","aside","button","details","dialog","figcaption","figure","footer","form","header","label","main","mark","nav","section","summary","time"]);function f(e,t={includeAttributes:!1}){const{includeAttributes:n}=t;if(!h(e)||"BODY"!==e.nodeName&&!g(e))return null;let o=p({tag:e.nodeName.toLocaleLowerCase(),role:d(e)?e.getAttribute("role"):null,title:d(e)?e.getAttribute("title"):null});if(n&&d(e)){const t=function(e){return Array.from(e.attributes).filter((e=>!_.includes(e.name)))}(e),n={};t.forEach((e=>{n[e.name]=e.value})),o={...o,attributes:n}}"TEXTAREA"===e.nodeName&&(o={...o,text:e.value});const{children:s,textCount:i,elementCount:r}=function(e,t){var n,o;let s=0,i=0;const r=[];for(const a of e.childNodes)if(a.nodeType===Node.TEXT_NODE)(null===(n=a.textContent)||void 0===n?void 0:n.trim())&&(r.push(p({tag:a.nodeName.toLocaleLowerCase(),text:null===(o=a.textContent)||void 0===o?void 0:o.trim()})),s+=1);else if(h(a)){const e=f(a,t);e&&(r.push(e),i+=1)}return{children:r,textCount:s,elementCount:i}}(e,t),a=m.has(o.tag),c="role"in o&&null!==o.role;return a||c||0!==i||1!==r?o.text||0!==s.length?{...o,children:s}:null:s[0]}class b{extractContext(e){const{logger:t=l.Y.create("assistant.context.extractor")}=e,n=function(e,t={}){const{includeAttributes:n=!1,logger:o}=t,s=performance.now(),i=f(e,{includeAttributes:n}),r=performance.now()-s;null==o||o.debug("converted JSON representation",i);const a=JSON.stringify(i);return null==o||o.debug("converted DOM to JSON",{content:a,size:(new TextEncoder).encode(a).length,duration:r}),{content:i,isCompressed:!1}}(e.document.body,{logger:t});return{kind:"default",origin:e.document.location.origin,title:e.document.title,root:n.content}}}class w{constructor(e){this._logger=l.Y.create("contextExtractorService"),this._textFieldContent=e.textFieldContent,this._document=e.document}getContext(e){let t="";this._textFieldContent&&(t=this._textFieldContent.get(),this._logger.debug(`Current text field text has ${t}`));const n=new b;this._logger.debug(`Extractor is instance of ${n.constructor.name}`);const o=n.extractContext({document:this._document});return this._logger.debug("Context extracted",o),{...o,textFieldContent:t}}}var C;!function(e){e.toClient="side-panel-to-cs-to-client",e.toServer="side-panel-to-cs-to-server"}(C||(C={}));var v=n(86819),x=n(31885),S=n(29148);class y{constructor(e){this._extractorService=e,this.publicApi={...(0,x.Z)({getContext:()=>this._extractorService.getContext("default"),ping:()=>!0})}}}class E{constructor(e){this._messageApi=e}on(e){this._messageApi.onRuntimeMessage.addListener(e)}off(e){this._messageApi.onRuntimeMessage.removeListener(e)}sendMessage(e){return this._messageApi.sendRuntimeMessage(e)}}var T=n(1316),I=n(81446);function k(e){const t=s.h.create(void 0),n=s.h.create(void 0),o=function(e,t){(0,i.OB)().browserApi.sessionStorage.get(["isSidePanelOpen","alwaysOnAssistant"]).then((({isSidePanelOpen:n,alwaysOnAssistant:o})=>{void 0===e.get()&&e.set(!n),void 0===t.get()&&t.set(null==o?void 0:o.notchPosition)}));const n=(0,i.OB)().browserApi.sessionStorage.onChange((n=>{var o;e.set(!n.isSidePanelOpen),t.set(null===(o=n.alwaysOnAssistant)||void 0===o?void 0:o.notchPosition)}));return{dispose:()=>{n()}}}(t,n),r=s.h.combine(t,n,((e,t)=>{if(e)return{notchPosition:t}})).subscribe(I.wW(e));return{dispose:()=>{r.unsubscribe(),o.dispose()}}}var D=n(99304),F=n(49231),R=n(88637),N=n(29037),A=n(25419),P=n(72848),L=n(11657),O=n(26585);class G{constructor(){this._felog=(0,O.Tb)()}assistantNotchInitialized(e){this._felog.sendFemetricsRate("assistantNotchInitialized",{domain:e})}assistantNotchShown(e,t){this._felog.sendFemetricsRate("assistantNotchShown",{assistantSessionId:e,domain:t})}assistantNotchCollapsed(e,t){this._felog.sendFemetricsRate("assistantNotchCollapsed",{assistantSessionId:e,domain:t})}assistantNotchClicked(e,t){this._felog.sendFemetricsRate("assistantNotchClicked",{assistantSessionId:e,domain:t})}}var M=n(33145);class j{assistantNotchShown(e,t){M.J.alwaysOnAssistantNotchPeek(t,e)}assistantNotchCollapsed(e){M.J.alwaysOnAssistantNotchPreviewCollapsed(e)}}class B{constructor(){this._feMetricsTrackingService=new G,this._gnarTrackingService=new j,this._commonLabels={assistantSessionId:"",domain:""}}assistantNotchInitialized(){const e=(0,L.Cg)();this._feMetricsTrackingService.assistantNotchInitialized(e)}assistantNotchShown(){const e=(0,P.Z)(),t=(0,L.Cg)();this._commonLabels={assistantSessionId:e,domain:t},this._feMetricsTrackingService.assistantNotchShown(e,t),this._gnarTrackingService.assistantNotchShown(e,t)}assistantNotchPeekingCollapsed(){this._feMetricsTrackingService.assistantNotchCollapsed(this._commonLabels.assistantSessionId,this._commonLabels.domain),this._gnarTrackingService.assistantNotchCollapsed(this._commonLabels.assistantSessionId)}assistantNotchClicked(){return this._feMetricsTrackingService.assistantNotchClicked(this._commonLabels.assistantSessionId,this._commonLabels.domain),this._commonLabels.assistantSessionId}dispose(){}}var U,V=n(47387),H=n(67271),z=n(23934),W=n(19547),q=n(37213);!function(e){e.hidden="hidden",e.peeking="peeking",e.shown="shown"}(U||(U={}));var Y=n(88030);const $=({notchRef:e,isDragging:t,notchPosition:n})=>{const o=F.useRef(),s=F.useRef(),i=F.useRef(),[r,a]=F.useState(100);function c(){e.current&&(o.current=e.current.getBoundingClientRect())}return F.useEffect((()=>(self.addEventListener("resize",c),()=>self.removeEventListener("resize",c))),[]),F.useLayoutEffect((()=>{c()}),[e.current,n]),F.useEffect((()=>{const e=e=>{i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{a(100)}),Y.m9(5)),s.current&&cancelAnimationFrame(s.current),s.current=requestAnimationFrame((()=>{if(o.current){const t=function(e,t){const n=Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),o=Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom));return Math.hypot(n,o)}(o.current,{x:e.clientX,y:e.clientY});if(t>400)return void a(100);a(50*(t/400)+50)}}))};return t?document.addEventListener("mouseup",c,{once:!0,capture:!0}):document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e),s.current&&cancelAnimationFrame(s.current),i.current&&clearTimeout(i.current)}}),[t]),{hiddenPercent:r}};var X=n(66084);const K=({onClick:e,trackingService:t,onDragEnd:n,notchPosition:o})=>{const[s,i]=F.useState(!1),r=F.useRef(null),[a,c]=F.useState(U.peeking);F.useLayoutEffect((()=>{r.current&&o&&(r.current.style.setProperty("top",o.top),r.current.style.setProperty("bottom",o.bottom))}),[o]);const l=()=>{i(!0);const n=t.assistantNotchClicked();e(n)},{isDragging:d}=(({elementRef:e,onDragEnd:t,onClick:n})=>{const[o,s]=F.useState(!1);return F.useEffect((()=>{var o;let i=0,r=0,a=0,c=!0;const l=o=>{if(0===o.button){if(r=o.clientY,c=!0,e.current){const{top:t}=e.current.getBoundingClientRect();i=o.clientY-t}self.addEventListener("mousemove",d),self.addEventListener("mouseup",(()=>{if(s(!1),self.removeEventListener("mousemove",d),c)n();else{const n=e.current;if(!n)return;const o=n.style.getPropertyValue("top"),s=n.style.getPropertyValue("bottom");null==t||t({top:o,bottom:s})}}),{once:!0,capture:!0})}},d=t=>{Math.abs(t.clientY-r)>5&&(s(!0),c=!1),c||(a=requestAnimationFrame((()=>{const n=e.current;if(!n)return;const o=t.clientY-i,s=self.innerHeight-n.clientHeight,r=Math.min(Math.max(0,o),s),a=r/self.innerHeight*100;if(a<=50)n.style.setProperty("top",`calc(${a}%)`),n.style.setProperty("bottom","unset");else{const e=(self.innerHeight-r-n.clientHeight)/self.innerHeight*100;n.style.setProperty("bottom",`calc(${e}%)`),n.style.setProperty("top","unset")}})))};return null===(o=e.current)||void 0===o||o.addEventListener("mousedown",l),()=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("mousedown",l),a&&cancelAnimationFrame(a)}}),[n,t,e]),{isDragging:o}})({elementRef:r,onClick:l,onDragEnd:n}),{hiddenPercent:u}=$({notchRef:r,isDragging:d,notchPosition:o}),_={transform:`translateX(${u}%)`},h=function(e,t,n){if(n)return U.shown;if(e===U.peeking&&100===t)return U.hidden;return e}(a,u,d);return F.createElement("div",{"data-testid":"assistant-notch",ref:r,...(0,q.Sh)(X.notch,X[h]),style:h===U.shown?{}:_,onMouseEnter:()=>{c(U.shown),t.assistantNotchShown(),i(!1)},onMouseLeave:()=>{c(U.peeking),s||t.assistantNotchPeekingCollapsed()}},F.createElement("button",{onKeyDown:e=>{"Enter"===e.key&&l()},className:X.notchButton,"data-testid":"assistant-notch-button","aria-label":"Start a chat with Grammarly AI"},F.createElement(z.J,{accessibilityLabel:"",icon:W.H,size:"small"}),F.createElement(J,null)))};const J=()=>F.createElement("input",{"aria-hidden":"true",tabIndex:-1,style:{position:"absolute",inset:0,opacity:0,cursor:"inherit"}}),Q=({onClick:e,notchViewState:t,...n})=>F.createElement(H.L,{chunkNameList:["designSystem","AAA-initAssistant"]},F.createElement(V.F.Fragment,null,F.createElement("div",{"aria-label":"grammarly-global-assistant-notch",role:"group",tabIndex:-1}),t.view((t=>t&&F.createElement(K,{...n,onClick:e,notchPosition:t.notchPosition}))))),Z="grammarly-assistant-notch-view";var ee=n(64271),te=n(44071),ne=n(90572),oe=n(18827),se=n(59179),ie=n(24666);class re{constructor(e,t){this._selectedTextFromIntegration=t,this.selectedText=s.h.create(""),this.subs=[],this.subs.push(ee.T(this._selectedTextFromIntegration.view(),te.R(self,"mouseup",{capture:!0}).pipe(ne.h((e=>{const t=e.target;return!t||!("tagName"in t)||t.tagName!==Z.toUpperCase()}))),te.R(self,"keyup",{capture:!0})).pipe(oe.g(0),se.U((()=>{var e;return this._selectedTextFromIntegration.get().trim()||(null===(e=self.getSelection())||void 0===e?void 0:e.toString().trim())||""})),ie.x()).subscribe((t=>{this.selectedText.set(t),e.onSelectionChanged(t)})))}dispose(){this.subs.forEach((e=>e.unsubscribe()))}}function ae(){const e=[],t=new E((0,i.OB)().browserApi.message),n=new B;e.push(n),n.assistantNotchInitialized();const o=s.h.create(""),r=s.h.create("");e.push(((e,t)=>{const n=new w({document,textFieldContent:t}),o=new y(n);return new v.S((0,S.NH)(new a(e,C.toServer,C.toClient)),o.publicApi)})(t,r));const l=new c(t),d=new re(l.api,o.view());e.push(d),e.push((0,T.Q)({setCheckingStatus:e=>{null===e&&o.set("")},setTextFieldContent:e=>{r.set(e)},setSelectedTextFromIntegration:e=>{o.set(e)}}));const u=s.h.create(void 0);e.push(k(u));const _=((e,t)=>R.V.get({monitorAs:"assistant-notch"}).inject(N.EM.fromDocument(self.document,Z,{role:"presentation"}),N.zs.appendChild(document.documentElement),A.G7.showWhenLoaded(F.createElement(Q,{onClick:t,trackingService:new B,notchViewState:e,onDragEnd:D.dl}))))(u,(e=>{(0,D.dE)(e,d.selectedText.get())}));return{dispose:()=>{_.dispose(),e.forEach((e=>e.dispose()))}}}},21883:(e,t,n)=>{if(n.d(t,{C:()=>s}),5526!=n.j)var o=n(14562);function s(e){let t=e.getPlainText();if("canvas"!==e.type)return t;const n=e;if(!(0,o._)(n))return t;const s=[];n.forEachMappedFragment((({fragment:e,textRange:t})=>{if(e.special){const{start:n,end:o}=t;s.push({start:n,end:o,text:e.text})}}));for(const{start:e,end:n,text:o}of s.reverse())t=t.slice(0,e)+o+t.slice(n);return t}},96653:(e,t,n)=>{n.d(t,{Hq:()=>s,Vt:()=>o,wE:()=>i});const o="vBarCard",s="grammarly-extension-vBar-card",i="vBarCardPositionReference"},41048:(e,t,n)=>{n.d(t,{$:()=>r,EA:()=>i,QK:()=>a,SV:()=>s,Td:()=>c,x:()=>h});var o,s,i,r,a,c,l,d=n(64297),u=n(21147),_=n(29196);!function(e){e.isNoop=function(e){return 0===e.startOffset&&0===e.endOffset}}(o||(o={})),function(e){function t(e){return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}e.eq=u.MW({start:u.lr,end:u.lr}),e.normalize=t,e.mergeAdjacent=function(e){return t=>{if(0===t.length)return[];const n=[t[0]];for(let o=1;o<t.length;++o){const s=n[n.length-1];e(s,t[o])?n[n.length-1]={start:s.start,end:t[o].end}:n.push(t[o])}return n}},e.create=function(e,n){return t({start:e,end:null!=n?n:e})},e.translate=function(e,t){return 0===t?e:{start:e.start+t,end:e.end+t}},e.transform=function(e,t){return o.isNoop(t)?e:{start:e.start+t.startOffset,end:e.end+t.endOffset}},e.rebase=function(e,t){return t.reduce(((e,t)=>{const n=_.q.getTransformOffset(t);return{start:t.pos<=e.start?Math.max(t.pos,e.start+n):e.start,end:t.pos<e.end?Math.max(t.pos,e.end+n):e.end}}),e)},e.contains=function(e,t,n){const o=n?t.start<=e.end:t.start<e.end;return t.start>=e.start&&o&&t.end>=e.start&&t.end<=e.end},e.isAdjacent=function(e,t){return e.end===t.start||t.end===e.start},e.intersects=function(e,t){return e.start>=t.start&&e.start<t.end||t.start>=e.start&&t.start<e.end},e.equals=function(t,n){return e.eq.equals(t,n)},e.toString=function(e){return`[${e.start}, ${e.end}]`},e.isCollapsed=function(e){return e.start===e.end},e.convertFromRawTransform=function(e){return{start:e.s,end:e.e}},e.length=function(e){return e.end-e.start}}(s||(s={})),function(e){e.hasTransformJSON=function(e){return"transformJSON"in e}}(i||(i={})),function(e){function t(e,t,n){return e.slice(t.start,t.end)===n}function n(e){return"transformJSON"in e&&Boolean(e.transformJSON)}function o(e){return"subalerts"in e&&e.subalerts&&"labels"in e&&Boolean(e.labels)}function i(e){return!n(e)&&!o(e)}function r({withPosition:e,withTransformJSON:t,withSubAlerts:s}){return r=>i(r)?e(r):n(r)?t(r):o(r)?s(r):void(0,d.vE)(r)}e.convertHighlightRangeFromRawTransform=e=>({...s.convertFromRawTransform(e),type:e.type}),e.isConsistentWithText=function(n,o){let s;if(e.isWithSubAlerts(n))s=n.highlightRanges.every(((e,s)=>t(o,e,n.highlightTexts[s])));else{const e=n.highlightRanges.find((e=>"enclosing"===e.type))||n.highlightRanges[0];s=t(o,e,n.highlightTexts[0])}return s&&(!e.isRegular(n)||t(o,n.transformRange,n.transformText))},e.isWithTransformJson=n,e.isWithSubAlerts=o,e.isWithPosition=i,e.isRegular=function(e){return i(e)||n(e)},e.match=r,e.map=function({withPosition:e,withTransformJSON:t,withSubAlerts:n}){return r({withPosition:e,withTransformJSON:t,withSubAlerts:n})}}(r||(r={})),function(e){e.waitingForConnection="waitingForConnection",e.waitingForReconnection="waitingForReconnection",e.startingConnection="startingConnection",e.newSessionStarted="newSessionStarted",e.existingSessionStarted="existingSessionStarted"}(a||(a={})),function(e){e.ready="ready",e.inProgress="inProgress",e.reconnectRequired="reconnectRequired"}(c||(c={})),function(e){e.unknown="unknown",e.clientQueueNonEmpty="clientQueueNonEmpty",e.noSuchSession="noSuchSession",e.cannotReconnectToSelf="cannotReconnectToSelf",e.differentUsers="differentUsers",e.sessionClosed="sessionClosed",e.messageCountIncorrect="messageCountIncorrect"}(l||(l={}));const h=(e,t)=>{if(!e)return l.clientQueueNonEmpty;if(!t)return l.unknown;const{reconnectFailedReason:n}=t;if("no such session"===n)return l.noSuchSession;if("cannot reconnect to self"===n)return l.cannotReconnectToSelf;if("different users"===n)return l.differentUsers;if("session is closed"===n)return l.sessionClosed;return n&&/(client send|server send|no such message in buffer)/.test(n)?l.messageCountIncorrect:l.unknown}},67271:(e,t,n)=>{n.d(t,{L:()=>a,n:()=>r});var o=n(49231),s=n(32082),i=n(75558);const r=(e,t=(0,i.OB)().browserApi.getUrl)=>t(`src/css/${e}.styles.css`),a=e=>{const t=o.useMemo((()=>s.Y.create("RenderWithStyles")),[]),n="chunkName"in e?[e.chunkName]:e.chunkNameList,i=o.useMemo((()=>n.map((t=>r(t,e.getUrl)))),[...n]),[a,c]=o.useState(0),[l,d]=o.useState(!1);return o.useEffect((()=>{a===i.length&&d(!0)}),[a]),o.createElement(o.Fragment,null,i.map((e=>o.createElement("link",{rel:"stylesheet",type:"text/css",href:e,key:e,onLoad:()=>(e=>{null==t||t.debug(`Style link was loaded [href: ${e}]`),c((e=>e+1))})(e),onError:n=>((e,n)=>{null==t||t.error(`Couldn't load style link [href: ${n}]`,e),c((e=>e+1))})(n,e)}))),l&&e.children)}},74533:(e,t,n)=>{n.d(t,{N:()=>o});var o,s=n(8867),i=n(62552),r=n(36344),a=n(9642),c=n(93790),l=n(24666),d=n(8794),u=n(59179),_=n(88305);class h{constructor(e,t,n){this._getImmediateValue=e,this._source=t,this._compare=n,this._subject=null,this.behavior=new s.y((e=>{const t=this._source.subscribe(e);return{unsubscribe:()=>{t.unsubscribe(),this._subject=null}}})).pipe((0,a.O)((()=>(this._subject=new i.X(this._getImmediateValue()),this._subject))),(0,c.x)(),(0,l.x)(this._compare)),this.changes=this.behavior.pipe((0,d.T)(1)),this.getCurrent=this._getImmediateValue}getApproximate(){return this._subject?this._subject.getValue():this._getImmediateValue()}map(e,t=_.fS){return new h((()=>e(this._getImmediateValue())),this.changes.pipe((0,u.U)(e)),t)}}!function(e){function t(e,t,n){return new h(e,t.pipe((0,u.U)(e)),n)}e.create=t,e.createOptimized=function(e,t,n){return new h(e,t.pipe((0,u.U)((t=>void 0!==t?t:e()))),n)},e.constant=function(e){return t((()=>e),(0,r.c)(),(()=>!0))}}(o||(o={}))},71497:(e,t,n)=>{if(n.d(t,{Bi:()=>v,E6:()=>h,Jj:()=>c,Me:()=>a,Qf:()=>C,XQ:()=>d,Yd:()=>u,a9:()=>p,bp:()=>_,f0:()=>w,is:()=>g,kW:()=>f,o:()=>l,wr:()=>m}),5526!=n.j)var o=n(3601);const s=new Set(["absolute","relative","fixed","sticky"]),i=new Set(["strict","content","layout","paint"]),r=new Set(["flex","inline-flex"]);function a(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}function c(e){const t=a(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function l(e){return c(e).getComputedStyle(e)}function d(e){return s.has(l(e).position)}function u(e,t){const n=s.has(t.position);return!n&&null!==t.zIndex&&"auto"!==t.zIndex&&e.parentElement?r.has(l(e.parentElement).display):n}function _(e){const t=a(e).body;if(e===t)throw new Error("target is body");let n=e;do{if(n=n.parentElement,n&&d(n))return n}while(null!==n&&n!==t);return n||t}function h(e,t){var n,s,i,r;const c=a(e).body;if(e===c)throw new Error("target is body");const l=(0,o.Cq)(c.parentElement);let d=e;do{if(d=null!==(r=null!==(s=null!==(n=d.assignedSlot)&&void 0!==n?n:d.parentElement)&&void 0!==s?s:null===(i=d.getRootNode())||void 0===i?void 0:i.host)&&void 0!==r?r:null,d&&t(d))return d}while(null!==d&&d!==l);return d||l}function g(e){return h(e,(e=>{return d(e)||(t=e,i.has(l(t).contain));var t}))}function p(e){return function(e){const t=l(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY}(e)||function(e){const t=l(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowX||"scroll"===t.overflowX}(e)}function m(e,t){for(let n=e;null!=n;n=n.parentElement)if(t(n))return n;return null}function f(e){const t=e.ownerDocument,n=t&&t.defaultView;if(!t||!n)return;const o=t.body.scrollLeft,s=t.body.scrollTop,i=n.scrollY,r=n.scrollX;e.focus(),i===n.scrollY&&r===n.scrollX||n.scroll(r,i),s!==t.body.scrollTop&&(t.body.scrollTop=s),o!==t.body.scrollLeft&&(t.body.scrollLeft=o)}const b=e=>e?1/e:1,w=(e,t)=>{if(!e)return;const n=C(self.getComputedStyle(e));if(!n)return;const o=b(Number(n.x)),s=b(Number(n.y));return{transform:`translate(${t.left*(o-1)}px, ${t.top*(s-1)}px) scale(${o}, ${s})`,transformOrigin:e.style.transformOrigin}};function C(e){if(e.transform&&"none"!==e.transform){const t=/scale\(([\d.]+)(?:, ([\d.]))*\)|matrix\(([\d.]+), [\d.]+, [\d.]+, ([\d.]+), [\d.]+, [\d.]+\)/.exec(e.transform);if(t){const[e,n,o,s,i]=t;return{x:n||s,y:o||i||n}}}}function v(e){try{const t=new DOMMatrixReadOnly(e.transform);return{x:t.e,y:t.f}}catch(e){return}}},29196:(e,t,n)=>{n.d(t,{k:()=>s,q:()=>o});var o,s,i=n(82522),r=n(88305);!function(e){let t;function n(e){return e._tag===t.ins}function o(e){return e._tag===t.del}!function(e){e.ins="ins",e.del="del"}(t=e.Type||(e.Type={})),e.isIns=n,e.ins=function(e,n){return{_tag:t.ins,pos:e,text:n}},e.isDel=o,e.del=function(e,n){return{_tag:t.del,pos:e,text:n}},e.applyChanges=function(e,t){return t.reduce(((e,t)=>n(t)?e.slice(0,t.pos)+t.text+e.slice(t.pos):o(t)?e.slice(0,t.pos)+e.slice(t.pos+t.text.length):(0,r.vE)(t)),e)},e.applyChangesInverse=function(t,s){return e.applyChanges(t,s.reverse().map((t=>n(t)?e.del(t.pos,t.text):o(t)?e.ins(t.pos,t.text):(0,r.vE)(t))))},e.getTransformOffset=function(e){return n(e)?e.text.length:o(e)?-e.text.length:void(0,r.vE)(e)},e.getRange=function(e){return{start:e.pos,end:e.pos+e.text.length}}}(o||(o={})),function(e){e.fromDiff=function(e,t,n){const s=i(e,t,n);let r=0;const a=[];for(const e of s)e[0]===i.EQUAL?r+=e[1].length:e[0]===i.INSERT?(a.push(o.ins(r,e[1])),r+=e[1].length):(e[0],a.push(o.del(r,e[1])));return a}}(s||(s={}))},39363:(e,t,n)=>{function o(e){return e.length>0?e[0]:null}function s(e){return 1===e.length?e[0]:null}function i(e){return 1===e.length?e[0]:e.length>0?e.reduce(((e,t)=>t.start===t.end?e:e.start===e.end?t:{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)})):null}n.d(t,{Ey:()=>o,Ls:()=>i,qq:()=>s})},61600:(e,t,n)=>{n.d(t,{H:()=>o});var o,s=n(34527),i=n(13391);!function(e){const t=i.h.create(""),n=new Proxy({textContent:""},{get:(e,n)=>"textContent"===n?t.get():Reflect.get(e,n),set:(e,n,o)=>"textContent"===n&&"string"==typeof o?(t.set(o),!0):Reflect.set(e,n,o)});e.init=function(){s.ux.setStylesTarget(n)},e.styles=t.view()}(o||(o={}))},96930:(e,t,n)=>{n.d(t,{YS:()=>w,mE:()=>f,nS:()=>o,o6:()=>_});var o,s=n(49231),i=n(32073),r=n(13391),a=n(37213),c=n(40722),l=n(32082),d=n(61600),u=n(25419);!function(e){e.Context=s.createContext(null)}(o||(o={}));const _=16;function h(e,t){e&&e instanceof HTMLElement?e.style.setProperty("--rem",`${t}`):l.Y.create("ShadowRootInjector").warn("setRootCssVar: host is not an HTMLElement. This should not happen. Please report this issue.")}class g{constructor(){this._denaliStyleSheet=new CSSStyleSheet,this._globalStyleSheet=new CSSStyleSheet,this._globalStyleSheetLoaded=r.h.create(null),this._subscription=new i.w0}inject(e,t){const n=this._globalStyleSheetInitialized();n||this._initGlobalStyleSheet();const i=e.attachShadow({mode:"open"});i.adoptedStyleSheets=[this._denaliStyleSheet,this._globalStyleSheet],h(i.host,_);const r=(0,u.X3)(i,s.createElement(o.Context.Provider,{value:i},s.createElement(t,{viewLoaded:this._globalStyleSheetLoaded.view((e=>({...e,constructableStyleSheetInitialized:n})))})));return()=>{r(),this._subscription.unsubscribe()}}_globalStyleSheetInitialized(){return this._globalStyleSheet.cssRules.length>0}async _initGlobalStyleSheet(){try{if(!self.GR_INLINE_STYLES)throw new Error("No inline styles");await Promise.all([this._denaliStyleSheet.replace(d.H.styles.get()),this._globalStyleSheet.replace(self.GR_INLINE_STYLES)]),this._globalStyleSheetLoaded.set({stylesInjectionStrategy:"constructableStyleSheet"}),this._subscription.add(d.H.styles.subscribe((e=>this._denaliStyleSheet.replaceSync(e))))}catch(e){this._globalStyleSheetLoaded.set({error:`${e}`,stylesInjectionStrategy:"constructableStyleSheet"})}}}const p=(0,a.xb)(c.b);class m{inject(e,t){const n=r.h.create(null),i=e.attachShadow({mode:"open"});return h(i.host,_),(0,u.X3)(i,s.createElement(s.Fragment,null,s.createElement(p,null,d.H.styles),s.createElement(c.b,null,self.GR_INLINE_STYLES),s.createElement(o.Context.Provider,{value:i},s.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"styleElement"})))}}class f{inject(e,t){const n=r.h.create(null),i=e.attachShadow({mode:"open"});return(0,u.X3)(i,s.createElement(s.Fragment,null,s.createElement(o.Context.Provider,{value:i},s.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"noStyles"})))}}let b=null;function w(e=!1){return e&&function(){if(null===b)try{const e=new CSSStyleSheet;b=!!e&&!!e.replace&&!!e.replaceSync&&"adoptedStyleSheets"in Document.prototype}catch(e){b=!1}return!0===b}()?new g:new m}},25419:(e,t,n)=>{n.d(t,{G7:()=>m,X3:()=>g});var o=n(49231),s=n(64151),i=n(84714),r=n(2613),a=n(14969),c=n(29479),l=n(954),d=n(24666),u=n(59179),_=n(47387);function h(e){return!!e&&!e.error}function g(e,t,n){return(0,s.render)(t,e,n),()=>(0,s.unmountComponentAtNode)(e)}const p=({view:e,placeholder:t,viewLoaded:n,minDuration:s,forcePlaceholder:d})=>{const u=h(n.get())&&!d?(0,i.of)(e):n.pipe((0,r.e)(s),(0,a.P)(h),(0,c.h)(e),(0,l.O)(t));return o.createElement(_.F.Fragment,null,u)};var m;!function(e){e.showWhenLoaded=function(e){return function({viewLoaded:t}){return o.createElement(_.F.Fragment,null,t.pipe((0,d.x)(),(0,u.U)((t=>h(t)?e:null))))}},e.withPlaceholder=function(e,t,n,s){return function({viewLoaded:i}){return o.createElement(p,{view:e,placeholder:t,minDuration:n||0,viewLoaded:i,forcePlaceholder:s||!1})}}}(m||(m={}))},29037:(e,t,n)=>{n.d(t,{EM:()=>o,_R:()=>p,aP:()=>m,zs:()=>s});var o,s,i=n(49231),r=n(32073),a=n(13391),c=n(96653),l=n(95804),d=n(75558),u=n(61600),_=n(25419),h=n(50006);class g{constructor(e,t,n,o){var s,i,r;this._options=o,this._root=null,this._unmount=null,this._root=e(),t(this._root),this._unmount=n(this._root),(null===(s=this._options)||void 0===s?void 0:s.allowPrint)||this._root.classList.add(h.gr_no_print),(null===(i=this._options)||void 0===i?void 0:i.eventPropagationHandler)&&(this._disposeEventPropagationHandler=null===(r=this._options)||void 0===r?void 0:r.eventPropagationHandler(this._root)),this._preventEventPropagation()}_preventEventPropagation(){const e=["keydown","keyup","keypress","mouseup","mousedown","pointerdown","click"];(0,d.OB)().experimentClient.isGateEnabled(l.K.CentralizeStopEventPropagation)&&e.forEach((e=>{var t;null===(t=this._root)||void 0===t||t.addEventListener(e,(e=>{e.stopPropagation()}))}))}dispose(){this._disposeEventPropagationHandler&&(this._disposeEventPropagationHandler(),this._disposeEventPropagationHandler=void 0),this._unmount&&(this._unmount(),this._unmount=null),this._root&&(this._root.parentNode?this._root.parentNode.removeChild(this._root):this._root.remove(),this._root=null)}}class p extends g{constructor(e,t,n,o){super(e,t,(e=>{var t,o;const s=new r.w0,c=e.ownerDocument,l=c.head,d="grammarly-extension-styles",h="grammarly-extension-denali-styles";let g=Array.from(null!==(t=l.getElementsByTagName("style"))&&void 0!==t?t:[]).find((e=>e.id===d)),p=Array.from(null!==(o=l.getElementsByTagName("style"))&&void 0!==o?o:[]).find((e=>e.id===h));g||(g=c.createElement("style"),g.id=d,g.innerHTML=self.GR_INLINE_STYLES||"",l.prepend(g)),p||(p=c.createElement("style"),p.id=h,g.insertAdjacentElement("beforebegin",p)),p.innerHTML=u.H.styles.get(),s.add(u.H.styles.subscribe((e=>{p&&(p.innerHTML=e)})));const m=a.h.create(null),f=(0,_.X3)(e,i.createElement(n,{viewLoaded:m}),(()=>m.set({shadowDOM:!1})));return()=>{s.unsubscribe(),f()}}),o)}}class m extends g{constructor(e,t,n,o,s){super((()=>{const t=e();return t.setAttribute(m.SHADOW_DOM_ROOT_ATTRIBUTE,"true"),t.tagName.toLocaleLowerCase()===c.Hq.toLocaleLowerCase()&&(null==s?void 0:s.vBarsCustomAttributes)&&Object.entries(s.vBarsCustomAttributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}),t,(e=>o.get().inject(e,(e=>i.createElement(n,{viewLoaded:e.viewLoaded.view((e=>e?{...e,shadowDOM:!0}:null))})))),s)}}m.SHADOW_DOM_ROOT_ATTRIBUTE="data-grammarly-shadow-root",function(e){e.defaultName="grammarly-extension",e.fromDocument=function(t,n=e.defaultName,o={}){return{doc:t,name:n,attributes:o}}}(o||(o={})),function(e){e.appendChild=function(e){return{parent:e}},e.isCustom=function(e){return e instanceof Function}}(s||(s={}))},88637:(e,t,n)=>{n.d(t,{V:()=>l});var o=n(88305),s=n(49231),i=n(14969),r=n(26585);class a{constructor(e,t){this._injector=e,this._injectionName=t}inject(e,t,n,o){const i=performance.now(),l=a._firstRender,d=a._somePreviousRenderCompleted;return a._firstRender=!1,this._injector(e,t,(({viewLoaded:e})=>s.createElement(c,{view:n,viewLoaded:e,onComplete:e=>{const t=performance.now();(0,r.Tb)().performance.viewInjection({timeToRender:Math.trunc(t-i),startTime:Math.trunc(i),endTime:Math.trunc(t),injectionName:this._injectionName,firstRender:l,somePreviousRenderCompleted:d,error:e.error||null,shadowDOM:!!e.shadowDOM,stylesInjectionStrategy:e.stylesInjectionStrategy||null,constructableStyleSheetInitialized:!!e.constructableStyleSheetInitialized}),a._somePreviousRenderCompleted=!0}})),o)}}a._firstRender=!0,a._somePreviousRenderCompleted=!1;const c=({viewLoaded:e,view:t,onComplete:n})=>(s.useEffect((()=>{const t=e.pipe((0,i.P)(o.fQ)).subscribe(n);return()=>null==t?void 0:t.unsubscribe()}),[]),s.createElement(t,{viewLoaded:e}));var l,d=n(96930),u=n(29037);function _(e){const t=e.doc.createElement(e.name);return e.attributes&&Object.entries(e.attributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}!function(e){const t=(0,o.Vo)(d.YS);e.get=function(e){return{inject:(n,s,i,r)=>{const c=(null==e?void 0:e.monitorAs)||n.name||"unknown";return new a((null==e?void 0:e.noShadowDOM)?(e,t,n,o)=>new u._R((()=>_(e)),u.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,o):(l=(null==e?void 0:e.noStyles)?(0,o.Vo)((()=>new d.mE)):t,(e,t,n,o)=>new u.aP((()=>_(e)),u.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,l,o)),c).inject(n,s,i,r);var l}}}}(l||(l={}))},93413:(e,t,n)=>{n.d(t,{E:()=>o});class o{constructor(e,t,n,o){this._customInboundEventName=t,this._customOutboundEventName=n,this._wrapOutboundMessage=o,this.inbound={subscribe:e=>{const t=({detail:t})=>{const n=t;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._target.addEventListener(this._customInboundEventName,t,!1),{unsubscribe:()=>this._target.removeEventListener(this._customInboundEventName,t,!1)}}},this.outbound=e=>{const t=this._wrapOutboundMessage?this._wrapOutboundMessage(e):e,n=new CustomEvent(this._customOutboundEventName,{bubbles:!0,cancelable:!0,detail:t});this._target.dispatchEvent(n)},this._target=e.defaultView||e}}},35307:(e,t,n)=>{if(n.d(t,{p:()=>l}),5526!=n.j)var o=n(84308);if(5526!=n.j)var s=n(59179);if(5526!=n.j)var i=n(90572);if(5526!=n.j)var r=n(13391);if(5526!=n.j)var a=n(74533);if(5526!=n.j)var c=n(88305);class l{constructor(e){this._selectionService=r.h.create(null);const t=(0,o.a)([this._selectionService,e]).pipe((0,s.U)((([e,t])=>e)),(0,i.h)((e=>(0,c.Nf)(e))));this.data=a.N.create((()=>{var e,t;return null!==(t=null===(e=this._selectionService.get())||void 0===e?void 0:e.getCurrentSelection())&&void 0!==t?t:[]}),t,c.fS)}setService(e){this._selectionService.set(e)}dispose(){}}},14562:(e,t,n)=>{function o(e){return!0===e.canvasFullTextMap}function s(e){return"CanvasAdvancedTextMap"===e.subType}n.d(t,{_:()=>s,k:()=>o})},33145:(e,t,n)=>{n.d(t,{J:()=>s});var o=n(75558);const s=new Proxy({},{get:(e,t)=>(...e)=>(0,o.OB)().bgRpc.api.trackGnar(t,e)})},40722:(e,t,n)=>{n.d(t,{b:()=>s});var o=n(49231);const s=({children:e})=>{const t="string"==typeof e?e:"";return t?o.createElement("style",{dangerouslySetInnerHTML:{__html:t}}):null}},95804:(e,t,n)=>{n.d(t,{K:()=>a});var o=n(51323),s=n(19917),i=n(95522),r=n(13874);const a={...o.C,...r.D,...i.K,StandWithUkraineGrammarlySuspended:new s.Cc("standWithUkraineExtensionSuspended","enabled"),StandWithUkraineTheme:new s.Cc("standWithUkraineExtensionTheme","enabled"),StudentsOFEGdocs:new s.Cc("citations_rollout_gdocs","enabled"),StudentsOFEInternal:new s.Cc("citations_rollout_internal","enabled"),CitationBuilder:new s.Cc("citation_builder","enabled"),CitationBuilderEditing:new s.Cc("citation_builder_editing","enabled"),CitationBuilderManualInvocation:new s.Cc("citation_builder_manual_invocation","enabled"),ExtensionDebugReport:new s.Cc("extension_debug_report","enabled"),SduiBulkDismiss:new s.Cc("sdui_bulk_dismiss","enabled"),TrackSiblingDataForGMail:new s.Cc("extension_track_sibling_data_for_gmail","enabled"),FixGmailHouseCat:new s.Cc("gmail_housecat_memory_leak_fix","enabled"),KnowledgeHubGdocs:new s.Cc("knowledge_hub_gdocs","enabled"),KnowledgeHubGmail:new s.Cc("knowledge_hub_gmail","enabled"),KnowledgeHubSlack:new s.Cc("knowledge_hub_slack","enabled"),KnowledgeHubWord:new s.Cc("windowsextension_knowledge_hub_word","enabled"),SlackUseInsertHTML:new s.Cc("extension_slack_use_insert_html"),KeyboardShortcut:new s.Cc("extension_keyboard_shortcut","enabled"),EnableFirstVisibleHighlightTracking:new s.Cc("extension_track_first_visible_highlight","enabled"),KnowledgeHubCheetahIntegration:new s.Cc("gbgo_knowledge_share_web","enabled"),GdocsMultiColumnAllCombinations:new s.Cc("gdocs_canvas_multicolumn_compare_all_combination","enabled"),GdocsRefactorDomQuery:new s.Cc("gdocs_refactor_dom_query","enabled"),GDocsUseStackToStoreParentClip:new s.Cc("gdocs_use_stack_to_store_parent_clip","enabled"),GdocsReturnAllRects:new s.Cc("gdocs_return_all_rects","enabled"),SuggestionDeliveryAutoApply:new s.Cc("suggestion_delivery_autoapply_extension_gate_23q3","enabled"),IndianEnglishDialect:new s.Cc("indian_english_dialect","enabled"),IndianEnglishDialectInternal:new s.Cc("indian_english_dialect_internal","enabled"),CheetahFeatureFlagCompose:new s.Cc("cheetah_extension_feature_flag_compose","enabled"),CheetahFeatureFlagRewrite:new s.Cc("cheetah_extension_feature_flag_rewrite","enabled"),CheetahFeatureFlagInlineRewrite:new s.Cc("cheetah_extension_feature_flag_inline_rewrite","enabled"),CheetahFeatureFlagMagicRewrite:new s.Cc("cheetah_extension_feature_flag_magic_rewrite","enabled"),CheetahFeatureFlagQuickReply:new s.Cc("cheetah_extension_feature_flag_quick_reply","enabled"),CheetahFeatureFlagInlineQuickReply:new s.Cc("cheetah_extension_feature_flag_inline_quick_reply","enabled"),CheetahFeatureFlagGDocsInlineRewrites:new s.Cc("cheetah_extension_feature_flag_gdocs_inline_rewrites","enabled"),CheetahFeatureFlagOnboarding:new s.Cc("cheetah_extension_feature_flag_onboarding","enabled"),CheetahStudentsOnboarding:new s.Cc("ggo_students_onboarding","enabled"),CheetahStudentBTS:new s.Cc("ggo_student_bts","enabled"),CheetahStudentPromptsInternal:new s.Cc("ggo_student_prompts_internal","enabled"),GDocsTextCorruptionValidateTextBeforeAlertApply:new s.Cc("gDocs_tc_validate_text_before_alert_apply","enabled"),GDocsGetFormatMap:new s.Cc("gdocs_get_format_map","enabled"),NonGDocsGetFormatMap:new s.Cc("extension_get_format_map","enabled"),SupportMoreStyle:new s.Cc("extension_support_more_style","enabled"),GDocsUseVisibleLayoutRoot:new s.Cc("gdocs_use_visible_layout_root"),GDocsUnloadIfInitArgsChanged:new s.Cc("gdocs_unload_when_init_args_changed"),GDocsDetectDocModeChangeByLayoutRootListener:new s.Cc("gdocs_detect_dom_mode_change_by_layout_root"),Iterable:new s.Cc("iterable_gate_ext","enabled"),IterableGDocsSidebarInitializedTrigger:new s.Cc("iterable_gate_gdoc_sidebar_initialized_ext","enabled"),IterableUserSessionInitializedTrigger:new s.Cc("iterable_gate_user_session_initialized_ext","enabled"),NonGDocsFirstAlertLookedAtTrigger:new s.Cc("iterable_gate_non_gdocs_first_alert_looked_at_ext","enabled"),InkwellSubscribeToSecureKeyRequests:new s.Cc("extension_inkwell_communication","enabled"),IterablePauseInTypingTrigger:new s.Cc("iterable_gate_pause_in_typing_ext","enabled"),IterableEngagedByAlertsAcceptedTrigger:new s.Cc("iterable_gate_alerts_accepted_ext","enabled"),IterableTriggerFromCustomPayload:new s.Cc("iterable_trigger_from_custom_payload_ext","enabled"),IterableTargetDomain:new s.Cc("iterable_target_domain_ext","enabled"),IterableMetrics:new s.Cc("iterable_metrics_ext","enabled"),IterableTriggerMetrics:new s.Cc("iterable_trigger_metrics_ext","enabled"),IterableLogs:new s.Cc("iterable_logs_ext","enabled"),IterableCooldownAndImpressions:new s.Cc("iterable_cooldown_and_retry_ext","enabled"),IterableGlobalCooldown:new s.Cc("iterable_global_cooldown_ext","enabled"),IterableHideIPMOnPopupStateChange:new s.Cc("iterable_hide_ipm_on_popup_state_change_ext","enabled"),SessionStorageLogsBackup:new s.Cc("session_storage_logs_backup","enabled"),SduiPopoverNotifications:new s.Cc("sdui_popover_manager_ext","enabled"),TextChangeBufferUseLegacy:new s.Cc("text_change_buffer_use_legacy_3","enabled"),TextChangeBufferDontFlushOnApply:new s.Cc("text_change_buffer_dont_flush_on_apply_1","enabled"),DontSyncAlertApplicationsWithInlineMode:new s.Cc("dont_sync_alert_applications_with_inline_mode","enabled"),KnowledgeEngineSearchV2Alpha:new s.Cc("knowledge_engine_search_v2alpha","enabled"),HideReportBugByGrammarlyEmployeeFeature:new s.Cc("hide_report_bug_by_grammarly_employee_feature","enabled"),ExtensionFeatureFlagCAPIClientStorage:new s.Cc("extension_feature_flag_capi_client_storage","enabled"),ExtensionFeatureFlagCAPIClientStorageCleanup:new s.Cc("extension_feature_flag_capi_client_storage_cleanup","enabled"),ExtensionFeatureFlagCAPIClientStorageLogWarnings:new s.Cc("extension_capi_client_storage_log_warnings","enabled"),ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests:new s.Cc("extension_capi_client_storage_run_cleanup_requests","enabled"),CAPIDistinctConnectionStatus:new s.Cc("extension_capi_distinct_connection_status","enabled"),TransformReplacementBeforeApplyFeature:new s.Cc("extension_feature_transform_replacement_before_apply","enabled"),ZendeskTransformReplacementOnlyForString:new s.Cc("extension_zendesk_transform_replacement_only_for_string","enabled"),GDocsInitGbuttonInsideCommentsField:new s.Cc("gdocs_init_gbutton_inside_comments_field","enabled"),GDocsCreateRichText:new s.Cc("gdocs_create_rich_text","enabled"),GDocsFormatGetFontFamily:new s.Cc("gdocs_format_get_font_family","enabled"),GDocsFormatGetColor:new s.Cc("gdocs_format_get_color","enabled"),GDocsAlignBasicStyleForTextDiff:new s.Cc("gdocs_align_basic_style_for_text_diff","enabled"),GDocsReturnAppliedForNonSuccess:new s.Cc("gdocs_return_applied_for_non_success","enabled"),GDocsReturnAppliedForAll:new s.Cc("gdocs_return_applied_for_all","enabled"),GDocsCheckTextForSuggestionMode:new s.Cc("gdocs_check_text_for_suggestion_mode","enabled"),GDocsNoDeleteEventForSuggestionMode:new s.Cc("gdocs_no_delete_event_for_suggestion_mode","enabled"),GDocsUseSelectionServiceForSuggestionMode:new s.Cc("gdocs_use_selection_service_suggestion_mode","enabled"),ExtensionA11yUIFixes:new s.Cc("extension_a11y_ui_fixes","enabled"),AutocorrectKeydownCaptureUserInput:new s.Cc("extension_autocorrect_keydown_capture_user_input","enabled"),AutocorrectAllowCaptureNonTrustedUserEvents:new s.Cc("extension_autocorrect_allow_capture_not_trusted_user_events","enabled"),DispatchDeltaDeleteEvent:new s.Cc("extension_dispatch_deleta_delete_event","enabled"),DiscordTransformInsertToReplace:new s.Cc("extension_discord_transform_insert_to_replace","enabled"),DiscordExecComandReplacementService:new s.Cc("extension_discord_exec_comand_replacement","enabled"),DiscordDelayAfterReplacementInBatch:new s.Cc("extension_discord_delay_after_replacement_in_batch","enabled"),MSTeamsCustomTransformReplacementWithSpaces:new s.Cc("extension_ms_teams_transform_replacement_with_spaces","enabled"),ReplacementExecutionTimeoutValidation:new s.Cc("extension_replacement_execution_timeout_validation","enabled"),CheetahSelectionContextUpdates:new s.Cc("cheetah_selection_context_updates","enabled"),CheetahSelectionContextUpdatesServer:new s.Cc("cheetah_selection_context_updates_server","enabled"),UseBodyToGetViewportDimentions:new s.Cc("extension_use_body_to_get_viewport_dimentions","enabled"),CLEditorIntegration:new s.Cc("extension_cleditor_integration","enabled"),GOSRollout:new s.Cc("extension_gos_rollout","enabled"),GOSTelemetry:new s.Cc("extension_gos_telemetry","enabled"),CentralizeStopEventPropagation:new s.Cc("extension_centralize_stop_event_propagation","enabled"),CollectDataForPreserveFormatting:new s.Cc("extension_collect_data_for_preserve_formatting","enabled"),FormattingUseBatchWhenHaveListItems:new s.Cc("extension_preserve_formatting_skip_list_items","enabled"),FormattingReplaceEmptyStringToNonBreakingSpaceEntity:new s.Cc("extension_formatting_support_continuous_white_spaces","enabled"),GDocsCollectLayoutRenderingStats:new s.Cc("gdocs_collect_layout_rendering_stats","enabled"),GDocsInternalsFilterStrikethrough:new s.Cc("gdocs_internals_filter_strikethrough","enabled"),GDocsTrackUnderline:new s.Cc("gdocs_track_underline","enabled"),GDocsTrackStrikeThrough:new s.Cc("gdocs_track_strikethrough","enabled"),GDocsInternalsFilterCodeBlocks:new s.Cc("gdocs_internals_filter_code_blocks","enabled"),GDocsDebounceDataRendering:new s.Cc("gdocs_debouncing_data_rendering","enabled"),GDocsExtractLinkFromGoogleInternals:new s.Cc("gdocs_extract_link_from_internals","enabled"),GDocsExtractDocumentInternals:new s.Cc("gdocs_extract_document_internals","enabled"),GDocsExtractSuggestionObjectsWithPath:new s.Cc("gdocs_extract_suggestion_objects_with_path"),GDocsretryExtractAnnotationAfterOneSecond:new s.Cc("gdocs_retry_extract_annotation_after_one_second"),GDocsRetryExtractAnnotation100Times:new s.Cc("gdocs_retry_extract_annotation_100_times"),GDocsExtractLinkInternalsByPath:new s.Cc("gdocs_extract_link_internals_by_path"),TrackInstitutionIdToGnar:new s.Cc("extension_track_institution_id_to_gnar","enabled"),GdocsTrackFatalPopup:new s.Cc("extension_gdocs_track_fatal_popup","enabled"),VbarsGlobal:new s.Cc("vbars_global","enabled"),CheetahOnboardingContextProviderFix:new s.Cc("cheetah_extension_external_onboarding_context_provider_fix","enabled"),CheetahClearSDUIBufferOnReconnect:new s.Cc("cheetah_extension_clear_sdui_buffer_on_reconnect","enabled"),InactiveIntegration:new s.Cc("extension_inactive_integration","enabled"),G2VBarsKillSwitch:new s.Cc("vbars_extension_kill_switch"),G2VBarsInternal:new s.Cc("extension_g2_vbars_internal","enabled"),G2VBarsInternalIgnoreAllowList:new s.Cc("extension_g2_vbars_internal_ignore_allow_list","enabled"),G2VBarsSelectionPreload:new s.Cc("vbars_selection_preload_extension","enabled"),G2VBarsStreaming:new s.Cc("vbars_extension_streaming"),G2VBarsRevertRewrite:new s.Cc("vbars_extension_revert_rewrite"),G2VBarsPositioningFixes:new s.Cc("extension_vbars_positioning_fixes"),G2VBarsAccessibleActivation:new s.Cc("extension_vbars_accessible_activation"),G2VBarsWaitForLatestCheckingRevisionBeforeGettingRewrite:new s.Cc("extension_vbars_rewrite_without_checking_completion","enabled"),G2VBarsDeactivation:new s.Cc("extension_vbars_deactivation","enabled"),G2VBarsSafeZone:new s.Cc("vbars_idle_extension_safe_zone","enabled"),G2VBarsClickAwayFixes:new s.Cc("vbars_clickaway_listener","enabled"),G2VBarsSelectionEnterprise:new s.Cc("vbars_selection_enterprise","enabled"),G2VBarsPushedContent:new s.Cc("pushed_content_extension","enabled"),G2VBarsIdleEnterprise:new s.Cc("vbars_idle_enterprise","enabled"),UseApproximateTCValidation:new s.Cc("use_approximate_tc_validation","enabled"),GDocsCanUseTransformBeforeValidate:new s.Cc("gdocs_can_use_trasfrom_before_validate","enabled"),GDocsSendValidationInfoForBatchReplacement:new s.Cc("gdocs_send_validation_info_for_batch_replacement","enabled"),CanIgnoreNonWidthCharsForTCValidation:new s.Cc("extension_ignore_non_width_chars_for_tc_validaition","enabled"),GDocsCanIgnoreEndNewLine:new s.Cc("gdocs_ignore_end_new_line_for_tc_validaition","enabled"),GDocsWhitespaceSelectionRetry:new s.Cc("gdocs_whitespace_selection_retry","enabled"),OAuth2SelectiveLogout:new s.Cc("extension_oauth2_selective_logout","enabled"),OAuth2LastAuthnEventLogout:new s.Cc("extension_oauth2_last_authn_event_logout","enabled"),LockedUIRollout:new s.Cc("locked_ui_rollout","unlimited_pool"),DebouncedInlineCardUpdate:new s.Cc("extension_debounced_inline_card_update"),GDocsShouldCheckIfMappedSomething:new s.Cc("gdocs_map_result_must_mapped_some_text"),GDocsCheckIndexBoundaryWhenTranslateIndex:new s.Cc("gdocs_check_index_boundary_when_translate_index"),GDocsOnlyAddIncompleteResult:new s.Cc("gdocs_only_add_incomplete_result"),GDocsPageInputValidationForParser:new s.Cc("gdocs_page_input_validation_for_parser"),CheetahProfuseEventsTracking:new s.Cc("cheetah_profuse_events_tracking"),RedditReplacementDuplicationFix:new s.Cc("reddit_replacement_duplication_fix"),RedditNewUseOverlayLayout:new s.Cc("reddit_new_use_overlay_layout"),RedditUseClipboardForCreatePost:new s.Cc("extension_reddit_use_clipboard_for_create_post"),InstagramUseDispatchEventReplacementService:new s.Cc("instagram_use_dispatch_event_replacement_service"),FacebookUseDispatchEventReplacementService:new s.Cc("facebook_use_dispatch_event_replacement_service"),FacebookChatNoDelayBeforeSelection:new s.Cc("facebook_chat_no_delay_before_selection"),PrioritizeLeftNodeAsEndNode:new s.Cc("extension_prioritize_left_node_as_end_node"),SalesforceServiceConsoleReplacementFix:new s.Cc("salesforce_service_console_replacement_fix"),SalesforceFilterEmailThread:new s.Cc("salesforce_filter_email_thread"),SalesforceDetailsTextareaRichReplacementServiceDelay:new s.Cc("salesforce_details_textarea_replacement_service_delay"),StravaReplacementSelectionDelay:new s.Cc("extension_strave_replacement_selection_delay"),SkipParallelAutoFixReplacement:new s.Cc("skip_parallel_autofix_replacement"),AvoidExtraIntegrationControllerInitialization:new s.Cc("extension_avoid_extra_integration_controller_initialization"),OggyOnGOS:new s.Cc("extension_oggy_on_gos","enabled"),UnfixFast570:new s.Cc("extension_unfix_fast_570"),LatticeReplacementDuplicationFix:new s.Cc("lattice_replacement_duplication_fix"),NewSessionEndWithConnectionStats:new s.Cc("new_session_end_with_connection_stats"),GDocsReplacementValidateOnlyFullTextBeforeReplacement:new s.Cc("gdocs_replacement_only_validate_full_text_before_replacement"),GDocsReplacementValidateOnlyFragmentText:new s.Cc("gdocs_replacement_only_validate_fragment_text"),GDocsCachingParserMiddleware:new s.Cc("gdocs_caching_parser_middleware"),OggyIframeWrappers:new s.Cc("extension_oggy_use_iframe_wrappers"),LoadAppActionsFromAppletCdn:new s.Cc("app_actions_applet_cdn_extension"),PerformanceScoreOggy:new s.Cc("performance_score_oggy"),SessionTimeout:new s.Cc("extension_session_timeout"),ConnectorGdocs:new s.Cc("extension_connector_gdocs"),ConnectorNonGdocs:new s.Cc("extension_connector_non_gdocs"),ServiceAvailabilityViewMetrics:new s.Cc("extension_service_availability_view_metrics"),ServiceAvailabilityTypingMetrics:new s.Cc("extension_service_availability_typing_metrics"),CalcGDocsCurrentFocusFieldBasedOnFocusSuggestion:new s.Cc("calc_gdocs_current_focus_field_based_on_focus_suggenstion"),FieldIntegrationManager:new s.Cc("extension_field_integration_manager"),CheetahExecReplacementOnlyWhenItsExists:new s.Cc("extension_cheetah_exec_replacement_only_when_its_exists"),SendChangesToCAPIAfterSequentialApply:new s.Cc("extension_send_changes_to_capi_after_sequential_apply"),GDocsTabSwitchFrequencyTracking:new s.Cc("gdocs_tab_switch_frequency_tracking"),GDocsDoNotKeepSidebarOpenState:new s.Cc("gdocs_do_not_keep_sidebar_open_state"),DatabricksPerformanceMetrics:new s.Cc("extension_databricks_performance_metrics"),PersonalizedInsightsConsentPopup:new s.Cc("extension_personalized_insights_consent_onboarding"),PersonalizedInsightsEmailDomainAndSignature:new s.Cc("extension_personalized_insights_email_domain_and_signature"),DataSharing:new s.Cc("data_sharing_optin"),TrackLevenshteinDistanceForTextCorruption:new s.Cc("extension_track_levenshtein_distance_for_text_corruption"),TrackTextCorruptionDebugProductMetric:new s.Cc("extension_track_text_corruption_debug_product_metric"),TouchTypistInternal:new s.Cc("extension_touch_typist_internal"),TouchTypistRelease:new s.Cc("extension_touchtypist_release"),TouchTypistPartialTrigger:new s.Cc("extension_touchtypist_partial_trigger","enabled"),TouchTypistForcedBufferFlush:new s.Cc("extension_touchtypist_internal_dlp_bypass","enabled"),DarkModeSettingsPopup:new s.Cc("extension_dark_mode_settings_popup"),FetchSkills:new s.Cc("extension_fetch_skills"),GDocsParseSmartChipFragments:new s.Cc("gdocs_parse_smart_chip_fragments"),NewsNowSingleInstantiation:new s.Cc("newsnow_disable_multiple"),CanContainsPrivateFieldsInDocInfo:new s.Cc("extension_can_contains_private_fields_in_doc_info"),CleanupPageMapCanvas2dContext:new s.Cc("cleanup_page_map_canvas_2d"),InProductDiscountSpecialOffer:new s.Cc("extension_in_product_discount_m2_special_offer"),MapImageNodeForRichText:new s.Cc("map_image_node_for_rich_text"),PreventEmptySetContext:new s.Cc("extension_prevent_empty_set_context"),GDocsSendComments:new s.Cc("gdocs_send_comments"),TrackAlertProcessingPerformance:new s.Cc("extension_track_alert_processing_performance"),AlertProcessingOptimization:new s.Cc("extension_alert_processing_optimization"),VBarsInjectionContainerDisplayContents:new s.Cc("vbars_injection_container_display_contents"),CodaUseCSSTransformTranslateForUnderlinePosition:new s.Cc("coda_use_css_transform_translate_for_underline_position"),CodaHideUnderlineWhenAnimated:new s.Cc("coda_hide_underline_when_animated"),CodaIntegrateOuterElementsCloser:new s.Cc("coda_integrate_outer_elements_closer"),CodaHideGbuttonForDocumentTitle:new s.Cc("coda_hide_gbutton_for_document_title"),CodaPositionGbuttonIntoFixedContainer:new s.Cc("coda_position_gbutton_into_fixed_container"),UseRefactoredUpdatePortForBg:new s.Cc("use_refactored_update_port_for_bg"),GDocsSignUpPopupReactToUserState:new s.Cc("extension_gdocs_signup_popup_react_to_user_state"),FullySignedInExperienceInGDocsFeature:new s.Cc("fully_signedin_gdocs_feature"),FullySignedInExperienceViaTone:new s.Cc("fully_signedin_block_inline_cards_via_tone"),GDocsAllowToDetectAssistantInjectionMode:new s.Cc("extension_gdocs_allow_to_detect_assistant_injection_mode"),GDocsDetectSidebarTypeDynamically:new s.Cc("extension_gdocs_detect_sidebar_type_dynamically"),GDocsInviteNudge:new s.Cc("extension_gdocs_invite_nudge"),GDocsShareModalTracking:new s.Cc("extension_gdocs_share_modal_tracking"),AttributesTriggerFieldIntegration:new s.Cc("extension_integration_target_attributes"),OAuthCheckTokenServiceState:new s.Cc("extension_check_oauth_token_service_state"),OAuthTokenServiceStateFallback:new s.Cc("extension_oauth_token_service_state_fallback"),SettingsAccessibilityToggle:new s.Cc("extension_settings_accessibility_toggle"),SnippetsTemplateVariables:new s.Cc("meg_snippets_dynamic_fields"),TrackContainerIdFailures:new s.Cc("extension_track_container_id_failures"),AuthenticationOptionsApi:new s.Cc("authentication_options_api"),InProductDiscount:new s.Cc("in_product_discount"),UseBlockListToConfigureFieldMinSizeForDefaultIntegrations:new s.Cc("extension_use_block_list_to_configure_field_min_size_for_default_integrations")}},86819:(e,t,n)=>{n.d(t,{S:()=>o});class o{constructor(e,t){this._transport=e,this._api=t,this._disposed=!1,this._sub=this._transport.inbound.subscribe({next:async e=>{try{const t=this._api[e.data.method];if("function"!=typeof t)throw{message:`invalid method name ${String(e.data.method)}`};{const n={clientId:e.clientId},o=await t.call(this._api,n,...e.data.args);this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:o}})}}catch(t){this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,err:t}})}}})}dispose(){this._disposed||(this._disposed=!0,this._sub.unsubscribe())}}},31885:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(81617);function s(e){return o.Ue(Object.entries(e).map((([t,n])=>[t,(t,...o)=>n.apply(e,o)])))}},45246:(e,t,n)=>{if(n.d(t,{BM:()=>p,IG:()=>f,Re:()=>m,Tv:()=>g,VD:()=>b,YN:()=>v,_N:()=>w,a2:()=>C,qw:()=>h}),5526!=n.j)var o=n(64271);if(5526!=n.j)var s=n(44071);if(5526!=n.j)var i=n(29479);if(3075==n.j)var r=n(954);if(3075==n.j)var a=n(59179);if(3075==n.j)var c=n(90572);if(5526!=n.j)var l=n(71497);if(3075==n.j)var d=n(98961);if(3075==n.j)var u=n(88305);if(5526!=n.j)var _=n(48691);function h(e){return(0,o.T)((0,s.R)(e,"focus").pipe((0,i.h)(!0)),(0,s.R)(e,"blur").pipe((0,i.h)(!1)))}function g(e){return e.nodeType===Node.ELEMENT_NODE}function p(e){return e.nodeType===Node.TEXT_NODE}function m(e){return e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement}function f(e,t){return d.x.create(e,{childList:!0,subtree:!0,attributes:!1}).pipe((0,r.O)(null),(0,a.U)((e=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:n()})),{});return Object.values(n).filter(u.fQ).length===Object.keys(n).length?n:null})),(0,c.h)((e=>!!e)))}var b;function w(e,t,n){return o((0,l.Me)(t));function o(t){const n=t.elementFromPoint(e.left,e.top);if(!n)return!1;const o=s(n);if(null!==o)return o;const i=t.elementsFromPoint(e.left,e.top);for(const e of i){if(e===n)continue;const t=s(e);if(null!==t)return t}return!1}function s(e){var s;return!(t!==e&&!t.contains(e))||((null==n?void 0:n(e))?null:!!(null===(s=e.shadowRoot)||void 0===s?void 0:s.elementsFromPoint)&&o(e.shadowRoot))}}function C(e){if(e.endsWith("px")){const t=e.slice(0,-2),n=Number(t);return(0,_.hj)(n)?n:null}return null}function v(e){var t;const n=(null!==(t=e.ownerDocument.defaultView)&&void 0!==t?t:self).getComputedStyle(e).zIndex,o="auto"!==n&&parseInt(n||"0",10)||null;return null!==o?o:e.parentNode&&e.parentNode.nodeType===Node.ELEMENT_NODE?v(e.parentNode):null}!function(e){e[e.Escape=27]="Escape",e[e.Return=13]="Return",e[e.Tab=9]="Tab",e[e.RightArrow=39]="RightArrow",e[e.UpArrow=38]="UpArrow",e[e.DownArrow=40]="DownArrow"}(b||(b={}))},66084:e=>{e.exports={notch:"nQgcx",hidden:"MB55l",peeking:"wYEGR",notchButton:"K9COx"}},50006:e=>{e.exports={gr_no_print:"dnXmp"}}}]);