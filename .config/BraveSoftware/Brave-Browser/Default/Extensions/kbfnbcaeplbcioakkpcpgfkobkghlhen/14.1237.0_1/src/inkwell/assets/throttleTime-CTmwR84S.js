import{$ as x,az as g,aA as F,av as y,at as q,au as m,aD as w}from"./start-BFd-djfI.js";import{A as I,a as b}from"./AsyncScheduler-BhBy18pz.js";import{a as T}from"./async-BZW1XXsj.js";import{t as k}from"./timer--E-2U5R1.js";var f={schedule:function(a){var t=requestAnimationFrame,n=cancelAnimationFrame,e=f.delegate;e&&(t=e.requestAnimationFrame,n=e.cancelAnimationFrame);var r=t(function(i){n=void 0,a(i)});return new x(function(){return n==null?void 0:n(r)})},requestAnimationFrame:function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];return requestAnimationFrame.apply(void 0,g([],F(a)))},cancelAnimationFrame:function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];var n=f.delegate;return((n==null?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,g([],F(a)))},delegate:void 0},V=function(a){y(t,a);function t(n,e){var r=a.call(this,n,e)||this;return r.scheduler=n,r.work=e,r}return t.prototype.requestAsyncId=function(n,e,r){return r===void 0&&(r=0),r!==null&&r>0?a.prototype.requestAsyncId.call(this,n,e,r):(n.actions.push(this),n._scheduled||(n._scheduled=f.requestAnimationFrame(function(){return n.flush(void 0)})))},t.prototype.recycleAsyncId=function(n,e,r){var i;if(r===void 0&&(r=0),r!=null?r>0:this.delay>0)return a.prototype.recycleAsyncId.call(this,n,e,r);var l=n.actions;e!=null&&((i=l[l.length-1])===null||i===void 0?void 0:i.id)!==e&&(f.cancelAnimationFrame(e),n._scheduled=void 0)},t}(I),$=function(a){y(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var e=this._scheduled;this._scheduled=void 0;var r=this.actions,i;n=n||r.shift();do if(i=n.execute(n.state,n.delay))break;while((n=r[0])&&n.id===e&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===e&&r.shift();)n.unsubscribe();throw i}},t}(b),W=new $(V);function j(a){return q(function(t,n){var e=!1,r=0;t.subscribe(m(n,function(i){return(e||(e=!a(i,r++)))&&n.next(i)}))})}function z(a,t){return q(function(n,e){var r=t!=null?t:{},i=r.leading,l=i===void 0?!0:i,v=r.trailing,h=v===void 0?!1:v,s=!1,d=null,o=null,c=!1,S=function(){o==null||o.unsubscribe(),o=null,h&&(A(),c&&e.complete())},_=function(){o=null,c&&e.complete()},p=function(u){return o=w(a(u)).subscribe(m(e,S,_))},A=function(){if(s){s=!1;var u=d;d=null,e.next(u),!c&&p(u)}};n.subscribe(m(e,function(u){s=!0,d=u,!(o&&!o.closed)&&(l?A():p(u))},function(){c=!0,!(h&&s&&o&&!o.closed)&&e.complete()}))})}function B(a,t,n){t===void 0&&(t=T);var e=k(a,t);return z(function(){return e},n)}export{W as a,B as b,j as s,z as t};
//# sourceMappingURL=throttleTime-CTmwR84S.js.map
