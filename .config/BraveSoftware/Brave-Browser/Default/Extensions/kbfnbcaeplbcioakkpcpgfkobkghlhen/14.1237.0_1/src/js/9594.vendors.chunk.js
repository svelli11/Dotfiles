(self.webpackChunk=self.webpackChunk||[]).push([[9594],{69594:(t,e,r)=>{function n(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function o(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(t,e){return t.get(n(t,e))}function s(t,e,r){o(t,e),e.set(t,r)}function c(t,e,r){return t.set(n(t,e),r),r}function u(t,e){o(t,e),e.add(t)}function a(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(){var t="function"==typeof SuppressedError?SuppressedError:function(t,e){var r=Error();return r.name="SuppressedError",r.error=t,r.suppressed=e,r},e={},r=[];function n(t,e){if(null!=e){if(Object(e)!==e)throw new TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(t)var n=e[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(null==n&&(n=e[Symbol.dispose||Symbol.for("Symbol.dispose")]),"function"!=typeof n)throw new TypeError("Property [Symbol.dispose] is not a function.");r.push({v:e,d:n,a:t})}else t&&r.push({d:e,a:t});return e}return{e,u:n.bind(null,!1),a:n.bind(null,!0),d:function(){var n=this.e;function o(){for(;t=r.pop();)try{var t,s=t.d&&t.d.call(t.v);if(t.a)return Promise.resolve(s).then(o,i)}catch(t){return i(t)}if(n!==e)throw n}function i(r){return n=n!==e?new t(r,n):r,o()}return o()}}}r.d(e,{M:()=>Ad,p:()=>Od});var p,h,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y={};function g(){if(h)return p;h=1;var t=function(t){return t&&t.Math===Math&&t};return p=t("object"==typeof globalThis&&globalThis)||t("object"==typeof self&&self)||t("object"==typeof self&&self)||t("object"==typeof v&&v)||t("object"==typeof p&&p)||function(){return this}()||Function("return this")()}var m,b,w,S,x,k,O,E,j={};function P(){return b?m:(b=1,m=function(t){try{return!!t()}catch(t){return!0}})}function I(){if(S)return w;S=1;var t=P();return w=!t((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function T(){if(k)return x;k=1;var t=P();return x=!t((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))}function R(){if(E)return O;E=1;var t=T(),e=Function.prototype.call;return O=t?e.bind(e):function(){return e.apply(e,arguments)},O}var C,D,A,_,M,W,N,U,F,z,L,B,G,q,V,J,Z,H,K,Y,X,$,Q,tt,et,rt,nt,ot,it,st,ct,ut,at,lt,ft,dt,pt,ht,vt,yt,gt,mt={};function bt(){return A?D:(A=1,D=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}})}function wt(){if(M)return _;M=1;var t=T(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return _=t?n:function(t){return function(){return r.apply(t,arguments)}},_}function St(){if(N)return W;N=1;var t=wt(),e=t({}.toString),r=t("".slice);return W=function(t){return r(e(t),8,-1)}}function xt(){return L?z:(L=1,z=function(t){return null==t})}function kt(){if(G)return B;G=1;var t=xt(),e=TypeError;return B=function(r){if(t(r))throw new e("Can't call method on "+r);return r}}function Ot(){if(V)return q;V=1;var t=function(){if(F)return U;F=1;var t=wt(),e=P(),r=St(),n=Object,o=t("".split);return U=e((function(){return!n("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?o(t,""):n(t)}:n}(),e=kt();return q=function(r){return t(e(r))}}function Et(){if(Z)return J;Z=1;var t="object"==typeof document&&document.all;return J=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(t){return"function"==typeof t}}function jt(){if(K)return H;K=1;var t=Et();return H=function(e){return"object"==typeof e?null!==e:t(e)}}function Pt(){if(X)return Y;X=1;var t=g(),e=Et(),r=function(t){return e(t)?t:void 0};return Y=function(e,n){return arguments.length<2?r(t[e]):t[e]&&t[e][n]},Y}function It(){if(Q)return $;Q=1;var t=wt();return $=t({}.isPrototypeOf)}function Tt(){if(et)return tt;et=1;var t=g().navigator,e=t&&t.userAgent;return tt=e?String(e):""}function Rt(){if(nt)return rt;nt=1;var t,e,r=g(),n=Tt(),o=r.process,i=r.Deno,s=o&&o.versions||i&&i.version,c=s&&s.v8;return c&&(e=(t=c.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!e&&n&&(!(t=n.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=n.match(/Chrome\/(\d+)/))&&(e=+t[1]),rt=e}function Ct(){if(it)return ot;it=1;var t=Rt(),e=P(),r=g().String;return ot=!!Object.getOwnPropertySymbols&&!e((function(){var e=Symbol("symbol detection");return!r(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&t&&t<41}))}function Dt(){if(ct)return st;ct=1;var t=Ct();return st=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function At(){if(at)return ut;at=1;var t=Pt(),e=Et(),r=It(),n=Dt(),o=Object;return ut=n?function(t){return"symbol"==typeof t}:function(n){var i=t("Symbol");return e(i)&&r(i.prototype,o(n))}}function _t(){if(ft)return lt;ft=1;var t=String;return lt=function(e){try{return t(e)}catch(t){return"Object"}}}function Mt(){if(pt)return dt;pt=1;var t=Et(),e=_t(),r=TypeError;return dt=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")}}function Wt(){if(vt)return ht;vt=1;var t=Mt(),e=xt();return ht=function(r,n){var o=r[n];return e(o)?void 0:t(o)}}function Nt(){if(gt)return yt;gt=1;var t=R(),e=Et(),r=jt(),n=TypeError;return yt=function(o,i){var s,c;if("string"===i&&e(s=o.toString)&&!r(c=t(s,o)))return c;if(e(s=o.valueOf)&&!r(c=t(s,o)))return c;if("string"!==i&&e(s=o.toString)&&!r(c=t(s,o)))return c;throw new n("Can't convert object to primitive value")}}var Ut,Ft,zt,Lt,Bt,Gt,qt,Vt,Jt,Zt,Ht,Kt,Yt,Xt,$t,Qt,te,ee,re,ne,oe,ie,se,ce,ue={exports:{}};function ae(){return Ft?Ut:(Ft=1,Ut=!1)}function le(){if(Lt)return zt;Lt=1;var t=g(),e=Object.defineProperty;return zt=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch(e){t[r]=n}return n}}function fe(){if(Bt)return ue.exports;Bt=1;var t=ae(),e=g(),r=le(),n="__core-js_shared__",o=ue.exports=e[n]||r(n,{});return(o.versions||(o.versions=[])).push({version:"3.38.0",mode:t?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"}),ue.exports}function de(){if(qt)return Gt;qt=1;var t=fe();return Gt=function(e,r){return t[e]||(t[e]=r||{})}}function pe(){if(Jt)return Vt;Jt=1;var t=kt(),e=Object;return Vt=function(r){return e(t(r))}}function he(){if(Ht)return Zt;Ht=1;var t=wt(),e=pe(),r=t({}.hasOwnProperty);return Zt=Object.hasOwn||function(t,n){return r(e(t),n)}}function ve(){if(Yt)return Kt;Yt=1;var t=wt(),e=0,r=Math.random(),n=t(1..toString);return Kt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+n(++e+r,36)}}function ye(){if($t)return Xt;$t=1;var t=g(),e=de(),r=he(),n=ve(),o=Ct(),i=Dt(),s=t.Symbol,c=e("wks"),u=i?s.for||s:s&&s.withoutSetter||n;return Xt=function(t){return r(c,t)||(c[t]=o&&r(s,t)?s[t]:u("Symbol."+t)),c[t]}}function ge(){if(te)return Qt;te=1;var t=R(),e=jt(),r=At(),n=Wt(),o=Nt(),i=ye(),s=TypeError,c=i("toPrimitive");return Qt=function(i,u){if(!e(i)||r(i))return i;var a,l=n(i,c);if(l){if(void 0===u&&(u="default"),a=t(l,i,u),!e(a)||r(a))return a;throw new s("Can't convert object to primitive value")}return void 0===u&&(u="number"),o(i,u)}}function me(){if(re)return ee;re=1;var t=ge(),e=At();return ee=function(r){var n=t(r,"string");return e(n)?n:n+""}}function be(){if(oe)return ne;oe=1;var t=g(),e=jt(),r=t.document,n=e(r)&&e(r.createElement);return ne=function(t){return n?r.createElement(t):{}}}function we(){if(se)return ie;se=1;var t=I(),e=P(),r=be();return ie=!t&&!e((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))}function Se(){if(ce)return j;ce=1;var t=I(),e=R(),r=function(){if(C)return mt;C=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return mt.f=r?function(t){var r=e(this,t);return!!r&&r.enumerable}:t,mt}(),n=bt(),o=Ot(),i=me(),s=he(),c=we(),u=Object.getOwnPropertyDescriptor;return j.f=t?u:function(t,a){if(t=o(t),a=i(a),c)try{return u(t,a)}catch(t){}if(s(t,a))return n(!e(r.f,t,a),t[a])},j}var xe,ke,Oe,Ee,je,Pe,Ie,Te={};function Re(){if(ke)return xe;ke=1;var t=I(),e=P();return xe=t&&e((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))}function Ce(){if(Ee)return Oe;Ee=1;var t=jt(),e=String,r=TypeError;return Oe=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")}}function De(){if(je)return Te;je=1;var t=I(),e=we(),r=Re(),n=Ce(),o=me(),i=TypeError,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u="enumerable",a="configurable",l="writable";return Te.f=t?r?function(t,e,r){if(n(t),e=o(e),n(r),"function"==typeof t&&"prototype"===e&&"value"in r&&l in r&&!r.writable){var i=c(t,e);i&&i.writable&&(t[e]=r.value,r={configurable:a in r?r.configurable:i.configurable,enumerable:u in r?r.enumerable:i.enumerable,writable:!1})}return s(t,e,r)}:s:function(t,r,c){if(n(t),r=o(r),n(c),e)try{return s(t,r,c)}catch(t){}if("get"in c||"set"in c)throw new i("Accessors not supported");return"value"in c&&(t[r]=c.value),t},Te}function Ae(){if(Ie)return Pe;Ie=1;var t=I(),e=De(),r=bt();return Pe=t?function(t,n,o){return e.f(t,n,r(1,o))}:function(t,e,r){return t[e]=r,t}}var _e,Me,We,Ne,Ue,Fe,ze,Le,Be,Ge,qe,Ve,Je,Ze,He,Ke={exports:{}};function Ye(){if(Me)return _e;Me=1;var t=I(),e=he(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,o=e(r,"name"),i=o&&"something"===function(){}.name,s=o&&(!t||t&&n(r,"name").configurable);return _e={EXISTS:o,PROPER:i,CONFIGURABLE:s}}function Xe(){if(Ne)return We;Ne=1;var t=wt(),e=Et(),r=fe(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(t){return n(t)}),We=r.inspectSource}function $e(){if(Le)return ze;Le=1;var t=de(),e=ve(),r=t("keys");return ze=function(t){return r[t]||(r[t]=e(t))}}function Qe(){return Ge?Be:(Ge=1,Be={})}function tr(){if(Ve)return qe;Ve=1;var t,e,r,n=function(){if(Fe)return Ue;Fe=1;var t=g(),e=Et(),r=t.WeakMap;return Ue=e(r)&&/native code/.test(String(r))}(),o=g(),i=jt(),s=Ae(),c=he(),u=fe(),a=$e(),l=Qe(),f="Object already initialized",d=o.TypeError,p=o.WeakMap;if(n||u.state){var h=u.state||(u.state=new p);h.get=h.get,h.has=h.has,h.set=h.set,t=function(t,e){if(h.has(t))throw new d(f);return e.facade=t,h.set(t,e),e},e=function(t){return h.get(t)||{}},r=function(t){return h.has(t)}}else{var v=a("state");l[v]=!0,t=function(t,e){if(c(t,v))throw new d(f);return e.facade=t,s(t,v,e),e},e=function(t){return c(t,v)?t[v]:{}},r=function(t){return c(t,v)}}return qe={set:t,get:e,has:r,enforce:function(n){return r(n)?e(n):t(n,{})},getterFor:function(t){return function(r){var n;if(!i(r)||(n=e(r)).type!==t)throw new d("Incompatible receiver, "+t+" required");return n}}}}function er(){if(Je)return Ke.exports;Je=1;var t=wt(),e=P(),r=Et(),n=he(),o=I(),i=Ye().CONFIGURABLE,s=Xe(),c=tr(),u=c.enforce,a=c.get,l=String,f=Object.defineProperty,d=t("".slice),p=t("".replace),h=t([].join),v=o&&!e((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),g=Ke.exports=function(t,e,r){"Symbol("===d(l(e),0,7)&&(e="["+p(l(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!n(t,"name")||i&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&r&&n(r,"arity")&&t.length!==r.arity&&f(t,"length",{value:r.arity});try{r&&n(r,"constructor")&&r.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=u(t);return n(s,"source")||(s.source=h(y,"string"==typeof e?e:"")),t};return Function.prototype.toString=g((function(){return r(this)&&a(this).source||s(this)}),"toString"),Ke.exports}function rr(){if(He)return Ze;He=1;var t=Et(),e=De(),r=er(),n=le();return Ze=function(o,i,s,c){c||(c={});var u=c.enumerable,a=void 0!==c.name?c.name:i;if(t(s)&&r(s,a,c),c.global)u?o[i]=s:n(i,s);else{try{c.unsafe?o[i]&&(u=!0):delete o[i]}catch(t){}u?o[i]=s:e.f(o,i,{value:s,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return o}}var nr,or,ir,sr,cr,ur,ar,lr,fr,dr,pr,hr,vr,yr,gr,mr,br,wr={};function Sr(){if(sr)return ir;sr=1;var t=function(){if(or)return nr;or=1;var t=Math.ceil,e=Math.floor;return nr=Math.trunc||function(r){var n=+r;return(n>0?e:t)(n)}}();return ir=function(e){var r=+e;return r!=r||0===r?0:t(r)}}function xr(){if(ur)return cr;ur=1;var t=Sr(),e=Math.max,r=Math.min;return cr=function(n,o){var i=t(n);return i<0?e(i+o,0):r(i,o)}}function kr(){if(lr)return ar;lr=1;var t=Sr(),e=Math.min;return ar=function(r){var n=t(r);return n>0?e(n,9007199254740991):0}}function Or(){if(dr)return fr;dr=1;var t=kr();return fr=function(e){return t(e.length)}}function Er(){if(yr)return vr;yr=1;var t=wt(),e=he(),r=Ot(),n=function(){if(hr)return pr;hr=1;var t=Ot(),e=xr(),r=Or(),n=function(n){return function(o,i,s){var c=t(o),u=r(c);if(0===u)return!n&&-1;var a,l=e(s,u);if(n&&i!=i){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((n||l in c)&&c[l]===i)return n||l||0;return!n&&-1}};return pr={includes:n(!0),indexOf:n(!1)}}().indexOf,o=Qe(),i=t([].push);return vr=function(t,s){var c,u=r(t),a=0,l=[];for(c in u)!e(o,c)&&e(u,c)&&i(l,c);for(;s.length>a;)e(u,c=s[a++])&&(~n(l,c)||i(l,c));return l}}function jr(){return mr?gr:(mr=1,gr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function Pr(){if(br)return wr;br=1;var t=Er(),e=jr().concat("length","prototype");return wr.f=Object.getOwnPropertyNames||function(r){return t(r,e)},wr}var Ir,Tr,Rr,Cr,Dr,Ar,_r,Mr,Wr,Nr,Ur,Fr,zr,Lr,Br,Gr,qr,Vr,Jr,Zr,Hr,Kr,Yr,Xr,$r,Qr,tn,en,rn,nn,on,sn,cn,un,an,ln,fn,dn,pn,hn,vn,yn,gn={};function mn(){if(Rr)return Tr;Rr=1;var t=Pt(),e=wt(),r=Pr(),n=(Ir||(Ir=1,gn.f=Object.getOwnPropertySymbols),gn),o=Ce(),i=e([].concat);return Tr=t("Reflect","ownKeys")||function(t){var e=r.f(o(t)),s=n.f;return s?i(e,s(t)):e}}function bn(){if(Dr)return Cr;Dr=1;var t=he(),e=mn(),r=Se(),n=De();return Cr=function(o,i,s){for(var c=e(i),u=n.f,a=r.f,l=0;l<c.length;l++){var f=c[l];t(o,f)||s&&t(s,f)||u(o,f,a(i,f))}}}function wn(){if(_r)return Ar;_r=1;var t=P(),e=Et(),r=/#|\.prototype\./,n=function(r,n){var u=i[o(r)];return u===c||u!==s&&(e(n)?t(n):!!n)},o=n.normalize=function(t){return String(t).replace(r,".").toLowerCase()},i=n.data={},s=n.NATIVE="N",c=n.POLYFILL="P";return Ar=n}function Sn(){if(Wr)return Mr;Wr=1;var t=g(),e=Se().f,r=Ae(),n=rr(),o=le(),i=bn(),s=wn();return Mr=function(c,u){var a,l,f,d,p,h=c.target,v=c.global,y=c.stat;if(a=v?t:y?t[h]||o(h,{}):t[h]&&t[h].prototype)for(l in u){if(d=u[l],f=c.dontCallGetSet?(p=e(a,l))&&p.value:a[l],!s(v?l:h+(y?".":"#")+l,c.forced)&&void 0!==f){if(typeof d==typeof f)continue;i(d,f)}(c.sham||f&&f.sham)&&r(d,"sham",!0),n(a,l,d,c)}}}function xn(){if(Ur)return Nr;Ur=1;var t=T(),e=Function.prototype,r=e.apply,n=e.call;return Nr="object"==typeof Reflect&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),Nr}function kn(){if(zr)return Fr;zr=1;var t=wt(),e=Mt();return Fr=function(r,n,o){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[o]))}catch(t){}}}function On(){if(Br)return Lr;Br=1;var t=jt();return Lr=function(e){return t(e)||null===e}}function En(){if(qr)return Gr;qr=1;var t=On(),e=String,r=TypeError;return Gr=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")}}function jn(){if(Jr)return Vr;Jr=1;var t=kn(),e=jt(),r=kt(),n=En();return Vr=Object.setPrototypeOf||("__proto__"in{}?function(){var o,i=!1,s={};try{(o=t(Object.prototype,"__proto__","set"))(s,[]),i=s instanceof Array}catch(t){}return function(t,s){return r(t),n(s),e(t)?(i?o(t,s):t.__proto__=s,t):t}}():void 0)}function Pn(){if(Hr)return Zr;Hr=1;var t=De().f;return Zr=function(e,r,n){n in e||t(e,n,{configurable:!0,get:function(){return r[n]},set:function(t){r[n]=t}})}}function In(){if(Yr)return Kr;Yr=1;var t=Et(),e=jt(),r=jn();return Kr=function(n,o,i){var s,c;return r&&t(s=o.constructor)&&s!==i&&e(c=s.prototype)&&c!==i.prototype&&r(n,c),n}}function Tn(){if($r)return Xr;$r=1;var t={};return t[ye()("toStringTag")]="z",Xr="[object z]"===String(t)}function Rn(){if(tn)return Qr;tn=1;var t=Tn(),e=Et(),r=St(),n=ye()("toStringTag"),o=Object,i="Arguments"===r(function(){return arguments}());return Qr=t?r:function(t){var s,c,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(c=function(t,e){try{return t[e]}catch(t){}}(s=o(t),n))?c:i?r(s):"Object"===(u=r(s))&&e(s.callee)?"Arguments":u}}function Cn(){if(on)return nn;on=1;var t=function(){if(rn)return en;rn=1;var t=Rn(),e=String;return en=function(r){if("Symbol"===t(r))throw new TypeError("Cannot convert a Symbol value to a string");return e(r)}}();return nn=function(e,r){return void 0===e?arguments.length<2?"":r:t(e)},nn}function Dn(){if(cn)return sn;cn=1;var t=jt(),e=Ae();return sn=function(r,n){t(n)&&"cause"in n&&e(r,"cause",n.cause)}}function An(){if(pn)return dn;pn=1;var t=Ae(),e=function(){if(an)return un;an=1;var t=wt(),e=Error,r=t("".replace),n=String(new e("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,i=o.test(n);return un=function(t,n){if(i&&"string"==typeof t&&!e.prepareStackTrace)for(;n--;)t=r(t,o,"");return t}}(),r=function(){if(fn)return ln;fn=1;var t=P(),e=bt();return ln=!t((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",e(1,7)),7!==t.stack)}))}(),n=Error.captureStackTrace;return dn=function(o,i,s,c){r&&(n?n(o,i):t(o,"stack",e(s,c)))}}function _n(){if(vn)return hn;vn=1;var t=Pt(),e=he(),r=Ae(),n=It(),o=jn(),i=bn(),s=Pn(),c=In(),u=Cn(),a=Dn(),l=An(),f=I(),d=ae();return hn=function(p,h,v,y){var g="stackTraceLimit",m=y?2:1,b=p.split("."),w=b[b.length-1],S=t.apply(null,b);if(S){var x=S.prototype;if(!d&&e(x,"cause")&&delete x.cause,!v)return S;var k=t("Error"),O=h((function(t,e){var o=u(y?e:t,void 0),i=y?new S(t):new S;return void 0!==o&&r(i,"message",o),l(i,O,i.stack,2),this&&n(x,this)&&c(i,this,O),arguments.length>m&&a(i,arguments[m]),i}));if(O.prototype=x,"Error"!==w?o?o(O,k):i(O,k,{name:!0}):f&&g in S&&(s(O,S,g),s(O,S,"prepareStackTrace")),i(O,S),!d)try{x.name!==w&&r(x,"name",w),x.constructor=O}catch(t){}return O}},hn}function Mn(){if(yn)return y;yn=1;var t=Sn(),e=g(),r=xn(),n=_n(),o="WebAssembly",i=e.WebAssembly,s=7!==new Error("e",{cause:7}).cause,c=function(e,r){var o={};o[e]=n(e,r,s),t({global:!0,constructor:!0,arity:1,forced:s},o)},u=function(e,r){if(i&&i[e]){var c={};c[e]=n("WebAssembly."+e,r,s),t({target:o,stat:!0,constructor:!0,arity:1,forced:s},c)}};return c("Error",(function(t){return function(e){return r(t,this,arguments)}})),c("EvalError",(function(t){return function(e){return r(t,this,arguments)}})),c("RangeError",(function(t){return function(e){return r(t,this,arguments)}})),c("ReferenceError",(function(t){return function(e){return r(t,this,arguments)}})),c("SyntaxError",(function(t){return function(e){return r(t,this,arguments)}})),c("TypeError",(function(t){return function(e){return r(t,this,arguments)}})),c("URIError",(function(t){return function(e){return r(t,this,arguments)}})),u("CompileError",(function(t){return function(e){return r(t,this,arguments)}})),u("LinkError",(function(t){return function(e){return r(t,this,arguments)}})),u("RuntimeError",(function(t){return function(e){return r(t,this,arguments)}})),y}var Wn,Nn,Un,Fn={};function zn(){if(Nn)return Wn;Nn=1;var t=I(),e=P(),r=Ce(),n=Cn(),o=Error.prototype.toString,i=e((function(){if(t){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==o.call(e))return!0}return"2: 1"!==o.call({message:1,name:2})||"Error"!==o.call({})}));return Wn=i?function(){var t=r(this),e=n(t.name,"Error"),o=n(t.message);return e?o?e+": "+o:e:o}:o}function Ln(){if(Un)return Fn;Un=1;var t=rr(),e=zn(),r=Error.prototype;return r.toString!==e&&t(r,"toString",e),Fn}var Bn,Gn,qn,Vn={};function Jn(){if(qn)return Vn;qn=1;var t=Tn(),e=rr(),r=function(){if(Gn)return Bn;Gn=1;var t=Tn(),e=Rn();return Bn=t?{}.toString:function(){return"[object "+e(this)+"]"}}();return t||e(Object.prototype,"toString",r,{unsafe:!0}),Vn}var Zn,Hn,Kn,Yn,Xn={};function $n(){if(Yn)return Kn;Yn=1;var t=he(),e=Et(),r=pe(),n=$e(),o=function(){if(Hn)return Zn;Hn=1;var t=P();return Zn=!t((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))}(),i=n("IE_PROTO"),s=Object,c=s.prototype;return Kn=o?s.getPrototypeOf:function(n){var o=r(n);if(t(o,i))return o[i];var u=o.constructor;return e(u)&&o instanceof u?u.prototype:o instanceof s?c:null}}var Qn,to,eo,ro,no,oo,io,so,co={};function uo(){if(to)return Qn;to=1;var t=Er(),e=jr();return Qn=Object.keys||function(r){return t(r,e)}}function ao(){if(no)return ro;no=1;var t=Pt();return ro=t("document","documentElement")}function lo(){if(io)return oo;io=1;var t,e=Ce(),r=function(){if(eo)return co;eo=1;var t=I(),e=Re(),r=De(),n=Ce(),o=Ot(),i=uo();return co.f=t&&!e?Object.defineProperties:function(t,e){n(t);for(var s,c=o(e),u=i(e),a=u.length,l=0;a>l;)r.f(t,s=u[l++],c[s]);return t},co}(),n=jr(),o=Qe(),i=ao(),s=be(),c=$e(),u=c("IE_PROTO"),a=function(){},l=function(t){return"<script>"+t+"</"+"script>"},f=function(t){t.write(l("")),t.close();var e=t.parentWindow.Object;return t=null,e},d=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var e,r;d="undefined"!=typeof document?document.domain&&t?f(t):((r=s("iframe")).style.display="none",i.appendChild(r),r.src=String("javascript:"),(e=r.contentWindow.document).open(),e.write(l("document.F=Object")),e.close(),e.F):f(t);for(var o=n.length;o--;)delete d.prototype[n[o]];return d()};return o[u]=!0,oo=Object.create||function(t,n){var o;return null!==t?(a.prototype=e(t),o=new a,a.prototype=null,o[u]=t):o=d(),void 0===n?o:r.f(o,n)}}function fo(){if(so)return Xn;so=1;var t=Sn(),e=g(),r=It(),n=$n(),o=jn(),i=bn(),s=lo(),c=Ae(),u=bt(),a=An(),l=Cn(),f=ye(),d=P(),p=ae(),h=e.SuppressedError,v=f("toStringTag"),y=Error,m=!!h&&3!==h.length,b=!!h&&d((function(){return 4===new h(1,2,3,{cause:4}).cause})),w=m||b,S=function(t,e,i){var u,f=r(x,this);return o?u=!w||f&&n(this)!==x?o(new y,f?n(this):x):new h:(u=f?this:s(x),c(u,v,"Error")),void 0!==i&&c(u,"message",l(i)),a(u,S,u.stack,1),c(u,"error",t),c(u,"suppressed",e),u};o?o(S,y):i(S,y,{name:!0});var x=S.prototype=w?h.prototype:s(y.prototype,{constructor:u(1,S),message:u(1,""),name:u(1,"SuppressedError")});return w&&!p&&(x.constructor=S),t({global:!0,constructor:!0,arity:3,forced:w},{SuppressedError:S}),Xn}var po,ho,vo,yo,go,mo,bo,wo,So,xo,ko,Oo,Eo,jo={};function Po(){if(ho)return po;ho=1;var t=It(),e=TypeError;return po=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")}}function Io(){if(yo)return vo;yo=1;var t=rr();return vo=function(e,r,n){for(var o in r)t(e,o,r[o],n);return e}}function To(){if(mo)return go;mo=1;var t=er(),e=De();return go=function(r,n,o){return o.get&&t(o.get,n,{getter:!0}),o.set&&t(o.set,n,{setter:!0}),e.f(r,n,o)}}function Ro(){if(xo)return So;xo=1;var t=function(){if(wo)return bo;wo=1;var t=St(),e=wt();return bo=function(r){if("Function"===t(r))return e(r)}}(),e=Mt(),r=T(),n=t(t.bind);return So=function(t,o){return e(t),void 0===o?t:r?n(t,o):function(){return t.apply(o,arguments)}},So}function Co(){if(Oo)return ko;Oo=1;var t=R(),e=wt(),r=Ro(),n=Ce(),o=Mt(),i=xt(),s=Wt(),c=ye(),u=c("asyncDispose"),a=c("dispose"),l=e([].push),f=function(e,r){if("async-dispose"===r){var n=s(e,u);return void 0!==n||void 0===(n=s(e,a))?n:function(){t(n,this)}}return s(e,a)},d=function(t,e,s){return arguments.length<3&&!i(t)&&(s=o(f(n(t),e))),void 0===s?function(){}:r(s,t)};return ko=function(t,e,r,n){var o;if(arguments.length<4){if(i(e)&&"sync-dispose"===r)return;o=d(e,r)}else o=d(void 0,r,n);l(t.stack,o)},ko}var Do,Ao,_o,Mo,Wo,No,Uo,Fo={};function zo(){if(Ao)return Do;Ao=1;var t,e,r,n=P(),o=Et(),i=jt(),s=lo(),c=$n(),u=rr(),a=ye(),l=ae(),f=a("iterator"),d=!1;return[].keys&&("next"in(r=[].keys())?(e=c(c(r)))!==Object.prototype&&(t=e):d=!0),!i(t)||n((function(){var e={};return t[f].call(e)!==e}))?t={}:l&&(t=s(t)),o(t[f])||u(t,f,(function(){return this})),Do={IteratorPrototype:t,BUGGY_SAFARI_ITERATORS:d}}function Lo(){if(_o)return Fo;_o=1;var t=R(),e=rr(),r=Wt(),n=he(),o=ye(),i=zo().IteratorPrototype,s=o("dispose");return n(i,s)||e(i,s,(function(){var e=r(this,"return");e&&t(e,this)})),Fo}function Bo(){if(Wo)return Mo;Wo=1;var t=g();return Mo=t}!function(){if(Uo)return No;Uo=1,Mn(),Ln(),Jn(),fo(),function(){if(Eo)return jo;Eo=1;var t=Sn(),e=I(),r=Pt(),n=Mt(),o=Po(),i=rr(),s=Io(),c=To(),u=ye(),a=tr(),l=Co(),f=r("SuppressedError"),d=ReferenceError,p=u("dispose"),h=u("toStringTag"),v="DisposableStack",y=a.set,g=a.getterFor(v),m="sync-dispose",b="disposed",w=function(t){var e=g(t);if(e.state===b)throw new d("DisposableStack already disposed");return e},S=function(){y(o(this,x),{type:v,state:"pending",stack:[]}),e||(this.disposed=!1)},x=S.prototype;s(x,{dispose:function(){var t=g(this);if(t.state!==b){t.state=b,e||(this.disposed=!0);for(var r,n=t.stack,o=n.length,i=!1;o;){var s=n[--o];n[o]=void 0;try{s()}catch(t){i?r=new f(t,r):(i=!0,r=t)}}if(t.stack=void 0,i)throw r}},use:function(t){return l(w(this),t,m),t},adopt:function(t,e){var r=w(this);return n(e),l(r,void 0,m,(function(){e(t)})),t},defer:function(t){var e=w(this);n(t),l(e,void 0,m,t)},move:function(){var t=w(this),r=new S;return g(r).stack=t.stack,t.stack=[],t.state=b,e||(this.disposed=!0),r}}),e&&c(x,"disposed",{configurable:!0,get:function(){return g(this).state===b}}),i(x,p,x.dispose,{name:"dispose"}),i(x,h,v,{nonWritable:!0}),t({global:!0,constructor:!0},{DisposableStack:S})}(),Lo();var t=Bo();No=t.DisposableStack}();var Go,qo,Vo,Jo,Zo,Ho,Ko,Yo,Xo,$o,Qo,ti,ei,ri,ni,oi,ii,si,ci,ui,ai,li,fi,di,pi,hi,vi,yi,gi,mi,bi,wi,Si,xi,ki,Oi,Ei,ji,Pi,Ii,Ti={},Ri={};function Ci(){if(qo)return Go;qo=1;var t=g(),e=Tt(),r=St(),n=function(t){return e.slice(0,t.length)===t};return Go=n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&"string"==typeof Bun.version?"BUN":t.Deno&&"object"==typeof Deno.version?"DENO":"process"===r(t.process)?"NODE":t.window&&t.document?"BROWSER":"REST"}function Di(){if(Jo)return Vo;Jo=1;var t=Ci();return Vo="NODE"===t}function Ai(){if(Ho)return Zo;Ho=1;var t=De().f,e=he(),r=ye()("toStringTag");return Zo=function(n,o,i){n&&!i&&(n=n.prototype),n&&!e(n,r)&&t(n,r,{configurable:!0,value:o})}}function _i(){if(Yo)return Ko;Yo=1;var t=Pt(),e=To(),r=ye(),n=I(),o=r("species");return Ko=function(r){var i=t(r);n&&i&&!i[o]&&e(i,o,{configurable:!0,get:function(){return this}})}}function Mi(){if($o)return Xo;$o=1;var t=wt(),e=P(),r=Et(),n=Rn(),o=Pt(),i=Xe(),s=function(){},c=o("Reflect","construct"),u=/^\s*(?:class|function)\b/,a=t(u.exec),l=!u.test(s),f=function(t){if(!r(t))return!1;try{return c(s,[],t),!0}catch(t){return!1}},d=function(t){if(!r(t))return!1;switch(n(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!a(u,i(t))}catch(t){return!0}};return d.sham=!0,Xo=!c||e((function(){var t;return f(f.call)||!f(Object)||!f((function(){t=!0}))||t}))?d:f}function Wi(){if(ti)return Qo;ti=1;var t=Mi(),e=_t(),r=TypeError;return Qo=function(n){if(t(n))return n;throw new r(e(n)+" is not a constructor")}}function Ni(){if(ri)return ei;ri=1;var t=Ce(),e=Wi(),r=xt(),n=ye()("species");return ei=function(o,i){var s,c=t(o).constructor;return void 0===c||r(s=t(c)[n])?i:e(s)}}function Ui(){if(oi)return ni;oi=1;var t=wt();return ni=t([].slice)}function Fi(){if(si)return ii;si=1;var t=TypeError;return ii=function(e,r){if(e<r)throw new t("Not enough arguments");return e}}function zi(){if(ui)return ci;ui=1;var t=Tt();return ci=/(?:ipad|iphone|ipod).*applewebkit/i.test(t)}function Li(){if(li)return ai;li=1;var t,e,r,n,o=g(),i=xn(),s=Ro(),c=Et(),u=he(),a=P(),l=ao(),f=Ui(),d=be(),p=Fi(),h=zi(),v=Di(),y=o.setImmediate,m=o.clearImmediate,b=o.process,w=o.Dispatch,S=o.Function,x=o.MessageChannel,k=o.String,O=0,E={},j="onreadystatechange";a((function(){t=o.location}));var I=function(t){if(u(E,t)){var e=E[t];delete E[t],e()}},T=function(t){return function(){I(t)}},R=function(t){I(t.data)},C=function(e){o.postMessage(k(e),t.protocol+"//"+t.host)};return y&&m||(y=function(t){p(arguments.length,1);var r=c(t)?t:S(t),n=f(arguments,1);return E[++O]=function(){i(r,void 0,n)},e(O),O},m=function(t){delete E[t]},v?e=function(t){b.nextTick(T(t))}:w&&w.now?e=function(t){w.now(T(t))}:x&&!h?(n=(r=new x).port2,r.port1.onmessage=R,e=s(n.postMessage,n)):o.addEventListener&&c(o.postMessage)&&!o.importScripts&&t&&"file:"!==t.protocol&&!a(C)?(e=C,o.addEventListener("message",R,!1)):e=j in d("script")?function(t){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),I(t)}}:function(t){setTimeout(T(t),0)}),ai={set:y,clear:m}}function Bi(){if(di)return fi;di=1;var t=g(),e=I(),r=Object.getOwnPropertyDescriptor;return fi=function(n){if(!e)return t[n];var o=r(t,n);return o&&o.value}}function Gi(){if(hi)return pi;hi=1;var t=function(){this.head=null,this.tail=null};return t.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},pi=t}function qi(){if(wi)return bi;wi=1;var t,e,r,n,o,i=g(),s=Bi(),c=Ro(),u=Li().set,a=Gi(),l=zi(),f=function(){if(yi)return vi;yi=1;var t=Tt();return vi=/ipad|iphone|ipod/i.test(t)&&"undefined"!=typeof Pebble}(),d=function(){if(mi)return gi;mi=1;var t=Tt();return gi=/web0s(?!.*chrome)/i.test(t)}(),p=Di(),h=i.MutationObserver||i.WebKitMutationObserver,v=i.document,y=i.process,m=i.Promise,b=s("queueMicrotask");if(!b){var w=new a,S=function(){var e,r;for(p&&(e=y.domain)&&e.exit();r=w.get();)try{r()}catch(e){throw w.head&&t(),e}e&&e.enter()};l||p||d||!h||!v?!f&&m&&m.resolve?((n=m.resolve(void 0)).constructor=m,o=c(n.then,n),t=function(){o(S)}):p?t=function(){y.nextTick(S)}:(u=c(u,i),t=function(){u(S)}):(e=!0,r=v.createTextNode(""),new h(S).observe(r,{characterData:!0}),t=function(){r.data=e=!e}),b=function(e){w.head||t(),w.add(e)}}return bi=b}function Vi(){return xi||(xi=1,Si=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}),Si}function Ji(){return Oi?ki:(Oi=1,ki=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}})}function Zi(){if(ji)return Ei;ji=1;var t=g();return Ei=t.Promise}function Hi(){if(Ii)return Pi;Ii=1;var t=g(),e=Zi(),r=Et(),n=wn(),o=Xe(),i=ye(),s=Ci(),c=ae(),u=Rt(),a=e&&e.prototype,l=i("species"),f=!1,d=r(t.PromiseRejectionEvent),p=n("Promise",(function(){var t=o(e),r=t!==String(e);if(!r&&66===u)return!0;if(c&&(!a.catch||!a.finally))return!0;if(!u||u<51||!/native code/.test(t)){var n=new e((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};if((n.constructor={})[l]=i,!(f=n.then((function(){}))instanceof i))return!0}return!(r||"BROWSER"!==s&&"DENO"!==s||d)}));return Pi={CONSTRUCTOR:p,REJECTION_EVENT:d,SUBCLASSING:f}}var Ki,Yi,Xi={};function $i(){if(Ki)return Xi;Ki=1;var t=Mt(),e=TypeError,r=function(r){var n,o;this.promise=new r((function(t,r){if(void 0!==n||void 0!==o)throw new e("Bad Promise constructor");n=t,o=r})),this.resolve=t(n),this.reject=t(o)};return Xi.f=function(t){return new r(t)},Xi}var Qi,ts,es,rs,ns,os,is,ss,cs,us,as,ls,fs,ds,ps,hs,vs,ys={};function gs(){return ts?Qi:(ts=1,Qi={})}function ms(){if(rs)return es;rs=1;var t=ye(),e=gs(),r=t("iterator"),n=Array.prototype;return es=function(t){return void 0!==t&&(e.Array===t||n[r]===t)}}function bs(){if(os)return ns;os=1;var t=Rn(),e=Wt(),r=xt(),n=gs(),o=ye()("iterator");return ns=function(i){if(!r(i))return e(i,o)||e(i,"@@iterator")||n[t(i)]}}function ws(){if(ss)return is;ss=1;var t=R(),e=Mt(),r=Ce(),n=_t(),o=bs(),i=TypeError;return is=function(s,c){var u=arguments.length<2?o(s):c;if(e(u))return r(t(u,s));throw new i(n(s)+" is not iterable")},is}function Ss(){if(us)return cs;us=1;var t=R(),e=Ce(),r=Wt();return cs=function(n,o,i){var s,c;e(n);try{if(!(s=r(n,"return"))){if("throw"===o)throw i;return i}s=t(s,n)}catch(t){c=!0,s=t}if("throw"===o)throw i;if(c)throw s;return e(s),i},cs}function xs(){if(ls)return as;ls=1;var t=Ro(),e=R(),r=Ce(),n=_t(),o=ms(),i=Or(),s=It(),c=ws(),u=bs(),a=Ss(),l=TypeError,f=function(t,e){this.stopped=t,this.result=e},d=f.prototype;return as=function(p,h,v){var y,g,m,b,w,S,x,k=v&&v.that,O=!(!v||!v.AS_ENTRIES),E=!(!v||!v.IS_RECORD),j=!(!v||!v.IS_ITERATOR),P=!(!v||!v.INTERRUPTED),I=t(h,k),T=function(t){return y&&a(y,"normal",t),new f(!0,t)},R=function(t){return O?(r(t),P?I(t[0],t[1],T):I(t[0],t[1])):P?I(t,T):I(t)};if(E)y=p.iterator;else if(j)y=p;else{if(!(g=u(p)))throw new l(n(p)+" is not iterable");if(o(g)){for(m=0,b=i(p);b>m;m++)if((w=R(p[m]))&&s(d,w))return w;return new f(!1)}y=c(p,g)}for(S=E?p.next:y.next;!(x=e(S,y)).done;){try{w=R(x.value)}catch(t){a(y,"throw",t)}if("object"==typeof w&&w&&s(d,w))return w}return new f(!1)},as}function ks(){if(ds)return fs;ds=1;var t=ye()("iterator"),e=!1;try{var r=0,n={next:function(){return{done:!!r++}},return:function(){e=!0}};n[t]=function(){return this},Array.from(n,(function(){throw 2}))}catch(t){}return fs=function(r,n){try{if(!n&&!e)return!1}catch(t){return!1}var o=!1;try{var i={};i[t]=function(){return{next:function(){return{done:o=!0}}}},r(i)}catch(t){}return o}}function Os(){if(hs)return ps;hs=1;var t=Zi(),e=ks(),r=Hi().CONSTRUCTOR;return ps=r||!e((function(e){t.all(e).then(void 0,(function(){}))}))}var Es,js={};var Ps,Is={};var Ts,Rs={};var Cs,Ds,As,_s,Ms={};function Ws(){if(Ds)return Cs;Ds=1;var t=Ce(),e=jt(),r=$i();return Cs=function(n,o){if(t(n),e(o)&&o.constructor===n)return o;var i=r.f(n);return(0,i.resolve)(o),i.promise}}function Ns(){return _s||(_s=1,function(){if(Yi)return Ri;Yi=1;var t,e,r,n=Sn(),o=ae(),i=Di(),s=g(),c=R(),u=rr(),a=jn(),l=Ai(),f=_i(),d=Mt(),p=Et(),h=jt(),v=Po(),y=Ni(),m=Li().set,b=qi(),w=Vi(),S=Ji(),x=Gi(),k=tr(),O=Zi(),E=Hi(),j=$i(),P="Promise",I=E.CONSTRUCTOR,T=E.REJECTION_EVENT,C=E.SUBCLASSING,D=k.getterFor(P),A=k.set,_=O&&O.prototype,M=O,W=_,N=s.TypeError,U=s.document,F=s.process,z=j.f,L=z,B=!!(U&&U.createEvent&&s.dispatchEvent),G="unhandledrejection",q=function(t){var e;return!(!h(t)||!p(e=t.then))&&e},V=function(t,e){var r,n,o,i=e.value,s=1===e.state,u=s?t.ok:t.fail,a=t.resolve,l=t.reject,f=t.domain;try{u?(s||(2===e.rejection&&Y(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?l(new N("Promise-chain cycle")):(n=q(r))?c(n,r,a,l):a(r)):l(i)}catch(t){f&&!o&&f.exit(),l(t)}},J=function(t,e){t.notified||(t.notified=!0,b((function(){for(var r,n=t.reactions;r=n.get();)V(r,t);t.notified=!1,e&&!t.rejection&&H(t)})))},Z=function(t,e,r){var n,o;B?((n=U.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),s.dispatchEvent(n)):n={promise:e,reason:r},!T&&(o=s["on"+t])?o(n):t===G&&w("Unhandled promise rejection",r)},H=function(t){c(m,s,(function(){var e,r=t.facade,n=t.value;if(K(t)&&(e=S((function(){i?F.emit("unhandledRejection",n,r):Z(G,r,n)})),t.rejection=i||K(t)?2:1,e.error))throw e.value}))},K=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){c(m,s,(function(){var e=t.facade;i?F.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)}))},X=function(t,e,r){return function(n){t(e,n,r)}},$=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,J(t,!0))},Q=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new N("Promise can't be resolved itself");var n=q(e);n?b((function(){var r={done:!1};try{c(n,e,X(Q,r,t),X($,r,t))}catch(e){$(r,e,t)}})):(t.value=e,t.state=1,J(t,!1))}catch(e){$({done:!1},e,t)}}};if(I&&(W=(M=function(e){v(this,W),d(e),c(t,this);var r=D(this);try{e(X(Q,r),X($,r))}catch(t){$(r,t)}}).prototype,(t=function(t){A(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new x,rejection:!1,state:0,value:void 0})}).prototype=u(W,"then",(function(t,e){var r=D(this),n=z(y(this,M));return r.parent=!0,n.ok=!p(t)||t,n.fail=p(e)&&e,n.domain=i?F.domain:void 0,0===r.state?r.reactions.add(n):b((function(){V(n,r)})),n.promise})),e=function(){var e=new t,r=D(e);this.promise=e,this.resolve=X(Q,r),this.reject=X($,r)},j.f=z=function(t){return t===M||void 0===t?new e(t):L(t)},!o&&p(O)&&_!==Object.prototype)){r=_.then,C||u(_,"then",(function(t,e){var n=this;return new M((function(t,e){c(r,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete _.constructor}catch(t){}a&&a(_,W)}n({global:!0,constructor:!0,wrap:!0,forced:I},{Promise:M}),l(M,P,!1,!0),f(P)}(),function(){if(vs)return ys;vs=1;var t=Sn(),e=R(),r=Mt(),n=$i(),o=Ji(),i=xs();t({target:"Promise",stat:!0,forced:Os()},{all:function(t){var s=this,c=n.f(s),u=c.resolve,a=c.reject,l=o((function(){var n=r(s.resolve),o=[],c=0,l=1;i(t,(function(t){var r=c++,i=!1;l++,e(n,s,t).then((function(t){i||(i=!0,o[r]=t,--l||u(o))}),a)})),--l||u(o)}));return l.error&&a(l.value),c.promise}})}(),function(){if(Es)return js;Es=1;var t=Sn(),e=ae(),r=Hi().CONSTRUCTOR,n=Zi(),o=Pt(),i=Et(),s=rr(),c=n&&n.prototype;if(t({target:"Promise",proto:!0,forced:r,real:!0},{catch:function(t){return this.then(void 0,t)}}),!e&&i(n)){var u=o("Promise").prototype.catch;c.catch!==u&&s(c,"catch",u,{unsafe:!0})}}(),function(){if(Ps)return Is;Ps=1;var t=Sn(),e=R(),r=Mt(),n=$i(),o=Ji(),i=xs();t({target:"Promise",stat:!0,forced:Os()},{race:function(t){var s=this,c=n.f(s),u=c.reject,a=o((function(){var n=r(s.resolve);i(t,(function(t){e(n,s,t).then(c.resolve,u)}))}));return a.error&&u(a.value),c.promise}})}(),function(){if(Ts)return Rs;Ts=1;var t=Sn(),e=$i();t({target:"Promise",stat:!0,forced:Hi().CONSTRUCTOR},{reject:function(t){var r=e.f(this);return(0,r.reject)(t),r.promise}})}(),function(){if(As)return Ms;As=1;var t=Sn(),e=Pt(),r=ae(),n=Zi(),o=Hi().CONSTRUCTOR,i=Ws(),s=e("Promise"),c=r&&!o;t({target:"Promise",stat:!0,forced:r||o},{resolve:function(t){return i(c&&this===s?n:this,t)}})}()),Ti}var Us,Fs={};var zs,Ls,Bs,Gs,qs,Vs={};function Js(){if(Bs)return Vs;Bs=1;var t=R(),e=rr(),r=Pt(),n=Wt(),o=he(),i=ye(),s=function(){if(Ls)return zs;Ls=1;var t,e,r=g(),n=fe(),o=Et(),i=lo(),s=$n(),c=rr(),u=ye(),a=ae(),l=u("asyncIterator"),f=r.AsyncIterator,d=n.AsyncIteratorPrototype;if(d)t=d;else if(o(f))t=f.prototype;else if(n.USE_FUNCTION_CONSTRUCTOR||r.USE_FUNCTION_CONSTRUCTOR)try{e=s(s(s(Function("return async function*(){}()")()))),s(e)===Object.prototype&&(t=e)}catch(t){}return t?a&&(t=i(t)):t={},o(t[l])||c(t,l,(function(){return this})),zs=t}(),c=i("asyncDispose"),u=r("Promise");return o(s,c)||e(s,c,(function(){var e=this;return new u((function(r,o){var i=n(e,"return");i?u.resolve(t(i,e)).then((function(){r(void 0)}),o):r(void 0)}))})),Vs}!function(){if(qs)return Gs;qs=1,Mn(),Ln(),Jn(),Ns(),fo(),function(){if(Us)return Fs;Us=1;var t=Sn(),e=I(),r=Pt(),n=Mt(),o=Po(),i=rr(),s=Io(),c=To(),u=ye(),a=tr(),l=Co(),f=r("Promise"),d=r("SuppressedError"),p=ReferenceError,h=u("asyncDispose"),v=u("toStringTag"),y="AsyncDisposableStack",g=a.set,m=a.getterFor(y),b="async-dispose",w="disposed",S=function(t){var e=m(t);if(e.state===w)throw new p("AsyncDisposableStack already disposed");return e},x=function(){g(o(this,k),{type:y,state:"pending",stack:[]}),e||(this.disposed=!1)},k=x.prototype;s(k,{disposeAsync:function(){var t=this;return new f((function(r,n){var o=m(t);if(o.state===w)return r(void 0);o.state=w,e||(t.disposed=!0);var i,s=o.stack,c=s.length,u=!1,a=function(t){u?i=new d(t,i):(u=!0,i=t),l()},l=function(){if(c){var t=s[--c];s[c]=void 0;try{f.resolve(t()).then(l,a)}catch(t){a(t)}}else o.stack=void 0,u?n(i):r(void 0)};l()}))},use:function(t){return l(S(this),t,b),t},adopt:function(t,e){var r=S(this);return n(e),l(r,void 0,b,(function(){return e(t)})),t},defer:function(t){var e=S(this);n(t),l(e,void 0,b,t)},move:function(){var t=S(this),r=new x;return m(r).stack=t.stack,t.stack=[],t.state=w,e||(this.disposed=!0),r}}),e&&c(k,"disposed",{configurable:!0,get:function(){return m(this).state===w}}),i(k,h,k.disposeAsync,{name:"disposeAsync"}),i(k,v,y,{nonWritable:!0}),t({global:!0,constructor:!0},{AsyncDisposableStack:x})}(),Js(),Lo();var t=Bo();Gs=t.AsyncDisposableStack}();var Zs,Hs,Ks,Ys,Xs,$s,Qs={},tc={};function ec(){if(Zs)return tc;Zs=1;var t=ye();return tc.f=t,tc}function rc(){if(Ks)return Hs;Ks=1;var t=Bo(),e=he(),r=ec(),n=De().f;return Hs=function(o){var i=t.Symbol||(t.Symbol={});e(i,o)||n(i,o,{value:r.f(o)})}}!function(){if($s)return Xs;$s=1,function(){if(Ys)return Qs;Ys=1;var t=g(),e=rc(),r=De().f,n=Se().f,o=t.Symbol;if(e("asyncDispose"),o){var i=n(o,"asyncDispose");i.enumerable&&i.configurable&&i.writable&&r(o,"asyncDispose",{value:i.value,enumerable:!1,configurable:!1,writable:!1})}}();var t=ec();Xs=t.f("asyncDispose")}();var nc,oc,ic,sc={};!function(){if(ic)return oc;ic=1,function(){if(nc)return sc;nc=1;var t=g(),e=rc(),r=De().f,n=Se().f,o=t.Symbol;if(e("dispose"),o){var i=n(o,"dispose");i.enumerable&&i.configurable&&i.writable&&r(o,"dispose",{value:i.value,enumerable:!1,configurable:!1,writable:!1})}}();var t=ec();oc=t.f("dispose")}();var cc,uc,ac,lc,fc,dc,pc,hc,vc,yc,gc,mc,bc,wc,Sc,xc,kc,Oc,Ec,jc,Pc={},Ic={exports:{}},Tc={};function Rc(){if(cc)return Tc;cc=1;var t=St(),e=Ot(),r=Pr().f,n=Ui(),o="object"==typeof self&&self&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(self):[];return Tc.f=function(i){return o&&"Window"===t(i)?function(t){try{return r(t)}catch(t){return n(o)}}(i):r(e(i))},Tc}function Cc(){if(fc)return lc;fc=1;var t=P(),e=jt(),r=St(),n=function(){if(ac)return uc;ac=1;var t=P();return uc=t((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))}(),o=Object.isExtensible,i=t((function(){}));return lc=i||n?function(t){return!!e(t)&&((!n||"ArrayBuffer"!==r(t))&&(!o||o(t)))}:o}function Dc(){if(hc)return Ic.exports;hc=1;var t=Sn(),e=wt(),r=Qe(),n=jt(),o=he(),i=De().f,s=Pr(),c=Rc(),u=Cc(),a=ve(),l=function(){if(pc)return dc;pc=1;var t=P();return dc=!t((function(){return Object.isExtensible(Object.preventExtensions({}))}))}(),f=!1,d=a("meta"),p=0,h=function(t){i(t,d,{value:{objectID:"O"+p++,weakData:{}}})},v=Ic.exports={enable:function(){v.enable=function(){},f=!0;var r=s.f,n=e([].splice),o={};o[d]=1,r(o).length&&(s.f=function(t){for(var e=r(t),o=0,i=e.length;o<i;o++)if(e[o]===d){n(e,o,1);break}return e},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,d)){if(!u(t))return"F";if(!e)return"E";h(t)}return t[d].objectID},getWeakData:function(t,e){if(!o(t,d)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[d].weakData},onFreeze:function(t){return l&&f&&u(t)&&!o(t,d)&&h(t),t}};return r[d]=!0,Ic.exports}function Ac(){if(wc)return bc;wc=1;var t=Sn(),e=R(),r=ae(),n=Ye(),o=Et(),i=function(){if(mc)return gc;mc=1;var t=zo().IteratorPrototype,e=lo(),r=bt(),n=Ai(),o=gs(),i=function(){return this};return gc=function(s,c,u,a){var l=c+" Iterator";return s.prototype=e(t,{next:r(+!a,u)}),n(s,l,!1,!0),o[l]=i,s}}(),s=$n(),c=jn(),u=Ai(),a=Ae(),l=rr(),f=ye(),d=gs(),p=zo(),h=n.PROPER,v=n.CONFIGURABLE,y=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=f("iterator"),b="keys",w="values",S="entries",x=function(){return this};return bc=function(n,f,p,k,O,E,j){i(p,f,k);var P,I,T,R=function(t){if(t===O&&M)return M;if(!g&&t&&t in A)return A[t];switch(t){case b:case w:case S:return function(){return new p(this,t)}}return function(){return new p(this)}},C=f+" Iterator",D=!1,A=n.prototype,_=A[m]||A["@@iterator"]||O&&A[O],M=!g&&_||R(O),W="Array"===f&&A.entries||_;if(W&&(P=s(W.call(new n)))!==Object.prototype&&P.next&&(r||s(P)===y||(c?c(P,y):o(P[m])||l(P,m,x)),u(P,C,!0,!0),r&&(d[C]=x)),h&&O===w&&_&&_.name!==w&&(!r&&v?a(A,"name",w):(D=!0,M=function(){return e(_,this)})),O)if(I={values:R(w),keys:E?M:R(b),entries:R(S)},j)for(T in I)(g||D||!(T in A))&&l(A,T,I[T]);else t({target:f,proto:!0,forced:g||D},I);return r&&!j||A[m]===M||l(A,m,M,{name:O}),d[f]=M,I}}function _c(){return xc?Sc:(xc=1,Sc=function(t,e){return{value:t,done:e}})}function Mc(){return jc||(jc=1,Ec||(Ec=1,function(){if(yc)return vc;yc=1;var t=Sn(),e=g(),r=wt(),n=wn(),o=rr(),i=Dc(),s=xs(),c=Po(),u=Et(),a=xt(),l=jt(),f=P(),d=ks(),p=Ai(),h=In();return vc=function(v,y,g){var m=-1!==v.indexOf("Map"),b=-1!==v.indexOf("Weak"),w=m?"set":"add",S=e[v],x=S&&S.prototype,k=S,O={},E=function(t){var e=r(x[t]);o(x,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return!(b&&!l(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return b&&!l(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return!(b&&!l(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(n(v,!u(S)||!(b||x.forEach&&!f((function(){(new S).entries().next()})))))k=g.getConstructor(y,v,m,w),i.enable();else if(n(v,!0)){var j=new k,P=j[w](b?{}:-0,1)!==j,I=f((function(){j.has(1)})),T=d((function(t){new S(t)})),R=!b&&f((function(){for(var t=new S,e=5;e--;)t[w](e,e);return!t.has(-0)}));T||((k=y((function(t,e){c(t,x);var r=h(new S,t,k);return a(e)||s(e,r[w],{that:r,AS_ENTRIES:m}),r}))).prototype=x,x.constructor=k),(I||R)&&(E("delete"),E("has"),m&&E("get")),(R||P)&&E(w),b&&x.clear&&delete x.clear}return O[v]=k,t({global:!0,constructor:!0,forced:k!==S},O),p(k,v),b||g.setStrong(k,v,m),k}}()("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),function(){if(Oc)return kc;Oc=1;var t=lo(),e=To(),r=Io(),n=Ro(),o=Po(),i=xt(),s=xs(),c=Ac(),u=_c(),a=_i(),l=I(),f=Dc().fastKey,d=tr(),p=d.set,h=d.getterFor;return kc={getConstructor:function(c,u,a,d){var v=c((function(e,r){o(e,y),p(e,{type:u,index:t(null),first:void 0,last:void 0,size:0}),l||(e.size=0),i(r)||s(r,e[d],{that:e,AS_ENTRIES:a})})),y=v.prototype,g=h(u),m=function(t,e,r){var n,o,i=g(t),s=b(t,e);return s?s.value=r:(i.last=s={index:o=f(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=s),n&&(n.next=s),l?i.size++:t.size++,"F"!==o&&(i.index[o]=s)),t},b=function(t,e){var r,n=g(t),o=f(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key===e)return r};return r(y,{clear:function(){for(var e=g(this),r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),r=r.next;e.first=e.last=void 0,e.index=t(null),l?e.size=0:this.size=0},delete:function(t){var e=this,r=g(e),n=b(e,t);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first===n&&(r.first=o),r.last===n&&(r.last=i),l?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=g(this),o=n(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(o(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!b(this,t)}}),r(y,a?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),l&&e(y,"size",{configurable:!0,get:function(){return g(this).size}}),v},setStrong:function(t,e,r){var n=e+" Iterator",o=h(e),i=h(n);c(t,e,(function(t,e){p(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?u("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=void 0,u(void 0,!0))}),r?"entries":"values",!r,!0),a(e)}},kc}()))),Pc}var Wc,Nc,Uc,Fc,zc,Lc,Bc,Gc,qc,Vc,Jc,Zc,Hc,Kc,Yc,Xc,$c,Qc,tu,eu,ru,nu,ou,iu,su,cu={};function uu(){if(Nc)return Wc;Nc=1;var t=wt(),e=Set.prototype;return Wc={Set,add:t(e.add),has:t(e.has),remove:t(e.delete),proto:e}}function au(){if(Fc)return Uc;Fc=1;var t=uu().has;return Uc=function(e){return t(e),e}}function lu(){if(Lc)return zc;Lc=1;var t=R();return zc=function(e,r,n){for(var o,i,s=n?e:e.iterator,c=e.next;!(o=t(c,s)).done;)if(void 0!==(i=r(o.value)))return i},zc}function fu(){if(Gc)return Bc;Gc=1;var t=wt(),e=lu(),r=uu(),n=r.Set,o=r.proto,i=t(o.forEach),s=t(o.keys),c=s(new n).next;return Bc=function(t,r,n){return n?e({iterator:s(t),next:c},r):i(t,r)},Bc}function du(){return Kc?Hc:(Kc=1,Hc=function(t){return{iterator:t,next:t.next,done:!1}})}function pu(){if(Xc)return Yc;Xc=1;var t=Mt(),e=Ce(),r=R(),n=Sr(),o=du(),i="Invalid size",s=RangeError,c=TypeError,u=Math.max,a=function(e,r){this.set=e,this.size=u(r,0),this.has=t(e.has),this.keys=t(e.keys)};return a.prototype={getIterator:function(){return o(e(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},Yc=function(t){e(t);var r=+t.size;if(r!=r)throw new c(i);var o=n(r);if(o<0)throw new s(i);return new a(t,o)}}function hu(){if(Qc)return $c;Qc=1;var t=au(),e=uu(),r=function(){if(Vc)return qc;Vc=1;var t=uu(),e=fu(),r=t.Set,n=t.add;return qc=function(t){var o=new r;return e(t,(function(t){n(o,t)})),o},qc}(),n=function(){if(Zc)return Jc;Zc=1;var t=kn(),e=uu();return Jc=t(e.proto,"size","get")||function(t){return t.size},Jc}(),o=pu(),i=fu(),s=lu(),c=e.has,u=e.remove;return $c=function(e){var a=t(this),l=o(e),f=r(a);return n(a)<=l.size?i(a,(function(t){l.includes(t)&&u(f,t)})):s(l.getIterator(),(function(t){c(a,t)&&u(f,t)})),f}}function vu(){if(eu)return tu;eu=1;var t=Pt(),e=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};return tu=function(r){var n=t("Set");try{(new n)[r](e(0));try{return(new n)[r](e(-1)),!1}catch(t){return!0}}catch(t){return!1}}}function yu(){if(ou)return nu;ou=1;var t=g(),e=wt();return nu=function(r,n){return e(t[r].prototype[n])}}!function(){if(su)return iu;su=1,Mc(),function(){if(ru)return cu;ru=1;var t=Sn(),e=hu();t({target:"Set",proto:!0,real:!0,forced:!vu()("difference")},{difference:e})}();var t=yu();iu=t("Set","difference")}();var gu,mu,bu,wu={};!function(){if(bu)return mu;bu=1,Ns(),function(){if(gu)return wu;gu=1;var t=Sn(),e=$i();t({target:"Promise",stat:!0},{withResolvers:function(){var t=e.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})}();var t=R(),e=Et(),r=Bo().Promise,n=r.withResolvers;mu=function(){return t(n,e(this)?this:r)}}();const Su=!1;class xu{constructor(t,e){a(this,"name",void 0),a(this,"message",void 0),a(this,"cause",void 0),a(this,"stack",void 0),this.name=this.constructor===xu?"Error":this.constructor.name,this.message=t,this.cause=e,this.stack=xu.isStackTraceEnabled?function(t,e){if(!t)return;const r=t.split("\n");return r.splice(1,e.skip),r.join("\n")}(new Error(t).stack,{skip:1}):void 0}toString(){return Ru(this,!1)}[Symbol.toStringTag](){return this.toString()}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause instanceof xu?this.cause:ku(this.cause)}}}function ku(t){if(void 0!==t)return t instanceof xu?t.toJSON():{name:t.name,message:t.message,stack:t.stack,cause:t.cause instanceof Error?ku(t.cause):t.cause}}function Ou(t){if(t instanceof xu)return t;if(t instanceof Error){const e=new xu(t.message);return Reflect.set(e,"name",t.name),Reflect.set(e,"stack",t.stack),t.cause&&Reflect.set(e,"cause",Ou(t.cause)),e}return"object"==typeof(e=t)&&null!==e&&"message"in e&&"string"==typeof e.message?Eu(t):new ju(t);var e}function Eu(t){const{message:e,name:r,cause:n,stack:o}=t,i=new xu(String(null!=e?e:"Unknown error"));return r&&Reflect.set(i,"name",String(r)),o&&Reflect.set(i,"stack",String(o)),n&&Reflect.set(i,"cause",Eu(n)),i}a(xu,"isStackTraceEnabled",!0);class ju extends xu{constructor(t){super("An unknown error occurred: "+String(t)),a(this,"thrownError",void 0),this.thrownError=t}toJSON(){return f(f({},super.toJSON()),{},{thrownError:this.thrownError})}}let Pu=class extends xu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Object has been disposed"),a(this,"kind","ReferenceError")}};class Iu extends xu{constructor(t){super("Unreachable case: ".concat(String(t))),a(this,"value",void 0),this.value=t}}class Tu extends xu{constructor(t){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),a(this,"errors",void 0),this.errors=t.flatMap((t=>t instanceof Tu?t.errors:[t]))}toString(){if(1===this.errors.length)return Ru(this.errors[0]);const t=String(this.errors.length).length+2;return"AggregateError: "+this.message+"(total ".concat(this.errors.length," errors)")+"\n"+this.errors.map(((e,r)=>"".concat(r+1,". ").padStart(t)+Du(Ru(e),t))).join("\n")}toJSON(){return f(f({},super.toJSON()),{},{errors:this.errors.map(ku)})}}function Ru(t){var e;let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(r&&t instanceof xu)return t.toString();const n="CustomError"===t.name?"Error":null!==(e=Reflect.get(t,"kind"))&&void 0!==e?e:t.name;let o="".concat(n,": ").concat(t.message);if(t.stack){const e=Cu({stack:t.stack,message:t.message});o+="\n".concat(e)}return t.cause&&(o+="\nCaused by ".concat(Du(Ru(Ou(t.cause)),2))),o}function Cu(t){let{stack:e,message:r}=t;const n=e.indexOf(r);return(-1===n?e:e.slice(n+r.length)).replace(/^\s*\n/,"")}function Du(t,e){const r=" ".repeat(e);return t.replace(/\r?\n/g,(t=>t+r)).trimStart()}const Au=function(t){let e=t;for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];const i=n.length;for(let t=0;t<i;t++)e=n[t](e);return e};function _u(){}function Mu(t){return e=>(t(e),e)}const Wu=Symbol("transferable"),Nu=new Map;function Uu(t,e){return Nu.set(e.stableUniqueIdentifier,new WeakRef(t)),Object.defineProperty(t,Wu,{value:e,enumerable:!1,writable:!1,configurable:!1}),t}function Fu(t){return new Promise(((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)}))}let zu;function Lu(){return zu||(zu=function(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Fu(r);return(t,r)=>n.then((n=>r(n.transaction(e,t).objectStore(e))))}("keyval-store","keyval")),zu}function Bu(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lu();return r("readwrite",(r=>(r.put(e,t),Fu(r.transaction))))}class Gu{constructor(){a(this,"writers",new Set)}write(t){for(const e of this.writers)e.write(t)}}var qu=new WeakMap,Vu=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,Hu=new WeakSet,Ku=new WeakMap,Yu=new WeakMap;class Xu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>null;u(this,Hu),s(this,qu,void 0),s(this,Vu,void 0),s(this,Ju,null),s(this,Zu,null),s(this,Ku,new Map),s(this,Yu,Date.now()),c(qu,this,t),c(Vu,this,e)}write(t){switch(t.level){case"error":console.error(...n(Hu,this,Qu).call(this,t),...t.args.flatMap(((t,e)=>{const r=ra(t);return 0===e&&"string"==typeof r?na(t)?["\n".concat(r),t]:"\n".concat(r):na(t)?[r,t]:r})));break;case"warn":console.warn(...n(Hu,this,Qu).call(this,t),...t.args.map(ra));break;case"info":console.info(...n(Hu,this,Qu).call(this,t),...t.args.map(ra));break;case"verbose":if(t.logger&&!n(Hu,this,$u).call(this,t.logger))return;console.debug(...n(Hu,this,Qu).call(this,t),...t.args.map(ra))}}}function $u(t){const e=i(Vu,this).call(this);if(i(Ju,this)!==JSON.stringify(e)){if(e&&"*"!==e){const t=(Array.isArray(e)?e.map(String):[String(e)]).map((t=>t.replace(/[*]/g,".*"))),r=t.filter((t=>!t.startsWith("!"))),n=t.filter((t=>t.startsWith("!"))).map((t=>t.slice(1)));0===n.length&&n.push("\0");const o=new RegExp("^(".concat(r.join("|"),")"),"i"),i=new RegExp("^(".concat(n.join("|"),")"),"i");console.info("Inkwell: Logs are filtered using filter:",e,"inclusion:",o.source,"exclusion:",i.source),c(Zu,this,[o,i])}else c(Zu,this,null);c(Ju,this,JSON.stringify(e))}return i(Zu,this)?i(Zu,this)[0].test(t)&&!i(Zu,this)[1].test(t):Su}function Qu(t){var e;const r=i(qu,this),o="background: ".concat(n(Hu,this,ea).call(this),"; color: white; padding: 2px 4px; border-radius: 2px; font-size: 0.6em; margin-right: 0.5em; font-weight: bold");if(null===t.logger&&null===t.context)return["%c".concat(r,"%c ").concat(new Date(t.timestamp).toISOString()," ").concat(t.text),o,""];const s=n(Hu,this,ta).call(this,null!==(e=t.logger)&&void 0!==e?e:"",t.context),c=[t.logger,t.context].filter(Boolean).join("|"),u="background: ".concat(s,"; color: white");return["%c".concat(r,"%c ").concat(new Date(t.timestamp).toISOString()," [").concat(c,"]%c ").concat(t.text),o,u,""]}function ta(t,e){const r=null!==e?"".concat(t,"|").concat(e):t;if(!i(Ku,this).has(r)){const t=137.508*i(Ku,this).size;i(Ku,this).set(r,"hsl(".concat(t,", 100%, 20%)"))}return i(Ku,this).get(r)}function ea(){const t=i(Yu,this)%100*137.508;return"hsl(".concat(t,", 100%, 20%)")}function ra(t){return!t||"object"!=typeof t||Array.isArray(t)?t:Symbol.iterator in t?"[Iterable ".concat(function(t){(Reflect.has(t,Symbol.toStringTag)||Reflect.has(t,"toString"))&&Reflect.get(t,Symbol.toStringTag);const e=Reflect.getPrototypeOf(t);if(null!=e&&e.constructor)return"".concat(e.constructor.name);return"Object"}(t),"]"):function(t){const e=Reflect.get(t,"toString");if("function"==typeof e&&e!==Object.prototype.toString)return!0;if(Reflect.has(t,Symbol.toStringTag))return!0;return!1}(t)?function(t){return String(t)}(t):t}function na(t){return"object"==typeof t&&null!==t&&"string"==typeof Reflect.get(t,"message")}var oa=new WeakMap,ia=new WeakMap;class sa{constructor(){s(this,oa,[]),s(this,ia,null)}get messages(){return i(oa,this)}write(t){const e="".concat(new Date(t.timestamp).toISOString()," ").concat(t.level.toUpperCase()," ").concat(t.text," ").concat(t.args.map(ca).join(" "));i(ia,this)?i(ia,this).postMessage(e):i(oa,this).push(e)}clear(){i(oa,this).length=0}toTransferable(){const t=new MessageChannel;return t.port1.onmessage=t=>{"string"==typeof t.data&&i(oa,this).push(t.data)},{kind:"MemoryLogWriter",port:t.port2}}static fromTransferable(t){const e=new sa;return c(ia,e,t.port),e}async copyToClipboard(){const t=i(oa,this).join("\n"),e=Reflect.get(globalThis,"copy");"function"==typeof e?e(t):await navigator.clipboard.writeText(t)}}function ca(t){if(!t||"object"!=typeof t||Array.isArray(t))return t;if(Symbol.iterator in t)return"[Iterable ".concat(ua(t),"]");if(function(t){const e=Reflect.get(t,"toString");if("function"==typeof e&&e!==Object.prototype.toString)return!0;if(Reflect.has(t,Symbol.toStringTag))return!0;return!1}(t))return function(t){return String(t)}(t);try{return JSON.stringify(t,null,2)}catch(e){return"[Non-Serializable Object ".concat(ua(t),"]")}}function ua(t){(Reflect.has(t,Symbol.toStringTag)||Reflect.has(t,"toString"))&&Reflect.get(t,Symbol.toStringTag);const e=Reflect.getPrototypeOf(t);return null!=e&&e.constructor?"".concat(e.constructor.name):"Object"}var aa=new WeakMap,la=new WeakMap,fa=new WeakMap;class da{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s(this,aa,void 0),s(this,la,void 0),s(this,fa,void 0),c(aa,this,e),c(la,this,r),c(fa,this,t)}write(t){var e;i(fa,this).write(f(f({},t),{},{context:null!==(e=t.context)&&void 0!==e?e:i(la,this),logger:t.logger?"".concat(t.logger,"/").concat(i(aa,this)):i(aa,this)}))}}var pa=new WeakMap,ha=new WeakMap,va=new WeakMap,ya=new WeakMap,ga=new WeakSet;class ma{constructor(t){let{maximumTokens:e,tokensPerSecond:r}=t;u(this,ga),s(this,pa,void 0),s(this,ha,void 0),s(this,va,void 0),s(this,ya,void 0),c(pa,this,Math.abs(r/1e3)),c(ha,this,Math.max(1,e)),c(va,this,i(ha,this)),c(ya,this,performance.now())}take(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return!!this.canTake(t)&&(c(va,this,i(va,this)-t),!0)}canTake(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return n(ga,this,ba).call(this),i(va,this)>=t}}function ba(){const t=performance.now(),e=Math.floor((t-i(ya,this))*i(pa,this));e>0&&(c(va,this,Math.min(i(ha,this),i(va,this)+e)),c(ya,this,t))}var wa=new WeakMap,Sa=new WeakMap;class xa{constructor(t){let{eventsPerSecond:e,eventsPerMinute:r}=t;s(this,wa,void 0),s(this,Sa,void 0),c(wa,this,new ma({maximumTokens:e,tokensPerSecond:e})),c(Sa,this,new ma({maximumTokens:r,tokensPerSecond:r/60}))}shouldSelect(){return i(wa,this).canTake()&&i(Sa,this).take()&&i(wa,this).take()}}const ka={patterns:{email:{regex:'(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',prefixes:[],priority:0,description:"Email"},url:{regex:"[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b((([-a-zA-Z0-9()@%_\\+~#&//=\\[\\]])|([.:?](?!$|\\s)))*)?",prefixes:["http://","https://"],priority:1,description:"URL"},creditCardNumber:{regex:"(\\d{4}\\d{4}\\d{4}\\d{4})|(\\d{4}\\-\\d{4}\\-\\d{4}\\-\\d{4})|(\\d{4}\\s\\d{4}\\s\\d{4}\\s\\d{4})",prefixes:[],priority:2,description:"Credit card number"},phoneNumber:{regex:"[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}",prefixes:[],priority:3,description:"Phone number"},usSSN:{regex:"[0-9]{3}[-]*[0-9]{2}[-]*[0-9]{4}",prefixes:[],priority:4,description:"US SSN"},caSSN:{regex:"[0-9]{3}[\\s\\-]?[0-9]{3}[\\s\\-]?[0-9]{3}",prefixes:[],priority:5,description:"CA SIN"},ukSSN:{regex:"[A-Z]{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?[A-Z]",prefixes:[],priority:6,description:"UK NI NO"},iban:{regex:"[A-Z]{2}(-?|\\ )\\d{2}-?(?:\\ ?[A-Z]{4}-?)?(?:\\d{13,}|(?:\\ \\d{4}){3,5}\\ \\d{1,4})",prefixes:[],priority:7,description:"IBAN number"},variousID:{regex:"[A-Z]{0,2}(?:\\d{3,8}[\\ -])(?:\\d{2,8}[\\ -]){1,4}\\d{2,4}|\\d{7}[A-Z]?|\\d{5,18}",prefixes:[],priority:8,description:"Various ID number"}}};const Oa="a".charCodeAt(0),Ea="z".charCodeAt(0),ja="A".charCodeAt(0),Pa="Z".charCodeAt(0),Ia="0".charCodeAt(0),Ta="9".charCodeAt(0),Ra=t=>t>=Oa&&t<=Ea,Ca=t=>t>=ja&&t<=Pa,Da=t=>t>=Ia&&t<=Ta;function Aa(t,e){const r=new Array(t.length);let n=e;for(let e=t.length-1;e>=0;e--){const o=t.charCodeAt(e);Ra(o)?(r[e]=Oa+(e+n)%26,n/=26):Ca(o)?(r[e]=ja+(e+n)%26,n/=26):Da(o)?(r[e]=Ia+(e+1+n)%10,n/=10):r[e]=o}return String.fromCharCode(...r)}function _a(t,e){let{groups:r,index:n}=e;const[o,i]=Object.entries(r).find((t=>{let[,e]=t;return void 0!==e}));return f(f({id:o},t.patterns[o]),{},{text:i,start:n,end:n+i.length})}class Ma{constructor(t){a(this,"dlpConfiguration",void 0),a(this,"dlpRegex",void 0),a(this,"seed",0),this.dlpConfiguration=t,this.dlpRegex=function(t){let{patterns:e}=t;return new RegExp(Object.entries(e).sort(((t,e)=>{let[,{priority:r}]=t,[,{priority:n}]=e;return r-n})).map((t=>{let[e,{regex:r,prefixes:n}]=t;return r=n.length?"(".concat(n.join("|"),")").concat(r):r,"(?<".concat(e,">").concat(r,")")})).join("|"),"g")}(this.dlpConfiguration)}matchAll(t){const e=[];for(this.dlpRegex.lastIndex=0;;){const r=this.dlpRegex.exec(t);if(!r)break;const n={groups:r.groups,index:r.index};e.push(_a(this.dlpConfiguration,n))}return this.dlpRegex.lastIndex=0,e}sanitizedReplacement(t){return function(t,e){let{prefixes:r,text:n}=t;const o=r.find((t=>0===n.indexOf(t)));return void 0!==o?"".concat(o).concat(Aa(n.slice(o.length),e)):Aa(n,e)}(t,this.seed++)}sanitize(t){var e=this;return t.replace(this.dlpRegex,(function(){var t,r;const n={groups:(t=arguments.length-1,t<0||arguments.length<=t?void 0:arguments[t]),index:(r=arguments.length-3,r<0||arguments.length<=r?void 0:arguments[r])},o=_a(e.dlpConfiguration,n);return e.sanitizedReplacement(o)}))}unsanitize(t){return t}}class Wa extends Ma{sanitize(t){const e=super.sanitize(t);return this.seed=0,e}}const Na=new Wa(ka),Ua=Na.sanitize.bind(Na),Fa={error:"ERROR",warn:"WARN",info:"INFO",verbose:"DEBUG"};var za=new WeakMap,La=new WeakMap,Ba=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Va=new WeakSet;class Ja{constructor(t){u(this,Va),s(this,za,new Map),s(this,La,void 0),s(this,Ba,void 0),s(this,Ga,0),s(this,qa,null),c(La,this,t),c(Ba,this,new xa({eventsPerSecond:t.logsPerSecond,eventsPerMinute:t.logsPerMinute}))}write(t){var e;"verbose"!==t.level&&("info"===t.level&&void 0===t.delivery||!1!==t.delivery&&(i(Ba,this).shouldSelect()?n(Va,this,Ha).call(this,!0===t.delivery?{}:t.delivery,n(Va,this,Za).call(this,t)):c(Ga,this,(e=i(Ga,this),++e))))}[Symbol.dispose](){null!==i(qa,this)&&(clearTimeout(i(qa,this)),c(qa,this,null)),n(Va,this,Ya).call(this)}toTransferable(){return{kind:"FeLogWriter",options:i(La,this)}}static fromTransferable(t){return new Ja(t.options)}}function Za(t){var e;return JSON.stringify({timestamp:t.timestamp,level:Fa[t.level],message:t.text,logger:null!==(e=t.logger)&&void 0!==e?e:"root",application:i(La,this).application,version:i(La,this).version,client:i(La,this).client,env:i(La,this).environment,session:i(La,this).sessionId,extra:"error"===t.level?t.args.slice(1):t.args,exception:"error"===t.level?t.args[0]:void 0},((t,e)=>"string"==typeof e?Ua(e):e))}function Ha(t,e){var r,o;const s="".concat(null!==(r=t.dataTier)&&void 0!==r?r:"infrequent",":").concat(null!==(o=t.retentionInDays)&&void 0!==o?o:30),c=i(za,this).get(s);c?c.messages.push(e):i(za,this).set(s,{options:t,messages:[e]}),n(Va,this,Ka).call(this)}function Ka(){if(null!==i(qa,this))return;c(qa,this,setTimeout((()=>{c(qa,this,null),n(Va,this,Ya).call(this)}),7500))}function Ya(){for(const t of i(za,this).values())n(Va,this,Xa).call(this,t.options,t.messages);i(Ga,this)>0&&(n(Va,this,Xa).call(this,{retentionInDays:30,dataTier:"infrequent"},[n(Va,this,Za).call(this,{timestamp:Date.now(),level:"warn",logger:"FeLogWriter",context:null,text:"Dropped log messages due to rate limiting.",delivery:!0,args:[{count:i(Ga,this)}]})]),c(Ga,this,0)),i(za,this).clear()}function Xa(t,e){let{retentionInDays:r=30,dataTier:n="infrequent"}=t;if(0===e.length)return;const o="[".concat(e.join(","),"]"),i=new URL("https://f-log-inkwell.grammarly.io/batch/log");i.searchParams.set("retention",String(r)),i.searchParams.set("datatier",n),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Promise(((r,n)=>{let o=0;const i=()=>{t().then(r).catch((t=>{o++<e?setTimeout(i,2**o*1e3):n(t)}))};i()}))}((async()=>{var t;const e=await fetch(i,{body:o,method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},keepalive:!0});if(null===(t=e.body)||void 0===t||t.cancel(),!e.ok)throw new Error("Failed to send logs: ".concat(e.status," ").concat(e.statusText))})).catch((t=>{Su}))}var $a=new WeakMap;class Qa{constructor(t){a(this,"writer",void 0),s(this,$a,new Map),this.writer=t}error(){if(1===arguments.length){const t="string"==typeof(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:"",e="string"==typeof(arguments.length<=0?void 0:arguments[0])?null:arguments.length<=0?void 0:arguments[0];this.writer.write({context:null,timestamp:Date.now(),logger:null,level:"error",text:t,args:null===e?[]:[e],delivery:!1})}else if(2===arguments.length&&"string"==typeof(arguments.length<=0?void 0:arguments[0])){var t;const e=arguments.length<=0?void 0:arguments[0],r="object"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1])&&"message"in(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:null,n=null===r?arguments.length<=1?void 0:arguments[1]:void 0;this.writer.write(f(f({context:null},n),{},{timestamp:Date.now(),logger:null,level:"error",text:e,args:null===r?[]:[r],delivery:null!==(t=null==n?void 0:n.delivery)&&void 0!==t&&t}))}else if(2===arguments.length){var e;const t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1];this.writer.write(f(f({context:null},r),{},{timestamp:Date.now(),logger:null,level:"error",text:t.message,args:[t],delivery:null!==(e=null==r?void 0:r.delivery)&&void 0!==e&&e}))}else{var r;const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2];this.writer.write(f(f({context:null},n),{},{timestamp:Date.now(),logger:null,level:"error",text:t,args:[e],delivery:null!==(r=null==n?void 0:n.delivery)&&void 0!==r&&r}))}}warn(t,e){var r;this.writer.write(f(f({context:null},e),{},{timestamp:Date.now(),logger:null,level:"warn",text:t,args:[],delivery:null!==(r=null==e?void 0:e.delivery)&&void 0!==r&&r}))}info(t,e){var r;this.writer.write(f(f({context:null},e),{},{timestamp:Date.now(),logger:null,level:"info",text:t,args:[],delivery:null!==(r=null==e?void 0:e.delivery)&&void 0!==r&&r}))}verbose(t,e){var r;const n="string"==typeof t?{}:t,o="string"==typeof t?t:e;for(var i=arguments.length,s=new Array(i>2?i-2:0),c=2;c<i;c++)s[c-2]=arguments[c];const u="string"==typeof t?void 0===e?s:[e,...s]:s;this.writer.write(f(f({context:null},n),{},{logger:null,timestamp:Date.now(),level:"verbose",text:o,args:u,delivery:null!==(r=null==n?void 0:n.delivery)&&void 0!==r&&r}))}createLogger(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=null!==(e=i($a,this).get(t))&&void 0!==e?e:0;try{return new Qa(new da(this.writer,t,null!=r?r:n>0?"".concat(n):null))}finally{i($a,this).set(t,n+1)}}addWriter(t){const e=this.writer;if(e instanceof Gu)return e.writers.add(t),{[Symbol.dispose]:()=>{e.writers.delete(t)}};throw new Error("This should be unreachable.")}getWriters(){const t=this.writer;if(t instanceof Gu)return Array.from(t.writers);throw new Error("This should be unreachable.")}}function tl(){let t;try{const e=localStorage.getItem("DEBUG");t=JSON.parse(null!=e?e:"null"),Bu("DEBUG",JSON.stringify(t)).catch((()=>{}))}catch(t){}return Reflect.getOwnPropertyDescriptor(globalThis,"DEBUG")||Object.defineProperty(globalThis,"DEBUG",{get:()=>{void 0===t&&function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lu())("readonly",(e=>Fu(e.get(t))))}("DEBUG").then((e=>{try{t=JSON.parse(null!=e?e:"null")}catch(t){}})).catch((()=>{}));try{var e;return JSON.parse(null!==(e=localStorage.getItem("DEBUG"))&&void 0!==e?e:"null")}catch(e){return t}},set:e=>{Bu("DEBUG",JSON.stringify(e)).catch((()=>{}));try{localStorage.setItem("DEBUG",JSON.stringify(e))}catch(t){}t=e}}),new Qa(new Gu)}const el=Uu(tl(),{stableUniqueIdentifier:"@grammarly/util-logging:DefaultLogger",serialize:t=>{const e=[];return[{writers:t.getWriters().map((t=>{if(t instanceof Xu)return{kind:"ConsoleLogWriter"};if(t instanceof sa){const r=t.toTransferable();return e.push(r.port),r}return t instanceof Ja?t.toTransferable():void 0})),DEBUG:Reflect.get(globalThis,"DEBUG")},e]},deserialize:(t,e)=>{let{writers:r,DEBUG:n}=t;Reflect.set(globalThis,"DEBUG",n);for(const t of r)if(t)switch(t.kind){case"ConsoleLogWriter":e.addWriter(new Xu);break;case"MemoryLogWriter":e.addWriter(sa.fromTransferable(t));break;case"FeLogWriter":e.addWriter(Ja.fromTransferable(t))}}});function rl(t){return"object"==typeof t&&null!==t&&"ok"in t&&"boolean"==typeof t.ok&&(t.ok?"value"in t:"error"in t&&((e=t.error)instanceof xu||e instanceof Error||"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message));var e}function nl(t){return Object.freeze({ok:!0,value:t,error:void 0})}function ol(t){return Object.freeze({ok:!1,value:void 0,error:t})}function il(t){return rl(t)&&cl(t)?t:ol(Ou(t))}function sl(t){return t.ok}function cl(t){return!t.ok}function ul(t){try{return nl(t())}catch(t){return il(t)}}async function al(t){return nl(t)}async function ll(t){return ol(t)}async function fl(t){try{return al(await t())}catch(t){return il(t)}}function dl(t){return async e=>{const r=await e;return r.ok?al(t(r.value)):r}}function pl(t){return async e=>{const r=await e;return r.ok?r:ll(await t(r.error))}}function hl(t){return async e=>{const r=await e;return r.ok?t(r.value):r}}async function vl(t){const e=await Promise.all(Array.from(t)),r=e.filter(sl),n=e.filter(cl);return n.length>0?ll(new Tu(n.map((t=>{let{error:e}=t;return e})))):al(r.map((t=>t.value)))}function yl(t){return async e=>t(await e)}function gl(){const t=crypto.randomUUID();return t}var ml=new WeakMap,bl=new WeakMap;class wl{constructor(){s(this,ml,gl()),s(this,bl,0)}next(){var t;i(bl,this)===Number.MAX_SAFE_INTEGER?(c(bl,this,0),c(ml,this,gl())):c(bl,this,(t=i(bl,this),++t));return"".concat(i(ml,this),"-").concat(i(bl,this).toString(16))}}var Sl=new WeakMap,xl=new WeakMap,kl=new WeakMap,Ol=new WeakMap;class El{constructor(){s(this,Sl,el.createLogger("FastDOM")),s(this,xl,[]),s(this,kl,[]),s(this,Ol,!1)}get estimatedExecutionDuration(){return(i(xl,this).length+7*i(kl,this).length)/40}measure(t){const e=Promise.withResolvers();return i(xl,this).push((()=>{try{e.resolve(t())}catch(t){e.reject(t)}})),this._schedule(),fl((()=>e.promise))}mutate(t){const e=Promise.withResolvers();return i(kl,this).push((async()=>{try{e.resolve(await t())}catch(t){e.reject(t)}})),this._schedule(),fl((()=>e.promise))}_schedule(){i(Ol,this)||(c(Ol,this,!0),requestAnimationFrame((()=>this.flush())))}flush(){performance.now();const t=i(xl,this).splice(0),e=i(kl,this).splice(0);t.forEach((t=>t()));performance.now();e.forEach((t=>t()));performance.now();c(Ol,this,!1)}clear(){i(xl,this).length=0,i(kl,this).length=0}}const jl=new El;var Pl=function(t,e){return Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Pl(t,e)};function Il(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Pl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function Tl(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,c)}u((n=n.apply(t,e||[])).next())}))}function Rl(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(t){c=[6,t],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}function Cl(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dl(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function Al(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function _l(t){return this instanceof _l?(this.v=t,this):new _l(t)}function Ml(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},s("next"),s("throw"),s("return",(function(t){return function(e){return Promise.resolve(e).then(t,a)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(t,e){o[t]&&(n[t]=function(e){return new Promise((function(r,n){i.push([t,e,r,n])>1||c(t,e)}))},e&&(n[t]=e(n[t])))}function c(t,e){try{(r=o[t](e)).value instanceof _l?Promise.resolve(r.value.v).then(u,a):l(i[0][2],r)}catch(t){l(i[0][3],t)}var r}function u(t){c("next",t)}function a(t){c("throw",t)}function l(t,e){t(e),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Wl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=Cl(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}}function Nl(t){return"function"==typeof t}function Ul(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Fl=Ul((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function zl(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Ll=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=Cl(i),c=s.next();!c.done;c=s.next()){c.value.remove(this)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else i.remove(this);var u=this.initialTeardown;if(Nl(u))try{u()}catch(t){o=t instanceof Fl?t.errors:[t]}var a=this._finalizers;if(a){this._finalizers=null;try{for(var l=Cl(a),f=l.next();!f.done;f=l.next()){var d=f.value;try{ql(d)}catch(t){o=null!=o?o:[],t instanceof Fl?o=Al(Al([],Dl(o)),Dl(t.errors)):o.push(t)}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(o)throw new Fl(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)ql(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&zl(e,t)},t.prototype.remove=function(e){var r=this._finalizers;r&&zl(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),Bl=Ll.EMPTY;function Gl(t){return t instanceof Ll||t&&"closed"in t&&Nl(t.remove)&&Nl(t.add)&&Nl(t.unsubscribe)}function ql(t){Nl(t)?t():t.unsubscribe()}var Vl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Jl={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,Al([t,e],Dl(r)))},clearTimeout:function(t){var e=Jl.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Zl(t){Jl.setTimeout((function(){throw t}))}function Hl(){}function Kl(t){t()}var Yl=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,Gl(e)&&e.add(r)):r.destination=rf,r}return Il(e,t),e.create=function(t,e,r){return new tf(t,e,r)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Ll),Xl=Function.prototype.bind;function $l(t,e){return Xl.call(t,e)}var Ql=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){ef(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){ef(t)}else ef(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){ef(t)}},t}(),tf=function(t){function e(e,r,n){var o,i,s=t.call(this)||this;Nl(e)||!e?o={next:null!=e?e:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&Vl.useDeprecatedNextContext?((i=Object.create(e)).unsubscribe=function(){return s.unsubscribe()},o={next:e.next&&$l(e.next,i),error:e.error&&$l(e.error,i),complete:e.complete&&$l(e.complete,i)}):o=e;return s.destination=new Ql(o),s}return Il(e,t),e}(Yl);function ef(t){Zl(t)}var rf={closed:!0,next:Hl,error:function(t){throw t},complete:Hl},nf="function"==typeof Symbol&&Symbol.observable||"@@observable";function of(t){return t}function sf(t){return 0===t.length?of:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var cf=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,o=this,i=(n=t)&&n instanceof Yl||function(t){return t&&Nl(t.next)&&Nl(t.error)&&Nl(t.complete)}(n)&&Gl(n)?t:new tf(t,e,r);return Kl((function(){var t=o,e=t.operator,r=t.source;i.add(e?e.call(i,r):r?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=uf(e))((function(e,n){var o=new tf({next:function(e){try{t(e)}catch(t){n(t),o.unsubscribe()}},error:n,complete:e});r.subscribe(o)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[nf]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return sf(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=uf(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function uf(t){var e;return null!==(e=null!=t?t:Vl.Promise)&&void 0!==e?e:Promise}function af(t){return function(e){if(function(t){return Nl(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function lf(t,e,r,n,o){return new ff(t,e,r,n,o)}var ff=function(t){function e(e,r,n,o,i,s){var c=t.call(this,e)||this;return c.onFinalize=i,c.shouldUnsubscribe=s,c._next=r?function(t){try{r(t)}catch(t){e.error(t)}}:t.prototype._next,c._error=o?function(t){try{o(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=n?function(){try{n()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,c}return Il(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Yl),df=Ul((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),pf=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Il(e,t),e.prototype.lift=function(t){var e=new hf(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new df},e.prototype.next=function(t){var e=this;Kl((function(){var r,n;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var o=Cl(e.currentObservers),i=o.next();!i.done;i=o.next()){i.value.next(t)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;Kl((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var r=e.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;Kl((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=this,n=r.hasError,o=r.isStopped,i=r.observers;return n||o?Bl:(this.currentObservers=null,i.push(t),new Ll((function(){e.currentObservers=null,zl(i,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,o=e.isStopped;r?t.error(n):o&&t.complete()},e.prototype.asObservable=function(){var t=new cf;return t.source=this,t},e.create=function(t,e){return new hf(t,e)},e}(cf),hf=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return Il(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:Bl},e}(pf),vf=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return Il(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){var t=this,e=t.hasError,r=t.thrownError,n=t._value;if(e)throw r;return this._throwIfClosed(),n},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(pf),yf=function(){return Date.now()},gf=function(t){function e(e,r){return t.call(this)||this}return Il(e,t),e.prototype.schedule=function(t,e){return this},e}(Ll),mf={setInterval:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,Al([t,e],Dl(r)))},clearInterval:function(t){var e=mf.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},bf=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return Il(e,t),e.prototype.schedule=function(t,e){var r;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),mf.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&mf.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r,n=!1;try{this.work(t)}catch(t){n=!0,r=t||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,zl(n,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(gf),wf=function(){function t(e,r){void 0===r&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},t.now=yf,t}(),Sf=new(function(t){function e(e,r){void 0===r&&(r=wf.now);var n=t.call(this,e,r)||this;return n.actions=[],n._active=!1,n}return Il(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(wf))(bf),xf=Sf,kf=new cf((function(t){return t.complete()}));var Of=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};var Ef="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function jf(t){if(t instanceof cf)return t;if(null!=t){if(function(t){return Nl(t[nf])}(t))return i=t,new cf((function(t){var e=i[nf]();if(Nl(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Of(t))return o=t,new cf((function(t){for(var e=0;e<o.length&&!t.closed;e++)t.next(o[e]);t.complete()}));if(Nl(null==(n=t)?void 0:n.then))return r=t,new cf((function(t){r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Zl)}));if(function(t){return Symbol.asyncIterator&&Nl(null==t?void 0:t[Symbol.asyncIterator])}(t))return Pf(t);if(function(t){return Nl(null==t?void 0:t[Ef])}(t))return e=t,new cf((function(t){var r,n;try{for(var o=Cl(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()}));if(function(t){return Nl(null==t?void 0:t.getReader)}(t))return Pf(function(t){return Ml(this,arguments,(function(){var e,r,n;return Rl(this,(function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,_l(e.read())];case 3:return r=o.sent(),n=r.value,r.done?[4,_l(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,_l(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}(t))}var e,r,n,o,i;throw function(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(t)}function Pf(t){return new cf((function(e){(function(t,e){var r,n,o,i;return Tl(this,void 0,void 0,(function(){var s,c;return Rl(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=Wl(t),u.label=1;case 1:return[4,r.next()];case 2:if((n=u.sent()).done)return[3,4];if(s=n.value,e.next(s),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=u.sent(),o={error:c},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}var If=Ul((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}}));function Tf(t,e){return af((function(r,n){var o=0;r.subscribe(lf(n,(function(r){n.next(t.call(e,r,o++))})))}))}var Rf=Array.isArray;function Cf(t){return Tf((function(e){return function(t,e){return Rf(e)?t.apply(void 0,Al([],Dl(e))):t(e)}(t,e)}))}function Df(t,e,r){return void 0===r&&(r=1/0),Nl(e)?Df((function(r,n){return Tf((function(t,o){return e(r,t,n,o)}))(jf(t(r,n)))}),r):("number"==typeof e&&(r=e),af((function(e,n){return function(t,e,r,n,o,i,s,c){var u=[],a=0,l=0,f=!1,d=function(){!f||u.length||a||e.complete()},p=function(t){a++;var o=!1;jf(r(t,l++)).subscribe(lf(e,(function(t){e.next(t)}),(function(){o=!0}),void 0,(function(){if(o)try{for(a--;u.length&&a<n;)t=void 0,t=u.shift(),s||p(t);d()}catch(t){e.error(t)}var t})))};return t.subscribe(lf(e,(function(t){return a<n?p(t):u.push(t)}),(function(){f=!0,d()}))),function(){}}(e,n,t,r)})))}var Af=["addListener","removeListener"],_f=["addEventListener","removeEventListener"],Mf=["on","off"];function Wf(t,e,r,n){if(Nl(r)&&(n=r,r=void 0),n)return Wf(t,e,r).pipe(Cf(n));var o=Dl(function(t){return Nl(t.addEventListener)&&Nl(t.removeEventListener)}(t)?_f.map((function(n){return function(o){return t[n](e,o,r)}})):function(t){return Nl(t.addListener)&&Nl(t.removeListener)}(t)?Af.map(Nf(t,e)):function(t){return Nl(t.on)&&Nl(t.off)}(t)?Mf.map(Nf(t,e)):[],2),i=o[0],s=o[1];if(!i&&Of(t))return Df((function(t){return Wf(t,e,r)}))(jf(t));if(!i)throw new TypeError("Invalid event target");return new cf((function(t){var e=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.next(1<e.length?e:e[0])};return i(e),function(){return s(e)}}))}function Nf(t,e){return function(r){return function(n){return t[r](e,n)}}}function Uf(t,e,r){void 0===t&&(t=0),void 0===r&&(r=xf);var n,o=-1;return null!=e&&((n=e)&&Nl(n.schedule)?r=e:o=e),new cf((function(e){var n=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-r.now():t;n<0&&(n=0);var i=0;return r.schedule((function(){e.closed||(e.next(i++),0<=o?this.schedule(void 0,o):e.complete())}),n)}))}function Ff(t,e){return af((function(r,n){var o=0;r.subscribe(lf(n,(function(r){return t.call(e,r,o++)&&n.next(r)})))}))}function zf(t,e,r){void 0===e&&(e=Sf);var n=Uf(t,e);return function(t,e){return af((function(r,n){var o=null!=e?e:{},i=o.leading,s=void 0===i||i,c=o.trailing,u=void 0!==c&&c,a=!1,l=null,f=null,d=!1,p=function(){null==f||f.unsubscribe(),f=null,u&&(y(),d&&n.complete())},h=function(){f=null,d&&n.complete()},v=function(e){return f=jf(t(e)).subscribe(lf(n,p,h))},y=function(){if(a){a=!1;var t=l;l=null,n.next(t),!d&&v(t)}};r.subscribe(lf(n,(function(t){a=!0,l=t,(!f||f.closed)&&(s?y():v(t))}),(function(){d=!0,(!(u&&a&&f)||f.closed)&&n.complete()})))}))}((function(){return n}),r)}function Lf(t){return e=>{const r=function(t){return"function"==typeof t?{next:e=>t(e),error:()=>{},complete:()=>{}}:{next:e=>{var r;return null===(r=t.next)||void 0===r?void 0:r.call(t,e)},error:e=>{var r;return null===(r=t.error)||void 0===r?void 0:r.call(t,e)},complete:()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)}}}(null!=t?t:{}),n=e.subscribe({next:t=>r.next(t),error:t=>r.error(Ou(t)),complete:()=>r.complete()});return{[Symbol.dispose]:()=>n.unsubscribe()}}}function Bf(t){return t*self.devicePixelRatio}function Gf(t){return t/self.devicePixelRatio}function qf(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}function Vf(t){return 0===t.width||0===t.height}function Jf(t){const e=Bf(1);return qf({x:t.x*e,y:t.y*e,width:t.width*e,height:t.height*e})}function Zf(t){const e=Gf(1);return qf({x:t.x*e,y:t.y*e,width:t.width*e,height:t.height*e})}function Hf(t){return{x:t.x,y:t.y}}function Kf(t){const e=Bf(1);return Hf({x:t.x*e,y:t.y*e})}function Yf(t){const e=Gf(1);return Hf({x:t.x*e,y:t.y*e})}function Xf(t){return{x:t.x,y:t.y}}function $f(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}function Qf(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}function td(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===e?.5+t|0:Math.round((t+Number.EPSILON)*10**e)/10**e}function ed(t,e,r){t.style.getPropertyValue(e)!==r&&(null==r?t.style.removeProperty(e):t.style.setProperty(e,String(r)))}function rd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.devicePixelRatio;const r=1===e?0:e<10?1:e<100?2:Math.ceil(Math.log10(e));return td(t,r)}class nd extends xu{}class od extends nd{constructor(t){super("Unknown action: ".concat(t)),a(this,"action",void 0),this.action=t}toJSON(){return f(f({},super.toJSON()),{},{action:this.action})}}class id extends nd{constructor(t,e,r){super("Timeout waiting for response for ".concat(e,"()")),a(this,"id",void 0),a(this,"action",void 0),a(this,"data",void 0),this.id=t,this.action=e,this.data=r}toJSON(){return f(f({},super.toJSON()),{},{action:this.action,id:this.id,data:this.data})}}var sd=new WeakMap,cd=new WeakMap,ud=new WeakMap,ad=new WeakMap,ld=new WeakMap,fd=new WeakMap,dd=new WeakMap,pd=new WeakMap,hd=new WeakMap,vd=new WeakSet;class yd{constructor(t,e){var r,o,a,l,f;u(this,vd),s(this,sd,new DisposableStack),s(this,cd,new wl),s(this,ud,void 0),s(this,ad,void 0),s(this,ld,void 0),s(this,fd,void 0),s(this,dd,void 0),s(this,pd,new pf),s(this,hd,new Map),c(ad,this,t),c(ld,this,e.handler);const d=null===(r=e.logger)||void 0===r?void 0:r.name,p=null===(o=e.logger)||void 0===o?void 0:o.location;c(ud,this,el.createLogger(["RPC",p,d].filter(Boolean).join("/"),null===(a=e.logger)||void 0===a?void 0:a.context)),c(fd,this,null!==(l=e.report)&&void 0!==l?l:null),c(dd,this,null!==(f=e.allowClientsToDispose)&&void 0!==f&&f);const h=new AbortController;i(sd,this).defer((()=>{i(ud,this).verbose("RPC disposed."),h.abort(),i(hd,this).forEach((t=>t(ol(new Pu))))})),i(sd,this).use(Au(i(pd,this),Df((t=>n(vd,this,gd).call(this,t))),Lf({next:t=>{let[e,r]=t;"failure"===e.data.status&&i(ud,this).error("Outbound ".concat(e.action," error response:"),Ou(e.data.data),{delivery:!1});try{"transferable"===i(ad,this).kind?i(ad,this).port.postMessage(e,null!=r?r:[]):i(ad,this).port.postMessage(e)}catch(t){i(ud,this).error("Unexpected error calling postMessage",Ou(t),{delivery:!1})}},error:t=>{i(ud,this).error("Unexpected error responding to inbound RPC message",t,{delivery:!1})}}))),i(ad,this).port.addEventListener("message",(t=>{switch(t.data.type){case"request":Su,i(pd,this).next(t.data);break;case"response":{Su,"failure"===t.data.data.status&&i(ud,this).error("Inbound ".concat(t.data.action," error response:"),Ou(t.data.data.data),{delivery:!1});const e=i(hd,this).get(t.data.id);e?e(nl(t.data)):(i(ud,this).warn('Unexpected response with "'.concat(t.data.action,'" action.'),{delivery:!1}),i(ud,this).verbose("Unexpected response:",t.data));break}default:throw new Iu(t.data)}}),{signal:h.signal});const v=i(ad,this).port;v instanceof MessagePort&&(v.addEventListener("messageerror",(t=>i(ud,this).error("MessagePort error:",Ou(t),{delivery:!1})),{signal:h.signal}),v.addEventListener("error",(t=>i(ud,this).error("MessagePort error:",Ou(t),{delivery:!1})),{signal:h.signal}),v.addEventListener("close",(()=>i(ud,this).verbose("MessagePort closed.")),{signal:h.signal})),i(ad,this).port.start()}createClient(){const t=new Set(["then","toJSON"]);return new Proxy({},{get:(e,r)=>{if(t.has(r))return;const n=r;return t.has(r)?void 0:(t,e)=>{var r;if(i(sd,this).disposed)return ll(new Pu);const o=i(cd,this).next(),s=Promise.withResolvers(),c=performance.now();let u=!1;const a=setTimeout((()=>{u=!0,s.resolve(ol(new id(o,String(n),t)))}),null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:6e4),l=()=>{i(hd,this).delete(o),clearTimeout(a)},f=e=>{if(l(),u)return i(ud,this).warn('RPC response for "'.concat(String(n),'" was received after timeout.'),{delivery:!1}),void i(ud,this).verbose("RPC response after timeout:",{action:n,request:t,response:e});if(cl(e))return void s.resolve(e);const r=e.value;if("failure"===r.data.status){var o;const t=function(t){var e;const r=t.data.data,n=new nd(null!==(e=r.errorMessage)&&void 0!==e?e:"Unknown error");return Object.assign(n,r),n}(r);null===(o=i(fd,this))||void 0===o||o.call(this,{kind:"outbound",action:n,durationInMs:performance.now()-c,error:t}),s.resolve(ol(t))}else{var a;null===(a=i(fd,this))||void 0===a||a.call(this,{kind:"outbound",action:n,durationInMs:performance.now()-c}),s.resolve(nl(r.data.data))}},d={id:o,type:"request",action:String(n),data:t};var p;return i(hd,this).set(o,f),Au(ul((()=>{var t;"transferable"===i(ad,this).kind?i(ad,this).port.postMessage(d,null!==(t=null==e?void 0:e.transfer)&&void 0!==t?t:[]):i(ad,this).port.postMessage(d)})),(p=Mu((t=>{i(ud,this).error("Failed to send request:",t,{delivery:!1}),f(ol(t))})),t=>t.ok?t:ol(p(t.error)))),s.promise}},has:(t,e)=>"string"==typeof e||e===Symbol.asyncDispose,set:()=>!1})}[Symbol.dispose](){return i(sd,this).dispose()}}async function gd(t){if(i(sd,this).disposed)return i(ud,this).warn("Received request after RPC was disposed.",{delivery:!1}),i(ud,this).verbose("Request after dispose:",t),[{id:t.id,type:"response",action:t.action,data:{status:"failure",data:new Pu}},null];if(i(dd,this)&&t.action===String(Symbol.asyncDispose)){i(ud,this).verbose("Received dispose request. Disposing RPC.");try{return[{id:t.id,type:"response",action:t.action,data:{status:"success",data:null}},null]}finally{setTimeout((()=>i(sd,this).dispose()),0)}}const e=t.action,r=i(ld,this)[e];if(!r)return[{id:t.id,type:"response",action:t.action,data:{status:"failure",data:new od(t.action)}},null];const n=[],o={transfer:"serializable"===i(ad,this).kind?void 0:(t,e)=>(null==n||n.push(...e),t)},s=performance.now();try{var c;const e=await Reflect.apply(r,i(ld,this),[t.data,o]);var u;return cl(e)?(null===(u=i(fd,this))||void 0===u||u.call(this,{kind:"inbound",action:t.action,durationInMs:performance.now()-s,error:e.error}),[{id:t.id,type:"response",action:t.action,data:{status:"failure",data:e.error}},n]):(null===(c=i(fd,this))||void 0===c||c.call(this,{kind:"inbound",action:t.action,durationInMs:performance.now()-s}),[{id:t.id,type:"response",action:t.action,data:{status:"success",data:e.value}},n])}catch(t){throw i(ud,this).error("Unhandled error in RPC handler. An RPC handler MUST NOT throw.",Ou(t),{delivery:!1}),t}}function md(t){return{capi:{capiAlertRemoved:e=>bd(t.capiAlertRemoved(e)),capiConnected:e=>bd(t.capiConnected(e)),capiDisconnected:e=>bd(t.capiDisconnected(e)),capiMessageReceived:e=>bd(t.capiMessageReceived(e)),capiTextRevision:e=>bd(t.capiTextRevision(e)),capiWebSocketClose:e=>bd(t.capiWebSocketClose(e)),capiWebSocketCreate:e=>bd(t.capiWebSocketCreate(e)),capiWebSocketConnect:e=>bd(t.capiWebSocketConnect(e)),capiWebSocketSend:e=>bd(t.capiWebSocketSend(e))},connector:{documentDidDestroy:e=>bd(t.documentDidDestroy(e)),documentDidFocus:e=>bd(t.documentDidFocus(e)),documentGeometryDidChange:e=>bd(t.documentGeometryDidChange(e)),documentGeometryWillChange:e=>bd(t.documentGeometryWillChange(e)),documentSelectedTextRangesDidChange:e=>bd(t.documentSelectedTextRangesDidChange(e)),documentTextDidChange:e=>bd(t.documentTextDidChange(e)),cancel:e=>bd(t.cancel(e))},textDecoration:{setTextDecorationVisibility:e=>bd(t.setTextDecorationVisibility(e))},sdui:{setInlineCardState:e=>bd(t.setInlineCardState(e))}}}function bd(t){return t.then((t=>new Promise(((e,r)=>cl(t)?r(t.error):e(t.value)))))}function wd(t,e){try{var r=d();const o=r.u(new DisposableStack),i=new MessageChannel,s=o.use(new yd({kind:"serializable",port:i.port1},{logger:{location:"Host",name:"Connector"},handler:(n=t,{cancel:t=>fl((()=>n.connector.cancel(t))),getDocumentText:t=>fl((()=>n.connector.getDocumentText(t))),getDocumentGeometry:t=>Au(fl((()=>n.connector.getDocumentGeometry(t))),dl((t=>{return f(f({},t),{},{windowFrame:Jf($f(t.windowFrame)),viewportFrame:Jf($f(t.viewportFrame)),documentFrame:Jf($f(t.documentFrame)),documentScrollOffset:t.documentScrollOffset?Kf((e=t.documentScrollOffset,{x:e.x,y:e.y})):void 0});var e}))),getBoundingBoxesForTextRanges:t=>Au(fl((()=>n.connector.getBoundingBoxesForTextRanges(t))),dl((t=>f(f({},t),{},{boundingBoxes:Object.fromEntries(Object.entries(t.boundingBoxes).map((t=>{let[e,r]=t;return[e,r.map((t=>{return Jf({x:(e=t).x,y:e.y,width:e.width,height:e.height});var e}))]})))})))),setDocumentSelectedTextRanges:t=>fl((()=>n.connector.setDocumentSelectedTextRanges(t))),applyDocumentTextChange:t=>fl((()=>n.connector.applyDocumentTextChange(t))),sendCapiMessage:t=>fl((()=>n.capi.sendCapiMessage(t))),handleTextDecorationInteraction:t=>fl((()=>{return n.textDecoration.handleTextDecorationInteraction(f(f({},t),{},{position:Yf((e=t.position,{x:e.x,y:e.y})),rect:Zf(Qf(t.rect)),decorationRects:t.decorationRects.map((t=>Zf(Qf(t))))}));var e})),makeExperimentationRequest:t=>fl((()=>n.experimentation.makeExperimentationRequest(t))),capiWebSocketOpened:t=>fl((()=>n.capi.capiWebSocketOpened(t))),capiWebSocketClosed:t=>fl((()=>n.capi.capiWebSocketClosed(t))),capiWebSocketMessage:t=>fl((()=>n.capi.capiWebSocketMessage(t))),capiWebSocketError:t=>fl((()=>n.capi.capiWebSocketError(t))),applyAlerts:t=>fl((()=>n.sdui.applyAlerts(t))),upgradeToPremium:t=>fl((()=>n.sdui.upgradeToPremium(t))),openGrammarlyGo:t=>fl((()=>n.sdui.openGrammarlyGo(t)))})})).createClient(),c=o.move();return{portForBackground:i.port2,connectorClient:s,start:()=>Au(s.handshake({client:e,version:"0.2.0",protocolVersion:0,options:{}},{timeout:5e3}),dl(_u)),[Symbol.dispose]:()=>c.dispose()}}catch(t){r.e=t}finally{r.d()}var n}function Sd(t){return Au(function(t){switch(t.kind){case"secureKey":return Au(fl((()=>t.getSecureKey())),dl((t=>({kind:"secureKey",secureKey:t}))),pl((t=>new xd(t))));case"secureOrigin":return al({kind:"secureOrigin"});default:return ll(new Iu(t))}}(t.securityStrategy),dl((e=>{const r=new MessageChannel;return{connectRequest:{securityStrategy:e,hostPort:r.port2,connectorPort:t.connectorPort,groupId:t.groupId,windowId:t.windowId,client:t.client,clientVersion:t.clientVersion,capiSource:t.capiSource,servicesEnvironment:t.servicesEnvironment,plugins:t.plugins},hostPort:r.port1}})),hl((e=>{let{connectRequest:r,hostPort:n}=e;return t.iframe.contentWindow?al({connectRequest:r,hostPort:n,iframeContentWindow:t.iframe.contentWindow}):ll(new kd)})),dl((e=>{let{connectRequest:r,hostPort:n,iframeContentWindow:o}=e;return o.postMessage(r,t.targetOrigin,r.connectorPort?[r.hostPort,r.connectorPort]:[r.hostPort]),n})))}class xd extends xu{constructor(t){super("Error getting security key",t)}}class kd extends xu{constructor(){super("Iframe has no contentWindow")}}const Od="InkwellSecureKeyRequestMessage";const Ed={pointerdown:null,pointerup:null,pointermove:null},jd=Math.ceil(1e3/30);function Pd(t,e){try{var r=d();const n=r.u(new DisposableStack),o=function(t,e){return r=>{if(!function(t){return Object.keys(Ed).includes(t)}(r.type))return;const n=e.getBoundingClientRect();var o,i;o=n,i={x:r.clientX,y:r.clientY},o.x<=i.x&&o.y<=i.y&&o.x+o.width>=i.x&&o.y+o.height>=i.y&&Au(t.pointerEventDidEmit({kind:r.type,position:Xf({x:Bf(r.clientX-n.x),y:Bf(r.clientY-n.y)})}),pl(Mu((t=>el.error("Unexpected error forwarding pointer event to Iframe",t)))))}}(t,e);return n.use(Au(Wf(document.body,"pointermove"),zf(jd),Lf(o))),n.use(Au(Wf(document.body,"pointerdown"),Lf(o))),n.use(Au(Wf(document.body,"pointerup"),Lf(o))),n.move()}catch(t){r.e=t}finally{r.d()}}async function Id(t,e){try{var r=d();const n=r.u(new DisposableStack),o=document.createElement("iframe"),i=n.use(function(t,e){return t.dataset.name="<empty>",t.loading="eager",t.src=e,t.style.top="0",t.style.left="0",t.style.border="0",t.style.overflow="hidden",t.style.colorScheme="light dark",t.style.width="1px",t.style.height="1px",t.style.clipPath="inset(0 0 0 0)",t.style.position="fixed",t.setAttribute("allow","compute-pressure *"),{iframe:null===t.contentWindow?new Promise((e=>t.addEventListener("load",(()=>e(nl(t)))))):al(t),[Symbol.dispose]:()=>t.remove()}}(o,t.frameSrc)).iframe,s=vl([Au(fl((()=>t.overrideIframeInjection.isCustomInjection(t.injectionOptions))),hl((e=>e?fl((async()=>t.overrideIframeInjection.inject(o,t.injectionOptions))):async function(t){return t}(t.appendIframe(o))))),Rd(o,t.overrideIframeInjectionStyles,t.injectionOptions)]),c=r=>Au(s,hl((()=>{return n=()=>async function(t,e,r){try{var n,o,i=d();const s=i.u(new DisposableStack),c=new DisposableStack;let u=e?s.use(wd(e,t.client)):null;const a=Promise.withResolvers();return await Au(Sd({iframe:r,targetOrigin:new URL(t.frameSrc).origin,securityStrategy:t.iframeSecurityStrategy,connectorPort:null!==(n=null===(o=u)||void 0===o?void 0:o.portForBackground)&&void 0!==n?n:null,groupId:t.groupId,windowId:t.windowId,client:t.client,clientVersion:t.clientVersion,capiSource:t.capiSource,servicesEnvironment:t.servicesEnvironment,plugins:t.plugins}),hl((async n=>{const{disposeConnector:o}=s.use(function(t){try{var e=d();const o=e.u(new DisposableStack),i=o.use(new DisposableStack),s=new vf(qf({x:0,y:0,width:0,height:0}));o.defer((()=>s.complete()));const c=new vf(Jf($f({x:0,y:0,width:self.innerWidth,height:self.innerHeight})));function r(){c.next(Jf($f({x:0,y:0,width:self.innerWidth,height:self.innerHeight})))}o.defer((()=>c.complete())),self.addEventListener("resize",r),o.defer((()=>self.removeEventListener("resize",r)));const u=new vf(new Set),a=t=>u.next(new Set(u.getValue()).add(t)),l=t=>{const e=new Set(u.getValue());e.delete(t),u.next(e)},p=t=>(e,r)=>{const n=gl();return a(n),Au(t(e,r),yl(Mu((()=>l(n)))))};let h=null;o.defer((()=>{var t;return null===(t=h)||void 0===t?void 0:t[Symbol.dispose]()}));const v=o.use(new yd({kind:"transferable",port:t.hostPort},{logger:{location:"Host",name:"Window",context:t.windowId},handler:{windowDidConnect:p((()=>(t.windowDidConnect(),al()))),getConnectorPort:p(((e,r)=>{let{transfer:n}=r;const o=t.createConnectorMessagePort();return al(o?n(o,[o]):null)})),updateWindowRect:p((e=>Au(jl.mutate((async()=>{const r=Zf(e.screenRect);ed(t.iframe,"clip-path",Vf(r)?"inset(0 0 0 0)":"none"),ed(t.iframe,"top","".concat(rd(r.y),"px")),ed(t.iframe,"left","".concat(rd(r.x),"px")),ed(t.iframe,"width","".concat(rd(r.width),"px")),ed(t.iframe,"height","".concat(rd(r.height),"px"))})),dl((()=>s.next(e.screenRect)))))),updateWindowPosition:p((e=>Au(jl.mutate((async()=>{const r=Yf(e.screenPosition);ed(t.iframe,"top","".concat(rd(r.y),"px")),ed(t.iframe,"left","".concat(rd(r.x),"px"))})),dl((()=>s.next(f(f({},s.getValue()),e.screenPosition))))))),updateWindowSize:p((e=>Au(jl.mutate((async()=>{const r=function(t){const e=Gf(1);return function(t){let{width:e,height:r}=t;return{width:e,height:r}}({width:t.width*e,height:t.height*e})}(e.size);ed(t.iframe,"clip-path",Vf(r)?"inset(0px)":"none"),ed(t.iframe,"width","".concat(rd(r.width),"px")),ed(t.iframe,"height","".concat(rd(r.height),"px"))})),dl((()=>s.next(f(f({},s.getValue()),e.size))))))),showWindow:p((()=>jl.mutate((async()=>{ed(t.iframe,"clip-path","none")})))),hideWindow:p((()=>jl.mutate((async()=>{ed(t.iframe,"clip-path","inset(0px)")})))),setClickThroughTransparency:p((e=>(e?(t.iframe.style.setProperty("pointer-events","none"),h&&h[Symbol.dispose](),h=Pd(y,t.iframe)):(t.iframe.style.removeProperty("pointer-events"),h&&h[Symbol.dispose](),h=null),al()))),bringToFront:p((()=>{var e,r;return Array.from(null!==(e=null===(r=t.iframe.parentElement)||void 0===r?void 0:r.children)&&void 0!==e?e:[]).forEach((t=>{t.style.removeProperty("z-index")})),t.iframe.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),al()})),createWindow:p((e=>Au(Id({client:t.client,clientVersion:t.clientVersion,capiSource:t.capiSource,frameSrc:t.frameSrc,iframeSecurityStrategy:t.iframeSecurityStrategy,groupId:t.groupId,windowId:e.id,injectionOptions:e.injectionOptions,servicesEnvironment:t.servicesEnvironment,appendIframe:t.appendIframe,overrideIframeInjection:t.overrideIframeInjection,overrideIframeInjectionStyles:t.overrideIframeInjectionStyles,plugins:t.plugins},null),dl((t=>{i.use(t)}))))),updateWindow:p((e=>Au(vl([e.injectionOptions?Rd(t.iframe,t.overrideIframeInjectionStyles,e.injectionOptions):al(),fl((async()=>{void 0!==e.name&&(t.iframe.dataset.name=e.name)}))]),dl(_u)))),isCustomInjection:p((e=>fl((()=>t.overrideIframeInjection.isCustomInjection(e))))),closeWindow:async()=>(queueMicrotask((async()=>{var e,r;await(e=Au(u,Ff((t=>0===t.size)),(r=1,r<=0?function(){return kf}:af((function(t,e){var n=0;t.subscribe(lf(e,(function(t){++n<=r&&(e.next(t),r<=n&&e.complete())})))})))),new Promise((function(t,r){var n=new tf({next:function(e){t(e),n.unsubscribe()},error:r,complete:function(){r(new If)}});e.subscribe(n)}))),t.iframe.remove()})),al()),openLink:t=>fl((async()=>{self.open(t,"_blank","noopener,noreferrer")}))}})),y=v.createClient();o.use(Au(s,(n=1,Ff((function(t,e){return n<=e}))),Lf((t=>{Au(y.windowRectDidUpdate({windowRect:t}),pl(Mu((t=>{el.error("Failed to update window rect",t)}))))})))),o.use(Au(c,Lf((t=>{Au(y.screenBoundsDidUpdate({screenBounds:t}),pl(Mu((t=>{el.error("Failed to update screen bounds",t)}))))}))));const g=o.move();return{disposeConnector:()=>{const t=gl();return a(t),Au(y.disposeConnector(),yl(Mu((()=>l(t)))))},[Symbol.dispose]:()=>g.dispose()}}catch(m){e.e=m}finally{e.d()}var n}({windowDidConnect:()=>a.resolve(),createConnectorMessagePort:()=>e?(u=c.use(wd(e,t.client)),Au(u.start(),pl(Mu((t=>console.error("Failed to start connector",t))))),u.portForBackground):null,client:t.client,clientVersion:t.clientVersion,capiSource:t.capiSource,groupId:t.groupId,windowId:t.windowId,hostPort:n,iframe:r,frameSrc:t.frameSrc,iframeSecurityStrategy:t.iframeSecurityStrategy,injectionOptions:t.injectionOptions,servicesEnvironment:t.servicesEnvironment,appendIframe:t.appendIframe,overrideIframeInjection:t.overrideIframeInjection,overrideIframeInjectionStyles:t.overrideIframeInjectionStyles,plugins:t.plugins}));return await a.promise,c.use(s.move()),nl({connector:u?{apiForHost:md(new Proxy(u.connectorClient,{get:(t,e)=>{if(u)return Reflect.get(u.connectorClient,e);el.error("Connector not available")}})),start:()=>{var t,e;return null!==(t=null===(e=u)||void 0===e?void 0:e.start())&&void 0!==t?t:ll(new xu("Connector not available"))}}:null,disposeConnector:o,[Symbol.dispose]:()=>c.dispose()})})))}catch(t){i.e=t}finally{i.d()}}(t,e,r),o={maxRetries:3,delayMs:()=>500},new Promise((t=>{var e,r;let i=0;const s=null!==(e=null==o?void 0:o.maxRetries)&&void 0!==e?e:3,c=null!==(r=null==o?void 0:o.delayMs)&&void 0!==r?r:()=>1e3,u=async()=>{const e=await n();e.ok?t(e):i++<s?setTimeout(u,c(i)):t(e)};u()}));var n,o})),dl(Mu((t=>n.use(t)))));return await Au(i,hl(c),hl(Td),dl((t=>{var e;const r=n.move();return{connectorAPIForHost:null===(e=t.connector)||void 0===e?void 0:e.apiForHost,disposeConnector:()=>t.disposeConnector(),[Symbol.dispose]:()=>r.dispose()}})),pl((t=>{const e=n.move();return new Dd(e,"Failed to launch leader iframe",t)})))}catch(t){r.e=t}finally{r.d()}}function Td(t){var e,r;return Au(null!==(e=null===(r=t.connector)||void 0===r?void 0:r.start())&&void 0!==e?e:al(),dl((()=>t)))}function Rd(t,e,r){return Au(fl((()=>e(r))),dl((e=>{Object.entries(e).forEach((e=>{let[r,n]=e;return t.style.setProperty(r,String(n))}))})))}var Cd=new WeakMap;class Dd extends xu{constructor(t,e,r){super(e,r),s(this,Cd,void 0),c(Cd,this,t)}dispose(){return i(Cd,this).dispose()}[Symbol.dispose](){return this.dispose()}}async function Ad(t){try{var e,r=d();const n=r.a(new AsyncDisposableStack);Su;const o=n.use(function(){try{var t=d();const e=t.u(new DisposableStack),r=document.createElement("grammarly-inkwell"),n=r.attachShadow({mode:"open"});document.body.insertAdjacentElement("afterend",r);const o=e.move();return{appendChild:t=>{return Au(ul((()=>{n.appendChild(t)})),(e=t=>ol(new _d(t)),t=>t.ok?t:e(t.error)));var e},[Symbol.dispose]:()=>o.dispose()}}catch(e){t.e=e}finally{t.d()}}()),i="wg-"+gl(),s=await Au(Id({client:t.client,clientVersion:t.clientVersion,capiSource:t.capiSource,servicesEnvironment:t.servicesEnvironment,frameSrc:t.frameSrc,iframeSecurityStrategy:t.iframeSecurityStrategy,plugins:t.plugins,injectionOptions:{kind:"popup"},windowId:"w-"+gl(),groupId:i,appendIframe:t=>o.appendChild(t),overrideIframeInjection:null!==(e=t.overrideIframeInjection)&&void 0!==e?e:{isCustomInjection:()=>Promise.resolve(!1),inject:()=>Promise.resolve()},overrideIframeInjectionStyles:e=>{var r,n;return null!==(r=null===(n=t.overrideIframeInjectionStyles)||void 0===n?void 0:n.call(t,e))&&void 0!==r?r:Promise.resolve({})}},t.hostAPI),dl(Mu((t=>{n.use(t),n.defer((async()=>{await Au(t.disposeConnector(),pl(Mu((t=>{el.verbose("Unexpected error disposing connector for group ".concat(i),t),el.error("Unexpected error disposing connector",t)}))))}))}))),pl(Mu((t=>n.use(t)))));if(!s.ok)throw el.error("Inkwell launch error",s.error),s.error;const c=n.move();return f(f({},s.value.connectorAPIForHost),{},{dispose:()=>{c.disposeAsync()}})}catch(t){r.e=t}finally{await r.d()}}class _d extends xu{constructor(t){super("Error appending iframe to injection root",t)}}}}]);