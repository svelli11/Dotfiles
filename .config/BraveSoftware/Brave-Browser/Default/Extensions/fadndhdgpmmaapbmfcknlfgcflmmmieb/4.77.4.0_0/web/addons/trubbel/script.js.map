{"version":3,"file":"trubbel/script.js","mappings":"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","sources":["webpack://ffz-addons/./src/trubbel/utils/graphql/accountage.gql","webpack://ffz-addons/./src/trubbel/utils/graphql/chatters.gql","webpack://ffz-addons/./src/trubbel/utils/graphql/clip_info.gql","webpack://ffz-addons/./src/trubbel/utils/graphql/follows_totalCount.gql","webpack://ffz-addons/./src/trubbel/utils/graphql/video_info.gql","webpack://ffz-addons/webpack/bootstrap","webpack://ffz-addons/webpack/runtime/compat get default export","webpack://ffz-addons/webpack/runtime/define property getters","webpack://ffz-addons/webpack/runtime/hasOwnProperty shorthand","webpack://ffz-addons/./src/trubbel/utils/format.js","webpack://ffz-addons/./src/trubbel/features/commands/accountage.js","webpack://ffz-addons/./src/trubbel/features/commands/chatters.js","webpack://ffz-addons/./src/trubbel/features/commands/followage.js","webpack://ffz-addons/./src/trubbel/features/commands/uptime.js","webpack://ffz-addons/./src/trubbel/utils/constants/types.js","webpack://ffz-addons/./src/trubbel/utils/constants/commands.js","webpack://ffz-addons/./src/trubbel/settings/chat-commands.js","webpack://ffz-addons/./src/trubbel/settings/chat-moderation.jsx","webpack://ffz-addons/./src/trubbel/settings/chat-viewer-card.js","webpack://ffz-addons/./src/trubbel/utils/constants/selectors.js","webpack://ffz-addons/./src/trubbel/features/clips-videos/set-timestamp.js","webpack://ffz-addons/./src/trubbel/features/clips-videos/most-recent-video.js","webpack://ffz-addons/./src/trubbel/utils/create-notification.js","webpack://ffz-addons/./src/trubbel/settings/clips-videos.js","webpack://ffz-addons/./src/trubbel/settings/directory.js","webpack://ffz-addons/./src/trubbel/utils/constants/config.js","webpack://ffz-addons/./src/trubbel/settings/drops-rewards.js","webpack://ffz-addons/./src/trubbel/utils/constants/player-errors.js","webpack://ffz-addons/./src/trubbel/settings/player.js","webpack://ffz-addons/./src/trubbel/settings/remove-things.js","webpack://ffz-addons/./src/trubbel/settings/sidebar.js","webpack://ffz-addons/./src/trubbel/features/theme/system-theme.js","webpack://ffz-addons/./src/trubbel/settings/ui-tweaks.js","webpack://ffz-addons/./src/trubbel/settings/whispers.js","webpack://ffz-addons/./src/trubbel/index.js"],"sourcesContent":["\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"Trubbel_GetUserAccountAge\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"login\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"user\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"login\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"login\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"createdAt\"},\"arguments\":[],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":81}};\n    doc.loc.source = {\"body\":\"query Trubbel_GetUserAccountAge($login:String!){user(login:$login){id createdAt}}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"Trubbel_GetUserAccountAge\"] = oneQuery(doc, \"Trubbel_GetUserAccountAge\");\n        \n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"Trubbel_GetChattersCount\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"channel\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"chatters\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"count\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":86}};\n    doc.loc.source = {\"body\":\"query Trubbel_GetChattersCount($name:String!){channel(name:$name){id chatters{count}}}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"Trubbel_GetChattersCount\"] = oneQuery(doc, \"Trubbel_GetChattersCount\");\n        \n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"Trubbel_GetClipDate\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"slug\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"ID\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"clip\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"slug\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"slug\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"createdAt\"},\"arguments\":[],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":68}};\n    doc.loc.source = {\"body\":\"query Trubbel_GetClipDate($slug:ID!){clip(slug:$slug){id createdAt}}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"Trubbel_GetClipDate\"] = oneQuery(doc, \"Trubbel_GetClipDate\");\n        \n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"Trubbel_GetTotalChannelFollowCount\"},\"variableDefinitions\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"currentUser\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"follows\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"totalCount\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":77}};\n    doc.loc.source = {\"body\":\"query Trubbel_GetTotalChannelFollowCount{currentUser{id follows{totalCount}}}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"Trubbel_GetTotalChannelFollowCount\"] = oneQuery(doc, \"Trubbel_GetTotalChannelFollowCount\");\n        \n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"Trubbel_GetVideoInfo\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"ID\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"video\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"muteInfo\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"mutedSegmentConnection\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"nodes\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"offset\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"duration\"},\"arguments\":[],\"directives\":[]}]}}]}}]}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"createdAt\"},\"arguments\":[],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":120}};\n    doc.loc.source = {\"body\":\"query Trubbel_GetVideoInfo($id:ID!){video(id:$id){id muteInfo{mutedSegmentConnection{nodes{offset duration}}}createdAt}}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"Trubbel_GetVideoInfo\"] = oneQuery(doc, \"Trubbel_GetVideoInfo\");\n        \n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export function formatLiveDuration(uptime) {\n  const now = new Date();\n  const startDate = new Date(uptime);\n  const diffMs = now - startDate;\n\n  const seconds = Math.floor(diffMs / 1e3) % 60;\n  const minutes = Math.floor(diffMs / (1e3 * 60)) % 60;\n  const hours = Math.floor(diffMs / (1e3 * 60 * 60)) % 24;\n  const days = Math.floor(diffMs / (1e3 * 60 * 60 * 24));\n\n  const parts = [];\n  if (days > 0) parts.push(`${days} day${days > 1 ? \"s\" : \"\"}`);\n  if (hours > 0) parts.push(`${hours} hour${hours > 1 ? \"s\" : \"\"}`);\n  if (minutes > 0) parts.push(`${minutes} minute${minutes > 1 ? \"s\" : \"\"}`);\n  if (seconds > 0) parts.push(`${seconds} second${seconds > 1 ? \"s\" : \"\"}`);\n\n  return `${parts.join(\", \").replace(/,([^,]*)$/, \" and$1\")}`;\n}\n\nexport function formatAccountAge(createdAt) {\n  const now = new Date();\n  const accountCreationDate = new Date(createdAt);\n  const diffMs = now - accountCreationDate;\n\n  const seconds = Math.floor(diffMs / 1e3) % 60;\n  const minutes = Math.floor(diffMs / (1e3 * 60)) % 60;\n  const hours = Math.floor(diffMs / (1e3 * 60 * 60)) % 24;\n  const days = Math.floor(diffMs / (1e3 * 60 * 60 * 24)) % 30;\n  const months = Math.floor(diffMs / (1e3 * 60 * 60 * 24 * 30)) % 12;\n  const years = Math.floor(diffMs / (1e3 * 60 * 60 * 24 * 30 * 12));\n\n  const parts = [];\n  if (years > 0) parts.push(`${years} year${years > 1 ? \"s\" : \"\"}`);\n  if (months > 0) parts.push(`${months} month${months > 1 ? \"s\" : \"\"}`);\n  if (days > 0) parts.push(`${days} day${days > 1 ? \"s\" : \"\"}`);\n  if (hours > 0) parts.push(`${hours} hour${hours > 1 ? \"s\" : \"\"}`);\n  if (minutes > 0) parts.push(`${minutes} minute${minutes > 1 ? \"s\" : \"\"}`);\n  if (seconds > 0) parts.push(`${seconds} second${seconds > 1 ? \"s\" : \"\"}`);\n\n  // If no parts, return \"just now\"\n  if (parts.length === 0) return \"just created\";\n\n  return parts\n    .join(\", \")\n    .replace(/,([^,]*)$/, \" and$1\") + \" ago\";\n}\n\nexport function formatFollowAge(followedAt) {\n  const now = new Date();\n  const followDate = new Date(followedAt);\n  const diffMs = now - followDate;\n\n  const seconds = Math.floor(diffMs / 1e3) % 60;\n  const minutes = Math.floor(diffMs / (1e3 * 60)) % 60;\n  const hours = Math.floor(diffMs / (1e3 * 60 * 60)) % 24;\n  const days = Math.floor(diffMs / (1e3 * 60 * 60 * 24)) % 30;\n  const months = Math.floor(diffMs / (1e3 * 60 * 60 * 24 * 30)) % 12;\n  const years = Math.floor(diffMs / (1e3 * 60 * 60 * 24 * 365));\n\n  const parts = [];\n  if (years > 0) parts.push(`${years} year${years > 1 ? \"s\" : \"\"}`);\n  if (months > 0) parts.push(`${months} month${months > 1 ? \"s\" : \"\"}`);\n  if (days > 0) parts.push(`${days} day${days > 1 ? \"s\" : \"\"}`);\n  if (hours > 0) parts.push(`${hours} hour${hours > 1 ? \"s\" : \"\"}`);\n  if (minutes > 0) parts.push(`${minutes} minute${minutes > 1 ? \"s\" : \"\"}`);\n  if (seconds > 0) parts.push(`${seconds} second${seconds > 1 ? \"s\" : \"\"}`);\n\n  // If no parts, return \"just followed\"\n  const followDuration =\n    parts.length === 0\n      ? \"just followed\"\n      : parts.join(\", \").replace(/,([^,]*)$/, \" and$1\");\n\n  return followDuration;\n}\n\n// Convert seconds to hh:mm:ss format\nexport function formatTime(seconds) {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n\n  if (hours > 0) {\n    return `${hours}:${minutes.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n  } else if (minutes > 0) {\n    return `${minutes}:${secs.toString().padStart(2, \"0\")}`;\n  } else {\n    return `${secs}s`;\n  }\n}","import GET_ACCOUNTAGE from \"../../utils/graphql/accountage.gql\";\nimport { formatAccountAge } from \"../../utils/format\";\n\nexport default async function getAccountAge(context, inst) {\n  const userId = inst?.props.currentUserID;\n  const username = inst?.props.currentUserLogin;\n\n  const twitch_data = await context.twitch_data.getUser(userId);\n  const displayName = twitch_data.displayName;\n  const login = twitch_data.login;\n  const user = displayName.toLowerCase() === login ? displayName : `${displayName} (${login})`;\n\n  const apollo = context.resolve(\"site.apollo\");\n  if (!apollo) {\n    return null;\n  }\n\n  const result = await apollo.client.query({\n    query: GET_ACCOUNTAGE,\n    variables: {\n      login: username\n    }\n  });\n\n  const accountAge = result?.data?.user?.createdAt;\n  if (accountAge) {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `${user} created their account ${formatAccountAge(accountAge)}.`\n    });\n  } else {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `Unable to get accountage for ${user}.`\n    });\n  }\n}","import GET_CHATTERS from \"../../utils/graphql/chatters.gql\";\n\nexport default async function getChatters(context, inst) {\n  const channelLogin = inst?.props.channelLogin;\n  const twitch_data = await context.twitch_data.getUser(null, channelLogin);\n  const displayName = twitch_data.displayName;\n  const login = twitch_data.login;\n  const streamer = displayName.toLowerCase() === login ? displayName : `${displayName} (${login})`;\n\n  const apollo = context.resolve(\"site.apollo\");\n  if (!apollo) {\n    return null;\n  }\n\n  const result = await apollo.client.query({\n    query: GET_CHATTERS,\n    variables: {\n      name: channelLogin\n    }\n  });\n\n  const totalCount = result?.data?.channel?.chatters?.count;\n  const formattedCount = new Intl.NumberFormat(\n    document.documentElement.getAttribute(\"lang\")\n  ).format(totalCount);\n\n  if (totalCount) {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `${streamer} has ${formattedCount} chatters.`\n    });\n  } else {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `Unable to fetch chatter count for ${streamer}.`\n    });\n  }\n}","import { formatFollowAge } from \"../../utils/format\";\n\nexport default async function getFollowAge(context, inst) {\n  const channelID = inst?.props.channelID;\n  const channelLogin = inst?.props.channelLogin;\n  const currentUserID = inst?.props.currentUserID;\n\n  if (channelID === currentUserID) {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: \"You cannot follow yourself.\"\n    });\n    return;\n  }\n\n  const getBroadcaster = await context.twitch_data.getUser(null, channelLogin);\n  const getUser = await context.twitch_data.getUser(currentUserID);\n\n  const broadcaster = getBroadcaster.displayName.toLowerCase() === getBroadcaster.login ? getBroadcaster.displayName : `${getBroadcaster.displayName} (${getBroadcaster.login})`;\n  const user = getUser.displayName.toLowerCase() === getUser.login ? getUser.displayName : `${getUser.displayName} (${getUser.login})`;\n\n  const data = await context.twitch_data.getUserFollowed(null, channelLogin);\n  if (data) {\n    const followAge = data.followedAt;\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `${user} has been following ${broadcaster} for ${formatFollowAge(followAge)}.`\n    });\n  } else {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `${user} is not following ${broadcaster}.`\n    });\n  }\n}","import { formatLiveDuration } from \"../../utils/format\";\n\nexport default async function getStreamUptime(context, inst) {\n  const channelLogin = inst?.props.channelLogin;\n  const twitch_data = await context.twitch_data.getUser(null, channelLogin);\n  const displayName = twitch_data.displayName;\n  const login = twitch_data.login;\n  const user = displayName.toLowerCase() === login ? displayName : `${displayName} (${login})`;\n\n  const uptime = context?.site?.children?.chat?.ChatContainer?.first?.props?.streamCreatedAt;\n  if (uptime) {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `${user} has been live for ${formatLiveDuration(uptime)}.`\n    });\n  } else {\n    inst.addMessage({\n      type: context.site.children.chat.chat_types.Notice,\n      message: `${user} is offline.`\n    });\n  }\n}","export const PermissionLevels = {\n  VIEWER: 0,\n  VIP: 1,\n  MODERATOR: 2,\n  BROADCASTER: 3,\n};","import { PermissionLevels } from \"./types\";\n\nexport const ffzCommands = [\n  {\n    prefix: \"/\",\n    name: \"accountage\",\n    description: \"Show how long ago you created your account.\",\n    permissionLevel: PermissionLevels.VIEWER,\n    ffz_group: \"Trubbel\\u2019s Utilities\",\n    commandArgs: []\n  },\n  {\n    prefix: \"/\",\n    name: \"chatters\",\n    description: \"Show the current channels amount of chatters.\",\n    permissionLevel: PermissionLevels.VIEWER,\n    ffz_group: \"Trubbel\\u2019s Utilities\",\n    commandArgs: []\n  },\n  {\n    prefix: \"/\",\n    name: \"followage\",\n    description: \"Show your followage in the current channel.\",\n    permissionLevel: PermissionLevels.VIEWER,\n    ffz_group: \"Trubbel\\u2019s Utilities\",\n    commandArgs: []\n  },\n  {\n    prefix: \"/\",\n    name: \"uptime\",\n    description: \"Show the channels current uptime.\",\n    permissionLevel: PermissionLevels.VIEWER,\n    ffz_group: \"Trubbel\\u2019s Utilities\",\n    commandArgs: []\n  },\n\n\n  {\n    prefix: \"/\",\n    name: \"shrug\",\n    description: \"¯\\\\_(ツ)_/¯\",\n    permissionLevel: PermissionLevels.VIEWER,\n    ffz_group: \"Trubbel\\u2019s Utilities\",\n    commandArgs: [\n      { name: \"message\", isRequired: false }\n    ]\n  },\n\n];","import getAccountAge from \"../features/commands/accountage\";\nimport getChatters from \"../features/commands/chatters\";\nimport getFollowAge from \"../features/commands/followage\";\nimport getStreamUptime from \"../features/commands/uptime\";\nimport { ffzCommands } from \"../utils/constants/commands\";\n\nexport class ChatCommands extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.inject(\"settings\");\n    this.inject(\"chat\");\n    this.inject(\"site\");\n    this.inject(\"site.chat\");\n    this.inject(\"site.apollo\");\n    this.inject(\"site.fine\");\n    this.inject(\"site.twitch_data\");\n\n    // Store command handler functions for cleanup\n    this.commandHandlers = new Set();\n\n    // Chat - Custom Commands - Enable Custom Chat Commands\n    this.settings.add(\"addon.trubbel.chat.custom-commands\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Chat >> Custom Commands\",\n        title: \"Enable Custom Chat Commands\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.handleCustomCommands()\n    });\n\n    const commandSettings = {\n      accountage: \"Show how long ago you created your account.\",\n      chatters: \"Show the current channels amount of chatters.\",\n      followage: \"Show your followage in the current channel.\",\n      shrug: \"Appends `¯\\\\_(ツ)_/¯` to your message.\",\n      uptime: \"Show the channels current uptime.\"\n    };\n\n    Object.entries(commandSettings).forEach(([command, description]) => {\n      this.settings.add(`addon.trubbel.chat.custom-command-${command}`, {\n        default: false,\n        requires: [\"addon.trubbel.chat.custom-commands\"],\n        process(ctx, val) {\n          if (!ctx.get(\"addon.trubbel.chat.custom-commands\"))\n            return false;\n          return val;\n        },\n        ui: {\n          sort: 1,\n          path: \"Add-Ons > Trubbel\\u2019s Utilities > Chat >> Custom Commands\",\n          title: command.charAt(0).toUpperCase() + command.slice(1),\n          description: description,\n          component: \"setting-check-box\"\n        },\n        changed: () => this.handleCustomCommands()\n      });\n    });\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.chat.custom-commands\", () => this.handleCustomCommands());\n    this.on(\"chat:pre-send-message\", this.handleMessage);\n    this.handleCustomCommands();\n  }\n\n  onDisable() {\n    this.removeCommandHandlers();\n    this.off(\"chat:pre-send-message\", this.handleMessage);\n  }\n\n  removeCommandHandlers() {\n    for (const handler of this.commandHandlers) {\n      this.off(\"chat:get-tab-commands\", handler);\n    }\n    this.commandHandlers.clear();\n  }\n\n  getEnabledCommands() {\n    // Filter commands based on their individual settings\n    return ffzCommands.filter(command => {\n      // Extract the command name from the command object\n      const commandName = command.name.toLowerCase();\n\n      // Check if this command has a corresponding setting\n      const settingKey = `addon.trubbel.chat.custom-command-${commandName}`;\n\n      // Only include commands where their specific setting is enabled\n      return this.settings.get(settingKey);\n    });\n  }\n\n  handleMessage = (e) => {\n    const msg = e.message;\n    const inst = e._inst;\n\n    // Get enabled commands\n    const enabledCommands = this.getEnabledCommands();\n\n    // Check if the message matches any of our enabled commands\n    for (const command of enabledCommands) {\n      const commandRegex = new RegExp(`^\\\\${command.prefix}${command.name}\\\\s*`, \"i\");\n      if (commandRegex.test(msg)) {\n        e.preventDefault();\n\n        // Handle specific commands\n        switch (command.name.toLowerCase()) {\n          case \"accountage\":\n            getAccountAge(this, inst);\n            break;\n          case \"chatters\":\n            getChatters(this, inst);\n            break;\n          case \"followage\":\n            getFollowAge(this, inst);\n            break;\n          case \"shrug\":\n            shrug(this, inst, e);\n            break;\n          case \"uptime\":\n            getStreamUptime(this, inst);\n            break;\n          default:\n            inst.addMessage({\n              type: this.site.children.chat.chat_types.Notice,\n              message: `Unknown command: ${command.name}`\n            });\n        }\n        return;\n      }\n    }\n  }\n\n  handleCustomCommands() {\n    // Clean up existing handlers\n    this.removeCommandHandlers();\n\n    // Only proceed if main custom commands setting is enabled\n    if (this.settings.get(\"addon.trubbel.chat.custom-commands\")) {\n      const commandHandler = (e) => {\n        // Get currently enabled commands and add them to the command list\n        const enabledCommands = this.getEnabledCommands();\n        e.commands.push(...enabledCommands);\n      };\n\n      // Register the handler and store it for cleanup\n      this.on(\"chat:get-tab-commands\", commandHandler);\n      this.commandHandlers.add(commandHandler);\n    }\n  }\n}","const { TranslatableError } = FrankerFaceZ.utilities.object;\nconst { createElement, on, off } = FrankerFaceZ.utilities.dom;\n\nexport class ChatModeration extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.inject(\"settings\");\n    this.inject(\"i18n\");\n    this.inject(\"chat\");\n    this.inject(\"site\");\n    this.inject(\"site.chat\");\n    this.inject(\"site.fine\");\n    this.inject(\"site.router\");\n    this.inject(\"site.twitch_data\");\n\n    this.action = null;\n    this.messageData = null;\n    this.CUSTOM_TIMEOUT_ID = \"trubbel-custom-timeout-contain\";\n    this.STYLE_ID = \"trubbel-timeout-styles\";\n    this.isEnabled = false;\n\n    this.ActionTypes = {\n      CANCEL: \"cancel\",\n      TIMEOUT: \"timeout\",\n      BAN: \"ban\",\n      DELETE: \"delete\"\n    };\n\n    // Chat - Moderation - Enable BTTV-like Mod Action\n    this.settings.add(\"addon.trubbel.chat.moderation-bttv\", {\n      default: false,\n      requires: [\"context.moderator\"],\n      process(ctx, val) {\n        return ctx.get(\"context.moderator\") ? val : false;\n      },\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Chat >> Moderation\",\n        title: \"Enable BTTV-like Mod Action\",\n        description: \"Gives you the ability to use the right click context menu to ban, timeout, purge and delete messages. With some extra options below.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.handleModerationAction()\n    });\n    // Chat - Moderation - Options\n    this.settings.add(\"addon.trubbel.chat.moderation-bttv-option\", {\n      default: \"usernames\",\n      requires: [\"addon.trubbel.chat.moderation-bttv\"],\n      process(ctx, val) {\n        if (!ctx.get(\"addon.trubbel.chat.moderation-bttv\"))\n          return false;\n        return val;\n      },\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Chat >> Moderation\",\n        title: \"Options\",\n        description: \"Decide how you want to moderate when right clicking in chat;\\n\\n`Usernames` -> Only on usernames\\n\\n`Messages` -> Everywhere in a message\\n\\n`Messages (except embeds and links)` -> Same as above but this lets you use normal context menu when right clicking rich embeds and links.\",\n        component: \"setting-select-box\",\n        data: [\n          { title: \"Usernames\", value: \"usernames\" },\n          { title: \"Messages\", value: \"messages1\" },\n          { title: \"Messages (except embeds and links)\", value: \"messages2\" },\n        ]\n      },\n      changed: () => this.handleModerationAction()\n    });\n\n    this.boundRightClick = (event) => this.onRightClick(event);\n    this.boundTimeoutClick = this.handleTimeoutClick.bind(this);\n    this.boundClickOutside = this.handleClickOutside.bind(this);\n    this.boundMouseMove = this.handleMouseMove.bind(this);\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.chat.moderation-bttv\", () => this.handleModerationAction());\n    this.router.on(\":route\", this.checkNavigation, this);\n    this.checkNavigation();\n  }\n\n  init() {\n    if (this.isEnabled) return;\n    this.log.info(\"[BTTV Mod Action] init()\");\n    on(document, \"contextmenu\", this.boundRightClick);\n    on(document, \"click\", this.boundTimeoutClick);\n    on(document, \"click\", this.boundClickOutside);\n    this.injectStyles();\n    this.isEnabled = true;\n  }\n\n  cleanup() {\n    if (!this.isEnabled) return;\n    this.log.info(\"[BTTV Mod Action] cleanup()\");\n    off(document, \"contextmenu\", this.boundRightClick);\n    off(document, \"click\", this.boundTimeoutClick);\n    off(document, \"click\", this.boundClickOutside);\n    this.removeCustomTimeout();\n    this.removeStyles();\n    this.isEnabled = false;\n  }\n\n  checkNavigation() {\n    if (!this.settings.get(\"addon.trubbel.chat.moderation-bttv\")) return;\n    const chatRoutes = this.site.constructor.CHAT_ROUTES;\n\n    if (chatRoutes.includes(this.router?.current?.name)) {\n      this.log.info(\"[BTTV Mod Action] navigated to:\", this.router?.current?.name);\n      this.init();\n    } else {\n      this.cleanup();\n    }\n  }\n\n  injectStyles() {\n    if (document.getElementById(this.STYLE_ID)) return;\n\n    const style = (\n      <style id={this.STYLE_ID}>\n        {`\n        #${this.CUSTOM_TIMEOUT_ID} {\n          position: fixed;\n          top: 0px;\n          left: 0px;\n          width: 80px;\n          height: 224px;\n          overflow: hidden;\n          background: rgba(90, 90, 90, 0.4);\n          z-index: 99999;\n          user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n        }\n        #${this.CUSTOM_TIMEOUT_ID} .text,\n        #${this.CUSTOM_TIMEOUT_ID} .cursor {\n          position: absolute;\n          left: 0px;\n          top: 100px;\n          width: 80px;\n          height: 1px;\n          background: #f00;\n        }\n        #${this.CUSTOM_TIMEOUT_ID} .text {\n          top: 85px;\n          height: 30px;\n          line-height: 30px;\n          text-align: center;\n          background: rgba(0, 0, 0, 0.6);\n          cursor: default;\n          display: none;\n          color: #d3d3d3;\n        }\n        #${this.CUSTOM_TIMEOUT_ID}:hover .text {\n          display: block;\n        }\n        #${this.CUSTOM_TIMEOUT_ID}:hover .cursor {\n          background: #0f0;\n        }\n        `}\n      </style>\n    );\n\n    document.head.appendChild(style);\n  }\n\n  removeStyles() {\n    const style = document.getElementById(this.STYLE_ID);\n    if (style) {\n      style.remove();\n    }\n  }\n\n  onRightClick(event) {\n    const getChatMessageObject = (element) => {\n      try {\n        const instance = this.fine.getReactInstance(element);\n        if (!instance?.return) {\n          return null;\n        }\n        const props = instance.return.memoizedProps || instance.return.pendingProps;\n        if (props?.message) {\n          return props;\n        }\n        return null;\n      } catch (err) {\n        this.log.error(\"[BTTV Mod Action] Error getting chat message object:\", err);\n        return null;\n      }\n    };\n\n    const settingValue = this.settings.get(\"addon.trubbel.chat.moderation-bttv-option\");\n\n    const selectors = {\n      messages1: \".chat-line__message\",\n      messages2: \".chat-line__message\",\n      usernames: \".chat-line__message .chat-line__username\"\n    };\n\n    const selector = event.target.closest(selectors[settingValue]);\n    if (!selector) return;\n\n    // Rich content embeds and links\n    if (\n      settingValue === \"messages2\" &&\n      event.target.closest(\".ffz-tooltip.link-fragment, .ffz--chat-card\")\n    ) {\n      return;\n    }\n\n    // Check for text selection\n    const selection = window.getSelection();\n    if (selection.rangeCount > 0) {\n      const range = selection.getRangeAt(0);\n      const selectedText = selection.toString().trim();\n\n      // Check if there's selected text and if the selection intersects with the clicked element\n      if (selectedText.length > 0 && selector.contains(range.startContainer) && selector.contains(range.endContainer)) {\n        return;\n      }\n    }\n\n    const chatMessage = event.target.closest(\".chat-line__message\");\n    if (!chatMessage) return;\n\n    event.preventDefault();\n\n    // Get message ID\n    const messageObject = getChatMessageObject.call(this, chatMessage);\n\n    this.messageData = {\n      roomId: messageObject?.channelID || chatMessage.dataset.roomId,\n      room: messageObject?.channelLogin || chatMessage.dataset.room,\n      userId: messageObject?.message?.user?.userID || chatMessage.dataset.userId,\n      user: messageObject?.message?.user?.userLogin || chatMessage.dataset.user,\n      messageId: messageObject?.message?.id,\n      messageDeleted: messageObject?.message?.deleted\n    };\n\n    this.log.info(\"[Message] Right click data:\", event);\n    this.log.info(\"[Message] Message data:\", this.messageData);\n\n    this.openCustomTimeout(event.target);\n  }\n\n  createCustomTimeout() {\n    if (!this.container) {\n      this.container = (\n        <div id={this.CUSTOM_TIMEOUT_ID}>\n          <div className=\"text\" />\n\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"224\" width=\"80\">\n            <g fill=\"none\" fill-rule=\"evenodd\">\n              <path\n                fill=\"#000\"\n                fill-opacity=\".304\"\n                fill-rule=\"nonzero\"\n                d=\"M.5 0h80v20H.5zM.5 180h80v20H.5zM0 203h80v20H0z\"\n              />\n              <path\n                stroke=\"#ACACAC\"\n                stroke-opacity=\".3\"\n                d=\"M80.5 19.805C64.51 51.825 70.65 154.184.5 180\"\n              />\n              <path\n                fill=\"#FFF\"\n                fill-rule=\"nonzero\"\n                d=\"M18.773 218v-10.84h3.603c1.074 0 1.942.12 2.604.359.662.24 1.234.645 1.718 1.216.766.908 1.15 2.104 1.15 3.589 0 1.801-.477 3.198-1.429 4.19-.952.99-2.292 1.486-4.02 1.486h-3.626zm1.538-1.15h1.97c1.406 0 2.402-.378 2.988-1.135.63-.806.945-1.887.945-3.245 0-1.274-.31-2.275-.93-3.003a2.863 2.863 0 0 0-1.348-.912c-.522-.163-1.308-.245-2.358-.245H20.31v8.54zm15.571.894c-.967.293-1.794.44-2.483.44-1.172 0-2.128-.39-2.867-1.17-.74-.778-1.11-1.787-1.11-3.028 0-1.206.326-2.194.978-2.966.652-.771 1.485-1.157 2.501-1.157.962 0 1.705.342 2.23 1.025.525.684.788 1.655.788 2.915l-.008.447h-5.017c.21 1.89 1.136 2.834 2.776 2.834.6 0 1.338-.16 2.212-.483v1.143zm-4.922-4.578h3.509c0-1.48-.552-2.22-1.656-2.22-1.108 0-1.726.74-1.853 2.22zM38.41 218v-11.565h1.443V218h-1.443zm10.166-.256c-.967.293-1.794.44-2.483.44-1.172 0-2.128-.39-2.867-1.17-.74-.778-1.11-1.787-1.11-3.028 0-1.206.326-2.194.978-2.966.652-.771 1.485-1.157 2.501-1.157.962 0 1.705.342 2.23 1.025.525.684.788 1.655.788 2.915l-.008.447h-5.017c.21 1.89 1.135 2.834 2.776 2.834.6 0 1.338-.16 2.212-.483v1.143zm-4.922-4.578h3.508c0-1.48-.551-2.22-1.655-2.22-1.108 0-1.726.74-1.853 2.22zm9.837 5.017c-.733 0-1.304-.21-1.714-.63-.41-.42-.616-1.003-.616-1.75v-4.673h-.996v-1.084h.996v-1.443l1.443-.14v1.583h2.08v1.084h-2.08v4.41c0 1.04.45 1.56 1.348 1.56.19 0 .422-.033.696-.096V218c-.445.122-.83.183-1.157.183zm9.052-.44c-.967.294-1.794.44-2.483.44-1.172 0-2.127-.39-2.867-1.168-.74-.779-1.11-1.788-1.11-3.029 0-1.206.326-2.194.978-2.966.652-.771 1.486-1.157 2.501-1.157.962 0 1.706.342 2.23 1.025.525.684.788 1.655.788 2.915l-.007.447h-5.018c.21 1.89 1.136 2.834 2.776 2.834.6 0 1.338-.16 2.212-.483v1.143zm-4.922-4.577h3.509c0-1.48-.552-2.22-1.656-2.22-1.108 0-1.726.74-1.853 2.22zM26.756 186.292c0 .483-.084.931-.253 1.344a3.22 3.22 0 0 1-.706 1.073c-.376.376-.82.658-1.333.846-.513.188-1.16.282-1.941.282h-1.45v4.065h-1.45v-10.906h2.958c.655 0 1.209.055 1.663.165.454.11.857.282 1.208.516.415.279.736.625.964 1.04.227.415.34.94.34 1.575zm-1.509.037c0-.376-.066-.704-.197-.982a1.645 1.645 0 0 0-.601-.681 2.42 2.42 0 0 0-.802-.326c-.3-.066-.68-.099-1.139-.099h-1.435v4.358h1.223c.586 0 1.062-.052 1.428-.157.366-.105.664-.273.893-.502.23-.234.392-.481.487-.74a2.51 2.51 0 0 0 .143-.871zm10.093 7.573h-1.377v-.908a6.705 6.705 0 0 1-1.333.842 3.326 3.326 0 0 1-1.406.293c-.86 0-1.528-.263-2.007-.787-.478-.525-.718-1.296-.718-2.311v-5.31h1.377v4.658c0 .415.02.77.059 1.066.039.295.122.548.249.758.132.214.303.37.513.468.21.098.515.147.915.147.357 0 .746-.093 1.168-.278a5.455 5.455 0 0 0 1.183-.71v-6.11h1.377v8.182zm7.815-6.68h-.073a5.045 5.045 0 0 0-1.282-.139c-.425 0-.835.094-1.23.282-.396.188-.777.43-1.143.729v5.808H38.05v-8.181h1.377v1.208c.547-.44 1.03-.75 1.447-.934a3.153 3.153 0 0 1 1.278-.274c.239 0 .412.006.52.018.107.012.268.035.483.07v1.413zm7.932 5.75c0 1.386-.315 2.404-.945 3.054-.63.65-1.599.974-2.907.974-.435 0-.859-.03-1.271-.092a9.846 9.846 0 0 1-1.22-.26v-1.406h.074c.224.088.58.197 1.069.326.488.13.977.194 1.465.194.469 0 .857-.056 1.164-.168.308-.113.547-.269.718-.469.171-.19.293-.42.366-.688.074-.269.11-.57.11-.901v-.747c-.415.332-.812.58-1.19.743-.378.164-.86.245-1.447.245-.976 0-1.751-.352-2.325-1.058-.574-.706-.86-1.7-.86-2.985 0-.703.098-1.31.296-1.82.198-.51.468-.95.81-1.322a3.29 3.29 0 0 1 1.157-.809c.454-.193.905-.29 1.355-.29.473 0 .87.048 1.19.143.32.096.658.241 1.014.436l.088-.351h1.29v7.25zm-1.377-1.319v-4.46a5.333 5.333 0 0 0-1.022-.355 4.28 4.28 0 0 0-.94-.107c-.758 0-1.353.254-1.788.762-.434.508-.652 1.245-.652 2.212 0 .918.161 1.614.484 2.087.322.474.857.71 1.604.71.4 0 .802-.076 1.205-.23a4.37 4.37 0 0 0 1.11-.619zm10.935-1.699h-6.028c0 .503.076.941.227 1.315.152.373.36.68.623.919.254.234.555.41.905.527.349.118.733.176 1.153.176a4.56 4.56 0 0 0 1.681-.333c.564-.222.966-.44 1.205-.656h.073v1.502a11.36 11.36 0 0 1-1.42.49 5.765 5.765 0 0 1-1.524.198c-1.358 0-2.417-.367-3.179-1.102-.762-.735-1.142-1.779-1.142-3.131 0-1.338.364-2.4 1.094-3.186.73-.786 1.691-1.18 2.883-1.18 1.103 0 1.954.323 2.552.967.598.645.897 1.56.897 2.747v.747zm-1.34-1.055c-.005-.722-.187-1.281-.546-1.677-.359-.395-.904-.593-1.637-.593-.737 0-1.324.217-1.761.652-.437.434-.685.974-.744 1.618h4.688zM35.065 11.985c0 .542-.102 1.02-.307 1.435a2.9 2.9 0 0 1-.828 1.026c-.41.322-.86.552-1.351.688-.49.137-1.115.205-1.871.205H26.84V4.434h3.23c.796 0 1.392.029 1.787.087.396.06.774.181 1.136.367.4.21.69.48.871.809.18.33.271.724.271 1.183 0 .517-.132.958-.395 1.322a2.847 2.847 0 0 1-1.055.875v.059c.737.151 1.318.475 1.743.97.425.496.637 1.122.637 1.879zM32.626 7.07c0-.263-.043-.486-.131-.666a1.02 1.02 0 0 0-.425-.44 2.06 2.06 0 0 0-.835-.245 12.934 12.934 0 0 0-1.216-.048h-1.728v3.15h1.875c.454 0 .815-.023 1.084-.07.268-.046.517-.143.747-.29.23-.146.391-.335.487-.567.095-.232.142-.506.142-.824zm.93 4.973c0-.439-.065-.788-.197-1.047-.132-.259-.371-.478-.718-.66a2.407 2.407 0 0 0-.853-.237 11.454 11.454 0 0 0-1.22-.055h-2.277v4.058h1.918c.635 0 1.155-.033 1.56-.1.406-.065.738-.186.997-.362a1.84 1.84 0 0 0 .6-.652c.127-.244.19-.559.19-.945zm9.815 3.296h-1.37v-.871a25.28 25.28 0 0 0-.494.348 4.094 4.094 0 0 1-1.395.637 4.284 4.284 0 0 1-1.048.113c-.737 0-1.362-.244-1.875-.732-.512-.488-.769-1.11-.769-1.868 0-.62.133-1.122.4-1.505.266-.383.645-.685 1.138-.904.499-.22 1.097-.369 1.795-.447A36.096 36.096 0 0 1 42 9.934v-.212c0-.313-.054-.572-.164-.777a1.2 1.2 0 0 0-.473-.483 1.954 1.954 0 0 0-.703-.227 6.057 6.057 0 0 0-.857-.059c-.361 0-.764.048-1.208.143a9.395 9.395 0 0 0-1.377.414h-.073V7.334c.268-.073.656-.154 1.164-.242a8.793 8.793 0 0 1 1.502-.132c.576 0 1.077.048 1.505.143.427.095.797.258 1.11.487.307.225.541.515.702.872.162.356.242.798.242 1.326v5.551zm-1.37-2.014v-2.278c-.42.025-.914.061-1.483.11-.569.05-1.019.12-1.351.213-.396.112-.715.286-.96.523-.244.237-.366.563-.366.978 0 .469.142.822.425 1.058.283.237.715.356 1.297.356a3.08 3.08 0 0 0 1.325-.282 5.97 5.97 0 0 0 1.113-.678zm10.862 2.014h-1.377v-4.658a8.02 8.02 0 0 0-.066-1.058c-.044-.33-.124-.587-.241-.773a1.114 1.114 0 0 0-.528-.458c-.23-.1-.527-.15-.893-.15a2.86 2.86 0 0 0-1.18.279c-.41.185-.803.422-1.179.71v6.108h-1.377V7.16H47.4v.907c.43-.356.874-.634 1.333-.835.46-.2.93-.3 1.414-.3.884 0 1.558.266 2.021.798.464.533.696 1.3.696 2.3v5.31z\"\n              />\n            </g>\n          </svg>\n\n          <div className=\"cursor\" />\n        </div>\n      );\n    }\n\n    on(this.container, \"mousemove\", this.boundMouseMove);\n    return this.container;\n  }\n\n  // Made sure we can timeout up to two weeks\n  handleMouseMove(e) {\n    const customTimeout = document.querySelector(`#${this.CUSTOM_TIMEOUT_ID}`);\n    if (!customTimeout) return;\n\n    const clientRect = customTimeout.getBoundingClientRect();\n    const offsetY = e.pageY - clientRect.top;\n    const offsetX = e.pageX - clientRect.left;\n    const amount = 224 - offsetY;\n\n    // Calculate time with the original formula\n    const TWO_WEEKS = 1209600; // 14 days in seconds\n    const time = Math.min(\n      Math.floor(1.5 ** ((amount - 45) / 6.35) * 60),\n      TWO_WEEKS\n    );\n\n    let humanTime;\n    if (Math.floor(time / 60 / 60 / 24) > 0) {\n      humanTime = `${Math.floor(time / 60 / 60 / 24)} Day(s)`;\n    } else if (Math.floor(time / 60 / 60) > 0) {\n      humanTime = `${Math.floor(time / 60 / 60)} Hour(s)`;\n    } else {\n      humanTime = `${Math.floor(time / 60)} Minute(s)`;\n    }\n\n    if (amount > 224 || amount < 0 || offsetX > 83 || offsetX < 0) {\n      this.action = { type: this.ActionTypes.CANCEL, length: 0, text: \"CANCEL\" };\n    } else if (amount > 45 && amount < 204) {\n      this.action = { type: this.ActionTypes.TIMEOUT, length: time, text: humanTime };\n    } else if (amount >= 204 && amount <= 224) {\n      this.action = { type: this.ActionTypes.BAN, length: 0, text: \"BAN\" };\n    } else if (amount > 22 && amount <= 45) {\n      this.action = { type: this.ActionTypes.TIMEOUT, length: 1, text: \"PURGE\" };\n    } else if (amount > 0 && amount <= 22) {\n      this.action = { type: this.ActionTypes.DELETE, length: 0, text: \"DELETE\" };\n    }\n\n    const text = customTimeout.querySelector(\".text\");\n    if (text) {\n      text.innerText = this.action.text;\n    }\n\n    const cursor = customTimeout.querySelector(\".cursor\");\n    if (cursor) {\n      cursor.style.top = `${offsetY}px`;\n    }\n  }\n\n  async handleClickOutside(e) {\n    const customTimeout = document.querySelector(`#${this.CUSTOM_TIMEOUT_ID}`);\n    if (!customTimeout) return;\n\n    // If the click is outside the custom timeout menu, close it\n    if (!customTimeout.contains(e.target)) {\n      this.removeCustomTimeout();\n    }\n  }\n\n  async handleTimeoutClick(e) {\n    const customTimeout = document.querySelector(`#${this.CUSTOM_TIMEOUT_ID}`);\n    if (!customTimeout || !customTimeout.matches(\":hover\")) return;\n    if (!this.action || !this.messageData) return;\n\n    let command;\n    let duration;\n\n    if (this.action.type === this.ActionTypes.BAN) {\n      command = \"/ban\";\n    } else if (this.action.type === this.ActionTypes.TIMEOUT) {\n      command = \"/timeout\";\n      duration = this.action.length;\n    } else if (this.action.type === this.ActionTypes.DELETE) {\n      // To prevent spamming\n      if (this.messageData.messageDeleted) {\n        this.chat.addNotice(\n          this.messageData.room,\n          \"Message is already deleted!\"\n        );\n        return;\n      }\n      try {\n        await this.twitch_data.deleteChatMessage(\n          this.messageData.roomId,\n          this.messageData.messageId\n        );\n      } catch (err) {\n        if (err instanceof TranslatableError) {\n          this.chat.addNotice(\n            this.messageData.room,\n            this.i18n.t(err.i18n_key, err.message, err.data)\n          );\n        } else {\n          throw err;\n        }\n      }\n    }\n    if (command) {\n      const reason = e.shiftKey ? this.setReason(this.action.type) : \"\";\n      this.chat.sendMessage(\n        this.messageData.room,\n        `${command} ${this.messageData.user}${duration ? ` ${duration}` : \"\"}${reason ? ` ${reason}` : \"\"}`\n      );\n    }\n\n    this.removeCustomTimeout();\n  }\n\n  setReason(type) {\n    const reason = prompt(`Enter ${type} reason: (leave blank for none)`);\n    return reason || \"\";\n  }\n\n  openCustomTimeout(target) {\n    this.removeCustomTimeout();\n\n    const chatRoom = document.querySelector(\".chat-room__content\");\n    if (!chatRoom) return;\n\n    const customTimeout = this.createCustomTimeout();\n    document.body.appendChild(customTimeout);\n\n    const targetRect = target.getBoundingClientRect();\n    const chatRoomRect = chatRoom.getBoundingClientRect();\n    const timeoutRect = customTimeout.getBoundingClientRect();\n    const padding = 10;\n\n    let top = targetRect.top + target.offsetHeight / 2 - timeoutRect.height / 2;\n    let left = chatRoomRect.left - timeoutRect.width + chatRoomRect.width - 20;\n\n    top = Math.max(padding, Math.min(top, window.innerHeight - timeoutRect.height - padding));\n    left = Math.max(padding, Math.min(left, window.innerWidth - timeoutRect.width - padding));\n\n    customTimeout.style.top = `${top}px`;\n    customTimeout.style.left = `${left}px`;\n\n    this.action = { type: this.ActionTypes.CANCEL, length: 0, text: \"CANCEL\" };\n  }\n\n  removeCustomTimeout() {\n    const customTimeout = document.querySelector(`#${this.CUSTOM_TIMEOUT_ID}`);\n    if (customTimeout) {\n      off(customTimeout, \"mousemove\", this.boundMouseMove);\n      customTimeout.remove();\n    }\n  }\n\n  handleModerationAction() {\n    const enabled = this.settings.get(\"addon.trubbel.chat.moderation-bttv\");\n    if (enabled) {\n      this.checkNavigation();\n    } else {\n      this.cleanup();\n    }\n  }\n}","const { createElement } = FrankerFaceZ.utilities.dom;\n\nexport class ChatViewerCard extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.inject(\"settings\");\n    this.inject(\"site.router\");\n    this.inject(\"site.fine\");\n\n    this.STYLE_ID = \"trubbel-mod-vip-usernames\";\n    this.isEnabled = false;\n\n    // Chat - Viewer Cards - Enable Viewer Cards for /mods and /vips\n    this.settings.add(\"addon.trubbel.chat.viewer-card\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Chat >> Viewer Cards\",\n        title: \"Enable Viewer Cards for /mods and /vips\",\n        description: \"This gives you the ability to click on any usernames when using /mods and /vips which then opens up their viewer cards.\\n\\n**Note:** Might not work for every language.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.handleViewerCards()\n    });\n\n    this.handleModListClick = (event) => this.onHandleModListClick(event);\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.chat.viewer-card\", () => this.handleViewerCards());\n    this.router.on(\":route\", this.checkNavigation, this);\n    this.checkNavigation();\n  }\n\n  init() {\n    if (this.isEnabled) return;\n    document.addEventListener(\"click\", this.handleModListClick);\n    this.on(\"chat:buffer-message\", this.onBufferMessage, this);\n    this.injectStyles();\n    this.isEnabled = true;\n  }\n\n  onBufferMessage(event) {\n    if (!this.settings.get(\"addon.trubbel.chat.viewer-card\")) return;\n\n    if (event?.message?.type !== this.chat?.chat_types.Info) return;\n\n    const message = event?.message?.message;\n    const regex = /:\\s*(.+?)\\./;\n    const match = message.match(regex);\n    if (!match) return;\n\n    setTimeout(() => this.processModList(message, match), 50);\n  }\n\n  cleanup() {\n    if (!this.isEnabled) return;\n    document.removeEventListener(\"click\", this.handleModListClick);\n    this.off(\"chat:buffer-message\", this.onBufferMessage, this);\n    this.removeStyles();\n    this.isEnabled = false;\n  }\n\n  processModList(message, match) {\n    const statusElement = this.findStatusMessage(message);\n    if (!statusElement || statusElement.querySelector(\"ffz-username\")) return;\n\n    const usernames = match[1].split(\",\")\n      .map(username => username.trim())\n      .filter(username => username.length > 0);\n\n    let newText = message.substring(0, match.index + 1);\n    usernames.forEach((username, index) => {\n      if (index > 0) newText += \",\";\n      newText += ` <ffz-username>${username}</ffz-username>`;\n    });\n    newText += \".\";\n\n    // try to injectStyles() making usernames bold within /mods and /vips\n    statusElement.innerHTML = newText;\n  }\n\n  findStatusMessage(messageText) {\n    const statusMessages = Array.from(document.querySelectorAll(\".chat-line__status\"));\n    for (const element of statusMessages.reverse()) {\n      if (element.textContent.trim() === messageText.trim()) {\n        return element;\n      }\n    }\n    return null;\n  }\n\n  async onHandleModListClick(event) {\n    const target = event.target;\n    const statusMsg = target.closest(\".chat-line__status\");\n    if (!statusMsg) return;\n\n    const content = statusMsg.textContent;\n    const match = content.match(/:\\s*(.+?)\\./);\n    if (!match) return;\n\n    const usernames = match[1].split(\",\")\n      .map(username => username.trim())\n      .filter(username => username.length > 0);\n\n    const username = this.getClickedUsername(event, usernames);\n    if (!username) {\n      this.log.info(\"No exact username match found for clicked text\");\n      return;\n    }\n\n    const chatContainer = this.fine.wrap(\"chat-container\");\n    if (chatContainer?.first) {\n      const container = chatContainer.first;\n      if (container.onUsernameClick) {\n        const rect = statusMsg.getBoundingClientRect();\n        container.onUsernameClick(username, null, null, rect.top);\n        return;\n      }\n    }\n  }\n\n  getClickedUsername(event, usernames) {\n    let clickedRange;\n    if (document.caretRangeFromPoint) {\n      clickedRange = document.caretRangeFromPoint(event.clientX, event.clientY);\n    } else if (document.caretPositionFromPoint) {\n      const caretPosition = document.caretPositionFromPoint(event.clientX, event.clientY);\n      if (caretPosition) {\n        clickedRange = document.createRange();\n        clickedRange.setStart(caretPosition.offsetNode, caretPosition.offset);\n        clickedRange.setEnd(caretPosition.offsetNode, caretPosition.offset);\n      }\n    }\n\n    if (!clickedRange) return null;\n\n    const container = clickedRange.startContainer;\n    const offset = clickedRange.startOffset;\n    const fullText = container.textContent || \"\";\n\n    let currentPosition = 0;\n    for (const username of usernames) {\n      const usernameStart = fullText.indexOf(username, currentPosition);\n      if (usernameStart !== -1) {\n        const usernameEnd = usernameStart + username.length;\n        if (offset >= usernameStart && offset <= usernameEnd) {\n          return username;\n        }\n        currentPosition = usernameEnd;\n      }\n    }\n\n    return null;\n  }\n\n  checkNavigation() {\n    if (!this.settings.get(\"addon.trubbel.chat.viewer-card\")) return;\n    const chatRoutes = this.resolve(\"site\").constructor.CHAT_ROUTES;\n\n    if (chatRoutes.includes(this.router?.current?.name)) {\n      this.init();\n    } else {\n      this.cleanup();\n    }\n  }\n\n  injectStyles() {\n    if (document.getElementById(this.STYLE_ID)) return;\n    const style = createElement(\"style\", {\n      id: this.STYLE_ID,\n      textContent: `\n        ffz-username {\n          cursor: pointer;\n          display: inline;\n          font-weight: bold;\n        }\n        ffz-username:hover {\n          text-decoration: underline;\n        }\n      `\n    });\n    document.head.appendChild(style);\n  }\n\n  removeStyles() {\n    const style = document.getElementById(this.STYLE_ID);\n    if (style) {\n      style.remove();\n    }\n  }\n\n  handleViewerCards() {\n    const enabled = this.settings.get(\"addon.trubbel.chat.viewer-card\");\n    if (enabled) {\n      this.checkNavigation();\n    } else {\n      this.cleanup();\n    }\n  }\n}","export const FOLLOWING_CHANNELS_SELECTOR = \"[data-a-target=\\\"following-channels-tab\\\"] [class*=\\\"ScTitle-sc-\\\"]\";\nexport const MOST_RECENT_CARD_SELECTOR = \".offline-recommendations-video-card:has([class*=\\\"offline-recommendations-video-card-border-\\\"]) :is(.tw-aspect)\";\nexport const MOST_RECENT_SELECTOR = \".offline-recommendations-video-card\";\nexport const TIMESTAMP_SELECTOR = \".timestamp-metadata__bar + p\";\nexport const WHISPER_THREADS_SELECTOR = \".whispers-threads-box__scrollable-area\";","import { TIMESTAMP_SELECTOR } from \"../../utils/constants/selectors\";\nimport GET_CLIP from \"../../utils/graphql/clip_info.gql\";\nimport GET_VIDEO from \"../../utils/graphql/video_info.gql\";\n\nasync function getIdFromURL(ctx) {\n  if (location.hostname === \"clips.twitch.tv\" || location.pathname.includes(\"/clip/\")) {\n    const clipId = location.hostname === \"clips.twitch.tv\"\n      ? location.pathname.slice(1)\n      : location.pathname.split(\"/clip/\")[1];\n\n    if (clipId) {\n      if (!ctx.settings.get(\"addon.trubbel.clip-video.timestamps-clip\")) return;\n      return { type: \"clip\", id: clipId };\n    }\n  }\n\n  const videoMatch = location.pathname.match(/\\/videos\\/(\\d+)/);\n  if (videoMatch) {\n    if (!ctx.settings.get(\"addon.trubbel.clip-video.timestamps-video\")) return;\n    return { type: \"video\", id: videoMatch[1] };\n  }\n\n  return null;\n}\n\nasync function fetchCreationDate(ctx, type, id) {\n  try {\n    const apollo = ctx.resolve(\"site.apollo\");\n    if (!apollo) {\n      ctx.log.error(\"[Set Timestamp] Apollo client not resolved.\");\n      return null;\n    }\n\n    const query = type === \"clip\" ? GET_CLIP : GET_VIDEO;\n    const variables = type === \"clip\" ? { slug: id } : { id };\n\n    const result = await apollo.client.query({\n      query,\n      variables,\n    });\n\n    return type === \"clip\"\n      ? result?.data?.clip?.createdAt\n      : result?.data?.video?.createdAt;\n  } catch (error) {\n    ctx.log.error(`[Set Timestamp] Error fetching ${type} data:`, error);\n    return null;\n  }\n}\n\nasync function updateTimestamp(createdAt, ctx) {\n  const element = await ctx.site.awaitElement(TIMESTAMP_SELECTOR, document.documentElement, 15000);\n  if (!element) {\n    ctx.log.error(\"[Set Timestamp] Timestamp element not found.\");\n    return;\n  }\n\n  let relative = \"\";\n  if (ctx.settings.get(\"addon.trubbel.clip-video.timestamps-relative\")) {\n    relative = `(${ctx.i18n.toRelativeTime(createdAt)})`;\n  }\n\n  const timestamp = ctx.i18n.formatDateTime(\n    createdAt,\n    ctx.settings.get(\"addon.trubbel.clip-video.timestamps-format\")\n  );\n\n  element.textContent = `${timestamp} ${relative}`;\n}\n\nexport default async function setTimestamp(ctx) {\n  const validRoutes = [\"clip-page\", \"user-clip\", \"video\"];\n  if (!validRoutes.includes(ctx.router.current_name)) return;\n\n  const idInfo = await getIdFromURL(ctx);\n  if (!idInfo) return;\n\n  if (!ctx.settings.get(\"addon.trubbel.clip-video.timestamps-clip\") && idInfo.type === \"clip\") {\n    return;\n  }\n  if (!ctx.settings.get(\"addon.trubbel.clip-video.timestamps-video\") && idInfo.type === \"video\") {\n    return;\n  }\n\n  const createdAt = await fetchCreationDate(ctx, idInfo.type, idInfo.id);\n  if (createdAt) {\n    await updateTimestamp(createdAt, ctx);\n  }\n}","import { MOST_RECENT_CARD_SELECTOR, MOST_RECENT_SELECTOR } from \"../../utils/constants/selectors\";\nimport GET_VIDEO from \"../../utils/graphql/video_info.gql\";\nconst { createElement } = FrankerFaceZ.utilities.dom;\n\nlet lastProcessedVideoId = null; // Tracks the last processed video ID\nlet processing = false; // Prevents re-entrant calls\n\nexport default async function applyMostRecentVideoTimestamp(ctx) {\n  if (ctx.router.current?.name === \"user\" || ctx.router.current?.name === \"mod-view\") {\n    if (!ctx.settings.get(\"addon.trubbel.clip-video.timestamps-most-recent\")) return;\n\n    const element = await ctx.site.awaitElement(MOST_RECENT_SELECTOR, document.documentElement, 15000);\n    if (element) {\n      const container = await ctx.site.awaitElement(MOST_RECENT_CARD_SELECTOR, document.documentElement, 15000);\n      if (container) {\n        if (container && !document.querySelector(\".most_recent_video-overlay\")) {\n          lastProcessedVideoId = null;\n          processing = false;\n        }\n\n        const videoId = element?.getAttribute(\"href\").split(\"/videos/\")[1];\n        if (!videoId) return;\n\n        if (processing) {\n          ctx.log.info(\"[Most Recent Video Timestamp] Skipping as processing is already in progress.\");\n          return;\n        }\n\n        if (videoId === lastProcessedVideoId) {\n          ctx.log.info(\"[Most Recent Video Timestamp] Skipping as this video ID is already processed.\");\n          return;\n        }\n\n        processing = true;\n        lastProcessedVideoId = videoId;\n\n        try {\n          const apollo = ctx.resolve(\"site.apollo\");\n          if (!apollo) {\n            ctx.log.error(\"[Most Recent Video Timestamp] Apollo client not resolved.\");\n            return null;\n          }\n\n          const result = await apollo.client.query({\n            query: GET_VIDEO,\n            variables: {\n              id: videoId,\n            }\n          });\n\n          const createdAt = result?.data?.video?.createdAt;\n          if (createdAt) {\n            const overlay = createElement(\"div\", {\n              class: \"most_recent_video-overlay\",\n              style: \"display: block;\"\n            });\n\n            const notice = createElement(\"div\", {\n              class: \"most_recent_video-timestamp\",\n              style: \"padding: 0px 0.4rem; background: rgba(0, 0, 0, 0.6); color: #fff; font-size: 1.3rem; border-radius: 0.2rem; position: absolute; bottom: 0px; right: 0px; margin: 2px;\"\n            });\n\n            let relative = \"\";\n            if (ctx.settings.get(\"addon.trubbel.clip-video.timestamps-relative\")) {\n              relative = `(${ctx.i18n.toRelativeTime(createdAt)})`;\n            }\n            const timestamp = ctx.i18n.formatDateTime(\n              createdAt,\n              ctx.settings.get(\"addon.trubbel.clip-video.timestamps-format\")\n            );\n            notice.textContent = `${timestamp} ${relative}`;\n\n            overlay.appendChild(notice);\n            container.appendChild(overlay);\n          }\n        } catch (error) {\n          ctx.log.error(\"[Most Recent Video Timestamp] Error applying video timestamp:\", error);\n        } finally {\n          processing = false;\n        }\n      } else {\n        ctx.log.warn(\"[Most Recent Video Timestamp] container not found.\");\n      }\n    } else {\n      ctx.log.warn(\"[Most Recent Video Timestamp] element not found.\");\n    }\n  }\n}","const { createElement } = FrankerFaceZ.utilities.dom;\n\nexport function showNotification(icon = \"\", message, timeout = 6000) {\n  // Create notification element\n  const notification = createElement(\"div\", {\n    className: \"dynamic-notification\",\n    style: `\n    position: fixed;\n    bottom: 20px;\n    left: 20px;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    padding: 12px 20px;\n    border-radius: 8px;\n    font-size: 16px;\n    z-index: 9999;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    opacity: 0;\n    transform: translateY(20px);\n    transition: opacity 0.3s ease, transform 0.3s ease;\n  `\n  });\n\n  // Stack notifications vertically\n  const existingNotifications = document.getElementsByClassName(\"dynamic-notification\");\n  if (existingNotifications.length > 0) {\n    const offset = existingNotifications.length * 50; // Adjust spacing as needed\n    notification.style.bottom = `${20 + offset}px`;\n  }\n\n  if (icon) {\n    const iconElement = createElement(\"div\", {\n      textContent: icon,\n      style: \"font-size: 16px;\"\n    });\n    notification.appendChild(iconElement);\n  }\n\n  const text = createElement(\"span\", {\n    textContent: message,\n    style: \"font-size: 16px;\"\n  });\n  notification.appendChild(text);\n  document.body.appendChild(notification);\n\n  requestAnimationFrame(() => {\n    notification.style.opacity = \"1\";\n    notification.style.transform = \"translateY(0)\";\n  });\n\n  setTimeout(() => {\n    notification.style.opacity = \"0\";\n    notification.style.transform = \"translateY(20px)\";\n    setTimeout(() => {\n      notification.remove();\n      // Reposition remaining notifications\n      const remainingNotifications = document.getElementsByClassName(\"dynamic-notification\");\n      Array.from(remainingNotifications).forEach((notif, index) => {\n        notif.style.bottom = `${20 + (index * 50)}px`;\n      });\n    }, 300);\n  }, timeout);\n}\n// These can all exist simultaneously\n// showNotification(\"🔄\", \"Loading data...\", 3000);\n// showNotification(\"✅\", \"Data saved successfully!\", 3000);\n// showNotification(\"⚠️\", \"Warning: Connection slow\", 5000);","import setTimestamp from \"../features/clips-videos/set-timestamp\";\nimport applyMostRecentVideoTimestamp from \"../features/clips-videos/most-recent-video\";\nimport GET_VIDEO from \"../utils/graphql/video_info.gql\";\nimport { showNotification } from \"../utils/create-notification\";\nimport { formatTime } from \"../utils/format\";\n\nexport class ClipsVideos extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.inject(\"settings\");\n    this.inject(\"i18n\");\n    this.inject(\"site\");\n    this.inject(\"site.fine\");\n    this.inject(\"site.player\");\n    this.inject(\"site.router\");\n\n    // Clips and Videos - Timestamps - Enable Custom Timestamps for Clips\n    this.settings.add(\"addon.trubbel.clip-video.timestamps-clip\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> Timestamps\",\n        title: \"Enable Custom Timestamps for Clips\",\n        description: \"Show the full timestamp when a clip was created.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getClipOrVideo()\n    });\n    // Clips and Videos - Timestamps - Enable Custom Timestamps for Videos\n    this.settings.add(\"addon.trubbel.clip-video.timestamps-video\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> Timestamps\",\n        title: \"Enable Custom Timestamps for Videos\",\n        description: \"Show the full timestamp when a video was created.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getClipOrVideo()\n    });\n\n    // Clips and Videos - Timestamps - Enable Timestamps for Most Recent Videos\n    this.settings.add(\"addon.trubbel.clip-video.timestamps-most-recent\", {\n      default: false,\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> Timestamps\",\n        title: \"Enable Timestamps for Most Recent Videos\",\n        description: \"Show timestamps on most recent videos when a stream is offline.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getMostRecentVideo()\n    });\n\n    // Clips and Videos - Timestamp - Timestamp Format\n    this.settings.add(\"addon.trubbel.clip-video.timestamps-format\", {\n      default: \"medium\",\n      ui: {\n        sort: 3,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> Timestamps\",\n        title: \"Timestamp Format\",\n        description: \"The default combined timestamp format. Custom time formats are formatted using the [Day.js](https://day.js.org/docs/en/display/format) library.\",\n        component: \"setting-combo-box\",\n        extra: {\n          before: true,\n          mode: \"datetime\",\n          component: \"format-preview\"\n        },\n        data: () => {\n          const out = [], now = new Date;\n          for (const [key, fmt] of Object.entries(this.i18n._.formats.datetime)) {\n            out.push({\n              value: key, title: `${this.i18n.formatDateTime(now, key)} (${key})`\n            })\n          }\n          return out;\n        }\n      },\n      changed: val => {\n        this.i18n._.defaultDateTimeFormat = val;\n        this.emit(\":update\");\n        this.getClipOrVideo();\n      }\n    });\n    // Clips and Videos - Timestamp - Enable Relative Timestamp\n    this.settings.add(\"addon.trubbel.clip-video.timestamps-relative\", {\n      default: false,\n      ui: {\n        sort: 4,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> Timestamps\",\n        title: \"Enable Relative Timestamp\",\n        description: \"Include relative timestamp, such as `(2 days ago)`, `(2 months ago)`, `(2 years ago)` at the end.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getClipOrVideo()\n    });\n\n    // Clips and Videos - VODs - Enable Auto-Skip Muted Segments\n    this.settings.add(\"addon.trubbel.vods.skip-segments\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> VODs\",\n        title: \"Enable Auto-Skip Muted Segments\",\n        description: \"Automatically detects and skips muted segments.\\n\\nOnce you reach the start of a muted segment, this will automatically skip to the end of that muted segment.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getMutedSegments()\n    });\n    // Clips and Videos - VODs - Enable Auto-Skip Muted Segments\n    this.settings.add(\"addon.trubbel.vods.skip-segments-notify\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Clips and Videos >> VODs\",\n        title: \"Enable Auto-Skip Notifications\",\n        description: \"Show a notification bottom left when a muted segment is skipped.\",\n        component: \"setting-check-box\"\n      }\n    });\n\n    this.currentVideoId = null;\n    this.isProcessing = false;\n    this.pendingFetch = null;\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.vods.skip-segments\", () => this.getMutedSegments());\n    this.router.on(\":route\", this.checkNavigation, this);\n    this.checkNavigation();\n\n    this.settings.getChanges(\"addon.trubbel.vods.skip-segments\", () => this.getMostRecentVideo());\n    this.router.on(\":route\", (route, match) => {\n      if (route?.name === \"clip-page\" || route?.name === \"user-clip\" || route?.name === \"video\") {\n        this.getClipOrVideo();\n      }\n      if (route?.name === \"mod-view\" || route?.name === \"user\") {\n        this.getMostRecentVideo();\n      }\n    });\n  }\n\n  checkNavigation() {\n    if ((this.router?.old_name === \"video\" || this.router?.old_name === \"user-home\" || this.router?.old_name === \"user-videos\") &&\n      (this.router.current?.name !== \"video\" && this.router.current?.name !== \"user-home\" && this.router.current?.name !== \"user-videos\")) {\n      this.cleanupEventListeners();\n    }\n    if (this.router.current?.name === \"video\" || this.router.current?.name === \"user-home\" || this.router.current?.name === \"user-videos\") {\n      this.getMutedSegments();\n    }\n  }\n\n  getClipOrVideo() {\n    setTimestamp(this);\n  }\n\n  getMostRecentVideo() {\n    const enabled = this.settings.get(\"addon.trubbel.clip-video.timestamps-most-recent\");\n    if (enabled) {\n      applyMostRecentVideoTimestamp(this);\n    } else {\n      document.querySelector(\".most_recent_video-overlay\")?.remove();\n    }\n  }\n\n  cleanupEventListeners() {\n    const video = document.querySelector(\"[data-a-target=\\\"video-player\\\"] video\");\n    if (video && video._mutedSegmentsHandler) {\n      video.removeEventListener(\"timeupdate\", video._mutedSegmentsHandler);\n      delete video._mutedSegmentsHandler;\n    }\n\n    this.currentVideoId = null;\n    this.isProcessing = false;\n    this.pendingFetch = null;\n  }\n\n  async waitForVideo() {\n    try {\n      const video = await this.site.awaitElement(\"[data-a-target=\\\"video-player\\\"] video\", document.documentElement, 15000);\n      // Pre-check: Look for muted segments in the seekbar\n      // Instead of fetching information for each video\n      // Check for muted segments parts in the seekbar before continuing\n      try {\n        // Wait for the seekbar to load\n        const seekbar = await this.site.awaitElement(\".seekbar-bar\", document.documentElement, 15000);\n        // Get all the segments\n        const segments = Array.from(seekbar.querySelectorAll(\"[data-test-selector=\\\"seekbar-segment__segment\\\"]\"));\n\n        this.log.info(\"[Muted Segments] Found seekbar segments:\", segments.length);\n\n        // Handle muted segments\n        const hasMutedSegments = segments.some(segment => {\n          const style = window.getComputedStyle(segment);\n          const backgroundColor = style.backgroundColor;\n          // Look for the muted segment color\n          return backgroundColor === \"rgba(212, 73, 73, 0.5)\";\n        });\n\n        // If no muted segments are found in the seekbar, we don't want to continue, to avoid making unnecessary GraphQL requests\n        if (!hasMutedSegments) {\n          this.log.info(\"[Muted Segments] No muted segments found in seekbar, stopping process\");\n          return false;\n        }\n\n        this.log.info(\"[Muted Segments] Found muted segments in seekbar, continuing with processing\");\n      } catch (error) {\n        this.log.info(\"[Muted Segments] Error checking seekbar:\", error);\n        return false;\n      }\n\n      // If we found muted segments, proceed with getting the videoId\n      const videoId = this?.site?.children?.player?.PlayerSource?.first?.props?.content?.vodID;\n      if (videoId) {\n        return { video, videoId };\n      }\n\n      return false;\n    } catch (error) {\n      this.log.error(\"[Muted Segments] Error waiting for video:\", error);\n      return false;\n    }\n  }\n\n  async getMutedSegments() {\n    const enabled = this.settings.get(\"addon.trubbel.vods.skip-segments\");\n    if (enabled) {\n      // Clean up any existing handlers\n      this.cleanupEventListeners();\n\n      const result = await this.waitForVideo();\n\n      // If waitForVideo returns false, stop processing\n      if (result === false) {\n        this.log.info(\"[Muted Segments] Stopping process - no muted segments found or error occurred\");\n        return;\n      }\n\n      const { video, videoId } = result;\n      if (!videoId || !video) return;\n\n      const segments = await this.fetchMutedSegments(videoId);\n      if (segments) {\n        const processedSegments = this.processMutedSegments(segments);\n        await this.setupVideoTimeHandler(video, processedSegments);\n      }\n    } else {\n      this.cleanupEventListeners();\n      return;\n    }\n  }\n\n  async fetchMutedSegments(videoId) {\n    if (this.pendingFetch && this.currentVideoId === videoId) {\n      return this.pendingFetch;\n    }\n\n    if (videoId === this.currentVideoId || this.isProcessing) return null;\n\n    this.isProcessing = true;\n\n    this.pendingFetch = new Promise(async (resolve) => {\n      try {\n        const apollo = this.resolve(\"site.apollo\");\n        if (!apollo) {\n          resolve(null);\n          return;\n        }\n\n        const result = await apollo.client.query({\n          query: GET_VIDEO,\n          variables: { id: videoId },\n        });\n\n        const segments = result.data?.video?.muteInfo?.mutedSegmentConnection?.nodes;\n        if (segments?.length) {\n          this.log.info(\"[Muted Segments] Found segments:\", segments.length);\n          this.currentVideoId = videoId;\n          resolve(segments);\n        } else {\n          this.log.info(\"[Muted Segments] No muted segments found for this video\");\n          resolve(null);\n        }\n      } catch (error) {\n        this.log.error(\"[Muted Segments] Error fetching segments:\", error);\n        resolve(null);\n      } finally {\n        this.isProcessing = false;\n      }\n    });\n\n    return this.pendingFetch;\n  }\n\n  processMutedSegments(segments) {\n    if (!segments) return [];\n\n    const sortedSegments = [...segments].sort((a, b) => a.offset - b.offset);\n    const combined = [];\n    let current = { ...sortedSegments[0] };\n\n    for (let i = 1; i < sortedSegments.length; i++) {\n      const segment = sortedSegments[i];\n      if (segment.offset <= current.offset + current.duration + 1) {\n        current.duration = Math.max(\n          current.duration,\n          segment.offset + segment.duration - current.offset\n        );\n      } else {\n        combined.push(current);\n        current = { ...segment };\n      }\n    }\n    combined.push(current);\n    this.log.info(\"[Muted Segments] processMutedSegments() combined:\", combined);\n    return combined;\n  }\n\n  async setupVideoTimeHandler(video, processedSegments) {\n    if (!video) return;\n\n    const timeUpdateHandler = () => {\n      const currentTime = video.currentTime;\n      for (const segment of processedSegments) {\n        if (!video.paused && currentTime >= segment.offset &&\n          currentTime < segment.offset + segment.duration) {\n          video.currentTime = segment.offset + segment.duration;\n          this.log.info(`[Muted Segments] Skipped segment: ${segment.offset} -> ${segment.offset + segment.duration}`);\n          if (this.settings.get(\"addon.trubbel.vods.skip-segments-notify\")) {\n            const startTime = formatTime(segment.offset);\n            const endTime = formatTime(segment.offset + segment.duration);\n            showNotification(\"🔇\", `Skipped muted segment: ${startTime} → ${endTime}`);\n          }\n          break;\n        }\n      }\n    };\n\n    if (video._mutedSegmentsHandler) {\n      video.removeEventListener(\"timeupdate\", video._mutedSegmentsHandler);\n    }\n\n    video.addEventListener(\"timeupdate\", timeUpdateHandler);\n    video._mutedSegmentsHandler = timeUpdateHandler;\n  }\n}","const { createElement, ManagedStyle } = FrankerFaceZ.utilities.dom;\n\nimport { FOLLOWING_CHANNELS_SELECTOR } from \"../utils/constants/selectors\";\nimport GET_FOLLOWS from \"../utils/graphql/follows_totalCount.gql\";\n\nexport class Directory extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.style = new ManagedStyle;\n\n    this.inject(\"settings\");\n    this.inject(\"i18n\");\n    this.inject(\"site\");\n    this.inject(\"site.fine\");\n    this.inject(\"site.router\");\n    this.inject(\"site.elemental\");\n\n    // Directory - Following - Show Channel Follow Date\n    this.settings.add(\"addon.trubbel.directory.show-followage\", {\n      default: false,\n      requires: [\"context.route.name\"],\n      process(ctx, val) {\n        return ctx.get(\"context.route.name\") === \"dir-following\" ? val : false;\n      },\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Directory >> Following\",\n        title: \"Show Channel Follow Date\",\n        description: \"This will display the date you followed a channel in [Followed channels](https://www.twitch.tv/directory/following/channels).\",\n        component: \"setting-check-box\"\n      },\n      changed: () => {\n        this.updateFollowingCards();\n        this.updateCSS();\n      }\n    });\n\n    // Directory - Following - Show Total Followed Channels\n    this.settings.add(\"addon.trubbel.directory.total-followed-channels\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Directory >> Following\",\n        title: \"Show Total Followed Channels\",\n        description: \"This displays the total number of channels you're following. Which is visible in the [following](https://twitch.tv/directory/following)-pages.\",\n        component: \"setting-check-box\"\n      }\n    });\n\n    // Directory - Thumbnails - Enable Video Previews in Directory\n    this.settings.add(\"addon.trubbel.directory.previews\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Directory >> Thumbnails\",\n        title: \"Enable Video Previews in Directory\",\n        description: \"Displays a video preview when hovering over channel thumbnails in directories.\\n\\n**Note:** For this to work properly, make sure your browser has granted **Autoplay** and **Sound** permissions for `player.twitch.tv`.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.handlePreviews()\n    });\n\n    // Directory - Thumbnails - Video Previews Quality\n    this.settings.add(\"addon.trubbel.directory.preview-quality\", {\n      default: \"160p30\",\n      requires: [\"addon.trubbel.directory.previews\"],\n      process(ctx, val) {\n        if (!ctx.get(\"addon.trubbel.directory.previews\"))\n          return false;\n        return val;\n      },\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Directory >> Thumbnails\",\n        title: \"Video Previews Quality\",\n        description: \"Change the quality for the previews to be shown in.\",\n        component: \"setting-select-box\",\n        data: [\n          { title: \"Auto\", value: \"auto\" },\n          { title: \"Source\", value: \"chunked\" },\n          { title: \"1080p60\", value: \"1080p60\" },\n          { title: \"720p60\", value: \"720p60\" },\n          { title: \"720p\", value: \"720p30\" },\n          { title: \"480p\", value: \"480p30\" },\n          { title: \"360p\", value: \"360p30\" },\n          { title: \"160p\", value: \"160p30\" }\n        ]\n      },\n      changed: () => this.handlePreviews()\n    });\n\n    // Directory - Thumbnails - Enable Audio for Previews\n    this.settings.add(\"addon.trubbel.directory.preview-audio\", {\n      default: false,\n      requires: [\"addon.trubbel.directory.previews\"],\n      process(ctx, val) {\n        if (!ctx.get(\"addon.trubbel.directory.previews\"))\n          return false;\n        return val;\n      },\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Directory >> Thumbnails\",\n        title: \"Enable Audio for Previews\",\n        description: \"Please keep in mind that this is using your default volume for streams. Some streams may be loud.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.handlePreviews()\n    });\n\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n\n    this.FollowingCard = this.elemental.define(\n      \"following-card\",\n      \".channel-follow-listing--card\",\n      [\"dir-following\"], null, 0, 0\n    );\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.directory.previews\", () => this.handlePreviews());\n    this.router.on(\":route\", this.checkNavigation, this);\n\n    this.FollowingCard.on(\"mount\", this.updateFollowingCard, this);\n    this.FollowingCard.on(\"mutate\", this.updateFollowingCard, this);\n    this.FollowingCard.each(el => this.updateFollowingCard(el));\n    this.updateCSS();\n  }\n\n  checkNavigation() {\n    const currentMatch = this.router?.match?.[0];\n    const oldMatch = this.router?.old_match?.[0];\n\n    const isCurrentDirectory = currentMatch?.startsWith(\"/directory/\") ?? false;\n    const wasDirectory = oldMatch?.startsWith(\"/directory/\") ?? false;\n\n    if (isCurrentDirectory || wasDirectory) {\n      if (wasDirectory && !isCurrentDirectory) {\n        this.log.info(\"[Directory Previews] Leaving directory page, cleaning up event listeners\");\n        this.cleanupEventListeners();\n      }\n\n      if (isCurrentDirectory && this.settings.get(\"addon.trubbel.directory.previews\")) {\n        this.log.info(\"[Directory Previews] Entering directory page, setting up event listeners\");\n        this.setupEventListeners();\n      }\n    }\n\n    if (this.router?.current?.name === \"dir-following\" && this.settings.get(\"addon.trubbel.directory.total-followed-channels\")) {\n      this.showTotalFollowedChannels();\n    }\n  }\n\n  async showTotalFollowedChannels() {\n    const tabElement = await this.site.awaitElement(FOLLOWING_CHANNELS_SELECTOR, document.documentElement, 5000);\n    if (tabElement) {\n      // Make sure it doesn't update (if active) on each tab change (Overview, Live, Videos, Categories, Channels)\n      if (!tabElement.textContent.includes(\"(\")) {\n\n        const apollo = this.resolve(\"site.apollo\");\n        if (!apollo) {\n          return null;\n        }\n\n        const result = await apollo.client.query({\n          query: GET_FOLLOWS,\n          variables: {}\n        });\n\n        const totalCount = result?.data?.currentUser?.follows?.totalCount;\n        if (totalCount) {\n          const followCount = this.i18n.formatNumber(totalCount);\n          tabElement.textContent += ` (${followCount})`;\n        }\n      } else {\n        this.log.info(\"[Show Total Followed Channels] follow count already set\");\n      }\n    } else {\n      this.log.warn(\"[Show Total Followed Channels] unable to find element:\", tabElement);\n    }\n  }\n\n  getVideoPreviewURL(login) {\n    const quality = this.settings.get(\"addon.trubbel.directory.preview-quality\");\n    const muted = !this.settings.get(\"addon.trubbel.directory.preview-audio\");\n\n    const params = new URLSearchParams({\n      channel: login,\n      enableExtensions: false,\n      parent: \"twitch.tv\",\n      player: \"popout\",\n      quality: quality,\n      muted: muted,\n      controls: false,\n      disable_frankerfacez: true\n    });\n    return `https://player.twitch.tv/?${params}`;\n  }\n\n  createVideoPreview(container, streamer) {\n    try {\n      const iframe = createElement(\"iframe\", {\n        src: this.getVideoPreviewURL(streamer),\n        style: {\n          position: \"absolute\",\n          top: \"0\",\n          left: \"0\",\n          width: \"100%\",\n          height: \"100%\",\n          border: \"none\",\n          pointerEvents: \"none\",\n          backgroundColor: \"transparent\"\n        }\n      });\n      container.appendChild(iframe);\n      return iframe;\n    } catch (error) {\n      this.log.error(\"[Directory Previews] Error creating preview:\", error);\n      return null;\n    }\n  }\n\n  handleMouseEnter(event) {\n    if (!this.settings.get(\"addon.trubbel.directory.previews\")) return;\n\n    // Stop Chromium-based browsers console spam\n    if (!event.target || typeof event.target.closest !== \"function\") {\n      return;\n    }\n\n    // Skip thumbnails that are blurred\n    if (event.target.closest(\".blurred-preview-card-image\")) return;\n\n    const link = event.target.closest(\"[data-a-target=\\\"preview-card-image-link\\\"]\");\n    if (!link) return;\n\n    const href = link.getAttribute(\"href\");\n    if (!/^\\/(?!videos\\/\\d+$)[^/]+$/.test(href)) return;\n\n    const streamer = href.substring(1);\n    const container = link.querySelector(\".tw-aspect\");\n    if (container && !container.querySelector(\"iframe\")) {\n      const iframe = this.createVideoPreview(container, streamer);\n      if (iframe) {\n        container.dataset.previewActive = \"true\";\n      }\n    }\n  }\n\n  handleMouseLeave(event) {\n    // Stop Chromium-based browsers console spam\n    if (!event.target || typeof event.target.closest !== \"function\") {\n      return;\n    }\n\n    const link = event.target.closest(\"[data-a-target=\\\"preview-card-image-link\\\"]\");\n    if (!link) return;\n    if (link.contains(event.relatedTarget)) return;\n\n    const container = link.querySelector(\".tw-aspect\");\n    if (container && container.dataset.previewActive === \"true\") {\n      const iframe = container.querySelector(\"iframe\");\n      if (iframe) {\n        iframe.remove();\n        delete container.dataset.previewActive;\n      }\n    }\n  }\n\n  setupEventListeners() {\n    document.addEventListener(\"mouseenter\", this.handleMouseEnter, true);\n    document.addEventListener(\"mouseleave\", this.handleMouseLeave, true);\n  }\n\n  cleanupEventListeners() {\n    document.removeEventListener(\"mouseenter\", this.handleMouseEnter, true);\n    document.removeEventListener(\"mouseleave\", this.handleMouseLeave, true);\n  }\n\n  handlePreviews() {\n    const enabled = this.settings.get(\"addon.trubbel.directory.previews\");\n    if (enabled) {\n      this.checkNavigation();\n    } else {\n      this.cleanupEventListeners();\n    }\n  }\n\n  updateFollowingCards() {\n    this.FollowingCard.each(el => this.updateFollowingCard(el));\n    this.emit(\":update-cards\");\n  }\n\n  updateFollowingCard(el) {\n    const parent = this.fine.searchParentNode(el, n => n.memoizedProps?.children?.props?.userData?.user);\n    if (!parent) return;\n\n    const props = parent.memoizedProps;\n    return this._updateFollowingCard(el, props, props.children.props.trackingProps);\n  }\n\n  _updateFollowingCard(el, item, tracking) {\n    try {\n      // Check if settings is enabled\n      const showFollowage = this.settings.get(\"addon.trubbel.directory.show-followage\");\n      if (!showFollowage) {\n        this.clearFollowageDate(el);\n        return;\n      }\n\n      // Get user data from props\n      const userData = item.children.props.userData?.user;\n      if (!userData) return;\n\n      // Get followedAt date\n      const followedAt = userData.self?.follower?.followedAt;\n      if (!followedAt) return;\n\n      // Format the date for display\n      const formattedDate = this.formatDate(followedAt);\n\n      // Find the element where we want to append our followage date\n      const usernameElement = el.querySelector(\".user-card p[title]\");\n      if (!usernameElement) return;\n\n      // Create the followage element\n      el._channel_followage = (\n        <div\n          className=\"channel-followage-date\"\n          title={this.i18n.formatDateTime(followedAt, \"full\")}\n        >\n          Followed {formattedDate}\n        </div>\n      );\n\n      // Insert it right after the username element\n      usernameElement.parentNode.insertBefore(el._channel_followage, usernameElement.nextSibling);\n\n      // Add attribute to the card for easy reference\n      if (userData.id) {\n        el.setAttribute(\"data-room-id\", userData.id);\n      }\n      if (userData.login) {\n        el.setAttribute(\"data-room\", userData.login);\n      }\n      el.setAttribute(\"data-followed-at\", followedAt);\n    } catch (err) {\n      this.log.error(\"[Show Channel Follow Date] Error in _updateFollowingCard:\", err);\n    }\n  }\n\n  clearFollowageDate(el) {\n    if (el._channel_followage) {\n      el._channel_followage.remove();\n      el._channel_followage = null;\n    }\n  }\n\n  formatDate(dateString) {\n    if (!dateString) return \"\";\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    });\n  }\n\n  updateCSS() {\n    // Directory - Following - Show Channel Follow Date\n    if (this.settings.get(\"addon.trubbel.directory.show-followage\")) {\n      this.style.set(\"followage-date\", `\n        .channel-followage-date {\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n          color: white;\n          font-size: 1.3rem;\n          line-height: 1.5;\n        }\n      `);\n    } else {\n      this.style.delete(\"followage-date\");\n    }\n  }\n}","export const STORAGE_KEY_CONFIG = \"ffzCollapsibleDrops\";\nexport const WHISPER_HEIGHT_CONFIG = \"ffzWhisperDropDownHeight\";","import { STORAGE_KEY_CONFIG } from \"../utils/constants/config\";\nconst { createElement } = FrankerFaceZ.utilities.dom;\n\nexport class DropsRewards extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.inject(\"settings\");\n    this.inject(\"site\");\n    this.inject(\"site.router\");\n\n    this.BUTTON_CLASS = \"drops-collapse-button\";\n    this.hasInitialized = false;\n\n    // Drops & Rewards - Inventory - Enable Collapsible Inventory Drops\n    this.settings.add(\"addon.trubbel.drops-rewards.collapsible\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Drops & Rewards >> Inventory\",\n        title: \"Enable Collapsible Inventory Drops\",\n        description: \"Allows you to toggle the visibility of Drops, helping you keep the Drops page clean and clutter-free.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.handleCollapsibleDrops()\n    });\n\n    this.init = this.init.bind(this);\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.drops-rewards.collapsible\", () => this.handleCollapsibleDrops());\n    this.router.on(\":route\", this.checkNavigation, this);\n    this.checkNavigation();\n  }\n\n  loadCollapsedState() {\n    try {\n      const stored = this.settings.provider.get(STORAGE_KEY_CONFIG);\n      return stored ? JSON.parse(stored) : {};\n    } catch (e) {\n      this.log.error(\"[Collapsible Drops] Error loading collapsed state:\", e);\n      return {};\n    }\n  }\n\n  saveCollapsedState(state) {\n    try {\n      this.settings.provider.set(STORAGE_KEY_CONFIG, JSON.stringify(state));\n    } catch (e) {\n      this.log.error(\"[Collapsible Drops] Error saving collapsed state:\", e);\n    }\n  }\n\n  cleanupStorage() {\n    const campaigns = document.querySelectorAll(\".inventory-campaign-info .tw-link\");\n    if (campaigns.length === 0) return;\n\n    const state = this.loadCollapsedState();\n    const currentCampaigns = new Set(Array.from(campaigns).map(link => link.textContent));\n\n    let hasChanges = false;\n    Object.keys(state).forEach(campaignName => {\n      if (!currentCampaigns.has(campaignName)) {\n        delete state[campaignName];\n        hasChanges = true;\n      }\n    });\n\n    if (hasChanges) {\n      this.saveCollapsedState(state);\n    }\n  }\n\n  createCollapseButton() {\n    const button = createElement(\"div\", {\n      class: this.BUTTON_CLASS,\n      style: `\n        background: none;\n        border: none;\n        color: var(--color-text-alt-2);\n        cursor: pointer;\n        padding: 4px 8px;\n        margin-left: 8px;\n        border-radius: 4px;\n        font-size: 14px;\n      `\n    });\n\n    button.onmouseover = () => (button.style.backgroundColor = \"var(--color-background-button-text-hover)\");\n    button.onmouseout = () => (button.style.backgroundColor = \"transparent\");\n    return button;\n  }\n\n  makeCollapsible(infoElement) {\n    if (infoElement.dataset.collapsibleProcessed) return;\n\n    infoElement.dataset.collapsibleProcessed = \"true\";\n    const nameLink = infoElement.querySelector(\".tw-link\");\n    if (!nameLink) return;\n\n    const campaignName = nameLink.textContent;\n    const parentElement = infoElement.parentElement;\n\n    parentElement.style.position = \"relative\";\n    const titleHeight = 27;\n\n    const collapseBtn = this.createCollapseButton();\n    const collapsedState = this.loadCollapsedState();\n\n    collapseBtn.style.position = \"absolute\";\n    collapseBtn.style.top = \"-1px\";\n    collapseBtn.style.right = \"0px\";\n\n    const isCollapsed = collapsedState[campaignName] || false;\n    collapseBtn.textContent = isCollapsed ? `▼ Show: ${campaignName}` : \"▲ Hide\";\n\n    if (isCollapsed) {\n      parentElement.style.height = `${titleHeight}px`;\n      parentElement.style.overflow = \"hidden\";\n      parentElement.style.marginBottom = \"10px\";\n    }\n\n    collapseBtn.onclick = (e) => {\n      e.stopPropagation();\n      const newCollapsed = collapseBtn.textContent.includes(\"Hide\");\n\n      if (newCollapsed) {\n        parentElement.style.height = `${titleHeight}px`;\n        parentElement.style.overflow = \"hidden\";\n        parentElement.style.marginBottom = \"10px\";\n        collapseBtn.textContent = `▼ Show: ${campaignName}`;\n      } else {\n        parentElement.style.height = \"\";\n        parentElement.style.overflow = \"\";\n        parentElement.style.marginBottom = \"\";\n        collapseBtn.textContent = \"▲ Hide\";\n      }\n\n      const state = this.loadCollapsedState();\n      state[campaignName] = newCollapsed;\n      this.saveCollapsedState(state);\n    };\n\n    parentElement.appendChild(collapseBtn);\n  }\n\n  async waitForElements() {\n    let timeoutId;\n    let animFrameId;\n\n    return new Promise((resolve, reject) => {\n      timeoutId = setTimeout(() => {\n        cancelAnimationFrame(animFrameId);\n        reject();\n      }, 10000);\n\n      const checkElements = () => {\n        const elements = document.querySelectorAll(\".inventory-campaign-info\");\n        if (elements.length > 0) {\n          clearTimeout(timeoutId);\n          resolve(elements);\n        } else {\n          animFrameId = requestAnimationFrame(checkElements);\n        }\n      };\n      animFrameId = requestAnimationFrame(checkElements);\n    });\n  }\n\n  checkNavigation() {\n    const currentLocation = this.router?.location;\n    const oldLocation = this.router?.old_location;\n\n    const isCurrentInventory = currentLocation === \"/drops/inventory\" || currentLocation === \"/inventory\";\n    const wasInventory = oldLocation === \"/drops/inventory\" || oldLocation === \"/inventory\";\n\n    if (isCurrentInventory || wasInventory) {\n      if (wasInventory && !isCurrentInventory) {\n        this.log.info(\"[Collapsible Drops] Leaving inventory page\");\n        this.hasInitialized = false;\n      }\n\n      if (isCurrentInventory && this.settings.get(\"addon.trubbel.drops-rewards.collapsible\")) {\n        this.log.info(\"[Collapsible Drops] Entering inventory page\");\n        this.init();\n      }\n    }\n  }\n\n  async init() {\n    const currentLocation = this.router?.location;\n    if (currentLocation !== \"/drops/inventory\" && currentLocation !== \"/inventory\") return;\n    if (this.hasInitialized) return;\n    try {\n      const infoElements = await this.waitForElements();\n      this.cleanupStorage();\n      infoElements.forEach(element => this.makeCollapsible(element));\n      this.hasInitialized = true;\n    } catch (error) {\n      this.log.error(\"[Collapsible Drops] Failed to find inventory elements\");\n      this.hasInitialized = false;\n    }\n  }\n\n  handleCollapsibleDrops() {\n    const enabled = this.settings.get(\"addon.trubbel.drops-rewards.collapsible\");\n    if (enabled) {\n      this.init();\n    } else {\n      this.settings.provider.delete(STORAGE_KEY_CONFIG);\n      this.hasInitialized = false;\n    }\n  }\n}","export const ERROR_CODES = [\"1000\", \"2000\", \"3000\", \"4000\", \"5000\"];\nexport const ERROR_MESSAGES = {\n  \"1000\": \"The video download was cancelled. Please try again.\",\n  \"2000\": \"There was a network error. Please try again.\",\n  \"3000\": \"Your browser encountered an error while decoding the video.\",\n  \"5000\": \"This video is unavailable.\"\n};","import { ERROR_CODES, ERROR_MESSAGES } from \"../utils/constants/player-errors\";\nimport { showNotification } from \"../utils/create-notification\";\n\nconst { on } = FrankerFaceZ.utilities.dom;\n\nclass RateLimiter {\n  constructor(maxAttempts, timeWindowMs) {\n    this.maxAttempts = maxAttempts;\n    this.timeWindowMs = timeWindowMs;\n    this.attempts = [];\n  }\n\n  canAttempt() {\n    const now = Date.now();\n    // Remove attempts outside the time window\n    this.attempts = this.attempts.filter(timestamp =>\n      now - timestamp < this.timeWindowMs\n    );\n    return this.attempts.length < this.maxAttempts;\n  }\n\n  addAttempt() {\n    this.attempts.push(Date.now());\n  }\n\n  reset() {\n    this.attempts = [];\n  }\n}\n\nexport class Player extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.inject(\"settings\");\n    this.inject(\"site\");\n    this.inject(\"site.fine\");\n    this.inject(\"site.player\");\n\n    // Initialize rate limiter - 3 attempts per 5 minutes\n    this.rateLimiter = new RateLimiter(3, 5 * 60 * 1000);\n\n    // Player - Player Errors - Enable Auto Reset on Player Errors\n    this.settings.add(\"addon.trubbel.player.player-errors\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Player >> Player Errors\",\n        title: \"Enable Auto Reset on Player Errors\",\n        description: \"Automatically detects and resets the player when encountering errors like `\\u00231000`, `\\u00232000`, `\\u00233000`, `\\u00234000` or `\\u00235000`.\\n\\n**Note:** This will only reset the player three times within five minutes, should you keep getting errors, it's likely something you have to fix yourself.\",\n        component: \"setting-check-box\"\n      }\n    });\n\n    this.PlayerSource = this.fine.define(\n      \"player-source\",\n      n => n.props && n.props?.playerEvents && n.props?.mediaPlayerInstance\n    );\n  }\n\n  onEnable() {\n    // \"PlayerSource\" because we can use \"userTriggeredPause\" with it\n    this.PlayerSource.ready((cls, instances) => {\n      for (const inst of instances) {\n        const events = inst.props?.playerEvents;\n        if (events) {\n          if (!this.settings.get(\"addon.trubbel.player.player-errors\")) return;\n          const playerErrorHandler = async () => {\n\n            // Always check rate limit\n            if (!this.rateLimiter.canAttempt()) {\n              this.log.warn(\"[Auto Player Reset] Rate limit exceeded. Please wait before trying again.\");\n              showNotification(\"\", \"[Auto Player Reset] Too many reset attempts. Please try refreshing the page manually.\", 15000);\n              return;\n            }\n\n            // make sure the user didnt pause the player\n            if (!inst?.props?.userTriggeredPause) {\n              const player = inst?.props?.mediaPlayerInstance;\n              const playerState = player?.core?.state?.state;\n\n              // continue if player is paused and player state is idle\n              if (player?.isPaused() && playerState === \"Idle\") {\n                const video = player?.core?.mediaSinkManager?.video;\n\n                // make sure the video source attribute is missing\n                if (!video.getAttribute(\"src\")) {\n\n                  // The video download was cancelled. Please try again. (Error #1000)\n                  // There was a network error. Please try again. (Error #2000)\n                  // Your browser encountered an error while decoding the video. (Error #3000)\n                  // This video is unavailable. (Error #5000)                  \n                  const metadataElement = await this.site.awaitElement(\".content-overlay-gate\");\n                  if (metadataElement) {\n\n                    const hasError = ERROR_CODES.some(code => metadataElement.textContent.includes(code));\n                    if (hasError) {\n                      const errorCode = ERROR_CODES.find(code => metadataElement.textContent.includes(code));\n\n                      // Always track the attempt\n                      this.rateLimiter.addAttempt();\n                      this.site.children.player.resetPlayer(this.site.children.player.current);\n\n                      this.log.info(`[Auto Player Reset] ${ERROR_MESSAGES[errorCode]} (Error #${errorCode})`);\n                      showNotification(\"\", `[Auto Player Reset] ${ERROR_MESSAGES[errorCode]} (Error #${errorCode})`, 15000);\n                    }\n                  }\n                }\n              }\n            }\n          };\n          on(events, \"PlayerError\", playerErrorHandler);\n        }\n      }\n    });\n  }\n}","const { ManagedStyle } = FrankerFaceZ.utilities.dom;\nconst { has } = FrankerFaceZ.utilities.object;\n\nconst CLASSES = {\n  \"hide-stream-chat-header\": \".stream-chat-header,.toggle-visibility__right-column--expanded\",\n  \"hide-side-nav-for-you\": \".side-nav--expanded [aria-label] :is(.side-nav__title):has(h2[class*=\\\"tw-title\\\"]:first-child)\",\n  \"hide-side-nav-sort-paragraph\": \"[data-a-target=\\\"side-nav-header-expanded\\\"] p\",\n  \"hide-side-nav-guest-avatar\": \".side-nav-card :is(.guest-star-avatar__mini-avatar)\",\n  \"hide-side-nav-guest-number\": \".side-nav-card [data-a-target=\\\"side-nav-card-metadata\\\"] :is(p):nth-child(2)\",\n  \"hide-side-nav-hype-train\": \".side-nav-card-hype-train-bottom\",\n  \"hide-player-live-badge\": \".video-player .top-bar .tw-channel-status-text-indicator\",\n  \"hide-stream-monthly-recap\": \"div:first-child article:has(a[href^=\\\"/recaps/\\\"])\",\n  \"hide-stream-sponsored-content-chat-banner\": \".stream-chat div :is(.channel-skins-banner__interactive)\",\n  \"hide-stream-sponsored-content-within-player\": \".video-player :is(.channel-skins-overlay__background)\",\n  \"hide-stream-sponsored-content-below-player\": \".channel-info-content div[style]:has(.channel-skins-ribbon__container)\",\n  \"hide-vod-muted-segment-popup\": \".video-player .muted-segments-alert__scroll-wrapper\",\n};\n\nexport class RemoveThings extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.style = new ManagedStyle;\n\n    this.inject(\"settings\");\n    this.inject(\"site.router\");\n\n    // Remove/Hide Things - Chat - Remove Stream Chat Header\n    this.settings.add(\"addon.trubbel.remove-things.chat-stream-chat-header\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Chat\",\n        title: \"Remove Stream Chat Header\",\n        description: \"**Note:** This also hides the collapse and viewer list buttons.\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-stream-chat-header\", val)\n    });\n    // Remove/Hide Things - Left Navigation - Remove the \"For You\"-text\n    this.settings.add(\"addon.trubbel.remove-things.left-nav-for-you\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Left Navigation\",\n        title: \"Remove the \\\"For You\\\"-text\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-side-nav-for-you\", val)\n    });\n    // Remove/Hide Things - Left Navigation - Remove the \"Viewers (High to Low)\"-text\n    this.settings.add(\"addon.trubbel.remove-things.left-nav-sort-paragraph\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Left Navigation\",\n        title: \"Remove the \\\"Viewers (High to Low)\\\"-text\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-side-nav-sort-paragraph\", val)\n    });\n    // Remove/Hide Things - Left Navigation - Remove the Guest avatars\n    this.settings.add(\"addon.trubbel.remove-things.left-nav-guest-avatar\", {\n      default: false,\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Left Navigation\",\n        title: \"Remove the Guest avatars\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-side-nav-guest-avatar\", val)\n    });\n    // Remove/Hide Things - Left Navigation - Remove the Guest +number text\n    this.settings.add(\"addon.trubbel.remove-things.left-nav-guest-number\", {\n      default: false,\n      ui: {\n        sort: 3,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Left Navigation\",\n        title: \"Remove the Guest +number text\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-side-nav-guest-number\", val)\n    });\n    // Remove/Hide Things - Left Navigation - Remove Hype Train\n    this.settings.add(\"addon.trubbel.remove-things.left-nav-hype-train\", {\n      default: false,\n      ui: {\n        sort: 4,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Left Navigation\",\n        title: \"Remove Hype Train\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-side-nav-hype-train\", val)\n    });\n    // Remove/Hide Things - Player - Remove the Gradient from Player\n    this.settings.add(\"addon.trubbel.remove-things.player-gradient\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Player\",\n        title: \"Remove the Gradient from Player\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // Remove/Hide Things - Player - Remove the \"LIVE\"-badge from Player\n    this.settings.add(\"addon.trubbel.remove-things.player-live\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Player\",\n        title: \"Remove the \\\"LIVE\\\"-badge from Player\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-player-live-badge\", val)\n    });\n    // Remove/Hide Things - Stories - Remove Stories\n    this.settings.add(\"addon.trubbel.remove-things.stories\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stories\",\n        title: \"Remove Stories\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // Remove/Hide Things - Stream - Remove Remove About Section and Panels\n    this.settings.add(\"addon.trubbel.remove-things.stream-about-panels\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stream\",\n        title: \"Remove About Section and Panels\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // Remove/Hide Things - Stream - Remove Monthly Recap below Streams\n    this.settings.add(\"addon.trubbel.remove-things.stream-monthly-recap\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stream\",\n        title: \"Remove Monthly Recap below Streams\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-stream-monthly-recap\", val)\n    });\n    // Remove/Hide Things - Stream - Remove Power-ups within the Rewards popup\n    this.settings.add(\"addon.trubbel.remove-things.stream-power-ups\", {\n      default: false,\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stream\",\n        title: \"Remove Power-ups within the Rewards popup\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // Remove/Hide Things - Stream - Remove Sponsored content above stream chat\n    this.settings.add(\"addon.trubbel.remove-things.stream-sponsored-content-chat-banner\", {\n      default: false,\n      ui: {\n        sort: 3,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stream\",\n        title: \"Remove Sponsored content above stream chat\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-stream-sponsored-content-chat-banner\", val)\n    });\n    // Remove/Hide Things - Stream - Remove Sponsored content within the Player\n    this.settings.add(\"addon.trubbel.remove-things.stream-sponsored-content-within-player\", {\n      default: false,\n      ui: {\n        sort: 4,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stream\",\n        title: \"Remove Sponsored content within the Player\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-stream-sponsored-content-within-player\", val)\n    });\n    // Remove/Hide Things - Stream - Remove Sponsored content below the Player\n    this.settings.add(\"addon.trubbel.remove-things.stream-sponsored-content-below-player\", {\n      default: false,\n      ui: {\n        sort: 5,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> Stream\",\n        title: \"Remove Sponsored content below the Player\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-stream-sponsored-content-below-player\", val)\n    });\n    // Remove/Hide Things - VODs - Remove Muted Segments Alerts popups\n    this.settings.add(\"addon.trubbel.remove-things.vod-muted-segment-popup\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Remove/Hide Things >> VODs\",\n        title: \"Remove Muted Segments Alerts popups\",\n        component: \"setting-check-box\"\n      },\n      changed: val => this.toggleHide(\"hide-vod-muted-segment-popup\", val)\n    });\n  }\n\n  onEnable() {\n    this.toggleHide(\"hide-stream-chat-header\", this.settings.get(\"addon.trubbel.remove-things.chat-stream-chat-header\"));\n    this.toggleHide(\"hide-side-nav-for-you\", this.settings.get(\"addon.trubbel.remove-things.left-nav-for-you\"));\n    this.toggleHide(\"hide-side-nav-sort-paragraph\", this.settings.get(\"addon.trubbel.remove-things.left-nav-sort-paragraph\"));\n    this.toggleHide(\"hide-side-nav-guest-avatar\", this.settings.get(\"addon.trubbel.remove-things.left-nav-guest-avatar\"));\n    this.toggleHide(\"hide-side-nav-guest-number\", this.settings.get(\"addon.trubbel.remove-things.left-nav-guest-number\"));\n    this.toggleHide(\"hide-side-nav-hype-train\", this.settings.get(\"addon.trubbel.remove-things.left-nav-hype-train\"));\n    this.toggleHide(\"hide-player-live-badge\", this.settings.get(\"addon.trubbel.remove-things.player-live\"));\n    this.toggleHide(\"hide-stream-monthly-recap\", this.settings.get(\"addon.trubbel.remove-things.stream-monthly-recap\"));\n    this.toggleHide(\"hide-stream-sponsored-content-chat-banner\", this.settings.get(\"addon.trubbel.remove-things.stream-sponsored-content-chat-banner\"));\n    this.toggleHide(\"hide-stream-sponsored-content-within-player\", this.settings.get(\"addon.trubbel.remove-things.stream-sponsored-content-within-player\"));\n    this.toggleHide(\"hide-stream-sponsored-content-below-player\", this.settings.get(\"addon.trubbel.remove-things.stream-sponsored-content-below-player\"));\n    this.toggleHide(\"hide-vod-muted-segment-popup\", this.settings.get(\"addon.trubbel.remove-things.vod-muted-segment-popup\"));\n    this.updateCSS();\n  }\n\n  toggleHide(key, val) {\n    const k = `hide--${key}`;\n    if (!val) {\n      this.style.delete(k);\n      return;\n    }\n\n    if (!has(CLASSES, key)) {\n      throw new Error(`cannot find class for \"${key}\"`);\n    }\n\n    this.style.set(k, `${CLASSES[key]} { display: none !important }`);\n  }\n\n  updateCSS() {\n    // Remove/Hide Things - Stream - Remove the Gradient from Player\n    if (this.settings.get(\"addon.trubbel.remove-things.player-gradient\")) {\n      this.style.set(\"hide-player-gradient\", \".video-player .top-bar, .video-player .player-controls { background: transparent !important; }\");\n    } else {\n      this.style.delete(\"hide-player-gradient\");\n    }\n    // Remove/Hide Things - Stream - Remove Remove About Section and Panels\n    if (this.settings.get(\"addon.trubbel.remove-things.stream-about-panels\")) {\n      this.style.set(\"hide-stream-about-panels1\", \"[id=\\\"live-channel-about-panel\\\"], .channel-panels { display: none !important; }\");\n      this.style.set(\"hide-stream-about-panels2\", \".channel-info-content:not(:has(.timestamp-metadata__bar)) :is(div[style^=\\\"min-height:\\\"]) { min-height: 0px !important; }\");\n      this.style.set(\"hide-stream-about-panels3\", \".channel-info-content:not(:has(.timestamp-metadata__bar)) :is(.tw-tower:has(.tw-placeholder-wrapper)) { display: none !important; }\");\n    } else {\n      this.style.delete(\"hide-stream-about-panels1\");\n      this.style.delete(\"hide-stream-about-panels2\");\n      this.style.delete(\"hide-stream-about-panels3\");\n    }\n    // Remove/Hide Things - Stream - Remove Power-ups within the Rewards popup\n    if (this.settings.get(\"addon.trubbel.remove-things.stream-power-ups\")) {\n      this.style.set(\"hide-stream-power-ups1\", \".rewards-list :is([class*=\\\"bitsRewardListItem--\\\"]) { display: none !important; }\");\n      this.style.set(\"hide-stream-power-ups2\", \".rewards-list > div:first-child:has(.tw-title:only-child) { display: none !important; }\");\n      this.style.set(\"hide-stream-power-ups3\", \".rewards-list > :is(div:has(> div > .tw-title)) { padding: 0rem 0.5rem 1rem !important; }\");\n    } else {\n      this.style.delete(\"hide-stream-power-ups1\");\n      this.style.delete(\"hide-stream-power-ups2\");\n      this.style.delete(\"hide-stream-power-ups3\");\n    }\n    // Remove/Hide Things - Stories - Remove Stories\n    if (this.settings.get(\"addon.trubbel.remove-things.stories\")) {\n      this.style.set(\"hide-stories-left-nav-expanded\", \"#side-nav [class*=\\\"storiesLeftNavSection--\\\"] { display: none !important; }\");\n      this.style.set(\"hide-stories-left-nav-collapsed\", \"#side-nav :is([style]) :has([class*=\\\"storiesLeftNavSectionCollapsedButton--\\\"]) { display: none !important; }\");\n      this.style.set(\"hide-stories-following-page\", \"div[class^=\\\"Layout-sc-\\\"]:has(> [data-simplebar=\\\"init\\\"] > .simplebar-scroll-content > .simplebar-content[style] h2.sr-only) { display: none !important; }\");\n    } else {\n      this.style.delete(\"hide-stories-left-nav-expanded\");\n      this.style.delete(\"hide-stories-left-nav-collapsed\");\n      this.style.delete(\"hide-stories-following-page\");\n    }\n  }\n}","const { createElement, ManagedStyle } = FrankerFaceZ.utilities.dom;\n\nexport class SideBarPreview extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.style = new ManagedStyle;\n\n    this.inject(\"settings\");\n    this.inject(\"site.fine\");\n    this.inject(\"site.elemental\");\n\n    // Bind methods\n    this.updateSidebar = this.updateSidebar.bind(this);\n    this.showPreview = this.showPreview.bind(this);\n    this.hidePreview = this.hidePreview.bind(this);\n    this.isSidebarOnRight = this.isSidebarOnRight.bind(this);\n\n    // Create preview container\n    this.previewContainer = null;\n    this.previewIframe = null;\n    this.previewTitleContainer = null;\n    this.currentHoverCard = null;\n    this.hoverTimeout = null;\n\n    // Sidebar - Left Navigation - Enable Stream Previews\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Enable Stream Previews\",\n        description: \"Show previews when hovering over channels in the sidebar.\\n\\n**Note:** For this to work properly, make sure your browser has granted **Autoplay** and **Sound** permissions for `player.twitch.tv`.\",\n        component: \"setting-check-box\"\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Stream Previews setting changed:\", val);\n        if (!val) this.hidePreview();\n      }\n    });\n\n    // Sidebar - Left Navigation - Stream Preview Delay\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.delay\", {\n      default: 500,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Stream Preview Delay\",\n        description: \"How long to hover before showing the preview (in milliseconds). Use `0` for no delay.\",\n        component: \"setting-text-box\",\n        process(val) {\n          const cleanVal = val.toString().replace(/[^\\d]/g, \"\");\n          const num = parseInt(cleanVal, 10);\n          if (isNaN(num) || num < 0 || num > 5000) return 500;\n          return num;\n        }\n      }\n    });\n\n    // Sidebar - Left Navigation - Stream Preview Size\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.size\", {\n      default: \"small\",\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Stream Preview Size\",\n        description: \"Choose the size of the channel preview.\",\n        component: \"setting-select-box\",\n        data: [\n          { value: \"small\", title: \"Small (280x158)\" },\n          { value: \"medium\", title: \"Medium (320x180)\" },\n          { value: \"large\", title: \"Large (400x225)\" },\n          { value: \"xlarge\", title: \"Extra Large (480x270)\" }\n        ]\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Stream Preview Size setting changed:\", val);\n        this.updatePreviewSize();\n      }\n    });\n\n    // Sidebar - Left Navigation - Enable Audio for Stream Previews\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.audio\", {\n      default: false,\n      ui: {\n        sort: 3,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Enable Audio for Stream Previews\",\n        description: \"Please keep in mind that this is using your default volume for streams. Some streams may be loud.\",\n        component: \"setting-check-box\"\n      }\n    });\n\n    // Sidebar - Left Navigation - Stream Preview Quality\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.quality\", {\n      default: \"160p30\",\n      requires: [\"addon.trubbel.sidebar.left-nav-preview\"],\n      process(ctx, val) {\n        if (!ctx.get(\"addon.trubbel.sidebar.left-nav-preview\"))\n          return false;\n        return val;\n      },\n      ui: {\n        sort: 4,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Stream Preview Quality\",\n        component: \"setting-select-box\",\n        data: [\n          { title: \"Auto\", value: \"auto\" },\n          { title: \"Source\", value: \"chunked\" },\n          { title: \"1080p60\", value: \"1080p60\" },\n          { title: \"720p60\", value: \"720p60\" },\n          { title: \"720p\", value: \"720p30\" },\n          { title: \"480p\", value: \"480p30\" },\n          { title: \"360p\", value: \"360p30\" },\n          { title: \"160p\", value: \"160p30\" }\n        ]\n      }\n    });\n\n    // Sidebar - Left Navigation - Show Stream Title\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.show-title\", {\n      default: false,\n      ui: {\n        sort: 5,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Show Stream Title\",\n        component: \"setting-check-box\"\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Show Stream Title setting changed:\", val);\n        if (this.previewContainer && this.previewTitleContainer) {\n          this.previewTitleContainer.style.display = val ? \"block\" : \"none\";\n        }\n      }\n    });\n\n    // Sidebar - Left Navigation - Show Stream Category\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.show-category\", {\n      default: false,\n      ui: {\n        sort: 6,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Show Stream Category\",\n        component: \"setting-check-box\"\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Show Stream Category setting changed:\", val);\n        if (this.previewContainer && this.previewCategoryContainer) {\n          this.previewCategoryContainer.style.display = val ? \"block\" : \"none\";\n        }\n      }\n    });\n\n    // Sidebar - Left Navigation - Show Viewer Count\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.show-viewers\", {\n      default: false,\n      ui: {\n        sort: 7,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Show Viewer Count\",\n        component: \"setting-check-box\"\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Show Viewer Count setting changed:\", val);\n        if (this.previewContainer && this.previewViewerContainer) {\n          this.previewViewerContainer.style.display = val ? \"block\" : \"none\";\n        }\n      }\n    });\n\n    // Sidebar - Left Navigation - Show Hype Train\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.show-hypetrain\", {\n      default: false,\n      ui: {\n        sort: 8,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Show Hype Train\",\n        component: \"setting-check-box\"\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Show Hype Train setting changed:\", val);\n        if (this.previewContainer && this.previewHypeTrainContainer) {\n          this.previewHypeTrainContainer.style.display = val ? \"block\" : \"none\";\n        }\n      }\n    });\n\n    // Sidebar - Left Navigation - Show Stream Guests\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.show-guests\", {\n      default: false,\n      ui: {\n        sort: 9,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Show Stream Guests\",\n        component: \"setting-check-box\"\n      },\n      changed: val => {\n        this.log.info(\"[Sidebar Preview] Show Stream Guests setting changed:\", val);\n        if (this.previewContainer && this.previewGuestsContainer) {\n          this.previewGuestsContainer.style.display = val ? \"block\" : \"none\";\n        }\n      }\n    });\n\n    // Sidebar - Left Navigation - Tooltip Background\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.tooltip-background\", {\n      default: \"#1f1f23\",\n      ui: {\n        sort: 10,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Tooltip Background\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Tooltip Title\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text1\", {\n      default: \"#dedee3\",\n      ui: {\n        sort: 11,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Tooltip Title\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Tooltip Category\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text2\", {\n      default: \"#adadb8\",\n      ui: {\n        sort: 12,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Tooltip Category\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Tooltip Viewer Count\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text3\", {\n      default: \"#adadb8\",\n      ui: {\n        sort: 13,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Tooltip Viewer Count\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Tooltip Hype Train\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text4\", {\n      default: \"#adadb8\",\n      ui: {\n        sort: 14,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Tooltip Hype Train\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Tooltip Guests\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text5\", {\n      default: \"#adadb8\",\n      ui: {\n        sort: 15,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Tooltip Guests\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Border\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.border\", {\n      default: \"#26262c\",\n      ui: {\n        sort: 16,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Border\",\n        component: \"setting-color-box\",\n\t\t\t\topenUp: true\n      },\n      changed: () => this.updateCSS()\n    });\n\n    // Sidebar - Left Navigation - Hide Native Tooltip\n    this.settings.add(\"addon.trubbel.sidebar.left-nav-preview.hide-native-tooltip\", {\n      default: false,\n      ui: {\n        sort: 17,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Sidebar >> Left Navigation\",\n        title: \"Hide Native Tooltip\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n\n    this.SideBar = this.elemental.define(\n      \"sidebar\",\n      \".side-bar-contents\",\n      null,\n      null,\n      0\n    );\n  }\n\n  onEnable() {\n    this.SideBar.on(\"mount\", this.updateSidebar, this);\n    this.SideBar.on(\"mutate\", this.updateSidebar, this);\n    this.SideBar.each(el => this.updateSidebar(el));\n    this.createPreviewContainer();\n    this.updateCSS();\n  }\n\n  updateSidebar(el) {\n    if (!this.settings.get(\"addon.trubbel.sidebar.left-nav-preview\")) return;\n    try {\n      // Find all streams in left side navigation\n      const cards = el.querySelectorAll(\".side-nav-card\");\n      if (cards.length > 0) {\n        // Get each stream\n        for (const card of cards) {\n          // Make sure said stream isn't offline\n          if (card.querySelector(\".tw-channel-status-indicator\")) {\n            // Make sure said stream isn't already processed\n            if (!card._stream_processed) {\n\n              // Mark stream as processed\n              card._stream_processed = true;\n\n              card.addEventListener(\"mouseenter\", () => {\n                if (!this.settings.get(\"addon.trubbel.sidebar.left-nav-preview\")) {\n                  this.log.info(\"[Sidebar Preview] Stream Previews disabled in settings\");\n                  return;\n                }\n\n                // Clear any existing timeout\n                if (this.hoverTimeout) {\n                  clearTimeout(this.hoverTimeout);\n                }\n\n                // Set a timeout before showing the preview\n                const delay = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.delay\");\n\n                if (delay > 0) {\n                  this.hoverTimeout = setTimeout(() => {\n                    this.showPreview(card);\n                  }, delay);\n                } else {\n                  this.showPreview(card);\n                }\n              });\n\n              card.addEventListener(\"mouseleave\", () => {\n                // Clear the timeout if we leave before it triggers\n                if (this.hoverTimeout) {\n                  clearTimeout(this.hoverTimeout);\n                  this.hoverTimeout = null;\n                }\n                this.hidePreview();\n              });\n            }\n          }\n        }\n      }\n      return true;\n    } catch (err) {\n      this.log.error(\"[Sidebar Preview] Error in updateSidebar:\", err);\n      return false;\n    }\n  }\n\n  // Detect sidebar position\n  isSidebarOnRight() {\n    // Try to find the sidebar element\n    const sidebarEl = document.querySelector(\".side-bar-contents, .side-nav\");\n\n    if (!sidebarEl) {\n      this.log.warn(\"[Sidebar Preview] Could not find sidebar element\");\n      return false;\n    }\n\n    // Get the sidebar position\n    const sidebarRect = sidebarEl.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const isOnRight = (viewportWidth - sidebarRect.right) < sidebarRect.left;\n    return isOnRight;\n  }\n\n  // Create preview container\n  createPreviewContainer() {\n    if (!this.settings.get(\"addon.trubbel.sidebar.left-nav-preview\")) return;\n    if (this.previewContainer) return;\n\n    this.previewContainer = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview\"\n    });\n\n    // Create wrapper for the iframe\n    const wrapper = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview-wrapper\"\n    });\n    this.previewContainer.appendChild(wrapper);\n\n    this.previewIframe = createElement(\"iframe\");\n    wrapper.appendChild(this.previewIframe);\n\n    // Add title container\n    this.previewTitleContainer = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview-title\"\n    });\n    this.previewContainer.appendChild(this.previewTitleContainer);\n\n    // Add category title container\n    this.previewCategoryContainer = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview-category\"\n    });\n    this.previewContainer.appendChild(this.previewCategoryContainer);\n\n    // Add viewer title container\n    this.previewViewerContainer = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview-viewers\"\n    });\n    this.previewContainer.appendChild(this.previewViewerContainer);\n\n    // Add hype train container\n    this.previewHypeTrainContainer = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview-hypetrain\"\n    });\n    this.previewContainer.appendChild(this.previewHypeTrainContainer);\n\n    // Add guests container\n    this.previewGuestsContainer = createElement(\"div\", {\n      className: \"trubbel-sidebar-preview-guests\"\n    });\n    this.previewContainer.appendChild(this.previewGuestsContainer);\n\n    // Apply size class\n    this.updatePreviewSize();\n\n    // Apply title visibility\n    const showTitle = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-title\");\n    this.previewTitleContainer.style.display = showTitle ? \"block\" : \"none\";\n\n    // Apply category title visibility\n    const showCategory = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-category\");\n    this.previewCategoryContainer.style.display = showCategory ? \"block\" : \"none\";\n\n    // Apply viewer count visibility\n    const showViewerCount = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-viewers\");\n    this.previewViewerContainer.style.display = showViewerCount ? \"block\" : \"none\";\n\n    // Apply hype train visibility\n    const showHypeTrain = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-hypetrain\");\n    this.previewHypeTrainContainer.style.display = showHypeTrain ? \"block\" : \"none\";\n\n    // Apply guests visibility\n    const showGuests = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-guests\");\n    this.previewGuestsContainer.style.display = showGuests ? \"block\" : \"none\";\n\n    document.body.appendChild(this.previewContainer);\n  }\n\n  // Update preview size based on settings\n  updatePreviewSize() {\n    if (!this.settings.get(\"addon.trubbel.sidebar.left-nav-preview\")) return;\n    if (!this.previewContainer) return;\n\n    // Remove any existing size classes\n    this.previewContainer.classList.remove(\n      \"trubbel-sidebar-preview--small\",\n      \"trubbel-sidebar-preview--medium\",\n      \"trubbel-sidebar-preview--large\",\n      \"trubbel-sidebar-preview--xlarge\"\n    );\n\n    // Add the new size class\n    const size = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.size\");\n    this.previewContainer.classList.add(`trubbel-sidebar-preview--${size}`);\n  }\n\n  showPreview(card) {\n    if (!card || !this.previewContainer || !this.previewIframe) {\n      this.log.error(\"[Sidebar Preview] Missing elements for preview\");\n      return;\n    }\n\n    // Always hide any existing preview first\n    if (this.currentHoverCard && this.currentHoverCard !== card) {\n      this.hidePreview();\n    }\n\n    this.currentHoverCard = card;\n\n    // Get the React properties to extract the channel username\n    const react = this.fine.getReactInstance(card);\n    const props = react?.return?.return?.memoizedProps;\n\n    if (!props || !props.userLogin) {\n      this.log.error(\"[Sidebar Preview] Could not find userLogin in props:\", props);\n      return;\n    }\n\n    const quality = this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.quality\");\n    const muted = !this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.audio\");\n\n    const params = new URLSearchParams({\n      channel: props.userLogin,\n      enableExtensions: false,\n      parent: \"twitch.tv\",\n      player: \"site\",\n      quality: quality,\n      muted: muted,\n      volume: localStorage.getItem(\"volume\"),\n      controls: false,\n      disable_frankerfacez: true\n    });\n\n    const newSrc = `https://player.twitch.tv/?${params}`;\n    this.previewIframe.src = newSrc;\n\n    // Extract stream title if available and setting is enabled\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-title\")) {\n      let streamTitle = \"\";\n\n      // Try to extract title from various props paths\n      if (props.metadataRight?.props?.stream?.broadcaster?.broadcastSettings?.title) {\n        streamTitle = props.metadataRight?.props?.stream?.broadcaster?.broadcastSettings?.title;\n      } else if (props.tooltipContent?.props?.stream?.content?.broadcaster?.broadcastSettings?.title) {\n        streamTitle = props.tooltipContent?.props?.stream?.content?.broadcaster?.broadcastSettings?.title;\n      } else if (props.tooltipContent?.props?.stream?.user?.broadcastSettings?.title) {\n        streamTitle = props.tooltipContent?.props?.stream?.user?.broadcastSettings?.title;\n      }\n\n      // Set title in the container\n      if (streamTitle) {\n        this.previewTitleContainer.textContent = streamTitle;\n        this.previewTitleContainer.style.display = \"block\";\n      } else {\n        // this.previewTitleContainer.textContent = `${props.userLogin}'s Stream`;\n        this.previewTitleContainer.textContent = `${props.avatarAlt}'s Stream`;\n        this.previewTitleContainer.style.display = \"block\";\n      }\n    } else {\n      this.previewTitleContainer.style.display = \"none\";\n    }\n\n    // Extract category name if available and setting is enabled\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-category\")) {\n      let categoryName = \"\";\n\n      // Try to extract category name from various props paths\n      if (props?.metadataLeft) {\n        categoryName = props?.metadataLeft;\n      } else if (props.metadataRight?.props?.stream?.game?.displayName) {\n        categoryName = props.metadataRight?.props?.stream?.game?.displayName;\n      } else if (props.tooltipContent?.props?.stream?.content?.game?.displayName) {\n        categoryName = props.tooltipContent?.props?.stream?.content?.game?.displayName;\n      }\n\n      // Set category in the container\n      if (categoryName) {\n        this.previewCategoryContainer.textContent = categoryName;\n        this.previewCategoryContainer.style.display = \"block\";\n      } else {\n        this.previewCategoryContainer.textContent = \"\";\n        this.previewCategoryContainer.style.display = \"none\";\n      }\n    } else {\n      this.previewCategoryContainer.style.display = \"none\";\n    }\n\n    // Extract viewers if available and setting is enabled\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-viewers\")) {\n      let viewerCount = \"\";\n\n      // Try to extract viewer count\n      if (props?.viewerCount) {\n        viewerCount = props?.viewerCount;\n      } else if (props.metadataRight?.props?.stream?.viewersCount) {\n        viewerCount = props.metadataRight?.props?.stream?.viewersCount;\n      } else if (props.tooltipContent?.props?.stream?.content?.viewersCount) {\n        viewerCount = props.tooltipContent?.props?.stream?.content?.viewersCount;\n      }\n\n      // Set viewer count in the container\n      if (viewerCount) {\n        this.previewViewerContainer.textContent = this.resolve(\"i18n\").formatNumber(viewerCount) + \" viewers\";\n        this.previewViewerContainer.style.display = \"block\";\n      } else {\n        this.previewViewerContainer.textContent = \"\";\n        this.previewViewerContainer.style.display = \"none\";\n      }\n    } else {\n      this.previewViewerContainer.style.display = \"none\";\n    }\n\n    // Extract hype train info if available and setting is enabled\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-hypetrain\")) {\n\n      // Try to extract hype train data\n      if (props?.activeHypeTrain?.hypeTrainSideNavChannel) {\n        const hypeTrainData = props.activeHypeTrain.hypeTrainSideNavChannel;\n\n        if (hypeTrainData) {\n          const level = hypeTrainData.level || 1;\n\n          // Instead of using innerHTML\n          while (this.previewHypeTrainContainer.firstChild) {\n            this.previewHypeTrainContainer.removeChild(this.previewHypeTrainContainer.firstChild);\n          }\n\n          // Create the icon element\n          const iconElement = createElement(\"span\", {\n            className: \"trubbel-hype-train-icon\"\n          });\n\n          // Determine the type of hype train and apply the appropriate class\n          if (hypeTrainData.isGoldenKappaTrain) {\n            iconElement.classList.add(\"trubbel-hype-train-golden\");\n            this.previewHypeTrainContainer.appendChild(iconElement);\n            this.previewHypeTrainContainer.appendChild(document.createTextNode(`Golden Kappa Train • Level ${level}`));\n          } else if (hypeTrainData.isAllTimeHighTrain) {\n            iconElement.classList.add(\"trubbel-hype-train-alltime\");\n            this.previewHypeTrainContainer.appendChild(iconElement);\n            this.previewHypeTrainContainer.appendChild(document.createTextNode(`All-Time High Train • Level ${level}`));\n          } else {\n            // Regular hype train\n            iconElement.classList.add(\"trubbel-hype-train-regular\");\n            this.previewHypeTrainContainer.appendChild(iconElement);\n            this.previewHypeTrainContainer.appendChild(document.createTextNode(`Hype Train • Level ${level}`));\n          }\n          this.previewHypeTrainContainer.style.display = \"block\";\n        } else {\n          while (this.previewHypeTrainContainer.firstChild) {\n            this.previewHypeTrainContainer.removeChild(this.previewHypeTrainContainer.firstChild);\n          }\n          this.previewHypeTrainContainer.style.display = \"none\";\n        }\n      } else {\n        while (this.previewHypeTrainContainer.firstChild) {\n          this.previewHypeTrainContainer.removeChild(this.previewHypeTrainContainer.firstChild);\n        }\n        this.previewHypeTrainContainer.style.display = \"none\";\n      }\n    } else {\n      this.previewHypeTrainContainer.style.display = \"none\";\n    }\n\n    // Extract guests if available and setting is enabled\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.show-guests\")) {\n\n      // Clear the guests container first\n      while (this.previewGuestsContainer.firstChild) {\n        this.previewGuestsContainer.removeChild(this.previewGuestsContainer.firstChild);\n      }\n\n      // Try to extract guests data\n      const guests = props?.tooltipContent?.props?.guests || [];\n\n      if (guests && guests.length > 0) {\n\n        // Create the guests list\n        const guestsListElement = createElement(\"div\", {\n          className: \"trubbel-sidebar-preview-guests-list\"\n        });\n\n        // Add each guest\n        guests.forEach(guest => {\n          // Create guest item container\n          const guestItem = createElement(\"div\", {\n            className: \"trubbel-sidebar-preview-guest-item\"\n          });\n\n          // Create avatar container\n          const avatarContainer = createElement(\"div\", {\n            className: \"trubbel-sidebar-preview-guest-avatar\"\n          });\n\n          // Add border-color, using default #9147ff if primaryColorHex is not available\n          const borderColor = guest.primaryColorHex ? `#${guest.primaryColorHex}` : \"#9147ff\";\n          avatarContainer.style.setProperty(\"--avatar-border-color\", borderColor);\n\n          // Create avatar image\n          const avatarImg = createElement(\"img\", {\n            src: guest.profileImageURL,\n            alt: guest.displayName\n          });\n          avatarContainer.appendChild(avatarImg);\n\n          // Create guest name element\n          const nameElement = createElement(\"div\", {\n            className: \"trubbel-sidebar-preview-guest-name\"\n          });\n\n          const displayName = guest.displayName;\n          const login = guest.login;\n          const username = displayName.toLowerCase() !== login ? `${displayName} (${login})` : displayName;\n          nameElement.textContent = username;\n\n          // Create viewer count element\n          const viewerCountElement = createElement(\"div\", {\n            className: \"trubbel-sidebar-preview-guest-viewers\"\n          });\n\n          // Add viewer count if streaming\n          if (guest.stream && guest.stream.viewersCount) {\n            const viewerCount = this.resolve(\"i18n\").formatNumber(guest.stream.viewersCount);\n            viewerCountElement.textContent = viewerCount;\n\n            // Add online indicator\n            const indicator = createElement(\"span\", {\n              className: \"trubbel-sidebar-preview-guest-online-indicator\"\n            });\n            viewerCountElement.insertBefore(indicator, viewerCountElement.firstChild);\n          } else {\n            viewerCountElement.textContent = \"offline\";\n          }\n\n          // Assemble the guest item\n          guestItem.appendChild(avatarContainer);\n          guestItem.appendChild(nameElement);\n          guestItem.appendChild(viewerCountElement);\n\n          // Add to the guests list\n          guestsListElement.appendChild(guestItem);\n        });\n\n        this.previewGuestsContainer.appendChild(guestsListElement);\n        this.previewGuestsContainer.style.display = \"block\";\n      } else {\n        this.previewGuestsContainer.style.display = \"none\";\n      }\n    } else {\n      this.previewGuestsContainer.style.display = \"none\";\n    }\n\n    // Position the preview relative to the card\n    const cardRect = card.getBoundingClientRect();\n    const previewRect = this.previewContainer.getBoundingClientRect();\n    const previewHeight = previewRect.height;\n\n    // Check if the sidebar is on the right\n    const isOnRight = this.isSidebarOnRight();\n\n    // Center the preview vertically next to the card\n    let top = cardRect.top + (cardRect.height / 2) - (previewHeight / 2);\n\n    // Get sidebar element\n    const sidebarEl = document.querySelector(\".side-bar-contents, .side-nav\");\n    const sidebarRect = sidebarEl.getBoundingClientRect();\n\n    // Position horizontally based on sidebar position with offset\n    if (isOnRight) {\n      // If sidebar is on right, position preview to the left of the sidebar with offset\n      this.previewContainer.style.left = \"auto\";\n      this.previewContainer.style.right = `${window.innerWidth - sidebarRect.left + 10}px`;\n    } else {\n      // If sidebar is on left, position preview to the right of it with offset\n      this.previewContainer.style.right = \"auto\";\n      this.previewContainer.style.left = `${sidebarRect.right + 10}px`;\n    }\n\n    // Make sure the preview stays within the viewport vertically\n    const viewportHeight = window.innerHeight;\n    if (top < 10) top = 10;\n    if (top + previewHeight > viewportHeight - 10) {\n      top = viewportHeight - previewHeight - 10;\n    }\n\n    this.previewContainer.style.top = `${top}px`;\n    this.previewContainer.classList.add(\"active\");\n  }\n\n  hidePreview() {\n    if (!this.previewContainer) return;\n    this.previewContainer.classList.remove(\"active\");\n\n    // Clear iframe source immediately before hiding\n    if (this.previewIframe) {\n      this.previewIframe.src = \"about:blank\";\n    }\n\n    this.currentHoverCard = null;\n  }\n\n  updateCSS() {\n    // Sidebar - Left Navigation - Enable Stream Previews\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview\")) {\n      this.style.set(\"left-nav-preview\", `\n        .trubbel-sidebar-preview {\n          position: fixed;\n          z-index: 9999;\n          background-color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-background\")};\n          border-radius: 6px;\n          overflow: hidden;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);\n          opacity: 0;\n          visibility: hidden;\n          transition: opacity 0.15s ease-out;\n          pointer-events: none;\n          display: flex;\n          flex-direction: column;\n          width: auto;\n        }\n        .trubbel-sidebar-preview.active {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: auto;\n        }\n        .trubbel-sidebar-preview-wrapper {\n          width: 100%;\n          position: relative;\n        }\n        .trubbel-sidebar-preview iframe {\n          width: 100%;\n          height: 100%;\n          border: 0;\n          display: block;\n          background-color: black;\n        }\n        .trubbel-sidebar-preview-title {\n          padding: 6px 8px;\n          font-size: 1.3rem;\n          font-weight: 600;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text1\")};\n          word-break: break-word;\n          overflow-wrap: break-word;\n          word-wrap: break-word;\n          white-space: pre-wrap;\n          text-overflow: ellipsis;\n          max-height: none;\n          overflow-y: visible;\n          width: 100%;\n          box-sizing: border-box;\n          line-height: 1.5;\n          max-width: 100%;\n        }\n        .trubbel-sidebar-preview-category {\n          padding: 4px 8px;\n          font-size: 1.2rem;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text2\")};\n          word-break: break-word;\n          overflow-wrap: break-word;\n          word-wrap: break-word;\n          white-space: pre-wrap;\n          max-height: none;\n          overflow-y: visible;\n          border-top: 1px solid ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.border\")};\n          width: 100%;\n          box-sizing: border-box;\n          line-height: 1.3;\n          max-width: 100%;\n        }\n        .trubbel-sidebar-preview-viewers {\n          padding: 4px 8px;\n          font-size: 1.2rem;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text3\")};\n          word-break: break-word;\n          overflow-wrap: break-word;\n          word-wrap: break-word;\n          white-space: pre-wrap;\n          max-height: none;\n          overflow-y: visible;\n          border-top: 1px solid ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.border\")};\n          width: 100%;\n          box-sizing: border-box;\n          line-height: 1.3;\n          max-width: 100%;\n        }\n        .trubbel-sidebar-preview-hypetrain {\n          padding: 4px 8px;\n          font-size: 1.2rem;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text4\")};\n          word-break: break-word;\n          overflow-wrap: break-word;\n          word-wrap: break-word;\n          white-space: pre-wrap;\n          max-height: none;\n          overflow-y: visible;\n          border-top: 1px solid ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.border\")};\n          width: 100%;\n          box-sizing: border-box;\n          line-height: 1.3;\n          max-width: 100%;\n        }\n        /* Preview size variations */\n        .trubbel-sidebar-preview--small .trubbel-sidebar-preview-wrapper {\n          width: 280px;\n          height: 158px;\n        }\n        .trubbel-sidebar-preview--medium .trubbel-sidebar-preview-wrapper {\n          width: 320px;\n          height: 180px;\n        }\n        .trubbel-sidebar-preview--large .trubbel-sidebar-preview-wrapper {\n          width: 400px;\n          height: 225px;\n        }\n        .trubbel-sidebar-preview--xlarge .trubbel-sidebar-preview-wrapper {\n          width: 480px;\n          height: 270px;\n        }\n        /* Make sure the width of the preview containers matches the iframe width */\n        .trubbel-sidebar-preview--small .trubbel-sidebar-preview-title,\n        .trubbel-sidebar-preview--small .trubbel-sidebar-preview-category,\n        .trubbel-sidebar-preview--small .trubbel-sidebar-preview-viewers,\n        .trubbel-sidebar-preview--small .trubbel-sidebar-preview-hypetrain,\n        .trubbel-sidebar-preview--small .trubbel-sidebar-preview-guests {\n          max-width: 280px;\n        }\n        .trubbel-sidebar-preview--medium .trubbel-sidebar-preview-title,\n        .trubbel-sidebar-preview--medium .trubbel-sidebar-preview-category,\n        .trubbel-sidebar-preview--medium .trubbel-sidebar-preview-viewers,\n        .trubbel-sidebar-preview--medium .trubbel-sidebar-preview-hypetrain,\n        .trubbel-sidebar-preview--medium .trubbel-sidebar-preview-guests {\n          max-width: 320px;\n        }\n        .trubbel-sidebar-preview--large .trubbel-sidebar-preview-title,\n        .trubbel-sidebar-preview--large .trubbel-sidebar-preview-category,\n        .trubbel-sidebar-preview--large .trubbel-sidebar-preview-viewers,\n        .trubbel-sidebar-preview--large .trubbel-sidebar-preview-hypetrain,\n        .trubbel-sidebar-preview--large .trubbel-sidebar-preview-guests {\n          max-width: 400px;\n        }\n        .trubbel-sidebar-preview--xlarge .trubbel-sidebar-preview-title,\n        .trubbel-sidebar-preview--xlarge .trubbel-sidebar-preview-category,\n        .trubbel-sidebar-preview--xlarge .trubbel-sidebar-preview-viewers,\n        .trubbel-sidebar-preview--xlarge .trubbel-sidebar-preview-hypetrain,\n        .trubbel-sidebar-preview--xlarge .trubbel-sidebar-preview-guests {\n          max-width: 480px;\n        }\n        /* Hype Train Styles */\n        .trubbel-hype-train-icon {\n          display: inline-block;\n          vertical-align: middle;\n          margin-right: 4px;\n          height: 1.3rem;\n          width: 1.3rem;\n        }\n        .trubbel-hype-train-regular {\n          background: #bf94ff;\n          -webkit-mask-image: url(https://static-cdn.jtvnw.net/c3-vg/leftnav/hype-train.svg);\n          mask-image: url(https://static-cdn.jtvnw.net/c3-vg/leftnav/hype-train.svg);\n          -webkit-mask-repeat: no-repeat;\n          mask-repeat: no-repeat;\n          -webkit-mask-size: 100%;\n          mask-size: 100%;\n        }\n        .trubbel-hype-train-golden {\n          background: linear-gradient(180deg, #ffb31a 1.19%, #e0e000);\n          -webkit-mask-image: url(https://static-cdn.jtvnw.net/c3-vg/leftnav/hype-train.svg);\n          mask-image: url(https://static-cdn.jtvnw.net/c3-vg/leftnav/hype-train.svg);\n          -webkit-mask-repeat: no-repeat;\n          mask-repeat: no-repeat;\n          -webkit-mask-size: 100%;\n          mask-size: 100%;\n        }\n        .trubbel-hype-train-alltime {\n          background: linear-gradient(#9147ff, #ff75e6);\n          -webkit-mask-image: url(https://static-cdn.jtvnw.net/c3-vg/leftnav/trophy.svg);\n          mask-image: url(https://static-cdn.jtvnw.net/c3-vg/leftnav/trophy.svg);\n          -webkit-mask-repeat: no-repeat;\n          mask-repeat: no-repeat;\n          -webkit-mask-size: 100%;\n          mask-size: 100%;\n        }\n        /* Guests Container */\n        .trubbel-sidebar-preview-guests {\n          padding: 4px 8px;\n          font-size: 1.2rem;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text5\")};\n          word-break: break-word;\n          overflow-wrap: break-word;\n          word-wrap: break-word;\n          white-space: pre-wrap;\n          max-height: none;\n          overflow-y: visible;\n          border-top: 1px solid ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.border\")};\n          width: 100%;\n          box-sizing: border-box;\n          line-height: 1.3;\n          max-width: 100%;\n        }\n        /* Guests List */\n        .trubbel-sidebar-preview-guests-list {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        /* Individual Guest Item */\n        .trubbel-sidebar-preview-guest-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        /* Guest Avatar */\n        .trubbel-sidebar-preview-guest-avatar {\n          width: 16px;\n          height: 16px;\n          border-radius: 50%;\n          flex-shrink: 0;\n          position: relative;\n          box-sizing: content-box;\n        }\n        .trubbel-sidebar-preview-guest-avatar::after {\n          content: \"\";\n          position: absolute;\n          top: -3px;\n          left: -3px;\n          right: -3px;\n          bottom: -3px;\n          border-radius: 50%;\n          pointer-events: none;\n          z-index: 1;\n          border: 0.2rem solid var(--avatar-border-color, #9147ff); /* Use CSS variable with fallback */\n        }\n        .trubbel-sidebar-preview-guest-avatar img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          border-radius: 50%;\n          position: relative;\n          z-index: 0;\n        }\n        /* Guest Name */\n        .trubbel-sidebar-preview-guest-name {\n          flex-grow: 1;\n          font-size: 1.1rem;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text5\")};\n        }\n        /* Guest Viewer Count */\n        .trubbel-sidebar-preview-guest-viewers {\n          font-size: 1.1rem;\n          color: ${this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.tooltip-text5\")};\n          display: flex;\n          align-items: center;\n          gap: 4px;\n        }\n        /* Online Indicator */\n        .trubbel-sidebar-preview-guest-online-indicator {\n          display: inline-block;\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          background-color: #eb0400;\n          margin-right: 4px;\n        }\n      `);\n    } else {\n      this.style.delete(\"left-nav-preview\");\n    }\n    // Sidebar - Left Navigation - Hide Native Tooltip\n    if (this.settings.get(\"addon.trubbel.sidebar.left-nav-preview.hide-native-tooltip\")) {\n      this.style.set(\"hide-native-tooltip1\", \"div :is(.tw-balloon) :has(.online-side-nav-channel-tooltip__body) { display: none !important; }\");\n      this.style.set(\"hide-native-tooltip2\", \"div :is(.tw-balloon) :has(.side-nav-guest-star-tooltip__body) { display: none !important; }\");\n    } else {\n      this.style.delete(\"hide-native-tooltip1\");\n      this.style.delete(\"hide-native-tooltip2\");\n    }\n  }\n}","import { showNotification } from \"../../utils/create-notification\";\n\nexport function autoChangeTheme(ctx) {\n  if (!ctx.settings.get(\"addon.trubbel.ui-tweaks.system-theme\")) return;\n\n  const THEME = {\n    LIGHT: 0,\n    DARK: 1\n  };\n\n  function findReduxStore() {\n    const searchReactChildren = (node, predicate) => {\n      if (!node) return null;\n\n      if (predicate(node)) return node;\n\n      if (node.child) {\n        let child = node.child;\n        while (child) {\n          const result = searchReactChildren(child, predicate);\n          if (result) return result;\n          child = child.sibling;\n        }\n      }\n      return null;\n    };\n\n    const getReactRoot = (element) => {\n      const key = Object.keys(element).find(key =>\n        key.startsWith(\"__reactContainer$\") ||\n        key.startsWith(\"__reactFiber$\")\n      );\n      return element[key];\n    };\n\n    const rootElement = document.querySelector(\"#root\");\n    const reactRoot = getReactRoot(rootElement);\n\n    const node = searchReactChildren(\n      reactRoot._internalRoot?.current ?? reactRoot,\n      (n) => n.pendingProps?.value?.store\n    );\n\n    return node?.pendingProps?.value?.store;\n  }\n\n  function setTheme(store, isDark) {\n    if (!store) return;\n\n    store.dispatch({\n      type: \"core.ui.THEME_CHANGED\",\n      theme: isDark ? THEME.DARK : THEME.LIGHT\n    });\n\n    showNotification(\n      isDark ? \"🌙\" : \"☀️\",\n      `[AUTO THEME] Theme set to ${isDark ? \"Dark\" : \"Light\"} Mode`\n    );\n  }\n\n  function initialize() {\n    const store = findReduxStore();\n    if (!store) {\n      setTimeout(initialize, 1000);\n      return;\n    }\n\n    const systemPrefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n    const currentTheme = store.getState().ui.theme;\n    const twitchIsDark = currentTheme === THEME.DARK;\n\n    if (systemPrefersDark !== twitchIsDark) {\n      setTheme(store, systemPrefersDark);\n    }\n\n    window.matchMedia(\"(prefers-color-scheme: dark)\")\n      .addEventListener(\"change\", (e) => setTheme(store, e.matches));\n  }\n\n  setTimeout(initialize, 1000);\n}","import { autoChangeTheme } from \"../features/theme/system-theme\";\nconst { ManagedStyle } = FrankerFaceZ.utilities.dom;\n\nexport class UITweaks extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n\n    this.style = new ManagedStyle;\n\n    this.inject(\"settings\");\n    this.inject(\"site.router\");\n\n    // UI Tweaks - Chat - Reduce padding in Viewer List\n    this.settings.add(\"addon.trubbel.ui-tweaks.chat-viewer-list-padding\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Chat\",\n        title: \"Reduce padding in Viewer List\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Chat - Show Full Messages /w Expanded Replies\n    this.settings.add(\"addon.trubbel.ui-tweaks.chat-show-full-message\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Chat\",\n        title: \"Show Full Messages /w Expanded Replies\",\n        description: \"Allows you to see the entire message someone is replying to in chat, instead of it being cut off.\\n\\n**Note:** Twitch settings needs to be \\\"**Expanded**\\\" in \\`Chat Settings > Chat Appearance > Replies in Chat > Expanded\\`,\\n\\n& FFZ settings needs to be \\\"**Twitch (Default)**\\\" in [Chat > Appearance > Replies](~chat.appearance.replies).\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - System Theme - Enable System Theme\n    this.settings.add(\"addon.trubbel.ui-tweaks.system-theme\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> System Theme\",\n        title: \"Enable System Theme\",\n        description: \"Automatically sets Twitch theme based on system preferences.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getCurrentTheme()\n    });\n    // UI Tweaks - Titles - Show full titles for Stream Tooltips\n    this.settings.add(\"addon.trubbel.ui-tweaks.full-side-nav-tooltip\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Titles\",\n        title: \"Show full titles for Stream Tooltips\",\n        description: \"Show the full title tooltip when hovering over a stream in the left side navigation.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Titles - Show full titles in Stream Previews\n    this.settings.add(\"addon.trubbel.ui-tweaks.titles-full-stream\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Titles\",\n        title: \"Show full titles in Stream Previews\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Titles - Show full titles in Clip Previews\n    this.settings.add(\"addon.trubbel.ui-tweaks.titles-full-clip\", {\n      default: false,\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Titles\",\n        title: \"Show full titles in Clip Previews\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Titles - Show full titles in VOD Previews\n    this.settings.add(\"addon.trubbel.ui-tweaks.titles-full-vod\", {\n      default: false,\n      ui: {\n        sort: 3,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Titles\",\n        title: \"Show full titles in VOD Previews\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Titles - Show full titles for Games in Directory\n    this.settings.add(\"addon.trubbel.ui-tweaks.titles-full-game\", {\n      default: false,\n      ui: {\n        sort: 4,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Titles\",\n        title: \"Show full titles for Games in Directory\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Titles - Show full titles for Most Recent Videos\n    this.settings.add(\"addon.trubbel.ui-tweaks.titles-most-recent-video\", {\n      default: false,\n      ui: {\n        sort: 5,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Titles\",\n        title: \"Show full titles for Most Recent Videos\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Unban Requests - Hide Mod Actions in Unban Requests\n    this.settings.add(\"addon.trubbel.ui-tweaks.unban-requests-hide\", {\n      default: false,\n      ui: {\n        sort: 1,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Unban Requests\",\n        title: \"Hide Mod Actions in Unban Requests\",\n        description: \"Hide all mod actions taken in the **Unban Requests popout window**.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - Unban Requests - Remove the line-through text from deleted messages\n    this.settings.add(\"addon.trubbel.ui-tweaks.unban-requests-deleted-message\", {\n      default: false,\n      ui: {\n        sort: 2,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> Unban Requests\",\n        title: \"Remove line-through text in Unban Requests & User Cards\",\n        description: \"Remove the line-through text in Unban Requests and within user cards moderated messages.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n    // UI Tweaks - VOD - Show black background behind current and duration time\n    this.settings.add(\"addon.trubbel.ui-tweaks.vod-time-background\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > UI Tweaks >> VOD\",\n        title: \"Show black background behind current and duration time\",\n        description: \"Show a black background behind VODs seekbar, for current time and duration. Making it easier to see the white text.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.updateCSS()\n    });\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.ui-tweaks.system-theme\", () => this.getCurrentTheme());\n    this.router.on(\":route\", () => {\n      this.getCurrentTheme();\n    });\n    this.getCurrentTheme();\n\n    this.updateCSS();\n  }\n\n  getCurrentTheme() {\n    const enabled = this.settings.get(\"addon.trubbel.ui-tweaks.system-theme\");\n    if (enabled) {\n      autoChangeTheme(this);\n    }\n  }\n\n  updateCSS() {\n    // UI Tweaks - Chat - Reduce padding in Viewer List\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.chat-viewer-list-padding\")) {\n      this.style.set(\"viewer-list-padding1\", \"#community-tab-content > div {padding: 1rem !important;}\");\n      this.style.set(\"viewer-list-padding2\", \".chatter-list-item {padding: .2rem 0!important;}\");\n    } else {\n      this.style.delete(\"viewer-list-padding1\");\n      this.style.delete(\"viewer-list-padding2\");\n    }\n    // UI Tweaks - Chat - Show Full Messages /w Expanded Replies\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.chat-show-full-message\")) {\n      this.style.set(\"show-full-message\", \".chat-line__message-container p[title*=\\\"@\\\"] {white-space: break-spaces !important;}\");\n      this.style.set(\"show-full-message-mentioned\", \".chat-line__message-container p:has(.reply-line--mentioned) {white-space: break-spaces !important;}\");\n    } else {\n      this.style.delete(\"show-full-message\");\n      this.style.delete(\"show-full-message-mentioned\");\n    }\n    // UI Tweaks - Titles - Show full titles for Stream Tooltips\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.full-side-nav-tooltip\")) {\n      this.style.set(\"show-full-side-nav-tooltip1\", \".tw-balloon :has(.online-side-nav-channel-tooltip__body) { max-width: none !important; }\");\n      this.style.set(\"show-full-side-nav-tooltip2\", \".online-side-nav-channel-tooltip__body :is(p) { display: block !important; -webkit-line-clamp: unset !important; -webkit-box-orient: unset !important; overflow: visible !important; text-overflow: unset !important; }\");\n      this.style.set(\"show-full-side-nav-tooltip3\", \".tw-balloon :has(.side-nav-guest-star-tooltip__body) { max-width: none !important; }\");\n      this.style.set(\"show-full-side-nav-tooltip4\", \".side-nav-guest-star-tooltip__body :is(p) { display: block !important; -webkit-line-clamp: unset !important; -webkit-box-orient: unset !important; overflow: visible !important; text-overflow: unset !important; }\");\n    } else {\n      this.style.delete(\"show-full-side-nav-tooltip1\");\n      this.style.delete(\"show-full-side-nav-tooltip2\");\n      this.style.delete(\"show-full-side-nav-tooltip3\");\n      this.style.delete(\"show-full-side-nav-tooltip4\");\n    }\n    // UI Tweaks - Titles - Show full titles in Clip Previews\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.titles-full-clip\")) {\n      this.style.set(\"titles-full-clip\", \"article [href*=\\\"/clip/\\\"] :is(h3[title]) {white-space: unset;}\");\n    } else {\n      this.style.delete(\"titles-full-clip\");\n    }\n    // UI Tweaks - Titles - Show full titles in Stream Previews\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.titles-full-stream\")) {\n      this.style.set(\"titles-full-stream\", \"[data-a-target=\\\"preview-card-channel-link\\\"] :is(h3[title]) {white-space: unset;}\");\n    } else {\n      this.style.delete(\"titles-full-stream\");\n    }\n    // UI Tweaks - Titles - Show full titles in VOD Previews\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.titles-full-vod\")) {\n      this.style.set(\"titles-full-vod\", \"article [href^=\\\"/videos/\\\"] :is(h3[title]) {white-space: unset;}\");\n    } else {\n      this.style.delete(\"titles-full-vod\");\n    }\n    // UI Tweaks - Titles - Show full titles for Games in Directory\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.titles-full-game\")) {\n      this.style.set(\"titles-full-game\", \".game-card .tw-card-body :is([data-a-target=\\\"tw-card-title\\\"]) {white-space: unset;}.game-card .tw-card-body :is(h2[title]) {white-space: unset;}\");\n    } else {\n      this.style.delete(\"titles-full-game\");\n    }\n    // UI Tweaks - Titles - Show full titles for Most Recent Videos\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.titles-most-recent-video\")) {\n      this.style.set(\"titles-most-recent-video\", \".player-overlay-background p[title] {white-space: unset;}\");\n    } else {\n      this.style.delete(\"titles-most-recent-video\");\n    }\n    // UI Tweaks - Unban Requests - Hide Mod Actions in Unban Requests\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.unban-requests-hide\")) {\n      // Hides the \"Banned By\"-text\n      this.style.set(\"unban-requests-hide1\", `\n        .tw-root--theme-dark .mod-view-widget-popout .unban-requests-item-header-tab__banned-by-item button {\n          color: transparent !important;\n          background-color: #adadb8 !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          pointer-events: none !important;\n          padding: 0 90px !important;\n        }\n        .tw-root--theme-light .mod-view-widget-popout .unban-requests-item-header-tab__banned-by-item button {\n          color: transparent !important;\n          background-color: black !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          pointer-events: none !important;\n          padding: 0 90px !important;\n        }\n        `);\n      // Removes the \"(Deleted by moderator)\"-text\n      this.style.set(\"unban-requests-hide2\", \".mod-view-widget-popout .chat-line__message--deleted span+span {display: none !important;}\");\n      // Hides the mod actions within the \"Chat Logs\"-tab\n      this.style.set(\"unban-requests-hide3\", `\n        .tw-root--theme-dark .mod-view-widget-popout .targeted-mod-action .message__timestamp+span {\n          color: transparent !important;\n          background-color: #adadb8 !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 90px !important;\n        }\n        .tw-root--theme-light .mod-view-widget-popout .targeted-mod-action .message__timestamp+span {\n          color: transparent !important;\n          background-color: black !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 90px !important;\n        }\n        `);\n      // Hides the mod actions within the \"Mod Comments\"-tab\n      this.style.set(\"unban-requests-hide4\", `\n        .tw-root--theme-dark .mod-view-widget-popout .viewer-card-mod-logs-comment-line a span {\n          color: transparent !important;\n          background-color: #adadb8 !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 90px !important;\n        }\n        .tw-root--theme-light .mod-view-widget-popout .viewer-card-mod-logs-comment-line a span {\n          color: transparent !important;\n          background-color: black !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 90px !important;\n        }\n        `);\n      // Making sure the mod link within the \"Mod Comments\"-tab isn't clickable\n      this.style.set(\"unban-requests-hide5\", \".mod-view-widget-popout .viewer-card-mod-logs-comment-line a {pointer-events: none !important;}\");\n      // Removes the \"(Deleted by moderator)\"-text, if a User Card is opened within Unban Requests\n      this.style.set(\"unban-requests-hide6\", \"#root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .chat-line__message--deleted span+span {display: none !important;}\");\n      // Hides the mod actions within the \"Chat Logs\"-tab, if a User Card is opened within Unban Requests\n      this.style.set(\"unban-requests-hide7\", `\n        .tw-root--theme-dark #root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .targeted-mod-action div>span.message__timestamp+span {\n          color: transparent !important;\n          background-color: #adadb8 !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 50px !important;\n        }\n        .tw-root--theme-light #root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .targeted-mod-action div>span.message__timestamp+span {\n          color: transparent !important;\n          background-color: black !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 50px !important;\n        }\n        `);\n      // Hides the moderation action at the bottom of a User Card\n      this.style.set(\"unban-requests-hide8\", `\n        .tw-root--theme-dark #root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .viewer-card-mod-logs>div:not([style]):not(.viewer-card-mod-logs-page) span+span>span {\n          color: transparent !important;\n          background-color: #adadb8 !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 50px !important;\n        }\n        .tw-root--theme-light #root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .viewer-card-mod-logs>div:not([style]):not(.viewer-card-mod-logs-page) span+span>span {\n          color: transparent !important;\n          background-color: black !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 50px !important;\n        }\n        `);\n      // Hides the moderation action within User Card \"Mod Comments\"-tab\n      this.style.set(\"unban-requests-hide9\", `\n        .tw-root--theme-dark #root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .viewer-card-mod-logs-comment-line a span {\n          color: transparent !important;\n          background-color: #adadb8 !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 50px !important;\n        }\n        .tw-root--theme-light #root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .viewer-card-mod-logs-comment-line a span {\n          color: transparent !important;\n          background-color: black !important;\n          -webkit-user-select: none !important;\n          user-select: none !important;\n          padding: 0 50px !important;\n        }\n        `);\n      // Making sure the mod link within the \"Mod Comments\"-tab isn't clickable\n      this.style.set(\"unban-requests-hide10\", \"#root :has(.mod-view-widget-popout)+.popout-widget__viewer-card-layer .viewer-card-mod-logs-comment-line a {pointer-events: none !important;}\");\n    } else {\n      this.style.delete(\"unban-requests-hide1\");\n      this.style.delete(\"unban-requests-hide2\");\n      this.style.delete(\"unban-requests-hide3\");\n      this.style.delete(\"unban-requests-hide4\");\n      this.style.delete(\"unban-requests-hide5\");\n      this.style.delete(\"unban-requests-hide6\");\n      this.style.delete(\"unban-requests-hide7\");\n      this.style.delete(\"unban-requests-hide8\");\n      this.style.delete(\"unban-requests-hide9\");\n      this.style.delete(\"unban-requests-hide10\");\n    }\n    // UI Tweaks - Unban Requests - Remove the line-through text from deleted messages\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.unban-requests-deleted-message\")) {\n      this.style.set(\"unban-requests-deleted-message\", \".vcml-message .chat-line__message--deleted-detailed {text-decoration: none;}\");\n    } else {\n      this.style.delete(\"unban-requests-deleted-message\");\n    }\n    // UI Tweaks - VOD - Show black background behind current and duration time\n    if (this.settings.get(\"addon.trubbel.ui-tweaks.vod-time-background\")) {\n      this.style.set(\"vod-time-background\", \"[data-a-target=\\\"player-seekbar-current-time\\\"],[data-a-target=\\\"player-seekbar-duration\\\"] {background-color: black;padding: 0px 0.4rem;border-radius: 0.2rem;}\");\n    } else {\n      this.style.delete(\"vod-time-background\");\n    }\n  }\n}","import { WHISPER_THREADS_SELECTOR } from \"../utils/constants/selectors\";\nimport { WHISPER_HEIGHT_CONFIG } from \"../utils/constants/config\";\nconst { createElement } = FrankerFaceZ.utilities.dom;\n\nexport class Whispers extends FrankerFaceZ.utilities.module.Module {\n  constructor(...args) {\n    super(...args);\n    this.inject(\"settings\");\n\n    this.observer = null;\n    this.styleElement = null;\n    this.boundMouseMove = null;\n    this.boundMouseUp = null;\n    this.isResizing = false;\n    this.currentArea = null;\n    this.startHeight = 0;\n    this.startY = 0;\n\n    // Whispers - Resizable - Enable Resizable Drop Down\n    this.settings.add(\"addon.trubbel.whispers.resizable\", {\n      default: false,\n      ui: {\n        sort: 0,\n        path: \"Add-Ons > Trubbel\\u2019s Utilities > Whispers >> Resizable\",\n        title: \"Enable Resizable Drop Down\",\n        description: \"Gives the ability to adjust the height of the whisper window drop down.\",\n        component: \"setting-check-box\"\n      },\n      changed: () => this.getWhisperWindow()\n    });\n  }\n\n  onEnable() {\n    this.settings.getChanges(\"addon.trubbel.whispers.resizable\", () => this.getWhisperWindow());\n    this.getWhisperWindow();\n  }\n\n  cleanup() {\n    // Remove style element\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n\n    // Remove event listeners\n    if (this.boundMouseMove) {\n      document.removeEventListener(\"mousemove\", this.boundMouseMove);\n      this.boundMouseMove = null;\n    }\n    if (this.boundMouseUp) {\n      document.removeEventListener(\"mouseup\", this.boundMouseUp);\n      this.boundMouseUp = null;\n    }\n\n    // Disconnect observer\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n\n    // Reset instance variables\n    this.isResizing = false;\n    this.currentArea = null;\n    this.startHeight = 0;\n    this.startY = 0;\n  }\n\n  initializeResize(scrollArea) {\n    if (scrollArea.dataset.heightAdjustable) return;\n\n    scrollArea.dataset.heightAdjustable = \"true\";\n\n    const storedHeight = this.settings.provider.get(WHISPER_HEIGHT_CONFIG);\n    if (storedHeight) {\n      scrollArea.style.height = storedHeight;\n    }\n\n    scrollArea.appendChild(createElement(\"div\", {\n      class: \"resize-handle\"\n    }));\n\n    scrollArea.addEventListener(\"mousedown\", (e) => {\n      // Only trigger if clicking near the bottom edge\n      const rect = scrollArea.getBoundingClientRect();\n      if (e.clientY >= rect.bottom - 6) {\n        this.isResizing = true;\n        this.currentArea = scrollArea;\n        this.startHeight = rect.height;\n        this.startY = e.clientY;\n        e.preventDefault();\n      }\n    });\n  }\n\n  handleMouseMove = (e) => {\n    if (!this.isResizing || !this.currentArea) return;\n\n    const deltaY = e.clientY - this.startY;\n    const rect = this.currentArea.getBoundingClientRect();\n\n    // Calculate the maximum height allowed (20px above the bottom of the browser)\n    const viewportHeight = window.innerHeight;\n    const maxHeight = Math.min(\n      viewportHeight - rect.top - 20,\n      this.startHeight + deltaY\n    );\n\n    const newHeight = Math.max(67, maxHeight); // minimum 67px height\n    this.currentArea.style.height = `${newHeight}px`;\n    this.settings.provider.set(WHISPER_HEIGHT_CONFIG, `${newHeight}px`);\n  }\n\n  handleMouseUp = () => {\n    this.isResizing = false;\n    this.currentArea = null;\n  }\n\n  setupStyles() {\n    const styleContent = `\n      .whispers-threads-box__scrollable-area {\n        position: relative !important;\n      }\n      .whispers-threads-box__scrollable-area::after {\n        content: \"\";\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 6px;\n        background: #6441a5;\n        cursor: ns-resize;\n        opacity: 0;\n        transition: opacity 0.2s;\n        border-top-width: 2px;\n        border-top-style: dotted;\n        border-top-color: inherit;\n      }\n      .whispers-threads-box__scrollable-area:hover::after {\n        opacity: 0.5;\n      }\n    `;\n\n    this.styleElement = createElement(\"style\", {\n      textContent: styleContent\n    });\n    document.head.appendChild(this.styleElement);\n  }\n\n  setupObserver() {\n    this.observer = new MutationObserver((mutations) => {\n      for (const mutation of mutations) {\n        for (const node of mutation.addedNodes) {\n          if (node.nodeType === Node.ELEMENT_NODE) {\n            const scrollArea = node.querySelector(WHISPER_THREADS_SELECTOR);\n            if (scrollArea) {\n              this.initializeResize(scrollArea);\n            }\n          }\n        }\n      }\n    });\n\n    this.observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n  }\n\n  getWhisperWindow() {\n    const enabled = this.settings.get(\"addon.trubbel.whispers.resizable\");\n    if (enabled) {\n      // Set up styles\n      this.setupStyles();\n\n      // Set up event listeners\n      this.boundMouseMove = this.handleMouseMove.bind(this);\n      this.boundMouseUp = this.handleMouseUp.bind(this);\n      document.addEventListener(\"mousemove\", this.boundMouseMove);\n      document.addEventListener(\"mouseup\", this.boundMouseUp);\n\n      // Set up observer\n      this.setupObserver();\n    } else {\n      // Clean up existing handlers and observers\n      this.cleanup();\n      if (this.settings.provider.has(WHISPER_HEIGHT_CONFIG)) {\n        this.settings.provider.delete(WHISPER_HEIGHT_CONFIG);\n      }\n    }\n  }\n}","import { ChatCommands } from \"./settings/chat-commands\";\nimport { ChatModeration } from \"./settings/chat-moderation\";\nimport { ChatViewerCard } from \"./settings/chat-viewer-card\";\nimport { ClipsVideos } from \"./settings/clips-videos\";\nimport { Directory } from \"./settings/directory\";\nimport { DropsRewards } from \"./settings/drops-rewards\";\nimport { Player } from \"./settings/player\";\nimport { RemoveThings } from \"./settings/remove-things\";\nimport { SideBarPreview } from \"./settings/sidebar\";\nimport { UITweaks } from \"./settings/ui-tweaks\";\nimport { Whispers } from \"./settings/whispers\";\n\nclass Trubbel extends Addon {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject(ChatCommands);\n\t\tthis.inject(ChatModeration);\n\t\tthis.inject(ChatViewerCard);\n\t\tthis.inject(ClipsVideos);\n\t\tthis.inject(Directory);\n\t\tthis.inject(DropsRewards);\n\t\tthis.inject(Player);\n\t\tthis.inject(RemoveThings);\n\t\tthis.inject(SideBarPreview);\n\t\tthis.inject(UITweaks);\n\t\tthis.inject(Whispers);\n\n\t\tthis.inject(\"chat\");\n\t\tthis.inject(\"chat.badges\");\n\n\t\tthis.loadDevBadge();\n\t}\n\n\tasync loadDevBadge() {\n\t\tthis.badges.loadBadgeData(\"addon.trubbel-devbadge\", {\n\t\t\taddon: \"trubbel\",\n\t\t\tid: \"addon.trubbel-devbadge\",\n\t\t\tbase_id: \"addon.trubbel-devbadge\",\n\t\t\ttitle: \"Trubbel\\u2019s Utilities\\nDeveloper\",\n\t\t\tslot: 666,\n\t\t\tcolor: \"transparent\",\n\t\t\timage: \"https://i.imgur.com/8TRjfOx.png\",\n\t\t\turls: {\n\t\t\t\t1: \"https://i.imgur.com/8TRjfOx.png\",\n\t\t\t\t2: \"https://i.imgur.com/vu08acF.png\",\n\t\t\t\t4: \"https://i.imgur.com/s8TIgUg.png\"\n\t\t\t},\n\t\t\tclick_url: \"https://twitch.tv/trubbel\"\n\t\t});\n\n\t\tthis.chat.getUser(39172973, \"trubbel\").addBadge(\"addon.trubbel\", \"addon.trubbel-devbadge\");\n\t}\n}\n\nTrubbel.register();"],"names":["doc","names","unique","defs","def","name","collectFragmentReferences","node","refs","type","selection","definitionRefs","findOperation","i","element","oneQuery","operationName","newDoc","opRefs","allRefs","newRefs","refName","prevRefs","childRefs","childRef","op","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","exports","definition","key","obj","prop","formatLiveDuration","uptime","now","startDate","diffMs","seconds","minutes","hours","days","parts","formatAccountAge","createdAt","accountCreationDate","months","years","formatFollowAge","followedAt","followDate","formatTime","secs","getAccountAge","context","inst","userId","username","twitch_data","displayName","login","user","apollo","accountAge","getChatters","channelLogin","streamer","totalCount","formattedCount","getFollowAge","channelID","currentUserID","getBroadcaster","getUser","broadcaster","data","followAge","getStreamUptime","PermissionLevels","ffzCommands","args","e","msg","enabledCommands","command","description","ctx","val","handler","settingKey","commandHandler","ChatCommands","TranslatableError","createElement","on","off","event","style","getChatMessageObject","instance","props","err","settingValue","selectors","selector","range","chatMessage","messageObject","customTimeout","clientRect","offsetY","offsetX","amount","TWO_WEEKS","time","humanTime","text","cursor","duration","reason","target","chatRoom","targetRect","chatRoomRect","timeoutRect","padding","top","left","ChatModeration","message","regex","match","statusElement","usernames","newText","index","messageText","statusMessages","statusMsg","chatContainer","container","rect","clickedRange","caretPosition","offset","fullText","currentPosition","usernameStart","usernameEnd","ChatViewerCard","FOLLOWING_CHANNELS_SELECTOR","MOST_RECENT_CARD_SELECTOR","MOST_RECENT_SELECTOR","TIMESTAMP_SELECTOR","WHISPER_THREADS_SELECTOR","getIdFromURL","clipId","videoMatch","fetchCreationDate","id","query","variables","result","error","updateTimestamp","relative","timestamp","setTimestamp","idInfo","lastProcessedVideoId","processing","applyMostRecentVideoTimestamp","videoId","overlay","notice","showNotification","icon","timeout","notification","existingNotifications","iconElement","remainingNotifications","notif","out","fmt","route","video","seekbar","segments","segment","processedSegments","resolve","sortedSegments","a","b","combined","current","timeUpdateHandler","currentTime","startTime","endTime","ClipsVideos","ManagedStyle","el","currentMatch","oldMatch","isCurrentDirectory","wasDirectory","tabElement","followCount","quality","muted","iframe","link","href","parent","n","item","tracking","userData","formattedDate","usernameElement","dateString","Directory","STORAGE_KEY_CONFIG","WHISPER_HEIGHT_CONFIG","stored","state","campaigns","currentCampaigns","hasChanges","campaignName","button","infoElement","nameLink","parentElement","titleHeight","collapseBtn","collapsedState","isCollapsed","newCollapsed","timeoutId","animFrameId","reject","checkElements","elements","currentLocation","oldLocation","isCurrentInventory","wasInventory","infoElements","DropsRewards","ERROR_CODES","ERROR_MESSAGES","maxAttempts","timeWindowMs","RateLimiter","cls","instances","events","player","playerState","metadataElement","code","errorCode","Player","has","CLASSES","k","RemoveThings","cleanVal","num","cards","card","delay","sidebarEl","sidebarRect","wrapper","showTitle","showCategory","showViewerCount","showHypeTrain","showGuests","size","newSrc","streamTitle","categoryName","viewerCount","hypeTrainData","level","guests","guestsListElement","guest","guestItem","avatarContainer","borderColor","avatarImg","nameElement","viewerCountElement","indicator","cardRect","previewHeight","isOnRight","viewportHeight","SideBarPreview","autoChangeTheme","THEME","findReduxStore","searchReactChildren","predicate","child","getReactRoot","rootElement","reactRoot","setTheme","store","isDark","initialize","systemPrefersDark","twitchIsDark","UITweaks","deltaY","maxHeight","newHeight","scrollArea","storedHeight","styleContent","mutations","mutation","Whispers","Trubbel"],"sourceRoot":""}