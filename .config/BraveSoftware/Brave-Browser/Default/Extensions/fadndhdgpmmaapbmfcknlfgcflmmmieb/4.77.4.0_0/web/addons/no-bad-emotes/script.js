(()=>{var M=Object.defineProperty;var _=(O,C)=>M(O,"name",{value:C,configurable:!0});(()=>{var O={1037:()=>{/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */String.fromCodePoint||function(){var t=function(){try{var f={},l=Object.defineProperty,u=l(f,f,f)&&l}catch{}return u}(),s=String.fromCharCode,r=Math.floor,h=_(function(f){var l=16384,u=[],b,w,d=-1,g=arguments.length;if(!g)return"";for(var y="";++d<g;){var e=Number(arguments[d]);if(!isFinite(e)||e<0||e>1114111||r(e)!=e)throw RangeError("Invalid code point: "+e);e<=65535?u.push(e):(e-=65536,b=(e>>10)+55296,w=e%1024+56320,u.push(b,w)),(d+1==g||u.length>l)&&(y+=s.apply(null,u),u.length=0)}return y},"fromCodePoint");t?t(String,"fromCodePoint",{value:h,configurable:!0,writable:!0}):String.fromCodePoint=h}()},1863:(t,s,r)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r(1037);var h=/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,f={0:"\0",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","'":"'",'"':'"',"\\":"\\"},l=_(function(d){return String.fromCodePoint(parseInt(d,16))},"fromHex2"),u=_(function(d){return String.fromCodePoint(parseInt(d,8))},"fromOct2"),b=_(function(d){return d.replace(h,function(g,y,e,o,n,a,c,p){return e!==void 0?l(e):o!==void 0?l(o):n!==void 0?l(n):a!==void 0?u(a):p!==void 0?l(p):f[c]})},"_default2");s.default=b,t.exports=s.default},6076:(t,s,r)=>{"use strict";t.exports=r.p+"common.json"}},C={};function i(t){var s=C[t];if(s!==void 0)return s.exports;var r=C[t]={exports:{}};return O[t](r,r.exports,i),r.exports}_(i,"__webpack_require__"),i.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return i.d(s,{a:s}),s},i.d=(t,s)=>{for(var r in s)i.o(s,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var s=i.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var r=s.getElementsByTagName("script");if(r.length)for(var h=r.length-1;h>-1&&!t;)t=r[h--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t+"../"})();var x={};(()=>{"use strict";var t=i(1863),s=i.n(t);const{has:r,addWordSeparators:h,glob_to_regex:f,escape_regex:l}=FrankerFaceZ.utilities.object,u=i(6076),b=["g","gi"];function w(y){const e=[];for(let o=0;o<y.length;o++){const n=y[o];n[0].length&&n[1].push(`^(?:${n[0].join("|")})$`),e.push(n[1].length?new RegExp(n[1].join("|"),b[o]||"gi"):null)}return e}_(w,"formatTerms");const g=class g extends FrankerFaceZ.utilities.addon.Addon{constructor(e,o){super(e,o),this._use_common=null,this.inject("chat.emotes"),this.doesEmoteMatch=this.doesEmoteMatch.bind(this),this.settings.add("addon.nobademotes.process-outgoing",{default:!1,ui:{path:"Add-Ons > No Bad Emotes >> General",title:"Escape filtered emotes in outgoing chat messages.",description:"The filtering this add-on performs is client-only, so normally your filtering only affects what you see. If you enable this, any messages you send will be modified based on your filtering rules to prevent you from inadvertently using an emote that you have filtered out.",component:"setting-check-box"}}),this.settings.add("addon.nobademotes.outgoing-escape",{default:"\\u{E0002}{NAME}",process(n,a){try{return s()(a)}catch{return"\u{E0002}{NAME}"}},ui:{path:'Add-Ons > No Bad Emotes >> Advanced @{"sort": 99}',title:"Escape Character",description:"The character(s) to add to an emote's name when escaping filtered emotes in outgoing chat messages. Use `'{'NAME'}'` where the emote's name should go. Standard escape sequences are supported.",component:"setting-text-box",validate(n){try{return s()(n),!0}catch{return!1}}}}),this.settings.add("addon.nobademotes.no-filter-personal",{default:!1,ui:{path:'Add-Ons > No Bad Emotes >> General @{"sort": -99}',title:"Do not filter emotes out of personal emote sets.",component:"setting-check-box"},changed:()=>this.emotes.updateFiltered()}),this.settings.add("addon.nobademotes.no-filter-global",{default:!1,ui:{path:'Add-Ons > No Bad Emotes >> General @{"sort": -99}',title:"Do not filter emotes out of global emote sets.",component:"setting-check-box"},changed:()=>this.emotes.updateFiltered()}),this.settings.add("addon.nobademotes.use-all-lower",{default:!1,ui:{path:"Add-Ons > No Bad Emotes >> Basic",title:"Filter out emotes with names that are all lowercase letters.",component:"setting-check-box"},changed:()=>this.emotes.updateFiltered()}),this.settings.add("addon.nobademotes.ban-short",{default:!1,ui:{path:"Add-Ons > No Bad Emotes >> Basic",title:"Filter out emotes with names shorter than 3 characters.",component:"setting-check-box"},changed:()=>this.emotes.updateFiltered()}),this.settings.add("addon.nobademotes.custom-names",{default:[],type:"array_merge",always_inherit:!0,ui:{path:'Add-Ons > No Bad Emotes >> Custom Words @{"description": "Flexible filters for removing emotes based on their name. Please see [Chat > Filtering > Syntax Help](~) for details on how to use this."}',component:"basic-terms"}}),this.settings.add("__filter:addon.nobademotes.custom-names",{requires:["addon.nobademotes.custom-names"],equals:"requirements",process(n){const a=n.get("addon.nobademotes.custom-names");if(!a||!a.length)return null;const c=[[[],[]],[[],[]]];let p=!1;for(const m of a){const v=m.t,F=m.s,A=r(m,"w")?m.w:v!=="raw";let E=m.v;v==="glob"?E=f(E):v!=="regex"&&v!=="raw"&&(E=l(E)),!(!E||!E.length)&&(p=!0,c[F?0:1][A?0:1].push(E))}return p&&p?w(c):null},changed:()=>this.emotes.updateFiltered()}),this.settings.add("addon.nobademotes.use-common",{default:!0,ui:{path:"Add-Ons > No Bad Emotes >> Common Words",title:"Filter out emotes with names matching a list of common English words.",component:"setting-check-box"},changed:n=>this.onUseCommon(n)}),this.settings.add("addon.nobademotes.capitalization-mode",{default:0,ui:{path:"Add-Ons > No Bad Emotes >> Common Words",title:"Capitalization Mode",sort:99,description:"By default, we only filter common words if the emote name is all lower-case. You can optionally include emotes with the first letter capitalized.",component:"setting-select-box",data:[{value:0,title:"Lowercase Only"},{value:1,title:"Lowercase or Initial Capital"}]},changed:()=>{this._use_common&&this.common_words?.length&&this.emotes.updateFiltered()}})}onEnable(){this.onUseCommon(this.settings.get("addon.nobademotes.use-common")),this.on("chat:pre-send-message",this.processOutbound),this.emotes.addFilter({type:"nobademotes",test:this.doesEmoteMatch})}onDisable(){this.emotes.removeFilter("nobademotes"),this.off("chat:pre-send-message",this.processOutbound)}onUseCommon(e){if(this._use_common===e)return;const o=this._use_common==null;if(this._use_common=e,!e||this.common_words){o&&this.emotes.updateFiltered();return}this.loadCommonWords()}async loadCommonWords(){if(this._loading_common||this.common_words?.length)return;this._loading_common=!0;let e;try{e=await fetch(u).then(o=>o.ok?o.json():null)}catch(o){this.log.warn("Unable to load common words list.",o),this._loading_common=!1;return}if(!Array.isArray(e?.words)){this._loading_common=!1,this.common_words=[];return}this._loading_common=!1,this.common_words=e.words,this.log.info(`Loaded ${e.words.length} common words.`),this._use_common&&this.emotes.updateFiltered()}processOutbound(e){if(!this.settings.get("addon.nobademotes.process-outgoing"))return;const o=this.resolve("site"),n=o?.getUser?.(),a=new Set;for(const m of this.emotes.getSets(n?.id,n?.login,null,e.channel))for(const v of Object.values(m.disabled_emotes))v?.name&&a.add(v.name);if(!a.size)return;const c=[],p=this.settings.get("addon.nobademotes.outgoing-escape");for(const m of e.message.split(/ /g))a.has(m)?c.push(p.replace(/\{NAME\}/g,m)):c.push(m);e.message=c.join(" ")}doesEmoteMatch(e,o){if(o&&(this.settings.get("addon.nobademotes.no-filter-global")&&this.emotes.default_sets.includes(o.id)||o.personal&&this.settings.get("addon.nobademotes.no-filter-personal")))return!1;if(this.settings.get("addon.nobademotes.ban-short")&&e.name.length<3)return!0;const a=e.name.toLowerCase();if(this.settings.get("addon.nobademotes.use-all-lower")&&a===e.name||this.doesCommonNameMatch(e,a)||this.doesCustomMatch(e))return!0}doesCommonNameMatch(e,o){if(!this._use_common||!this.common_words)return!1;const n=this.settings.get("addon.nobademotes.capitalization-mode");return n===0&&o!==e.name||n===1&&e.name.slice(1)!==o.slice(1)?!1:this.common_words.includes(o)}doesCustomMatch(e){const o=this.settings.get("__filter:addon.nobademotes.custom-names");if(!o)return!1;for(let n=0;n<o.length;n++)if(o[n]&&(o[n].lastIndex=-1,o[n].test(e.name)))return!0}};_(g,"NoBadEmotes");let d=g;d.register("no-bad-emotes",null,"1.1.0")})()})();})();

//# sourceMappingURL=script.js.map