"use strict";(()=>{var b=Object.defineProperty;var c=(_,n)=>b(_,"name",{value:n,configurable:!0});(globalThis.ffzAddonsWebpackJsonp=globalThis.ffzAddonsWebpackJsonp||[]).push([[31],{108:(_,n,a)=>{a.r(n),a.d(n,{default:()=>m});var f=c(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ffz--widget ffz--select-box",class:{inherits:t.isInherited,default:t.isDefault}},[e("div",{staticClass:"tw-flex tw-align-items-start"},[e("label",{staticClass:"tw-mg-y-05",attrs:{for:t.item.full_key}},[t._v(`
			`+t._s(t.t(t.item.i18n_key,t.item.title))+`
			`),t.unseen?e("span",{staticClass:"tw-pill"},[t._v(t._s(t.t("setting.new","New")))]):t._e()]),t._v(" "),e("div",{staticClass:"tw-flex tw-flex-column tw-mg-05"},[e("select",{ref:"type",staticClass:"tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05",on:{change:t.onTypeChange}},[e("option",{domProps:{selected:t.isPresetSound}},[t._v(`
					`+t._s(t.t("addon.ffzap-core.highlight-sound.preset-sound","Preset Sound"))+`
				`)]),t._v(" "),e("option",{domProps:{selected:t.isCustomURL}},[t._v(`
					`+t._s(t.t("addon.ffzap-core.highlight-sound.custom-url","Custom (URL)"))+`
				`)]),t._v(" "),e("option",{domProps:{selected:t.isCustomFile}},[t._v(`
					`+t._s(t.t("addon.ffzap-core.highlight-sound.custom-file","Custom (File)"))+`
				`)])]),t._v(" "),t.isPresetSound?e("select",{ref:"control",staticClass:"tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05",attrs:{id:t.item.full_key},on:{change:t.onPresetChange}},t._l(t.data,function(i){return e("option",{key:i.value,domProps:{selected:i.value===t.value}},[t._v(`
					`+t._s(i.i18n_key?t.t(i.i18n_key,i.title,i):i.title)+`
				`)])}),0):t._e(),t._v(" "),t.isCustomURL?e("input",{ref:"text",staticClass:"ffz-mg-t-1p tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input",domProps:{value:t.value},on:{change:t.onCustomURLChange}}):t._e(),t._v(" "),t.isCustomFile?e("button",{staticClass:"tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-button",class:!t.isBlobSupported&&"tw-button--disabled ffz-tooltip ffz-tooltip--no-mouse",staticStyle:{"border-radius":"0"},attrs:{"data-title":t.t("addon.ffzap-core.no-file-support",`Custom files are not supported by the current storage provider.
Please change your storage provider in Data Management > Storage >> Provider.`)},on:{click:t.openFileSelector}},[e("span",{staticClass:"tw-button__icon tw-button__icon--left ffz-i-upload"}),t._v(" "),e("span",{staticClass:"tw-button__text"},[t._v("Select File")])]):t._e()]),t._v(" "),t.item.buttons?e(t.item.buttons,{tag:"component",attrs:{context:t.context,item:t.item,value:t.value}}):t._e(),t._v(" "),t.source&&t.source!==t.profile?e("button",{staticClass:"tw-mg-l-05 tw-mg-y-05 tw-button tw-button--text",on:{click:function(i){t.context.currentProfile=t.source}}},[e("span",{staticClass:"tw-button__text ffz-i-right-dir"},[t._v(`
				`+t._s(t.sourceDisplay)+`
			`)])]):t._e(),t._v(" "),t.has_value?e("button",{staticClass:"tw-mg-l-05 tw-mg-y-05 tw-button tw-button--text ffz-il-tooltip__container",on:{click:t.clear}},[e("span",{staticClass:"tw-button__text ffz-i-cancel"}),t._v(" "),e("div",{staticClass:"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right"},[t._v(`
				`+t._s(t.t("setting.reset","Reset to Default"))+`
			`)])]):t._e()],1),t._v(" "),t.item.extra&&t.item.extra.component&&t.item.extra.before?e("section",[e(t.item.extra.component,{tag:"component",attrs:{context:t.context,item:t.item,value:t.value}})],1):t._e(),t._v(" "),t.item.description?e("section",{staticClass:"tw-c-text-alt-2"},[e("markdown",{attrs:{source:t.t(t.item.desc_i18n_key||t.item.i18n_key+".description",t.item.description)}})],1):t._e(),t._v(" "),t.item.extra&&t.item.extra.component&&!t.item.extra.before?e("section",[e(t.item.extra.component,{tag:"component",attrs:{context:t.context,item:t.item,value:t.value}})],1):t._e()])},"render"),u=[];const{openFile:p}=FrankerFaceZ.utilities.dom,r={mixins:[FrankerFaceZ.get().resolve("main_menu").SettingMixin],props:["item","context"],data(){return{isPresetSound:!1,isCustomURL:!1,isCustomFile:!1}},computed:{isBlobSupported:function(){return this.context.getFFZ().resolve("settings").provider.supportsBlobs}},mounted:function(){for(const{value:t}of this.data)if(t===this.value){this.isPresetSound=!0;return}if(this.value.startsWith("ffzap.sound-file:")){if(!this.isBlobSupported){this.isPresetSound=!0,this.clear();return}this.isCustomFile=!0}else this.isCustomURL=!0},methods:{onTypeChange(){const t=this.$refs.type.selectedIndex;this.isPresetSound=this.isCustomURL=this.isCustomFile=!1,t===0?this.isPresetSound=!0:t===1?this.isCustomURL=!0:t===2&&(this.isCustomFile=!0)},onPresetChange(){const t=this.$refs.control.selectedIndex,s=this.data[t];s&&this.set(s.value)},onCustomURLChange(){const t=this.$refs.text.value;t!=null&&this.set(t)},async canPlayAudio(t){return new Promise(s=>{const e=setTimeout(()=>{s(!1)},200),i=new Audio;i.oncanplay=()=>{clearTimeout(e),s(i)},i.oncanplaythrough=()=>{clearTimeout(e),s(i)},i.src=URL.createObjectURL(t)})},async openFileSelector(){if(!this.isBlobSupported)return;const t=await p("audio/*",!1);if(t.size>1024*1e3*2){alert(this.t("addon.ffzap-core.highlight-sound.file-too-big","Audio file is too big! (Max. 2MB)"));return}const s=await this.canPlayAudio(t);if(!s){alert(this.t("addon.ffzap-core.highlight-sound.cant-play","Can't play audio file!"));return}if(s.duration>10){alert(this.t("addon.ffzap-core.highlight-sound.file-too-long","Audio file is too long! (Max. 10 seconds)"));return}const e=this.context.getFFZ().resolve("settings");await e.awaitProvider();const i=e.provider;await i.awaitReady(),await i.setBlob(`ffzap.sound-file:${t.name}`,t),this.set(`ffzap.sound-file:${t.name}`),this.clearUnusedSounds(e)},async clearUnusedSounds(t){const s=[];for(const e of t.__profiles){const i=e.get("ffzap.core.highlight_sound");i&&i.startsWith("ffzap.sound-file:")&&s.push(i)}for(const e of await t.provider.blobKeys())e.startsWith("ffzap.sound-file:")&&!s.includes(e)&&await t.provider.deleteBlob(e)}}};var d=a(3006),o=(0,d.Z)(r,f,u,!1,null,null,null);const m=o.exports},5694:(_,n,a)=>{a.r(n),a.d(n,{default:()=>d});var f=c(function(){var o=this,m=o.$createElement,t=o._self._c||m;return t("div",[t("button",{staticClass:"tw-mg-l-05 tw-mg-y-05 tw-button tw-button--text ffz-il-tooltip__container tw-relative",on:{click:o.click}},[t("span",{staticClass:"tw-button__text ffz-i-play"}),o._v(" "),t("div",{staticClass:"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right"},[o._v(`
			`+o._s(o.t("setting.preview","Preview"))+`
		`)])])])},"render"),u=[];const h={props:["item","context","value"],methods:{click(){this.item.onUIChange(this.value)}}};var v=a(3006),r=(0,v.Z)(h,f,u,!1,null,null,null);const d=r.exports},3006:(_,n,a)=>{a.d(n,{Z:()=>f});function f(u,p,h,v,r,d,o,m){var t=typeof u=="function"?u.options:u;p&&(t.render=p,t.staticRenderFns=h,t._compiled=!0),v&&(t.functional=!0),d&&(t._scopeId="data-v-"+d);var s;if(o?(s=c(function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),r&&r.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(o)},"hook"),t._ssrRegister=s):r&&(s=m?function(){r.call(this,(t.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(t.functional){t._injectStyles=s;var e=t.render;t.render=c(function(w,g){return s.call(g),e(w,g)},"renderWithStyleInjection")}else{var i=t.beforeCreate;t.beforeCreate=i?[].concat(i,s):[s]}return{exports:u,options:t}}c(f,"normalizeComponent")}}]);})();

//# sourceMappingURL=vue.js.map