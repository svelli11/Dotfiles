"use strict";(()=>{var k=Object.defineProperty;var w=(O,N)=>k(O,"name",{value:N,configurable:!0});(globalThis.ffzWebpackJsonp=globalThis.ffzWebpackJsonp||[]).push([[208],{30642:(O,N,v)=>{v.r(N),v.d(N,{ALLOWED_ATTRS:()=>I,ALLOWED_TAGS:()=>j,GLOBAL_ATTRS:()=>M,PROPS:()=>W,TOKEN_TYPES:()=>p,VERSION:()=>G,default:()=>Y,getRoundClass:()=>L,renderTokens:()=>c,renderWithCapture:()=>h});var S=v(46949),B=v(19404),K=v.n(B),V=v(43496),U=v.n(V),F=v(17159);const G=9,p={},_=w((i,l)=>l.includes(i)?i:null,"validate"),H=["regular","bold","semibold"],A=["base","alt","alt-2","link"],Z=["youtube"],J=["1","2","3","4","5","6","7","8"],D=["nowrap","pre-wrap"],P={small:"05",normal:"1",large:"2",huge:"3"},C=new(K())({html:!1,linkify:!0}).disable("image");C.use(U(),{attrs:{class:"ffz-tooltip",target:"_blank",rel:"noopener","data-tooltip-type":"link"}});function z(i,l,a,s){for(const t of["","-x","-y","-t","-r","-b","-l"]){const e=`${i}${t}`,r=l[e];if(r){if(P[r])a.push(`tw-${i}${t}-${P[r]}`);else if(s){const f=i==="pd"?"padding":"margin";t===""&&(s[f]=r),(t==="-x"||t==="-l")&&(s[`${f}-left`]=r),(t==="-x"||t==="-r")&&(s[`${f}-right`]=r),(t==="-y"||t==="-t")&&(s[`${f}-top`]=r),(t==="-y"||t==="-b")&&(s[`${f}-bottom`]=r)}}}}w(z,"applySpacing");function L(i){let l;return i===-1?l="rounded":i===1?l="small":i===2?l="medium":i===3&&(l="large"),l?`tw-border-radius-${l}`:""}w(L,"getRoundClass");function h(i,l,a,s){const t=a.text_capture,e=a.markdown;a.text_capture=[],s&&(a.markdown=!0);const r=c(i,l,a);let f=a.text_capture.join("").trim();return f.length||(f=null),a.text_capture=t,a.markdown=e,{content:r,title:f}}w(h,"renderWithCapture");function c(i,l,a,s){if(i==null)return null;const t=a.markdown;s&&(a.markdown=!0);let e=[];Array.isArray(i)||(i=[i]);for(const r of i)if(r!=null)if(Array.isArray(r))e=e.concat(c(r,l,a));else if(typeof r!="object"){const f=String(r);if(a.text_capture&&a.text_capture.push(f),a.markdown){const n=C.render(f);n===f?e.push(f):a.vue?e.push(l("span",{domProps:{innerHTML:n}})):e.push(l("span",{dangerouslySetInnerHTML:{__html:n}}))}else e.push(f)}else{const f=r.type,n=p[f];if(!n){console.warn("Skipping unknown token type",f,r);continue}const d=n(r,l,a);Array.isArray(d)?e=e.concat(d):d&&e.push(d)}return a.markdown=t,e.length?e:null}w(c,"renderTokens");const Y=/^8(102|363)$/.test(v.j)?c:null;function m(i,l){return i?.type==="ref"?l.fragments?.[i.name]??null:i}w(m,"resolveToken"),p.ref=function(i,l,a){const s=a.fragments?.[i.name];if(s)return c(s,l,a)},p.box=function(i,l,a){const s=[],t={};if(D.includes(i.wrap)&&s.push(`tw-white-space-${i.wrap}`),i.ellipsis&&s.push("tw-ellipsis"),i.lines&&(s.push("ffz--line-clamp"),t["--ffz-lines"]=i.lines),i.border&&s.push("tw-border"),i.rounding){const d=L(i.rounding);d&&s.push(d)}i.background&&(i.background==="text"?t.backgroundColor="var(--color-text-base)":i.background==="text-alt"?t.backgroundColor="var(--color-text-alt)":i.background==="text-alt-2"?t.backgroundColor="var(--color-text-alt-2)":A.includes(i.background)?s.push(`tw-c-background-${i.background}`):t.backgroundColor=i.background),i.width&&(t.width=i.width),i.height&&(t.height=i.height),z("pd",i,s,t),z("mg",i,s,t);const e=i.ellipsis||i.lines,r=i.markdown;let f,n=null;if(e){const d=h(i.content,l,a,r);f=d.content,n=d.title}else f=c(i.content,l,a,r);return a.vue?l("div",{class:s,style:t,attrs:{title:n}},f):l("div",{className:s.join(" "),style:t,title:n},f)},p.open_settings=function(i,l,a){const s=w(r=>{r.preventDefault();const f=new F.FFZEvent({item:i.item,event:r,errored:!1});window.FrankerFaceZ.get().emit("main_menu:open",f)},"handler"),t=i.markdown,e=c(i.content,l,a,t);return a.vue?l("a",{class:"tw-link",href:"#",on:{click:s}},e):l("a",{class:"tw-link",href:"#",onClick:s},e)},p.conditional=function(i,l,a){let s=!0;return(0,S.has)(i,"media")&&i.media!=a.allow_media&&(s=!1),i.nsfw&&!a.allow_unsafe&&(s=!1),i.skip_nsfw&&a.allow_unsafe&&(s=!1),(i.tooltip&&!a.tooltip||i.tooltip===!1&&a.tooltip)&&(s=!1),c(s?i.content:i.alternative,l,a)},p.fieldset=function(i,l,a){if(!Array.isArray(i.fields))return null;const s=[];for(const t of i.fields){if(!t)continue;const e=c(t.name,l,a,i.markdown),r=c(t.value,l,a,i.markdown),f=c(t.icon,l,a,i.markdown);e==null||r==null||(a.vue?s.push(l("div",{class:["ffz--field",t.inline?"ffz--field-inline":!1,f?"ffz--field-icon":!1]},[l("div",{class:"ffz--field__icon"},f),l("div",{class:"ffz--field__name tw-semibold"},e),l("div",{class:"ffz--field__value tw-c-text-alt"},r)])):s.push(l("div",{className:`ffz--field ${t.inline?"ffz--field-inline":""} ${f?"ffz--field-icon":""}`},[l("div",{className:"ffz--field__icon"},f),l("div",{className:"ffz--field__name tw-semibold"},e),l("div",{className:"ffz--field__value tw-c-text-alt"},r)])))}return s.length?a.vue?l("div",{class:"ffz--fields"},s):l("div",{className:"ffz--fields"},s):null};const T=["start","end","center","between","around"];p.flex=function(i,l,a){const s=[],t={};i.inline?s.push("tw-flex-inline"):s.push("tw-flex");const e=_(i.overflow,["hidden","auto"]);e&&s.push(`tw-overflow-${e}`);const r=_(i.direction,["column","row","column-reverse","row-reverse"]);r&&s.push(`tw-flex-${r}`);const f=_(i.wrap,["wrap","nowrap","wrap-reverse"]);f&&s.push(`tw-flex-${f}`);let n=_(i["align-content"],T);n&&s.push(`tw-align-content-${n}`),n=_(i["justify-content"],T),n&&s.push(`tw-justify-content-${n}`),n=_(i["align-items"],T),n&&s.push(`tw-align-items-${n}`),n=_(i["align-self"],T),n&&s.push(`tw-align-self-${n}`),z("pd",i,s,t),z("mg",i,s,t);const d=c(i.content,l,a,i.markdown);return a.vue?l("div",{class:s,style:t},d):l("div",{className:s.join(" "),style:t},d)},p.format=function(i,l,a){const s=i.format,t=i.value,e=i.options;let r;return s==="date"?r=a.i18n.formatDate(t,e):s==="time"?r=a.i18n.formatTime(t,e):s==="datetime"?r=a.i18n.formatDateTime(t,e):s==="relative"?r=a.i18n.toRelativeTime(t,e):s==="duration"?r=a.i18n.formatDuration(t,e):s==="number"?r=a.i18n.formatNumber(t,e):(console.warn("Unknown format type:",s),r=String(t)),a.text_capture&&a.text_capture.push(r),r},p.gallery=function(i,l,a){if(!Array.isArray(i.items)||!i.items.length)return null;let s=[],t=[],e=!0,r=0;for(const n of i.items){const d=c(n,l,a);if(d&&((e?s:t).push(d),e=!e,r++,r>=4))break}if(t.length&&s.length>t.length&&t.push(s.pop()),!r)return null;const f=[];return f.push(a.vue?l("div",{class:"ffz--gallery-column",attrs:{"data-items":s.length}},s):l("div",{className:"ffz--gallery-column","data-items":s.length},s)),t.length&&f.push(a.vue?l("div",{class:"ffz--gallery-column",attrs:{"data-items":t.length}},t):l("div",{className:"ffz--gallery-column","data-items":t.length},t)),a.vue?l("div",{class:"ffz--rich-gallery",attrs:{"data-items":s.length+t.length}},f):l("div",{className:"ffz--rich-gallery","data-items":s.length+t.length},f)};function X(i,l,a){let s=[],t;if(i.title){const u=h(i.title,l,a,i.markdown);s.push(l("div",{class:"tw-ellipsis tw-semibold tw-mg-x-05",attrs:{title:u.title}},u.content))}if(i.subtitle){const u=h(i.subtitle,l,a,i.markdown);s.push(l("div",{class:"tw-ellipsis tw-c-text-alt-2 tw-mg-x-05",attrs:{title:u.title}},u.content))}if(i.extra){const u=h(i.extra,l,a,i.markdown);s.push(l("div",{class:"tw-ellipsis tw-c-text-alt-2 tw-mg-x-05",attrs:{title:u.title}},u.content))}let e=m(i.sfw_background,a);const r=m(i.background,a);r&&b(r,a)&&(e=r),e&&(e.type==="image"?t=y({...e,aspect:void 0},l,a):e.type==="icon"?t=l("figure",{class:`ffz-i-${e.name}`}):t=h(i.background,l,a,i.markdown).content);let f=m(i.sub_logo,a);if(!i.compact&&f&&b(f,a)){const u=f.aspect;let o;f.type==="image"&&(o=y({...f,aspect:void 0},l,a)),f.type==="icon"&&(o=l("figure",{class:`ffz-i-${f.name}`})),o&&(o=l("div",{class:`ffz--header-sublogo tw-flex-shrink-0 ${f.extra_pad?"tw-mg-l-05 tw-mg-r-1":"tw-mg-r-05"}${u?" ffz--header-aspect":""}`,style:{width:u?`${u*2}rem`:null}},[o]),s=[s.shift(),l("div",{class:"tw-flex tw-full-width tw-align-items-center"},[o,l("div",{class:"tw-flex tw-full-width tw-overflow-hidden tw-justify-content-center tw-flex-column tw-flex-grow-1"},s)])])}s=l("div",{class:["tw-flex tw-full-width tw-overflow-hidden",i.compact?"ffz--rich-header ffz--compact-header tw-align-items-center":"tw-justify-content-center tw-flex-column tw-flex-grow-1"]},s);let n=m(i.sfw_image,a);const d=m(i.image,a);if(d&&b(d,a)&&(n=d),n){const u=n.aspect;let o;n.type==="image"&&(o=y({...n,aspect:void 0},l,a)),n.type==="icon"&&(o=l("figure",{class:`ffz-i-${n.name}`}));const g=i.image_side==="right";o?(o=l("div",{class:["ffz--header-image tw-flex-shrink-0 tw-mg-x-05",u?"ffz--header-aspect":null],style:{width:u?`${u*(i.compact?2.4:4.8)}rem`:null}},[o]),i.compact?g?s.children.push(o):s.children.unshift(o):s=l("div",{class:"tw-flex ffz--rich-header"},[g?s:null,o,g?null:s])):i.compact||(s=l("div",{class:"tw-flex ffz--rich-header"},[l("div",{class:"ffz--header-image tw-mg-x-05"}),s]))}else i.compact||(s=l("div",{class:"tw-flex ffz--rich-header"},[l("div",{class:"ffz--header-image tw-mg-x-05"}),s]));return t&&(s=l("div",{class:"ffz--rich-header--background"},[l("div",{class:"ffz--rich-header__background"},[t]),s])),s}w(X,"header_vue");function Q(i,l,a){let s=[],t;if(i.title){const u=h(i.title,l,a,i.markdown);s.push(l("div",{className:`tw-ellipsis tw-semibold ${i.compact?"tw-mg-r-1":""}`,title:u.title},u.content))}if(i.subtitle){const u=h(i.subtitle,l,a,i.markdown);s.push(l("div",{className:"tw-ellipsis tw-c-text-alt-2",title:u.title},u.content))}if(i.extra){const u=h(i.extra,l,a,i.markdown);s.push(l("div",{className:"tw-ellipsis tw-c-text-alt-2",title:u.title},u.content))}let e=m(i.sfw_background,a);const r=m(i.background,a);r&&b(r,a)&&(e=r),e&&(e.type==="image"?t=y({...e,aspect:void 0},l,a):e.type==="icon"?t=l("figure",{className:`ffz-i-${e.name}`}):t=h(i.background,l,a,i.markdown).content);let f=m(i.sub_logo,a);if(!i.compact&&f&&b(f,a)){const u=f.aspect;let o;f.type==="image"&&(o=y({...f,aspect:void 0},l,a)),f.type==="icon"&&(o=l("figure",{className:`ffz-i-${f.name}`})),o&&(o=l("div",{className:`ffz--header-sublogo tw-flex-shrink-0 ${f.youtube_dumb?"tw-mg-l-05 tw-mg-r-1":"tw-mg-r-05"}${u?" ffz--header-aspect":""}`,style:{width:u?`${u*2}rem`:null}},o),s=[s.shift(),l("div",{className:"tw-flex tw-full-width tw-align-items-center"},[o,l("div",{className:"tw-flex tw-full-width tw-overflow-hidden tw-justify-content-center tw-flex-column tw-flex-grow-1"},s)])])}s=l("div",{className:`tw-flex tw-full-width tw-overflow-hidden ${i.compact?"ffz--rich-header ffz--compact-header tw-align-items-center":"tw-justify-content-center tw-flex-column tw-flex-grow-1"}`},s);let n=m(i.sfw_image,a);const d=m(i.image,a);if(d&&b(d,a)&&(n=d),n){const u=n.aspect;let o;n.type==="image"&&(o=y({...n,aspect:void 0},l,a)),n.type==="icon"&&(o=l("figure",{className:`ffz-i-${n.name}`}));const g=i.image_side==="right";o?(o=l("div",{className:`ffz--header-image tw-flex-shrink-0 tw-mg-x-05${u?" ffz--header-aspect":""}`,style:{width:u?`${u*(i.compact?2.4:4.8)}rem`:null}},o),i.compact?s instanceof Node?g?s.appendChild(o):s.insertBefore(o,s.firstChild):Array.isArray(s?.props?.children)&&(g?s.props.children.push(o):s.props.children.unshift(o)):s=l("div",{className:"tw-flex ffz--rich-header"},[g?s:null,o,g?null:s])):i.compact||(s=l("div",{className:"tw-flex ffz--rich-header"},[l("div",{className:"ffz--header-image tw-mg-x-05"}),s]))}else i.compact||(s=l("div",{className:"tw-flex ffz--rich-header"},[l("div",{className:"ffz--header-image tw-mg-x-05"}),s]));return t&&(s=l("div",{className:"ffz--rich-header--background"},[l("div",{className:"ffz--rich-header__background"},t),s])),s}w(Q,"header_normal"),p.header=function(i,l,a){return!i.title&&!i.subtitle&&!i.image&&!i.extra?null:a.vue?X(i,l,a):Q(i,l,a)},p.icon=function(i,l,a){return i.name?a.vue?l("span",{class:`ffz-i-${i.name}`}):l("span",{className:`ffz-i-${i.name}`}):null};function b(i,l){return!((0,S.has)(i,"sfw")&&!i.sfw&&!l.allow_unsafe)}w(b,"canShowImage");function y(i,l,a){if(!i.url||!b(i,a))return null;const s=L(i.rounding);let t;if(i.aspect?t=i.aspect:i.height>0&&i.width>0&&(t=i.width/i.height),a.vue){const r={class:[i.class,s],style:{width:i.width,height:i.height},attrs:{src:i.url,title:i.title}};i.contain&&(r.style.objectFit="contain"),a.onload&&(r.on={load:a.onload});const f=l("img",r);return t?l("aspect",{props:{ratio:t,align:"center"}},[f]):f}const e=l("img",{className:`${i.class||""} ${s}`,src:i.url,alt:i.alt||i.title||"",title:i.title||"",onLoad:a.onload,style:{width:i.width,height:i.height}});return i.contain&&(e.style.objectFit="contain"),t?l("div",{className:"ffz-aspect ffz-aspect--align-center"},[l("div",{className:"ffz-aspect__spacer",style:{paddingTop:`${100*(1/(t||1))}%`}}),e]):e}w(y,"render_image"),p.image=y,p.i18n=function(i,l,a){if(!i.phrase)return console.warn("Skipping i18n tag with no phrase"),null;let s=i.key;return a.i18n_prefix&&(s=`${a.i18n_prefix}.${s}`),c(a.i18n.tList(s,i.phrase,i.content),l,a,i.markdown)};function R(i,l){for(const t of l)if(t.localeCompare(i,void 0,{sensitivity:"accent"})===0)return i;let a=`${i.toLowerCase()}-`;for(const t of l)if(t.toLowerCase().startsWith(a))return t;const s=i.indexOf("-");if(s!==-1)return R(i.slice(0,s),l)}w(R,"findMatchingLocale"),p.i18n_select=function(i,l,a){const s=i.choices||{};let t=a.i18n?.locale??"en",e=R(t,Object.keys(s));return e||(e=i.default),c(s[e],l,a,i.markdown)},p.link=function(i,l,a){i.content===void 0&&(i.content=i.url);const s=c(i.content,l,a,i.markdown),t=[];if(i.interactive&&t.push("ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive"),i.tooltip!==!1&&t.push("ffz-tooltip"),i.embed&&t.push("tw-block tw-border tw-border-radius-large tw-mg-y-05 tw-pd-05"),i.no_color&&t.push("ffz-link--inherit"),a.vue){let e={};return a.link_click_handler&&(e.click=a.link_click_handler),l("a",{class:t,attrs:{rel:"noopener noreferrer",target:"_blank","data-tooltip-type":"link",href:i.url},on:e},s)}return l("a",{className:t.join(" "),rel:"noopener noreferrer",target:"_blank","data-tooltip-type":"link",href:i.url,onClick:a.link_click_handler},s)},p.overlay=function(i,l,a){const s=c(i.content,l,a,i.markdown);if(!s)return null;const t=[];for(const f of["top-left","top","top-right","left","center","right","bottom-left","bottom","bottom-right"]){const n=c(i[f],l,a,i.markdown);n&&t.push(a.vue?l("div",{class:"ffz--overlay__bit",attrs:{"data-side":f}},n):l("div",{className:"ffz--overlay__bit","data-side":f},n))}const e=["ffz--overlay"],r={};return i.background&&(A.includes(i.background)?e.push(`tw-c-background-${i.background}`):r.backgroundColor=i.background),i.color&&(A.includes(i.color)?e.push(`tw-c-text-${i.color}`):r.color=i.color),a.vue?l("div",{class:e,style:r},[l("div",{class:"ffz--overlay__content"},s),...t]):l("div",{className:e.join(" "),style:r},[l("div",{className:"ffz--overlay__content"},s),...t])};function q(i,l,a,s){const t=s.currentTarget,e=t instanceof HTMLVideoElement||t instanceof HTMLAudioElement;if((e||a.togglePlayer)&&(s.preventDefault(),s.stopPropagation()),e){t.paused?t.play():t.pause();return}a.togglePlayer&&a.togglePlayer(l)}w(q,"handlePlayerClick"),p.player=function(i,l,a){const s=a.last_player=(a.last_player||0)+1,t=a.player_state?.[s],e=q.bind(this,i,s,a);if(!t&&(i.content||i.iframe))return x(s,e,i,l,a);if(i.iframe)return E(s,t??!1,e,i,l,a);if(!i.sources)return null;const r=i.autoplay??!1,f=i.loop??!1,n=t??r,d=!i.silent||!r,u=i.silent?!0:t==null&&r,o={},g=i.active_aspect??i.aspect;return g&&(o.aspectRatio=g),a.vue?l(i.audio?"audio":"video",{style:o,attrs:{autoplay:n,loop:f,controls:d,poster:i.poster},domProps:{muted:u},on:{click:e}},i.sources.map($=>l("source",{attrs:{type:$.type,src:$.src}}))):l(i.audio?"audio":"video",{style:o,muted:u,autoplay:n,loop:f,poster:i.poster,controls:d,onClick:e},i.sources.map($=>l("source",{type:$.type,src:$.src})))};function x(i,l,a,s,t){const e=c(a.content,s,t,a.markdown),r=["ffz--rich-player"],f={};return a.aspect&&(f.aspectRatio=a.aspect),t.vue?s("div",{class:r,style:f,on:{click:l}},e):s("div",{className:r.join(" "),onClick:l,style:f},e)}w(x,"render_player_content");function E(i,l,a,s,t,e){const r={},f={src:s.iframe,frameborder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0},n=s.active_aspect??s.aspect;return n&&(r.aspectRatio=n),e.vue?t("iframe",{style:r,attrs:f}):t("iframe",{style:r,...f})}w(E,"render_player_iframe"),p.style=function(i,l,a){const s=[],t={};i.weight&&(H.includes(i.weight)?s.push(`tw-${i.weight}`):t.weight=i.weight),i.italic&&s.push("tw-italic"),i.strike&&s.push("tw-strikethrough"),i.underline&&s.push("tw-underline"),i.tabular&&s.push("tw-tabular-nums"),i.size&&(typeof i.size=="string"?J.includes(i.size)?s.push(`tw-font-size-${i.size}`):t.fontSize=i.size:t.fontSize=`${i.size}px`),i.color&&(A.includes(i.color)?s.push(`tw-c-text-${i.color}`):Z.includes(i.color)?s.push(`ffz-c-text-${i.color}`):t.color=i.color),D.includes(i.wrap)&&s.push(`tw-white-space-${i.wrap}`),i.ellipsis&&s.push("tw-ellipsis"),z("pd",i,s,t),z("mg",i,s,t);const e=i.ellipsis;let r,f=null;if(e){const n=h(i.content,l,a,i.markdown);r=n.content,f=n.title}else r=c(i.content,l,a,i.markdown);return a.vue?l("span",{class:s,style:t,attrs:{title:f}},r):l("span",{className:s.join(" "),style:t,title:f},r)};const j=["a","abbr","article","aside","audio","b","bdi","bdo","blockquote","br","caption","code","col","colgroup","data","dd","div","dl","dt","em","figcaption","figure","footer","h1","h2","h3","h4","h5","h6","header","hr","i","img","li","main","nav","ol","p","picture","pre","s","section","source","span","strong","sub","sup","table","tbody","td","tfoot","th","thead","time","tr","track","u","ul","video","wbr"],I={a:["href"],audio:["autoplay","controls","loop","muted","preload","src"],bdo:["dir"],col:["span"],colgroup:["span"],data:["value"],img:["alt","height","sizes","src","srcset","width"],source:["src","srcset","type","media","sizes"],td:["colspan","headers","rowspan"],th:["abbr","colspan","headers","rowspan","scope"],time:["datetime"],track:["default","kind","label","src","srclang"],video:["autoplay","controls","height","loop","muted","poster","preload","src","width"]},W=["muted"],M=["style","title"];p.tag=function(i,l,a){const s=String(i.tag||"span").toLowerCase();if(!j.includes(s))return console.warn("Skipping disallowed tag:",s),null;const t={},e={};if(i.attrs){const f=I[s]||[];for(const[n,d]of Object.entries(i.attrs))!f.includes(n)&&!n.startsWith("data-")&&!M.includes(n)?console.warn(`Skipping disallowed attribute for tag ${s}:`,n):a.vue&&W.includes(n)?e[n]=d:t[n]=d}(s==="img"||s==="picture")&&(t.onload=a.onload),(s==="video"||s==="audio")&&(t.loadedmetadata=a.onload);const r=c(i.content,l,a,i.markdown);return a.vue?l(s,{class:i.class||"",domProps:e,attrs:t},r):l(s,{...t,className:i.class||""},r)}}}]);})();

//# sourceMappingURL=rich_tokens.js.map