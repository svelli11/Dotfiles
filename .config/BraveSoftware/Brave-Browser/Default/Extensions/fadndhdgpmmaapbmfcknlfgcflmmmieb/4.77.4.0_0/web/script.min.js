"use strict";(()=>{var g=Object.defineProperty;var c=(s,o)=>g(s,"name",{value:o,configurable:!0});(()=>{const s=globalThis.browser??globalThis.chrome;if(/^(?:localhost\.rig|blog|im|chatdepot|tmi|api|brand|dev|gql|passport)\./.test(location.hostname)||/disable_frankerfacez/.test(location.search)||document.body.dataset.ffzSource){s.runtime.sendMessage({type:"ffz_not_supported"});return}document.body.dataset.ffzSource="extension",s.runtime.sendMessage({type:"ffz_injecting"});const o=new Map;function f(e){if(o.has(e))return;const n=s.runtime.connect();o.set(e,n),n.onMessage.addListener(t=>{window.postMessage({type:"ffz-con-message",id:e,payload:t})}),n.onDisconnect.addListener(()=>{o.delete(e),window.postMessage({type:"ffz-con-disconnect",id:e})})}c(f,"handleConnect");function p(e){const n=o.get(e);n&&(o.delete(e),n.disconnect())}c(p,"handleDisconnect");function l(e,n){const t=connection.get(e);t&&t.postMessage(n)}c(l,"handleMessage"),window.addEventListener("message",e=>{if(e.source!==window||!e.data)return;const{type:n,id:t,payload:u}=e.data;n==="ffz-con-connect"?f(t):n==="ffz-con-message"?l(t,u):n==="ffz-con-disconnect"&&p(t)}),s.runtime.onMessage.addListener((e,n)=>(e?.type==="ffz_to_page"&&window.postMessage(e.data,"*"),!1));const r=location.hostname,d=s.runtime.getURL("web"),a=document.createElement("script");let i=r.includes("player")?"player":r.includes("clips")?"clips":location.pathname==="/p/ffz_bridge/"?"bridge":"avalon";i==="clips"&&location.pathname==="/embed"&&(i="player"),a.id="ffz-script",a.async=!0,a.crossOrigin="anonymous",a.src=`${d}/${i}.js?_=${Date.now()}`,a.dataset.path=d,document.head.appendChild(a)})();})();

//# sourceMappingURL=script.min.js.map