(()=>{var h=Object.defineProperty;var o=(s,c)=>h(s,"name",{value:c,configurable:!0});(()=>{"use strict";var s={};s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&!t;)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t+"../"})();var c={};const u=s.p+"clips-manager-fullscreen-button/style.css",{createElement:l}=FrankerFaceZ.utilities.dom,a=class a extends FrankerFaceZ.utilities.addon.Addon{constructor(...e){super(...e),this.eventListenerCallbacks={detectClipsManager:this.detectClipsManager.bind(this),detectClipRowClick:this.detectClipRowClick.bind(this),fullscreenHotkey:this.fullscreenHotkey.bind(this),swapFullscreenButton:this.swapFullscreenButton.bind(this)},this.inject("site.router")}detectClipsManager(e,n){let i=!1;return e?i=e.name==="dash-clips":i=location.hostname==="dashboard.twitch.tv"&&location.pathname.toLowerCase().includes("/content/clips/"),i?this.activateFunctionality():this.deactivateFunctionality(),i}insertCSS(){this.clipsManagerFullscreenButtonCSS||(this.clipsManagerFullscreenButtonCSS=document.createElement("link"),this.clipsManagerFullscreenButtonCSS.rel="stylesheet",this.clipsManagerFullscreenButtonCSS.id="ffz-clips-manager-fullscreen-button-css",this.clipsManagerFullscreenButtonCSS.href=u),document.head.appendChild(this.clipsManagerFullscreenButtonCSS)}removeCSS(){this.clipsManagerFullscreenButtonCSS?.remove()}activeStatusMessage(e){e==="active"?this.log.info("Clips Manager Fullscreen Button add-on is currently active."):e==="inactive"&&this.log.info("Clips Manager Fullscreen Button add-on is currently inactive: you are not currently viewing the Clips Manager.")}activateFunctionality(){this.insertCSS(),this.pageContent=document.querySelector(".sunlight-default-root__root-wrapper"),this.pageContent?.addEventListener("click",this.eventListenerCallbacks.detectClipRowClick),document.addEventListener("fullscreenchange",this.eventListenerCallbacks.swapFullscreenButton),document.addEventListener("keypress",this.eventListenerCallbacks.fullscreenHotkey),this.addFullscreenButton(),this.activeStatusMessage("active")}deactivateFunctionality(){this.removeCSS(),this.pageContent?.removeEventListener("click",this.eventListenerCallbacks.detectClipRowClick),document.removeEventListener("fullscreenchange",this.eventListenerCallbacks.swapFullscreenButton),document.removeEventListener("keypress",this.eventListenerCallbacks.fullscreenHotkey),this.removeFullscreenButton(),this.activeStatusMessage("inactive")}detectClipRowClick(e){window.setTimeout(this.addFullscreenButton.bind(this),500)}requestFullscreen(e){e?.stopPropagation(),this.clipsPlayer&&(this.playerIsFullscreen()?document.exitFullscreen():this.clipsPlayer.requestFullscreen())}addFullscreenButton(e){this.clipsPlayer=this.pageContent?.querySelector(".clips-player-container"),this.fullscreenSVGPaths={enter:l("path",{d:"M7 3H2v5h2V5h3V3zm11 5V3h-5v2h3v3h2zm-5 9v-2h3v-3h2v5h-5zm-9-5H2v5h5v-2H4v-3z"}),exit:l("path",{d:"M8 8V3H6v3H2v2h6zm4 0h6V6h-4V3h-2v5zm0 9v-5h6v2h-4v3h-2zm-4-5H2v2h4v3h2v-5z"})},this.clipsPlayer?.contains(this.fullscreenButton)||(this.playerBackground=this.clipsPlayer?.querySelector(".clips-player-background"),this.fullscreenButton=l("div",{class:"ffz-cmfb-clips-player-right-controls"},l("div",{class:"ffz-cmfb-clips-player-fullscreen-button-contain","aria-label":"fullscreen-button"},l("button",{class:"ffz-cmfb-clips-player-fullscreen-button","aria-label":"Fullscreen (f)","aria-haspopup":"menu","data-a-target":"player-fullscreen-button",onClick:this.requestFullscreen.bind(this)},l("div",{class:"ffz-cmfb-clips-player-fullscreen-button-inner"},l("div",{class:"tw-svg"},l("svg",{width:"20",height:"20",viewBox:"0 0 20 20",focusable:"false","aria-hidden":"true",role:"presentation"},this.fullscreenSVGPaths.enter)))))),this.playerBackground?.append(this.fullscreenButton))}removeFullscreenButton(){this.fullscreenButton?.remove()}playerIsFullscreen(){return document.fullscreenElement===this.clipsPlayer}swapFullscreenButton(e){const n=this.fullscreenButton.querySelector("path");this.playerIsFullscreen()?n.replaceWith(this.fullscreenSVGPaths.exit):n.replaceWith(this.fullscreenSVGPaths.enter)}fullscreenHotkey(e){if(e.key==="f"){if(this.log.info(e),["text","search"].includes(e.target.type)||document.querySelector(".ReactModalPortal .ReactModal__Overlay"))return;this.requestFullscreen()}}onDisable(){this.router.off(":route",this.eventListenerCallbacks.detectClipsManager),this.deactivateFunctionality(),this.log.info("Clips Manager Fullscreen Button add-on has been successfully disabled.")}onEnable(){this.router.on(":route",this.eventListenerCallbacks.detectClipsManager),this.detectClipsManager()?this.activateFunctionality():this.deactivateFunctionality(),this.log.info("Clips Manager Fullscreen Button add-on has been successfully enabled.")}};o(a,"ClipsManagerFullscreenButton");let r=a;r.register("clips-manager-fullscreen-button",null,"1.0.0")})();})();

//# sourceMappingURL=script.js.map