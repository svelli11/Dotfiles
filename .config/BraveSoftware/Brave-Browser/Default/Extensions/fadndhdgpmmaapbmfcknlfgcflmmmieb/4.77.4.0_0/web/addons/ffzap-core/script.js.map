{"version":3,"file":"ffzap-core/script.js","mappings":"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","sources":["webpack://ffz-addons/webpack/bootstrap","webpack://ffz-addons/webpack/runtime/define property getters","webpack://ffz-addons/webpack/runtime/ensure chunk","webpack://ffz-addons/webpack/runtime/get javascript chunk filename","webpack://ffz-addons/webpack/runtime/global","webpack://ffz-addons/webpack/runtime/hasOwnProperty shorthand","webpack://ffz-addons/webpack/runtime/load script","webpack://ffz-addons/webpack/runtime/make namespace object","webpack://ffz-addons/webpack/runtime/publicPath","webpack://ffz-addons/webpack/runtime/jsonp chunk loading","webpack://ffz-addons/./src/ffzap-core/index.js"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"ffzap-core/vue\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"ffz-addons:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t\tif (script.src.indexOf(window.location.origin + '/') !== 0) {\n\t\t\tscript.crossOrigin = \"anonymous\";\n\t\t}\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t444: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = globalThis[\"ffzAddonsWebpackJsonp\"] = globalThis[\"ffzAddonsWebpackJsonp\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","class FFZAP extends Addon {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('settings');\n\t\tthis.inject('chat');\n\t\tthis.inject('chat.emotes');\n\t\tthis.inject('chat.badges');\n\t\tthis.inject('site');\n\n\t\tthis.helpers = {\n\t\t\t26964566: { // Lordmau5\n\t\t\t\ttitle: 'FFZ:AP Developer',\n\t\t\t},\n\t\t\t11819690: { // Jugachi\n\t\t\t\ttitle: 'FFZ:AP Helper',\n\t\t\t},\n\t\t\t36442149: { // mieDax\n\t\t\t\ttitle: 'FFZ:AP Helper',\n\t\t\t},\n\t\t\t29519423: { // Quanto\n\t\t\t\ttitle: 'FFZ:AP Helper',\n\t\t\t},\n\t\t\t22025290: { // trihex\n\t\t\t\ttitle: 'FFZ:AP Helper',\n\t\t\t},\n\t\t\t4867723: { // Wolsk\n\t\t\t\ttitle: 'FFZ:AP Helper',\n\t\t\t},\n\t\t};\n\n\t\tthis.supporters = {};\n\t\tthis.added_supporters = [];\n\n\t\tthis.settings.add('ffzap.core.remove_spaces', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Emotes',\n\t\t\t\ttitle: 'Remove Spaces Between Emotes',\n\t\t\t\tdescription: 'Remove spaces inbetween emotes when they are right after one another. (e.g. combo emotes)',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('ffzap.core.message_deletion', {\n\t\t\tdefault: 0,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Chat',\n\t\t\t\ttitle: 'Message User-Level Filtering',\n\t\t\t\tdescription: 'Messages will be removed from chat entirely if they aren\\'t sent by a user of this level or higher.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{ value: 0, title: 'Display All Messages' },\n\t\t\t\t\t{ value: 1, title: 'Display Subscriber Messages' },\n\t\t\t\t\t{ value: 2, title: 'Display Moderator Messages' },\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('ffzap.core.enable_highlight_sound', {\n\t\t\tdefault: false,\n\t\t\trequires: ['ffzap.core.highlight_sound_types'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tconst types = ctx.get('ffzap.core.highlight_sound_types');\n\t\t\t\tif ( ! Array.isArray(types) || ! types.length )\n\t\t\t\t\treturn false;\n\t\t\t\treturn val;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tsort: -10,\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Highlight Sounds',\n\t\t\t\ttitle: 'Enable Highlight Sound',\n\t\t\t\tdescription: 'Hear a sound every time a message is highlighted.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('ffzap.core.highlight_sound', {\n\t\t\tdefault: 'https://cdn.ffzap.com/sounds/default_wet.mp3',\n\n\t\t\tui: {\n\t\t\t\tsort: -5,\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Highlight Sounds',\n\t\t\t\ttitle: 'Sound',\n\t\t\t\tdescription: 'Change the sound that will play when a sound trigger is activated.',\n\t\t\t\tcomponent: () => import('./components/highlight-sound.vue'),\n\t\t\t\tno_i18n: true,\n\t\t\t\tdata: [\n\t\t\t\t\t// Default Sounds\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/default_wet.mp3', title: 'Default - Wet' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/default_graceful.mp3', title: 'Default - Graceful' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/default_blocker.mp3', title: 'Default - Blocker' },\n\n\t\t\t\t\t// Meme Sounds\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/coin.mp3', title: 'Mario - Coin Sound' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/recovery.mp3', title: 'Pokemon - Recovery' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/icq.mp3', title: 'ICQ - Notification' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/aol.mp3', title: 'AOL - You\\'ve got mail!' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/mailmf.mp3', title: 'Euro Trip - Mail Motherf**ker!' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/zelda_secret.mp3', title: 'Zelda - Secret Sound' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/brainpower.mp3', title: 'O-oooooooooo AAAAE-A-A-I-A-U' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/the_best.mp3', title: 'THE BEST THE BEST' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/wow.mp3', title: 'WOW!' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/vsauce.mp3', title: 'Hey Vsauce, Michael here.' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/number_1.mp3', title: 'We are number one, HEY!' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/hello.mp3', title: 'Hello.webm' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/tuturu.mp3', title: 'Tuturu~~' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/omae_wa_mou_shindeiru.mp3', title: 'Omae wa mou shindeiru' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/never_asked_for_this.mp3', title: 'I never asked for this.' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/nani.mp3', title: 'N-NANI?!' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/oh_no.mp3', title: 'Knuckles - Oh no' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/whats_going_on.mp3', title: 'He-Man - What\\'s going on?!' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/gnome.mp3', title: 'Gnome' },\n\t\t\t\t\t{ value: 'https://cdn.ffzap.com/sounds/oof.mp3', title: 'Roblox Death Sound (OOF)' },\n\t\t\t\t],\n\t\t\t\tonUIChange: (val, element) => val && this.playPreviewSound(element, val, null),\n\t\t\t\tbuttons: () => import('./components/preview.vue')\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('ffzap.core.highlight_sound_volume', {\n\t\t\tdefault: 50,\n\n\t\t\tui: {\n\t\t\t\tsort: -4,\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Highlight Sounds',\n\t\t\t\ttitle: 'Highlight Sound Volume',\n\t\t\t\tdescription: 'Change the volume at which the highlight sounds will be played at.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{ value: 5, title: '5%' },\n\t\t\t\t\t{ value: 10, title: '10%' },\n\t\t\t\t\t{ value: 20, title: '20%' },\n\t\t\t\t\t{ value: 30, title: '30%' },\n\t\t\t\t\t{ value: 40, title: '40%' },\n\t\t\t\t\t{ value: 50, title: '50%' },\n\t\t\t\t\t{ value: 60, title: '60%' },\n\t\t\t\t\t{ value: 70, title: '70%' },\n\t\t\t\t\t{ value: 80, title: '80%' },\n\t\t\t\t\t{ value: 90, title: '90%' },\n\t\t\t\t\t{ value: 100, title: '100%' },\n\t\t\t\t],\n\t\t\t\tonUIChange: (val, element) => this.playPreviewSound(element, null, val)\n\t\t\t},\n\t\t});\n\n\t\t// Sound trigger settings\n\t\tthis.settings.add('ffzap.core.highlight_sound_prevent_own_channel', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Highlight Sounds >> Sound Trigger Settings',\n\t\t\t\ttitle: 'Prevent In Own Channel',\n\t\t\t\tdescription: 'Prevent the sound from playing in your own channel.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('ffzap.core.highlight_sound_types', {\n\t\t\tdefault: ['badge', 'mention', 'term', 'user'],\n\t\t\ttype: 'basic_array_merge',\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > FFZ:AP Core >> Highlight Sounds >> Sound Trigger Settings',\n\t\t\t\ttitle: 'Play When',\n\t\t\t\tdescription: 'Play a highlight sound when a chat line is highlighted for one of the selected reasons.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tmultiple: true,\n\t\t\t\tdata: () => this.chat.getHighlightReasons()\n\t\t\t}\n\t\t});\n\n\t\tthis.chat.context.on('changed:ffzap.core.highlight_sound', async url => {\n\t\t\tthis.highlight_sound.src = await this.getSoundURL(url);\n\t\t}, this);\n\n\t\tthis.chat.context.on('changed:ffzap.core.highlight_sound_volume', volume => {\n\t\t\tthis.highlight_sound.volume = volume / 100;\n\t\t}, this);\n\n\t\tthis.setupHighlightSound();\n\n\t\tthis.remove_spaces_tokenizer = {\n\t\t\ttype: 'remove_spaces',\n\t\t\tpriority: -100,\n\t\t\tprocess: tokens => {\n\t\t\t\tif (!tokens || !tokens.length) {\n\t\t\t\t\treturn tokens;\n\t\t\t\t}\n\n\t\t\t\tif (!this.chat.context.get('ffzap.core.remove_spaces')) {\n\t\t\t\t\treturn tokens;\n\t\t\t\t}\n\n\t\t\t\tconst output = [];\n\n\t\t\t\tfor (let i = 0, l = tokens.length; i < l; i++) {\n\t\t\t\t\tconst currentToken = tokens[i];\n\t\t\t\t\t\n\t\t\t\t\tif (i + 1 === l) {\n\t\t\t\t\t\toutput.push(currentToken);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst lastToken = i - 1 >= 0 ? tokens[i - 1] : null;\n\t\t\t\t\tconst nextToken = i + 1 < l ? tokens[i + 1] : null;\n\t\t\t\t\t\n\t\t\t\t\tif (currentToken.type === 'text' && currentToken.text === ' ') {\n\t\t\t\t\t\tif (lastToken?.type === 'emote' && nextToken?.type === 'emote') {\n\t\t\t\t\t\t\tlastToken.text += ' ';\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\toutput.push(currentToken);\n\t\t\t\t}\n\t\t\t\treturn output;\n\t\t\t},\n\t\t};\n\n\t\tthis.receive_event = false;\n\t\tthis.buffer_event = false;\n\t\tthis.updateEvents();\n\t\tthis.chat.context.on('changed:ffzap.core.message_deletion', this.updateEvents, this);\n\t\tthis.chat.context.on('changed:ffzap.core.enable_highlight_sound', this.updateEvents, this);\n\n\t\tthis.chat.addTokenizer(this.remove_spaces_tokenizer);\n\t}\n\n\tonEnable() {\n\t\tthis.log.debug('FFZ:AP\\'s Core module was enabled successfully.');\n\n\t\tthis.fetchSupporters();\n\t}\n\n\tupdateEvents() {\n\t\tconst buffer = this.chat.context.get('ffzap.core.enable_highlight_sound'),\n\t\t\treceive = this.chat.context.get('ffzap.core.message_deletion');\n\n\t\tif ( buffer && ! this.buffer_event )\n\t\t\tthis.on('chat:buffer-message', this.onBufferMessage, this);\n\t\telse if ( ! buffer && this.buffer_event )\n\t\t\tthis.off('chat:buffer-message', this.onBufferMessage, this);\n\n\t\tif ( receive && ! this.receive_event )\n\t\t\tthis.on('chat:receive-message', this.onReceiveMessage, this);\n\t\telse if ( ! receive && this.receive_event )\n\t\t\tthis.off('chat:receive-message', this.onReceiveMessage, this);\n\n\t\tthis.buffer_event = buffer;\n\t\tthis.receive_event = receive;\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tisModeratorOrHigher (badges) {\n\t\treturn 'broadcaster' in badges || 'staff' in badges || 'admin' in badges || 'global_mod' in badges || 'moderator' in badges;\n\t}\n\n\thandleMessageDeletion (msg) {\n\t\tconst chatDeletion = this.chat.context.get('ffzap.core.message_deletion');\n\t\tconst badges = msg.message.badges;\n\n\t\tif (chatDeletion == 1) {\n\t\t\tif (!('subscriber' in badges) && !this.isModeratorOrHigher(badges)) {\n\t\t\t\tmsg.message.ffz_removed = true;\n\t\t\t}\n\t\t} else if (chatDeletion == 2 && !this.isModeratorOrHigher(badges)) {\n\t\t\tmsg.message.ffz_removed = true;\n\t\t}\n\t}\n\n\tasync setupHighlightSound() {\n\t\tthis.highlight_sound = new Audio(await this.getSoundURL(this.chat.context.get('ffzap.core.highlight_sound')));\n\t\tthis.highlight_sound.volume = this.chat.context.get('ffzap.core.highlight_sound_volume') / 100;\n\t}\n\n\tasync getSoundURL(url) {\n\t\tif (url.startsWith('ffzap.sound-file:')) {\n\t\t\tconst provider = this.settings.provider;\n\n\t\t\tconst blob = await provider.getBlob(url);\n\t\t\turl = URL.createObjectURL(blob);\n\t\t}\n\t\treturn url;\n\t}\n\n\tgetElementSetting(element, setting) {\n\t\tif (!element) return this.chat.context.get(setting);\n\n\t\treturn element.profile.get(setting) || this.chat.context.get(setting);\n\t}\n\n\tasync playPreviewSound(element, val, vol) {\n\t\tif ( val == null )\n\t\t\tval = this.getElementSetting(element, 'ffzap.core.highlight_sound');\n\n\t\tval = await this.getSoundURL(val);\n\n\t\tlet sound;\n\t\tif ( this._preview_sound ) {\n\t\t\tsound = this._preview_sound;\n\t\t\tsound.pause();\n\t\t\tsound.src = val;\n\t\t\tsound.currentTime = 0;\n\t\t} else\n\t\t\tsound = this._preview_sound = new Audio(val);\n\n\t\tsound.volume = (vol != null ? vol : this.getElementSetting(element, 'ffzap.core.highlight_sound_volume')) / 100;\n\t\tsound.play();\n\t}\n\n\tplayHighlightSound () {\n\t\tif (!this.highlight_sound.paused) {\n\t\t\tthis.highlight_sound.pause();\n\t\t}\n\t\tthis.highlight_sound.play();\n\t}\n\n\tonReceiveMessage(event) {\n\t\tthis.handleMessageDeletion(event);\n\t}\n\n\tonBufferMessage(msg) {\n\t\tif (this.chat.context.get('ffzap.core.enable_highlight_sound') && msg.message.mentioned) {\n\t\t\t// Prevent in own channel\n\t\t\tif (this.chat.context.get('ffzap.core.highlight_sound_prevent_own_channel')) {\n\t\t\t\tconst user = this.resolve('site').getUser();\n\t\t\t\tif (user && msg.channel == user.login) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst highlights = msg.message.highlights;\n\n\t\t\t// No highlights? No sounds.\n\t\t\tif (!highlights || !highlights.size) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst types = this.chat.context.get('ffzap.core.highlight_sound_types');\n\t\t\tfor(const type of types)\n\t\t\t\tif ( highlights.has(type) ) {\n\t\t\t\t\tthis.playHighlightSound();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\t}\n\n\t// Helpful cache-busting method from FFZ\n\tgetBuster(resolution = 5) {\n\t\tconst now = Math.floor(Date.now() / 1000);\n\t\treturn now - (now % resolution);\n\t}\n\n\tasync fetchSupporters() {\n\t\tconst host = `https://api.ffzap.com/v1/supporters?_=${this.getBuster(30)}`;\n\n\t\tconst supporterBadge = {\n\t\t\tid: 'supporter',\n\t\t\ttitle: 'FFZ:AP Supporter',\n\t\t\tcolor: '#755000',\n\t\t\tslot: 6,\n\t\t\timage: 'https://api.ffzap.com/v1/user/badge/default/1',\n\t\t\turls: {\n\t\t\t\t1: 'https://api.ffzap.com/v1/user/badge/default/1',\n\t\t\t\t2: 'https://api.ffzap.com/v1/user/badge/default/2',\n\t\t\t\t4: 'https://api.ffzap.com/v1/user/badge/default/3',\n\t\t\t},\n\t\t\tclick_url: 'https://ffzap.com/',\n\t\t};\n\n\t\tconst response = await fetch(host);\n\t\tif (response.ok) {\n\t\t\tconst data = await response.json();\n\n\t\t\tthis.badges.loadBadgeData('addon--ffzap.core--badges-supporter', supporterBadge);\n\n\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\tconst user = data[i];\n\t\t\t\tif (user.id === 26964566) continue;\n\n\t\t\t\tif (!user.tier) continue;\n\n\t\t\t\tconst ffzUser = this.chat.getUser(user.id);\n\n\t\t\t\tconst badge = {\n\t\t\t\t\ttitle: (this.helpers[user.id] && this.helpers[user.id].title) || 'FFZ:AP Supporter',\n\t\t\t\t\tcolor: user.tier >= 2 && user.badge_color || supporterBadge.color,\n\t\t\t\t\timage: `https://api.ffzap.com/v1/user/badge/${user.id}/1`,\n\t\t\t\t\turls: {\n\t\t\t\t\t\t1: `https://api.ffzap.com/v1/user/badge/${user.id}/1`,\n\t\t\t\t\t\t2: `https://api.ffzap.com/v1/user/badge/${user.id}/2`,\n\t\t\t\t\t\t4: `https://api.ffzap.com/v1/user/badge/${user.id}/3`,\n\t\t\t\t\t},\n\t\t\t\t\tclick_url: 'https://ffzap.com/',\n\t\t\t\t};\n\n\t\t\t\tif (user.tier >= 3 && user.badge_is_colored) {\n\t\t\t\t\tbadge.color = 'transparent';\n\t\t\t\t\tbadge.no_invert = true;\n\t\t\t\t}\n\n\t\t\t\tffzUser.addBadge('addon--ffzap.core', 'addon--ffzap.core--badges-supporter', badge);\n\t\t\t\tthis.added_supporters.push(user.id);\n\t\t\t}\n\t\t}\n\t}\n}\n\nFFZAP.register();\n"],"names":["__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","exports","definition","key","chunkId","promises","obj","prop","inProgress","dataWebpackPrefix","url","done","script","needAttach","scripts","i","s","onScriptComplete","prev","event","timeout","doneFns","fn","scriptUrl","document","installedChunks","installedChunkData","promise","resolve","reject","error","loadingEnded","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","id","result","chunkLoadingGlobal","args","ctx","val","types","element","volume","tokens","output","l","currentToken","lastToken","nextToken","buffer","receive","badges","msg","chatDeletion","blob","setting","vol","sound","user","highlights","type","resolution","now","host","supporterBadge","response","ffzUser","badge","FFZAP"],"sourceRoot":""}