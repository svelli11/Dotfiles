{"version":3,"file":"pronouns/script.js","mappings":"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","sources":["webpack://ffz-addons/./src/pronouns/index.jsx"],"sourcesContent":["// Pronouns Addon\n\nconst {createElement, setChildren} = FrankerFaceZ.utilities.dom;\nconst {Mutex} = FrankerFaceZ.utilities.object;\n\nfunction get(endpoint, options) {\n\treturn fetch(`https://api.pronouns.alejo.io/v1/${endpoint}`, options).then(resp => resp.ok ? resp.json() : null);\n}\n\n\nclass Pronouns extends Addon {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('chat');\n\t\tthis.inject('chat.badges');\n\t\t//this.inject('site.chat.chat_line');\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\n\t\tthis.waiting = new Mutex(4);\n\n\t\tthis.pronouns = {};\n\t\tthis.users = new Map;\n\t}\n\n\tasync onEnable() {\n\t\tthis.settings.add('addon.pronouns.streamer', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > Pronouns >> Appearance',\n\t\t\t\ttitle: 'Show a pronoun badge for the streamer if they have pronouns set.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('addon.pronouns.color', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > Pronouns >> Appearance',\n\t\t\t\ttitle: 'Badge Color',\n\t\t\t\tcomponent: 'setting-color-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateBadges()\n\t\t});\n\n\t\tthis.settings.add('addon.pronouns.border', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > Pronouns >> Appearance',\n\t\t\t\ttitle: 'Display a border around the badge.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateBadges()\n\t\t});\n\n\t\tconst process = this.onMessage.bind(this);\n\n\t\t// Before adding our tokenizer, load some data.\n\t\tawait this.loadPronouns()\n\t\t\t.then(() => this.buildBadges());\n\n\t\tthis.on('site.channel:update-bar', this.updateChannelPronouns, this);\n\n\t\tthis.chat.addTokenizer({\n\t\t\ttype: 'pronouns',\n\t\t\tprocess\n\t\t});\n\n\t\tthis.emit('chat:update-lines');\n\t}\n\n\tonDisable() {\n\t\tthis.removeBadges();\n\t\tthis.chat.removeTokenizer('pronouns');\n\t\tthis.emit('chat:update-lines');\n\t\tthis.off('site.channel:update-bar', this.updateChannelPronouns, this);\n\t}\n\n\n\tupdateChannelPronouns(el, props, channel) {\n\t\tif ( el._pn_badge && ! el.contains(el._pn_badge) ) {\n\t\t\tel._pn_badge.remove();\n\t\t\tel._pn_badge = null;\n\t\t}\n\n\t\tif ( ! el._pn_badge ) {\n\t\t\tconst link = el.querySelector('a .tw-title'),\n\t\t\t\tanchor = link && link.closest('a'),\n\t\t\t\tcont = anchor && anchor.closest('div');\n\n\t\t\tif ( cont && el.contains(cont) ) {\n\t\t\t\tel._pn_badge = <div class=\"pn--badge\"></div>;\n\n\t\t\t\tlet before;\n\t\t\t\tif ( anchor.parentElement === cont ) {\n\t\t\t\t\tbefore = anchor.nextElementSibling;\n\t\t\t\t\tif ( before && before.querySelector('svg') )\n\t\t\t\t\t\tbefore = before.nextElementSibling;\n\t\t\t\t}\n\n\t\t\t\tif ( before )\n\t\t\t\t\tcont.insertBefore(el._pn_badge, before);\n\t\t\t\telse\n\t\t\t\t\tcont.appendChild(el._pn_badge);\n\t\t\t}\n\t\t}\n\n\t\tif ( ! el._pn_badge || props?.channelLogin === el._pn_login )\n\t\t\treturn;\n\n\t\tconst login = el._pn_login = props?.channelLogin;\n\t\tif ( ! login || ! this.settings.get('addon.pronouns.streamer') ) {\n\t\t\tel._pn_badge.innerHTML = '';\n\t\t\treturn;\n\t\t}\n\n\t\tlet value = this.getUser(login, true);\n\t\tif ( value instanceof Promise )\n\t\t\treturn value.then(() => {\n\t\t\t\tif ( el._pn_login === login ) {\n\t\t\t\t\tel._pn_login = null;\n\t\t\t\t\tthis.updateChannelPronouns(el, props, channel);\n\t\t\t\t}\n\t\t\t});\n\n\t\tif ( ! value ) {\n\t\t\tel._pn_badge.innerHTML = '';\n\t\t\treturn;\n\t\t}\n\n\t\t// Make a fake message, for badge rendering.\n\t\tconst msg = {\n\t\t\tuser: {\n\t\t\t\tid: props.channelID,\n\t\t\t\tlogin,\n\t\t\t\tdisplayName: props.displayName\n\t\t\t},\n\t\t\troomID: props.channelID,\n\t\t\troomLogin: login,\n\t\t\tffz_badges: [\n\t\t\t\t{id: `addon-pn-${value}`}\n\t\t\t]\n\t\t};\n\n\t\tel._pn_badge.dataset.roomId = msg.roomID;\n\t\tel._pn_badge.dataset.room = login;\n\t\tel._pn_badge.dataset.userId = msg.roomID;\n\t\tel._pn_badge.dataset.user = login;\n\t\tel._pn_badge.message = msg;\n\n\t\tsetChildren(el._pn_badge, this.badges.render(msg, createElement, true, true));\n\t}\n\n\n\tonMessage(tokens, msg) {\n\t\tconst user = msg?.user,\n\t\t\tlogin = user?.login;\n\n\t\tif ( login ) {\n\t\t\tconst ret = this.getUser(login);\n\t\t\tif ( ret instanceof Promise )\n\t\t\t\tret.then(id => {\n\t\t\t\t\tif ( ! id )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tthis.chat.getUser(user.id, login).addBadge('pronouns', `addon-pn-${id}`);\n\t\t\t\t\tthis.emit('chat:update-lines-by-user', user.id, login, false, true);\n\t\t\t\t});\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n\tgetUser(login, multiple_waits = false) {\n\t\tconst cache = this.users.get(login);\n\t\tif ( cache ) {\n\t\t\tif ( ! cache.done ) {\n\t\t\t\tif ( multiple_waits )\n\t\t\t\t\treturn cache.promise;\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Date.now() <= cache.time + 300000 )\n\t\t\t\treturn cache.value;\n\t\t}\n\n\t\tif ( this.load_wait )\n\t\t\treturn this.load_wait.then(() => this.getUser(login, multiple_waits));\n\n\t\tconst promise = this.waiting.wait()\n\t\t\t.then(done => this._getUser(login)\n\t\t\t\t.then(value => {\n\t\t\t\t\tthis.users.set(login, {\n\t\t\t\t\t\tdone: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\ttime: Date.now()\n\t\t\t\t\t});\n\n\t\t\t\t\treturn value;\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.users.set(login, {\n\t\t\t\t\t\tdone: true,\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\ttime: Date.now()\n\t\t\t\t\t});\n\t\t\t\t\tthrow err;\n\t\t\t\t})\n\t\t\t\t.finally(done));\n\n\t\tthis.users.set(login, {\n\t\t\tdone: false,\n\t\t\tpromise\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tasync _getUser(login) {\n\t\tconst data = await get(`users/${login}`);\n\t\tlet out = data?.pronoun_id;\n\t\tif ( ! out?.length )\n\t\t\treturn null;\n\n\t\tif ( data.alt_pronoun_id?.length )\n\t\t\treturn `${out}|${data.alt_pronoun_id}`;\n\n\t\treturn out;\n\t}\n\n\tasync loadPronouns() {\n\t\tconst data = await get('pronouns');\n\t\tthis.pronouns = {};\n\n\t\tif ( ! data )\n\t\t\treturn;\n\n\t\tfor(const [key, val] of Object.entries(data)) {\n\t\t\tthis.pronouns[key] = (val.singular || ! val.object?.length) ? val.subject : `${val.subject}/${val.object}`;\n\t\t\tfor(const [key_two, val_two] of Object.entries(data)) {\n\t\t\t\tif ( key === key_two )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis.pronouns[key + '|' + key_two] = `${val.subject || val.object}/${val_two.subject || val_two.object}`;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tclearUserData() {\n\t\tfor(const user of this.chat.iterateUsers())\n\t\t\tuser.removeAllBadges('pronouns');\n\n\t\tthis.users.clear();\n\t}\n\n\tremoveBadges() {\n\t\tfor(const key of Object.keys(this.pronouns)) {\n\t\t\tthis.badges.removeBadge(`addon-pn-${key}`, false);\n\t\t\tthis.settings.remove(`addon.pronouns.color.${key}`);\n\t\t}\n\n\t\tthis.old_badges = new Set();\n\t\tthis.badges.buildBadgeCSS();\n\t}\n\n\tbuildBadges() {\n\t\tconst old_badges = this.old_badges;\n\n\t\tfor(const [name, display] of Object.entries(this.pronouns)) {\n\t\t\tif ( old_badges && old_badges.has(name) )\n\t\t\t\told_badges.delete(name);\n\t\t\telse\n\t\t\t\tthis.updateBadge(name, display, false);\n\t\t}\n\n\t\tif ( old_badges )\n\t\t\tfor(const name of old_badges)\n\t\t\t\tthis.badges.removeBadge(`addon-pn-${name}`, false);\n\n\t\tthis.old_badges = new Set(Object.keys(this.pronouns));\n\t\tthis.badges.buildBadgeCSS();\n\t}\n\n\tupdateBadge(name, display, update_css = false) {\n\t\tlet css = `display:inline-flex;align-items:center;`;\n\t\tif ( this.settings.get('addon.pronouns.border') )\n\t\t\tcss = `${css}border:0.1rem solid;border-radius:0.5rem`;\n\n\t\tconst idx = name.indexOf('|'),\n\t\t\tsetting = `addon.pronouns.color.${idx === -1 ? name : name.slice(0, idx)}`;\n\n\t\tif ( ! this.old_badges || ! this.old_badges.has(name) && idx === -1 )\n\t\t\tthis.settings.add(setting, {\n\t\t\t\tdefault: null,\n\t\t\t\trequires: ['addon.pronouns.color'],\n\t\t\t\tprocess(ctx, val) {\n\t\t\t\t\treturn val == null ? ctx.get('addon.pronouns.color') : val\n\t\t\t\t},\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Add-Ons > Pronouns >> Per-Badge Colors',\n\t\t\t\t\ttitle: display,\n\t\t\t\t\ti18n_key: null,\n\t\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\t\tforce_seen: true\n\t\t\t\t},\n\t\t\t\tchanged: () => {\n\t\t\t\t\tif ( this.pronouns[name] )\n\t\t\t\t\t\tthis.updateBadge(name, display, true);\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.badges.loadBadgeData(`addon-pn-${name}`, {\n\t\t\tno_visibility: true,\n\t\t\tcontent: display,\n\t\t\ttitle: this.i18n.t('addon.pronouns.title', 'Pronouns: {value}', {\n\t\t\t\tvalue: display\n\t\t\t}),\n\t\t\tclick_url: 'https://pr.alejo.io/',\n\t\t\tcolor: this.settings.get(setting),\n\t\t\tslot: 100,\n\t\t\tcss\n\t\t}, update_css);\n\t}\n\n\tupdateBadges() {\n\t\tfor(const [name, display] of Object.entries(this.pronouns))\n\t\t\tthis.updateBadge(name, display);\n\n\t\tthis.badges.buildBadgeCSS();\n\t}\n}\n\nPronouns.register();"],"names":["createElement","setChildren","Mutex","get","endpoint","options","resp","args","process","el","props","channel","link","anchor","cont","before","login","value","msg","tokens","user","ret","id","multiple_waits","cache","promise","done","err","data","out","key","val","key_two","val_two","old_badges","name","display","update_css","css","idx","setting","ctx","Pronouns"],"sourceRoot":""}