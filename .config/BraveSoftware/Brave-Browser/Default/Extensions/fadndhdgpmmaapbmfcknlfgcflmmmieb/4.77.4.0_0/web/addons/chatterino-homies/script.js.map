{"version":3,"file":"chatterino-homies/script.js","mappings":"oGAAA,MAAM,EAAN,MAAM,UAAyB,kCAAM,CACjC,eAAeA,EAAM,CACjB,MAAM,GAAGA,CAAI,EAEb,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,aAAa,EAEzB,KAAK,UAAY,CACd,mCACA,mCACH,EACA,KAAK,WAAa,EACtB,CAEA,UAAW,CACP,KAAK,aAAa,CACtB,CAEA,WAAY,CACR,KAAK,aAAa,CACtB,CAEA,eAAeC,EAAO,CAClB,MAAO,mCAAmCA,CAAK,EACnD,CAEA,MAAM,qBAAsB,CACxB,GAAI,CACA,MAAMC,EAAY,MAAM,QAAQ,IAAI,KAAK,UAAU,IAAIC,GAAO,MAAMA,CAAG,CAAC,CAAC,EACnEC,EAAO,MAAM,QAAQ,IAAIF,EAAU,IAAIG,GAAOA,EAAI,KAAK,CAAC,CAAC,EAC/D,OAAO,KAAK,UAAU,GAAGD,CAAI,CACjC,OAASE,EAAO,CACZ,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,CAAC,CACZ,CACJ,CAEA,aAAaC,EAAY,CACrB,MAAMC,EAAc,CAAC,EAErB,OAAAD,EAAW,QAAQH,GAAQ,EACtBA,EAAK,QAAU,CAAC,GAAG,QAAQK,GAAS,CACjC,MAAMC,EAAcF,EAAY,KAAKG,GAAOA,EAAI,UAAYF,EAAM,OAAO,EACrEC,EACID,EAAM,OAASA,EAAM,MAAM,QAAQC,EAAY,MAAM,KAAK,GAAGD,EAAM,KAAK,EAE5ED,EAAY,KAAK,CACb,OAAQC,EAAM,GACd,QAASA,EAAM,QACf,OAAQA,EAAM,OACd,OAAQA,EAAM,OACd,OAAQA,EAAM,OACd,MAAOA,EAAM,OAAS,CAAC,CAC3B,CAAC,CAET,CAAC,CACL,CAAC,EAEMD,CACX,CAEA,MAAM,cAAe,CACjB,KAAK,aAAa,EAElB,MAAMI,EAAS,MAAM,KAAK,oBAAoB,EAC9C,KAAK,WAAaA,EAAO,OAAS,EAElCA,EAAO,QAAQ,CAACH,EAAOI,IAAM,CACzB,MAAMC,EAAU,KAAK,eAAeD,CAAC,EACrC,KAAK,OAAO,cAAcC,EAAS,CAC/B,GAAIL,EAAM,OACV,MAAOA,EAAM,QACb,KAAM,GACN,MAAOA,EAAM,OACb,KAAM,CACF,EAAGA,EAAM,OACT,EAAGA,EAAM,OACT,EAAGA,EAAM,MACb,EACA,UAAW,gCACX,IAAK,EACT,CAAC,EACD,KAAK,OAAO,QAAQ,4BAA6BK,EAASL,EAAM,KAAK,CACzE,CAAC,EAED,KAAK,KAAK,mBAAmB,CACjC,CAEA,cAAe,CACX,QAASI,EAAI,EAAGA,GAAK,KAAK,WAAYA,IAClC,KAAK,OAAO,WAAW,4BAA6B,KAAK,eAAeA,CAAC,CAAC,EAE9E,KAAK,WAAa,EACtB,CACJ,EA9FqC,wBAArC,IAAME,EAAN,EAgGAA,EAAiB,SAAS,+B","sources":["webpack://ffz-addons/./src/chatterino-homies/index.js"],"sourcesContent":["class ChatterinoHomies extends Addon {\r\n    constructor(...args) {\r\n        super(...args);\r\n\r\n        this.inject('chat');\r\n        this.inject('chat.badges');\r\n\r\n        this.badgeUrls = [\r\n           'https://itzalex.github.io/badges',\r\n           'https://itzalex.github.io/badges2'\r\n        ];\r\n        this.maxBadgeId = -1;\r\n    }\r\n\r\n    onEnable() {\r\n        this.updateBadges();\r\n    }\r\n\r\n    onDisable() {\r\n        this.removeBadges();\r\n    }\r\n\r\n    getIdFromIndex(index) {\r\n        return `add_ons.chatterino_homies.badge-${index}`;\r\n    }\r\n\r\n    async fetchAndMergeBadges() {\r\n        try {\r\n            const responses = await Promise.all(this.badgeUrls.map(url => fetch(url)));\r\n            const data = await Promise.all(responses.map(res => res.json()));\r\n            return this.mergeData(...data);\r\n        } catch (error) {\r\n            console.error('Error fetching badges:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    mergeData(...dataArrays) {\r\n        const mergedArray = [];\r\n\r\n        dataArrays.forEach(data => {\r\n            (data.badges || []).forEach(badge => {\r\n                const existingObj = mergedArray.find(obj => obj.tooltip === badge.tooltip);\r\n                if (existingObj) {\r\n                    if (badge.users && badge.users.length) existingObj.users.push(...badge.users);\r\n                } else {\r\n                    mergedArray.push({\r\n                        userId: badge.id,\r\n                        tooltip: badge.tooltip,\r\n                        image1: badge.image1,\r\n                        image2: badge.image2,\r\n                        image3: badge.image3,\r\n                        users: badge.users || []\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        return mergedArray;\r\n    }\r\n\r\n    async updateBadges() {\r\n        this.removeBadges();\r\n\r\n        const badges = await this.fetchAndMergeBadges();\r\n        this.maxBadgeId = badges.length - 1;\r\n\r\n        badges.forEach((badge, i) => {\r\n            const badgeId = this.getIdFromIndex(i);\r\n            this.badges.loadBadgeData(badgeId, {\r\n                id: badge.userId,\r\n                title: badge.tooltip,\r\n                slot: 78,\r\n                image: badge.image1,\r\n                urls: {\r\n                    1: badge.image1,\r\n                    2: badge.image2,\r\n                    4: badge.image3,\r\n                },\r\n                click_url: 'https://chatterinohomies.com/',\r\n                svg: false,\r\n            });\r\n            this.badges.setBulk('add_ons.chatterino_homies', badgeId, badge.users);\r\n        });\r\n\r\n        this.emit('chat:update-lines');\r\n    }\r\n\r\n    removeBadges() {\r\n        for (let i = 0; i <= this.maxBadgeId; i++) {\r\n            this.badges.deleteBulk('add_ons.chatterino_homies', this.getIdFromIndex(i));\r\n        }\r\n        this.maxBadgeId = -1;\r\n    }\r\n}\r\n\r\nChatterinoHomies.register();"],"names":["args","index","responses","url","data","res","error","dataArrays","mergedArray","badge","existingObj","obj","badges","i","badgeId","ChatterinoHomies"],"sourceRoot":""}