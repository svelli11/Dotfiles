(()=>{var I=Object.defineProperty;var v=(M,z)=>I(M,"name",{value:z,configurable:!0});(globalThis.ffzWebpackJsonp=globalThis.ffzWebpackJsonp||[]).push([[6115],{10388:function(M){/*!
 * displacejs.js 1.3.2 - Tiny javascript library to create moveable DOM elements.
 * Copyright (c) 2019 Catalin Covic - https://github.com/catc/displace
 * License: MIT
 */(function(z,c){M.exports=c()})(this,function(){return function(z){function c(w){if(C[w])return C[w].exports;var g=C[w]={exports:{},id:w,loaded:!1};return z[w].call(g.exports,g,g.exports,c),g.loaded=!0,g.exports}v(c,"t");var C={};return c.m=z,c.c=C,c.p="",c(0)}([function(z,c,C){"use strict";function w(_){return _&&_.__esModule?_:{default:_}}v(w,"n");var g=C(1),x=w(g);z.exports=x.default},function(z,c,C){"use strict";function w(u,n){if(!(u instanceof n))throw new TypeError("Cannot call a class as a function")}v(w,"n");function g(){var u=this,n=this.el,m=this.opts||d,e={};if(n.style.position="absolute",this.handle=m.handle||n,m.constrain){for(var l=m.relativeTo||n.parentNode,s=n,r=0,a=0;s!==l;)s=s.parentNode,(0,x.isRelative)(s)&&(r-=s.offsetLeft,a-=s.offsetTop),s===l&&(r+=s.offsetLeft,a+=s.offsetTop);var k=r+l.offsetWidth-n.offsetWidth,F=a+l.offsetHeight-n.offsetHeight;e.xClamp=(0,x.generateClamp)(r,k),e.yClamp=(0,x.generateClamp)(a,F)}this.opts=m,this.data=e,this.events={mousedown:_.mousedown.bind(this),mouseup:_.mouseup.bind(this),touchstart:_.touchstart.bind(this),touchstop:_.touchstop.bind(this),scrollFix:function($){u.isDragging&&$.preventDefault()}},this.handleMove=b(this.opts.customMove),this.handle.addEventListener("mousedown",this.events.mousedown,!1),this.handle.addEventListener("touchstart",this.events.touchstart,!1),document.addEventListener("touchmove",this.events.scrollFix,{passive:!1})}v(g,"s"),Object.defineProperty(c,"__esModule",{value:!0});var x=C(2),_=C(3),b=(0,x.generateMoveFn)(),d={constrain:!1,relativeTo:null,handle:null,ignoreFn:null,highlightInputs:!1,onMouseDown:null,onMouseMove:null,onMouseUp:null,onTouchStart:null,onTouchMove:null,onTouchStop:null,customMove:null},h=function(){function u(n,m){if(w(this,u),!n)throw Error("Must include moveable element");this.el=n,this.opts=m,g.call(this)}return v(u,"e2"),u.prototype.reinit=function(){this.destroy(),g.call(this)},u.prototype.destroy=function(){var n=this.events;this.handle.removeEventListener("mousedown",n.mousedown,!1),document.removeEventListener("mousemove",n.mousemove,!1),document.removeEventListener("mouseup",n.mouseup,!1),this.handle.removeEventListener("touchstart",n.touchstart,!1),document.removeEventListener("touchmove",n.touchmove,!1),document.removeEventListener("touchstop",n.touchstop,!1),document.removeEventListener("touchmove",this.events.scrollFix,{passive:!1})},u}();c.default=function(u,n){return new h(u,n)}},function(z,c){"use strict";function C(_,b){return function(d){return Math.min(Math.max(d,_),b)}}v(C,"o");function w(_){return window.getComputedStyle(_).position==="relative"}v(w,"n");function g(){return window.requestAnimationFrame?function(_){var b=_||x;return function(d,h,u){window.requestAnimationFrame(function(){b(d,h,u)})}}:function(_){return function(b,d,h){var u=_||x;u(b,d,h)}}}v(g,"s");function x(_,b,d){_.style.left=b+"px",_.style.top=d+"px"}v(x,"i"),Object.defineProperty(c,"__esModule",{value:!0}),c.generateClamp=C,c.isRelative=w,c.generateMoveFn=g},function(z,c){"use strict";function C(d){var h=this.opts;if(h.highlightInputs){var u=d.target.tagName.toLowerCase();if(u==="input"||u==="textarea")return}if(!h.ignoreFn||!h.ignoreFn(d)){if(d.button===0){var n=this.el,m=this.events;typeof h.onMouseDown=="function"&&h.onMouseDown(n,d);var e=d.clientX-n.offsetLeft,l=d.clientY-n.offsetTop;m.mousemove=w.bind(this,e,l),document.addEventListener("mousemove",m.mousemove,!1),document.addEventListener("mouseup",m.mouseup,!1)}d.preventDefault()}}v(C,"o");function w(d,h,u){var n=this.el,m=this.opts,e=this.data;typeof m.onMouseMove=="function"&&m.onMouseMove(n,u);var l=u.clientX-d,s=u.clientY-h;return m.constrain&&(l=e.xClamp(l),s=e.yClamp(s)),this.handleMove(n,l,s),u.preventDefault(),!1}v(w,"n");function g(d){var h=this.el,u=this.opts,n=this.events;typeof u.onMouseUp=="function"&&u.onMouseUp(h,d),document.removeEventListener("mouseup",n.mouseup,!1),document.removeEventListener("mousemove",n.mousemove,!1)}v(g,"s");function x(d){var h=this.opts;if(h.highlightInputs){var u=d.target.tagName.toLowerCase();if(u==="input"||u==="textarea")return}if(!h.ignoreFn||!h.ignoreFn(d)){var n=this.el,m=this.events;typeof h.onTouchStart=="function"&&h.onTouchStart(n,d);var e=d.targetTouches[0],l=e.clientX-n.offsetLeft,s=e.clientY-n.offsetTop;m.touchmove=_.bind(this,l,s),this.isDragging=!0,document.addEventListener("touchmove",m.touchmove,!1),document.addEventListener("touchend",m.touchstop,!1),document.addEventListener("touchcancel",m.touchstop,!1)}}v(x,"i");function _(d,h,u){var n=this.el,m=this.opts,e=this.data;typeof m.onTouchMove=="function"&&m.onTouchMove(n,u);var l=u.targetTouches[0],s=l.clientX-d,r=l.clientY-h;return m.constrain&&(s=e.xClamp(s),r=e.yClamp(r)),this.handleMove(n,s,r),u.preventDefault(),!1}v(_,"u");function b(d){this.isDragging=!1;var h=this.el,u=this.opts,n=this.events;typeof u.onTouchStop=="function"&&u.onTouchStop(h,d),document.removeEventListener("touchmove",n.touchmove,!1),document.removeEventListener("touchend",n.touchstop,!1),document.removeEventListener("touchcancel",n.touchstop,!1)}v(b,"r"),Object.defineProperty(c,"__esModule",{value:!0}),c.mousedown=C,c.mousemove=w,c.mouseup=g,c.touchstart=x,c.touchmove=_,c.touchstop=b}])})},81414:(M,z,c)=>{"use strict";c.r(z),c.d(z,{default:()=>O});var C=v(function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("div",{staticClass:"ffz-viewer-card tw-border tw-border-radius-medium tw-c-background-base tw-c-text-base tw-elevation-2 tw-flex tw-flex-column viewer-card",style:{zIndex:t.z},attrs:{tabindex:"0"},on:{focusin:t.onFocus,keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"esc",27,o.key,["Esc","Escape"])?null:t.close.apply(null,arguments)}}},[i("div",{staticClass:"ffz-viewer-card__header tw-border-radius-medium tw-c-background-accent-alt tw-flex-grow-0 tw-flex-shrink-0 viewer-card__background tw-relative"},[i("div",{staticClass:"tw-flex tw-flex-column tw-full-height tw-full-width viewer-card__overlay"},[i("div",{staticClass:"tw-align-center tw-border-radius-medium tw-align-items-center tw-c-background-alt tw-c-text-base tw-flex tw-flex-grow-1 tw-flex-row tw-full-width tw-justify-content-start tw-pd-05 tw-relative viewer-card__banner"},[i("div",{staticClass:"tw-mg-l-05 tw-mg-y-05 tw-inline-flex viewer-card-drag-cancel"},[t.loaded?i("figure",{staticClass:"ffz-avatar tw-flex tw-align-items-center",style:t.imageStyle},[t.emote.src?i("img",{staticClass:"tw-block tw-image tw-image-avatar",attrs:{src:t.emote.src}}):t._e()]):i("figure",{staticClass:"tw-mg-x-1 tw-font-size-2 ffz-i-zreknarf loading"})]),t._v(" "),i("div",{staticClass:"tw-align-left tw-flex-grow-1 tw-ellipsis tw-mg-l-1 tw-mg-y-05 viewer-card__display-name"},[i("h4",{staticClass:"tw-inline tw-ellipsis",class:{"tw-italic":t.hasOriginalName},attrs:{title:t.emote?t.emote.name:t.raw_emote.name}},[t._v(`
						`+t._s(t.emote?t.emote.name:t.raw_emote.name)+`
					`)]),t._v(" "),t.loaded?t._e():i("P",{staticClass:"tw-c-text-alt-2 tw-font-size-6"},[t._v(`
						`+t._s(t.t("emote-card.loading","Loading..."))+`
					`)]),t._v(" "),t.loaded&&t.emote.source?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6 tw-ellipsis",attrs:{title:t.emote.source_i18n?t.t(t.emote.source_i18n,t.emote.source):t.emote.source}},[t._v(`
						`+t._s(t.emote.source_i18n?t.t(t.emote.source_i18n,t.emote.source):t.emote.source)+`
					`)]):t._e(),t._v(" "),t.hasOriginalName?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6 tw-ellipsis"},[i("t-list",{attrs:{phrase:"emote.original-name",default:"Name: {name}"},scopedSlots:t._u([{key:"name",fn:function(){return[t._v(`
								`+t._s(t.emote.originalName)+`
							`)]},proxy:!0}],null,!1,1764306649)})],1):t._e(),t._v(" "),t.loaded&&t.emote.owner?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6 tw-ellipsis"},[i("t-list",{attrs:{phrase:"emote-card.owner",default:"Owner: {owner}"},scopedSlots:t._u([{key:"owner",fn:function(){return[t.emote.ownerLink?i("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:t.emote.ownerLink}},[t._v(t._s(t.emote.owner))]):i("span",[t._v(t._s(t.emote.owner))])]},proxy:!0}],null,!1,2985654007)})],1):t._e(),t._v(" "),t.loaded&&t.emote.artist?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6 tw-ellipsis"},[i("t-list",{attrs:{phrase:"emote-card.artist",default:"Artist: {artist}"},scopedSlots:t._u([{key:"artist",fn:function(){return[t.emote.artistLink?i("a",{staticClass:"ffz-i-artist",attrs:{rel:"noopener noreferrer",target:"_blank",href:t.emote.artistLink}},[t._v(t._s(t.emote.artist))]):i("span",[t._v(t._s(t.emote.artist))])]},proxy:!0}],null,!1,92070245)})],1):t._e()],1),t._v(" "),t.canFavorite?i("button",{staticClass:"tw-flex-shrink-0 viewer-card-drag-cancel tw-align-self-start tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative ffz-tooltip",attrs:{"data-title":t.favoriteLabel,"aria-label":t.favoriteLabel},on:{click:t.toggleFavorite}},[i("span",{staticClass:"tw-button-icon__icon"},[i("figure",{class:{"ffz-i-star":t.isFavorite,"ffz-i-star-empty":!t.isFavorite}})])]):t._e(),t._v(" "),i("div",{staticClass:"tw-flex tw-flex-column tw-align-self-start"},[i("button",{staticClass:"viewer-card-drag-cancel tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative ffz-tooltip",attrs:{"data-title":t.t("emote-card.close","Close"),"aria-label":t.t("emote-card.close","Close")},on:{click:t.close}},[t._m(0)]),t._v(" "),t.hasMoreActions?i("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeMore,expression:"closeMore"}],staticClass:"tw-relative viewer-card-drag-cancel"},[i("button",{staticClass:"tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative ffz-tooltip",attrs:{"data-title":t.t("emote-card.more","More"),"aria-label":t.t("emote-card.more","More")},on:{click:t.toggleMore}},[t._m(1)]),t._v(" "),t.moreOpen?i("balloon",{staticClass:"tw-border-radius-medium",attrs:{color:"background-alt-2",dir:"down-right",size:"sm"}},[i("simplebar",{attrs:{classes:"ffz-mh-30"}},[i("div",{staticClass:"tw-pd-y-05"},[t._l(t.moreActions,function(o,p){return[o.divider?i("div",{key:p,staticClass:"tw-mg-1 tw-border-b"}):t._e(),t._v(" "),i("a",{key:p,staticClass:"tw-block ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-full-width ffz--cursor",attrs:{disabled:o.disabled,href:o.href,rel:"noopener noreferrer",target:"_blank"},on:{click:function(E){return t.clickMore(o,E)}}},[i("div",{staticClass:"tw-flex tw-align-items-center tw-pd-y-05 tw-pd-x-1"},[i("div",{staticClass:"tw-flex-grow-1",class:{"tw-mg-r-1":!!o.icon}},[t._v(`
													`+t._s(o.title_i18n?t.t(o.title_i18n,o.title,o):o.title)+`
												`)]),t._v(" "),o.icon||o.type==="link"?i("figure",{class:o.icon||"ffz-i-link-ext"}):t._e()])])]})],2)])],1):t._e()],1):t._e()])])])]),t._v(" "),t.reporting?i("ReportForm",{attrs:{emote:t.emote,getFFZ:t.getFFZ},on:{close:t.close}}):t._e(),t._v(" "),!t.reporting&&t.loaded&&t.hasBody?i(t.bodyComponent,{tag:"component",attrs:{emote:t.emote,getFFZ:t.getFFZ},on:{close:t.close}}):t._e(),t._v(" "),!t.reporting&&t.raw_modifiers&&t.raw_modifiers.length?i("Modifiers",{attrs:{raw_modifiers:t.raw_modifiers,getFFZ:t.getFFZ}}):t._e()],1)},"render"),w=[function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("span",{staticClass:"tw-button-icon__icon"},[i("figure",{staticClass:"ffz-i-cancel"})])},function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("span",{staticClass:"tw-button-icon__icon"},[i("figure",{staticClass:"ffz-i-ellipsis-vert"})])}],g=c(40638),x=v(function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("section",{staticClass:"ffz-emote-card__modifiers",class:{"tw-pd-b-05":t.expanded}},[i("div",{staticClass:"tw-flex tw-align-items-center tw-c-background-alt-2 tw-pd-y-05 tw-pd-x-1 ffz--cursor",on:{click:t.toggle}},[i("div",{staticClass:"tw-flex-grow-1"},[i("h4",[t._v(t._s(t.t("emote-card.modifiers","Modifiers")))])]),t._v(" "),i("figure",{class:{"ffz-i-down-dir":t.expanded,"ffz-i-left-dir":!t.expanded}})]),t._v(" "),t._l(t.modifiers,function(o,p){return t.expanded?i("div",{key:p,staticClass:"tw-pd-05 tw-flex tw-align-items-center tw-border-t"},[i("div",{staticClass:"tw-mg-l-05 tw-inline-flex"},[o.icon?i("figure",{staticClass:"ffz-avatar ffz-avatar--50"},[i("img",{staticClass:"tw-block tw-image tw-image-avatar",attrs:{src:o.icon}})]):i("figure",{staticClass:"ffz-avatar",style:o.imageStyle},[o.src?i("img",{staticClass:"tw-block tw-image tw-image-avatar",attrs:{src:o.src,srcset:o.srcSet}}):t._e()])]),t._v(" "),i("div",{staticClass:"tw-align-left tw-flex-grow-1 tw-ellipsis tw-mg-x-1"},[i("h4",{staticClass:"tw-inline",attrs:{title:o.name}},[t._v(t._s(o.name))]),t._v(" "),o.source?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6",attrs:{title:o.source_i18n?t.t(o.source_i18n,o.source):o.source}},[t._v(`
				`+t._s(o.source_i18n?t.t(o.source_i18n,o.source):o.source)+`
			`)]):t._e(),t._v(" "),o.owner?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6"},[i("t-list",{attrs:{phrase:"emote-card.owner",default:"Owner: {owner}"},scopedSlots:t._u([{key:"owner",fn:function(){return[o.ownerLink?i("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:o.ownerLink}},[t._v(t._s(o.owner))]):i("span",[t._v(t._s(o.owner))])]},proxy:!0}],null,!0)})],1):t._e(),t._v(" "),o.artist?i("p",{staticClass:"tw-c-text-alt-2 tw-font-size-6"},[i("t-list",{attrs:{phrase:"emote-card.artist",default:"Artist: {artist}"},scopedSlots:t._u([{key:"artist",fn:function(){return[o.artistLink?i("a",{staticClass:"ffz-i-artist",attrs:{rel:"noopener noreferrer",target:"_blank",href:o.artistLink}},[t._v(t._s(o.artist))]):i("span",[t._v(t._s(o.artist))])]},proxy:!0}],null,!0)})],1):t._e()])]):t._e()})],2)},"modifiersvue_type_template_id_56f91566_render"),_=[];const d={props:["raw_modifiers","getFFZ"],data(){return{expanded:this.getFFZ().resolve("settings").provider.get("emote-card.expand-mods",!0)}},computed:{modifiers(){const t=this.getFFZ(),f=t.resolve("chat.emotes"),i=[];for(const[o,p]of this.raw_modifiers){if(o==="info"){i.push({type:"info",icon:p?.icon,name:p?.label});continue}const E=f.emote_sets[o],y=E?.emotes?.[p];if(y){const T=y.modifier_flags!=0;i.push({type:"emote",id:y.id,src:y.animSrc??y.src,srcSet:y.animSrcSet??y.srcSet,width:y.width,height:y.height,name:y.name,imageStyle:{width:`${Math.min(112,(y.width??28)*1)}px`,height:`${(y.height??28)*1}px`},source:E.source_line||`${E.source||"FFZ"} ${E.title||"Global Emotes"}`,owner:y.owner&&!T?y.owner.display_name||y.owner.name:null,ownerLink:y.owner&&!T&&!E.source?`https://www.frankerfacez.com/${y.owner.name}`:null,artist:y.artist?y.artist.display_name||y.artist.name:null,artistLink:y.artist&&!E.source?`https://www.frankerfacez.com/${y.artist.name}`:null})}}return i}},methods:{toggle(){const t=this.getFFZ(),f=t.resolve("settings"),i=f.provider;this.expanded=!this.expanded,i.set("emote-card.expand-mods",this.expanded)}}};var h=c(72934),u=(0,h.Z)(d,x,_,!1,null,null,null);const n=u.exports;var m=v(function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("section",{staticClass:"viewer-card__actions tw-bottom-0 tw-pd-1"},[t.loading?[t._m(0)]:t.errorNoUser?[i("div",{staticClass:"tw-align-center tw-pd-1"},[t._m(1),t._v(`
			`+t._s(t.t("emote-card.report.no-user","Sorry, but you don't appear to have a FrankerFaceZ account or you aren't signed in. In order to submit a report, you need to have a FFZ account."))+`
		`)])]:t.error?[i("div",{staticClass:"tw-align-center tw-pd-1"},[t._m(2),t._v(`
			`+t._s(t.t("emote-card.report.error","There was an error submitting your report."))+`
		`)])]:t.success?[i("div",{staticClass:"tw-align-center tw-pd-1"},[t._v(`
			`+t._s(t.t("emote-card.report.success","Your report was submitted successfully."))+`
		`)]),t._v(" "),i("div",{staticClass:"tw-align-center"},[i("button",{staticClass:"tw-button tw-mg-x-1",on:{click:function(o){return t.$emit("close")}}},[i("span",{staticClass:"tw-button__text"},[t._v(`
					`+t._s(t.t("emote-card.close","Close"))+`
				`)])])])]:t.category?[i("p",{staticClass:"tw-strong tw-mg-b-05"},[i("t-list",{attrs:{phrase:"emote-card.report-details",default:"You are reporting this emote for {reason}. Please enter any additional details below:"},scopedSlots:t._u([{key:"reason",fn:function(){return[i("code",[t._v(t._s(t.category.i18n?t.t(t.category.i18n,t.category.title,t.category):t.category.title))])]},proxy:!0}])})],1),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"tw-full-width tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input",attrs:{placeholder:t.t("emote-card.report.placeholder","Enter a report message here.")},domProps:{value:t.message},on:{input:function(o){o.target.composing||(t.message=o.target.value)}}}),t._v(" "),i("div",{staticClass:"tw-mg-t-05 tw-align-center"},[i("button",{staticClass:"tw-button tw-mg-x-1",class:{"tw-button--disabled":!t.canReport},attrs:{disabled:!t.canReport},on:{click:t.submitReport}},[t._m(3),t._v(" "),i("span",{staticClass:"tw-button__text"},[t._v(`
					`+t._s(t.t("emote-card.report","Report Emote"))+`
				`)])])])]:[i("p",{staticClass:"tw-strong tw-mg-b-1"},[t._v(`
			`+t._s(t.t("emote-card.report-why","Why are you submitting this report?"))+`
		`)]),t._v(" "),i("form",{staticClass:"tw-flex tw-flex-column tw-border tw-c-background-body tw-border-radius-small tw-full-width"},t._l(t.REASONS,function(o,p){return i("div",{key:p,staticClass:"ffz-radio tw-relative tw-pd-l-1",class:{"tw-border-t":p>0}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.pendingCategory,expression:"pendingCategory"}],staticClass:"ffz-radio__input",attrs:{id:"report$"+t.id+"$reason$"+p,name:"report-reasons$"+t.id,type:"radio"},domProps:{value:o,checked:t._q(t.pendingCategory,o)},on:{change:function(E){t.pendingCategory=o}}}),t._v(" "),i("label",{staticClass:"tw-block ffz-radio__label tw-pd-r-1 tw-pd-y-1",attrs:{for:"report$"+t.id+"$reason$"+p}},[i("div",{staticClass:"tw-pd-l-1"},[t._v(`
						`+t._s(o.i18n?t.t(o.i18n,o.title,o):o.title)+`
					`)])])])}),0),t._v(" "),i("div",{staticClass:"tw-mg-t-05 tw-align-center"},[i("button",{staticClass:"tw-button tw-mg-x-1",class:{"tw-button--disabled":t.pendingCategory==null},attrs:{disabled:t.pendingCategory==null},on:{click:function(o){t.category=t.pendingCategory}}},[i("span",{staticClass:"tw-button__text"},[t._v(`
					`+t._s(t.t("emote-card.report.next","Next"))+`
				`)])])])]],2)},"report_formvue_type_template_id_a909ad5a_render"),e=[function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("div",{staticClass:"tw-align-center tw-pd-1"},[i("h1",{staticClass:"tw-mg-5 ffz-i-zreknarf loading"})])},function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("div",{staticClass:"tw-mg-t-1 tw-mg-b-2"},[i("img",{attrs:{src:"//cdn.frankerfacez.com/emoticon/26608/2",srcSet:"//cdn.frankerfacez.com/emoticon/26608/2 1x, //cdn.frankerfacez.com/emoticon/26608/4 2x"}})])},function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("div",{staticClass:"tw-mg-t-1 tw-mg-b-2"},[i("img",{attrs:{src:"//cdn.frankerfacez.com/emoticon/26608/2",srcSet:"//cdn.frankerfacez.com/emoticon/26608/2 1x, //cdn.frankerfacez.com/emoticon/26608/4 2x"}})])},function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("span",{staticClass:"tw-button__icon tw-button__icon--left"},[i("figure",{staticClass:"ffz-i-flag"})])}];const l=[{title:"Bullying or Harassment",i18n:"emote-card.report.bully-harass"},{title:"Hateful Conduct",i18n:"emote-card.report.hateful"},{title:"Nudity or Sexually Explicit",i18n:"emote-card.report.explicit"},{title:"Other",i18n:"emote-card.report.other",skip_report:!0}];let s=0;const a={props:["emote","getFFZ"],data(){return{REASONS:l,id:s++,message:"",pendingCategory:null,category:null,loading:!1,success:!1,error:!1,errorNoUser:!1}},computed:{canReport(){return this.category?this.category.skip_report?!/^\s*$/.test(this.message):!0:!1}},created(){this.checkToken()},methods:{async checkToken(){this.loading=!0;let t;try{t=await this.getFFZ().resolve("socket").getAPIToken()}catch(f){console.error(f),t=null}this.loading=!1,this.errorNoUser=t==null},async submitReport(){if(!(this.loading||!this.canReport)){this.loading=!0;try{await this._submitReport()}catch(t){console.error(t),this.loading=!1,this.error=!0,this.success=!1;return}this.loading=!1,this.success=!0}},async _submitReport(){const t=await this.getFFZ().resolve("socket").getAPIToken();if(!t?.token)throw new Error("Unable to get token");const f=this.getFFZ().resolve("staging").api,i=new URLSearchParams;let o=this.message;this.category&&!this.category.skip_report&&(o=`${this.category.title}${o.length?`\r
Details: ${o}`:""}`),i.append("report",o);const p=await fetch(`${f}/v2/emote/${this.emote.id}/report`,{method:"POST",body:i,headers:{Authorization:`Bearer ${t.token}`}});if(!p||!p.ok)throw new Error("Invalid response from server.");if(!(await p.json())?.success)throw new Error("Did not succeed")}}};var k=(0,h.Z)(a,m,e,!1,null,null,null);const F=k.exports;var $=v(function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("section",{staticClass:"ffz-emote-card__twitch tw-pd-1"},[t.emote.channel_id?i("section",{staticClass:"tw-mg-b-05 tw-flex tw-align-items-center"},[i("a",{staticClass:"tw-semibold tw-font-size-4 ffz-i-camera",attrs:{href:"https://www.twitch.tv/"+t.emote.channel_login,rel:"noopener noreferrer",target:"_blank"}},[t._v(`
			`+t._s(t.emote.channel_title)+`
		`)]),t._v(" "),t.emote.channel_live?i("div",{staticClass:"tw-mg-l-1"},[i("figure",{staticClass:"ffz-emote-card__live-indicator tw-mg-r-05"}),t._v(`
			`+t._s(t.t("emote-card.live","LIVE"))+`
		`)]):t._e()]):t._e(),t._v(" "),t.isSubscriptionEmote?[t.emote.unlocked?i("p",[t._v(`
			`+t._s(t.t("emote-card.sub.unlocked","You have unlocked this emote by subscribing to {user}'s channel at Tier {tier}.",{tier:t.emote.unlock_tier,user:t.emote.channel_title}))+`
		`)]):t.emote.unlock_tier<=1?i("p",[t._v(`
			`+t._s(t.t("emote-card.sub.upsell","Subscribe to {user}'s channel to use {emote} along with {emotes, plural, one {# more emote} other {# more of their emotes} }, including:",{emote:t.emote.name,emotes:t.unlockCount,user:t.emote.channel_title}))+`
		`)]):i("p",[t._v(`
			`+t._s(t.t("emote-card.sub.upsell-tier","Subscribe to {user}'s channel at Tier {tier} to use {emote} along with {emotes, plural, one {# more emote} other {# more of their emotes} }, including:",{emote:t.emote.name,tier:t.emote.unlock_tier,emotes:t.unlockCount,user:t.emote.channel_title}))+`
		`)])]:t.isBitsEmote?[t.emote.unlocked?i("p",[t._v(`
			`+t._s(t.t("emote-card.bits.unlocked","You have unlocked this emote by using {count, plural, one {# bit} other {# bits} } in {user}'s channel.",{count:t.emote.bits_amount,user:t.emote.channel_title}))+`
		`)]):i("p",[t._v(`
			`+t._s(t.t("emote-card.bits.upsell","Use {count, plural, one {# more bit} other {# more bits} } in {user}'s channel to permanently unlock this emote reward.",{count:t.emote.bits_remain,user:t.emote.channel_title}))+`
		`)])]:t.isFollowEmote?[t.emote.unlocked?i("p",[t._v(`
			`+t._s(t.t("emote-card.follow.unlocked","You have unlocked this emote by following {user}'s channel.",{user:t.emote.channel_title}))+`
		`)]):i("p",[t._v(`
			`+t._s(t.t("emote-card.follow.upsell","Follow {user}'s channel to use {emotes, plural, one {their emote} other {# of their emotes} }, including:",{emotes:t.unlockCount,user:t.emote.channel_title}))+`
		`)])]:t._e(),t._v(" "),t.extras.length?i("div",{staticClass:"ffz-emote-card__emote-list tw-mg-t-05"},t._l(t.extras,function(o){return i("div",{key:o.id,staticClass:"ffz-tooltip",attrs:{"data-title":o.name}},[i("img",{attrs:{src:o.src,srcset:o.srcSet,alt:o.name}})])}),0):t._e(),t._v(" "),t.emote.channel_id?i("div",{staticClass:"tw-mg-t-1 tw-flex"},[i("follow-button",{attrs:{channel:t.emote.channel_id,initial:t.emote.channel_followed}}),t._v(" "),t.canSubscribe?i("button",{staticClass:"tw-button tw-mg-l-1",on:{click:t.subscribe}},[t._m(0),t._v(" "),i("span",{staticClass:"tw-button__text"},[t._v(`
				`+t._s(t.t("emote-card.sub-button","Subscribe"))+`
			`)]),t._v(" "),t.emote.product_price?i("span",{staticClass:"ffz-button__sub-price"},[t._v(`
				`+t._s(t.emote.product_price)+`
			`)]):t._e()]):t._e()],1):t._e()],2)},"twitch_bodyvue_type_template_id_1fe78eaa_render"),Z=[function(){var t=this,f=t.$createElement,i=t._self._c||f;return i("span",{staticClass:"tw-button__icon tw-button__icon--left"},[i("figure",{staticClass:"ffz-i-star"})])}];const L={props:["emote","getFFZ"],computed:{unlockCount(){return Array.isArray(this.emote.extra_emotes)?this.emote.extra_emotes.length:0},extras(){return Array.isArray(this.emote.extra_emotes)?this.emote.extra_emotes.slice(0,8):[]},isSubscriptionEmote(){return this.emote.unlock_mode==="subscribe"},isBitsEmote(){return this.emote.unlock_mode==="bits"},isFollowEmote(){return this.emote.unlock_mode==="follow"},canSubscribe(){if(!this.isSubscriptionEmote||this.emote.unlocked||!this.emote.channel_product||this.getFFZ().resolve("settings").get("context.channelID")!==this.emote.channel_id)return!1;const i=this.getFFZ().resolve("site")?.store,o=this.getFFZ().resolve("site.web_munch"),p=o?.getModule?.("sub-form");return!(!i?.dispatch||!p)}},methods:{subscribe(){if(!this.canSubscribe)return;const t=this.getFFZ().resolve("site")?.store,f=this.getFFZ().resolve("site.web_munch"),i=f?.getModule?.("sub-form");!t?.dispatch||!i||(i({productName:this.emote.channel_product,trackingContext:{source:"emote_card"}})(t.dispatch),this.$emit("close"))}}};var S=(0,h.Z)(L,$,Z,!1,null,null,null);const A=S.exports;var R=c(10388),j=c.n(R);const D={components:{Modifiers:n,ReportForm:F},props:["raw_emote","data","pos_x","pos_y","getZ","getFFZ","reportTwitchEmote","raw_modifiers"],data(){return{z:this.getZ(),moreOpen:!1,isFavorite:!1,reporting:!1,loaded:!1,errored:!1,pinned:!1,emote:null}},computed:{favoriteLabel(){return this.t("emote-card.fav","Favorite This Emote")},hasBody(){return this.bodyComponent!=null},hasOriginalName(){return this.loaded&&this.emote.originalName&&this.emote.originalName!==this.emote.name},bodyComponent(){const t=this.emote?.body;return t==="twitch"?A:t==="manage-ffz"?g.Z:null},canFavorite(){return this.loaded&&this.emote.fav_source},moreActions(){return!this.loaded||!this.emote.more?null:this.emote.more},hasMoreActions(){return(this.moreActions?.length??0)>0},imageStyle(){return this.loaded?{width:`${Math.min(112,(this.emote.width??28)*2)}px`,height:`${(this.emote.height??28)*2}px`}:{}}},beforeMount(){this.ffzEmit(":open",this),this.data.then(t=>{this.loaded=!0,this.ffzEmit(":load",this),this.emote=t,this.updateIsFavorite(),this.$nextTick(()=>this.handleResize())}).catch(t=>{console.error("Error loading emote card data",t),this.errored=!0})},mounted(){this._on_resize=this.handleResize.bind(this),window.addEventListener("resize",this._on_resize),this.createDrag()},beforeDestroy(){this.ffzEmit(":close",this),this.destroyDrag(),this._on_resize&&(window.removeEventListener("resize",this._on_resize),this._on_resize=null)},methods:{updateIsFavorite(){if(!this.emote||!this.emote.fav_source)this.isFavorite=!1;else{const t=this.getFFZ().resolve("chat.emotes");this.isFavorite=t.isFavorite(this.emote.fav_source,this.emote.fav_id??this.emote.id)}},toggleFavorite(){if(!this.emote||!this.emote.fav_source)return;const t=this.getFFZ().resolve("chat.emotes");this.isFavorite=t.toggleFavorite(this.emote.fav_source,this.emote.fav_id??this.emote.id),this.cleanTips()},toggleMore(){this.moreOpen=!this.moreOpen},closeMore(){this.moreOpen=!1},clickMore(t,f){if(this.moreOpen=!1,t.type!=="link"&&(f.preventDefault(),t.type==="report-ffz"&&(this.reporting=!0),this.$nextTick(()=>this.handleResize()),t.type==="report-twitch")){this.reportTwitchEmote(this.emote.id,this.emote.channel_id)&&this.close();return}},constrain(){const t=this.$el;let f=t.parentElement,i=!1;f||(f=document.body);const o=t.getBoundingClientRect();let p=f.getBoundingClientRect();o.top<p.top?(t.style.top=`${t.offsetTop+(p.top-o.top)}px`,i=!0):o.bottom>p.bottom&&(t.style.top=`${t.offsetTop-(o.bottom-p.bottom)}px`,i=!0),o.left<p.left?(t.style.left=`${t.offsetLeft+(p.left-o.left)}px`,i=!0):o.right>p.right&&(t.style.left=`${t.offsetLeft-(o.right-p.right)}px`,i=!0),i&&this.displace&&this.displace.reinit()},pin(){this.pinned=!0,this.$emit("pin"),this.ffzEmit(":pin",this)},cleanTips(){this.$nextTick(()=>this.ffzEmit("tooltips:cleanup"))},close(){this.$emit("close")},createDrag(){this.$nextTick(()=>{this.displace=j()(this.$el,{handle:this.$el.querySelector(".ffz-viewer-card__header"),highlightInputs:!0,constrain:!0,onMouseDown:()=>this.onFocus(),onTouchStart:()=>this.onFocus(),ignoreFn:t=>t.target.closest(".viewer-card-drag-cancel")!=null})})},destroyDrag(){this.displace&&(this.displace.destroy(),this.displace=null)},handleResize(){this.displace&&this.displace.reinit()},onFocus(){this.z=this.getZ()},focus(){this.$el.focus()},ffzEmit(t,...f){this.$emit("emit",t,...f)}}};var N=(0,h.Z)(D,C,w,!1,null,null,null);const O=N.exports},40638:(M,z,c)=>{"use strict";c.d(z,{Z:()=>l});var C=v(function(){var s=this,r=s.$createElement,a=s._self._c||r;return a("section",{staticClass:"ffz-emote-card__management",class:{"tw-pd-b-05":s.expanded}},[s.noHeader?s._e():a("div",{staticClass:"tw-flex tw-align-items-center tw-c-background-alt-2 tw-pd-y-05 tw-pd-x-1 ffz--cursor",on:{click:s.toggle}},[a("div",{staticClass:"tw-flex-grow-1"},[a("h4",[s._v(s._s(s.t("emote-card.manage","Manage My Collections")))])]),s._v(" "),a("figure",{class:{"ffz-i-down-dir":s.expanded,"ffz-i-left-dir":!s.expanded}})]),s._v(" "),s.expanded?a("simplebar",{attrs:{classes:"ffz-mh-30"}},[s.loading?a("div",{staticClass:"tw-align-center tw-pd-1"},[a("h1",{staticClass:"tw-mg-5 ffz-i-zreknarf loading"})]):s.error?a("div",{staticClass:"tw-align-center tw-pd-1"},[a("div",{staticClass:"tw-mg-t-1 tw-mg-b-2"},[a("img",{attrs:{src:"//cdn.frankerfacez.com/emoticon/26608/2",srcSet:"//cdn.frankerfacez.com/emoticon/26608/2 1x, //cdn.frankerfacez.com/emoticon/26608/4 2x"}})]),s._v(`
			`+s._s(s.t("emote-card.error","There was an error loading data."))+`
		`)]):s._l(s.collections,function(k){return a("CollectionEntry",{key:k.id,attrs:{collection:k,emote:s.emote,getFFZ:s.getFFZ,initial:s.presence.includes(k.id)}})})],2):s._e()],1)},"render"),w=[],g=v(function(){var s=this,r=s.$createElement,a=s._self._c||r;return a("div",{ref:"root",staticClass:"tw-mg-05 tw-border tw-border-radius-medium tw-pd-05 ffz--cursor",class:s.entryClasses,attrs:{role:"checkbox",tabindex:"0","aria-checked":s.isInCollection},on:{click:s.toggle,keypress:function(k){return s.onPress(k)}}},[a("div",{staticClass:"panel-heading tw-flex tw-align-items-center"},[a("span",{staticClass:"ffz-tooltip tw-mg-r-1",class:s.iconClasses,attrs:{"data-title":s.iconTip}}),s._v(" "),s.image?a("figure",{staticClass:"ffz-avatar ffz-avatar--size-20 tw-mg-r-1"},[a("img",{staticClass:"tw-block tw-image tw-image-avatar",attrs:{src:s.image}})]):s._e(),s._v(" "),a("div",{staticClass:"tw-flex-grow-1"},[s._v(`
			`+s._s(s.collection.title)+`
		`)]),s._v(" "),a("span",{staticClass:"ffz-pill",class:{"ffz-pill--alert":s.collection.count>s.collection.limit,"ffz-pill--warn":s.collection.count===s.collection.limit}},[s._v(`
			`+s._s(s.t("collection.count","{count,number} of {limit,number}",s.collection))+`
		`)])])])},"manage_ffz_collectionvue_type_template_id_65c8f6c0_render"),x=[];const b={props:["initial","collection","emote","getFFZ"],data(){return{isInCollection:this.initial,shaking:!1,loading:!1}},computed:{image(){if(this.collection.icon)return this.collection.icon;const s=this.collection.owner;return s.provider&&s.provider_id?`https://cdn.frankerfacez.com/avatar/${s.provider}/${s.provider_id}`:null},iconTip(){return this.isInCollection?this.t("emote-card.in-collection","This emote is in this collection."):this.t("emote-card.not-in-collection","This emote is not in this collection.")},iconClasses(){return this.loading?"ffz-i-arrows-cw ffz--rotate":this.isInCollection?"ffz-i-ok":"ffz-i-minus"},entryClasses(){return this.shaking?"tw-c-background-alt ffz--shaking":this.loading?"tw-c-background-alt-2":this.isInCollection?"tw-c-background-accent":"tw-c-background-alt"}},created(){this.onAnimationEnd=this.onAnimationEnd.bind(this)},mounted(){this.$refs.root.addEventListener("animationend",this.onAnimationEnd)},beforeUnmount(){this.$refs.root.removeEventListener("animationend",this.onAnimationEnd)},methods:{onAnimationEnd(){this.shaking=!1},errorShake(){this.shaking=!0},onPress(s){s.keyCode===32&&(s.preventDefault(),this.toggle())},async toggle(){if(!this.loading){this.loading=!0;try{await this.toggleInternal()}catch(s){console.error(s),this.errorShake()}this.loading=!1}},async toggleInternal(){const s=this.getFFZ().resolve("staging").api,r=`${s}/v2/collection/${this.collection.id}/emote/${this.emote.id}`,a=this.getFFZ().resolve("socket"),k=a&&await a.getBareAPIToken();if(!k)throw new Error("Unable to get API token. Are you logged in?");if(this.isInCollection){const F=await fetch(r,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}}).then($=>$.ok?$.json():null);this.isInCollection=!1,F?.collection?this.collection.count=F.collection.count:this.collection.count--}else{if(this.collection.count>=this.collection.limit)throw new Error("collection at limit");const F=await fetch(r,{method:"PUT",headers:{Authorization:`Bearer ${k}`}}).then($=>$.ok?$.json():null);this.isInCollection=!0,F?.collection?this.collection.count=F.collection.count:this.collection.count++}}}};var d=c(72934),h=(0,d.Z)(b,g,x,!1,null,null,null);const m={components:{CollectionEntry:h.exports},props:["emote","getFFZ","noHeader"],data(){return{expanded:!!this.noHeader,loading:!1,error:!1,presence:null,collections:null}},created(){this.expanded&&!this.collections&&this.loadCollections()},methods:{toggle(){this.expanded=!this.expanded,this.expanded&&!this.collections&&this.loadCollections()},loadCollections(){this.loading||(this.loading=!0,this._loadCollections().then(()=>{this.loading=!1}).catch(s=>{console.error(s),this.error=!0,this.loading=!1}))},async _loadCollections(){const s=this.getFFZ().resolve("socket"),r=s&&await s.getBareAPIToken();if(!r)throw new Error("Unable to get API token. Are you logged in?");const a=this.getFFZ().resolve("staging").api,k=await fetch(`${a}/v2/emote/${this.emote.id}/collections/editable?include=collection`,{headers:{Authorization:`Bearer ${r}`}}).then(F=>F.ok?F.json():null);if(this.presence=k?.emote?.collections??[],this.collections=k?.collections,this.collections!=null&&Object.keys(this.collections).length===0)throw new Error("No collections returned")}}};var e=(0,d.Z)(m,C,w,!1,null,null,null);const l=e.exports},47792:(M,z,c)=>{"use strict";c.r(z),c.d(z,{default:()=>m});var C=v(function(){var e=this,l=e.$createElement,s=e._self._c||l;return s("div",{staticClass:"ffz-viewer-card tw-border tw-border-radius-medium tw-c-background-base tw-c-text-base tw-elevation-2 tw-flex tw-flex-column viewer-card ffz-accent-card",style:{zIndex:e.z,"--ffz-color-accent":e.accent},attrs:{tabindex:"0"},on:{focusin:e.onFocus,keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"esc",27,r.key,["Esc","Escape"])?null:e.close.apply(null,arguments)}}},[s("div",{staticClass:"ffz-viewer-card__header tw-border-radius-medium tw-c-background-accent-alt tw-flex-grow-0 tw-flex-shrink-0 viewer-card__background tw-relative"},[e.isUnsafe?s("div",{staticClass:"ffz--corner-flag ffz--corner-flag--left ffz--corner-flag__warn ffz-tooltip ffz-tooltip--no-mouse tw-border-top-left-radius-medium",attrs:{"data-title":e.unsafeTip}},[s("figure",{staticClass:"ffz-i-attention"})]):e._e(),e._v(" "),s("div",{staticClass:"tw-flex tw-flex-column tw-full-height tw-full-width viewer-card__overlay"},[s("div",{staticClass:"tw-align-center tw-border-radius-medium tw-align-items-center tw-c-background-alt tw-c-text-base tw-flex tw-flex-grow-1 tw-flex-row tw-full-width tw-justify-content-start tw-pd-05 tw-relative viewer-card__banner",class:{"tw-pd-l-3":e.isUnsafe}},[s("div",{staticClass:"tw-align-left tw-flex-grow-1 tw-ellipsis tw-mg-l-05 tw-mg-y-05 viewer-card__display-name"},[s("p",{staticClass:"tw-font-size-6 tw-ellipsis",attrs:{title:e.url}},[s("span",{staticClass:"tw-c-text-alt-2"},[e._v(e._s(e.urlPrefix))]),s("span",[e._v(e._s(e.urlDomain))]),s("span",{staticClass:"tw-c-text-alt-2"},[e._v(e._s(e.urlPath))])])]),e._v(" "),s("div",{staticClass:"tw-flex tw-align-self-start"},[s("a",{staticClass:"ffz--cursor viewer-card-drag-cancel tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative ffz-tooltip",attrs:{"data-title":e.t("link-card.open-ext","Open Link"),"data-url":e.targetUrl,href:e.targetUrl,rel:"noreferrer noopener",target:"_blank"}},[e._m(0)]),e._v(" "),e.hasMoreActions?s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.closeMore,expression:"closeMore"}],staticClass:"tw-relative viewer-card-drag-cancel"},[s("button",{staticClass:"tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative ffz-tooltip",attrs:{"data-title":e.t("emote-card.more","More"),"aria-label":e.t("emote-card.more","More")},on:{click:e.toggleMore}},[e._m(1)]),e._v(" "),e.moreOpen?s("balloon",{staticClass:"tw-border-radius-medium",attrs:{color:"background-alt-2",dir:"down-right",size:"sm"}},[s("simplebar",{attrs:{classes:"ffz-mh-30"}},[s("div",{staticClass:"tw-pd-y-05"},[e._l(e.moreActions,function(r,a){return[r.divider?s("div",{key:a,staticClass:"tw-mg-1 tw-border-b"}):e._e(),e._v(" "),s("a",{key:a,staticClass:"tw-block ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-full-width ffz--cursor",attrs:{disabled:r.disabled,href:r.href,rel:"noopener noreferrer",target:"_blank"},on:{click:function(k){return e.clickMore(r,k)}}},[s("div",{staticClass:"tw-flex tw-align-items-center tw-pd-y-05 tw-pd-x-1"},[s("div",{staticClass:"tw-flex-grow-1",class:{"tw-mg-r-1":!!r.icon}},[e._v(`
													`+e._s(r.title_i18n?e.t(r.title_i18n,r.title,r):r.title)+`
												`)]),e._v(" "),r.icon||r.type==="link"?s("figure",{class:r.icon||"ffz-i-link-ext"}):e._e()])])]})],2)])],1):e._e()],1):e._e(),e._v(" "),s("button",{staticClass:"viewer-card-drag-cancel tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative ffz-tooltip",attrs:{"data-title":e.t("emote-card.close","Close"),"aria-label":e.t("emote-card.close","Close")},on:{click:e.close}},[e._m(2)])])])])]),e._v(" "),s("section",{staticClass:"tw-c-background-body"},[s("div",{staticClass:"viewer-card__tabs-container tw-border-t"},e._l(e.tabs,function(r,a){return s("div",{key:a,staticClass:"viewer-card__tab tw-pd-x-1",class:{active:e.active_tab===a,"tw-inline-flex":!!r.pill,"tw-align-items-center":!!r.pill},attrs:{id:"link-card__"+a},on:{click:function(k){e.active_tab=a}}},[s("span",[e._v(e._s(r.label_i18n?e.t(r.label_i18n,r.label,r):r.label))]),e._v(" "),r.pill?s("span",{staticClass:"tw-mg-l-05 ffz-pill",class:r.pill_classes||""},[e._v(e._s(r.pill_i18n?e.t(r.pill_i18n,r.pill,r):r.pill))]):e._e()])}),0)]),e._v(" "),s("keep-alive",[e.rich_data&&e.active_tab==="preview"?s("chat-rich",{attrs:{data:e.rich_data,url:e.url,events:e.events,"no-unsafe":!0,"no-elevation":!0,"no-tooltip":!0,"no-link":!0}}):e._e()],1),e._v(" "),s("keep-alive",[e.active_tab==="manage"&&e.ffzEmote?s("ManageFFZ",{attrs:{emote:e.ffzEmote,getFFZ:e.getFFZ,"no-header":!0}}):e._e()],1),e._v(" "),e.active_tab==="urls"?s("div",{staticClass:"tw-c-background-base tw-pd-05"},[e.embed&&e.embed.urls&&e.embed.urls.length?s("table",e._l(e.embed.urls,function(r,a){return s("tbody",{key:a},[s("tr",[s("td",{staticClass:"tw-c-text-alt-2"},[e._v(e._s(e.tNumber(a+1))+".")]),e._v(" "),s("td",{staticClass:"tw-pd-x-05 tw-word-break-all"},[s("a",{staticClass:"ffz-link--inherit",attrs:{"data-url":r.url,href:r.url,rel:"noreferrer noopener",target:"_blank"}},[s("lc-url",{attrs:{url:r.url,"show-protocol":!0}})],1)])]),e._v(" "),r.shortened||r.flags&&r.flags.length?s("tr",[s("td",[e._v("\xA0")]),e._v(" "),s("td",{staticClass:"tw-pd-x-05"},[r.shortened?s("span",{staticClass:"ffz-pill"},[e._v(e._s(e.t("link-card.shortened","shortened")))]):e._e(),e._v(" "),e._l(r.flags,function(k){return r.flags?s("span",{staticClass:"ffz-pill ffz-pill--live"},[e._v(e._s(k))]):e._e()})],2)]):e._e()])}),0):e._e()]):e._e()],1)},"render"),w=[function(){var e=this,l=e.$createElement,s=e._self._c||l;return s("span",{staticClass:"tw-button-icon__icon"},[s("figure",{staticClass:"ffz-i-link-ext"})])},function(){var e=this,l=e.$createElement,s=e._self._c||l;return s("span",{staticClass:"tw-button-icon__icon"},[s("figure",{staticClass:"ffz-i-ellipsis-vert"})])},function(){var e=this,l=e.$createElement,s=e._self._c||l;return s("span",{staticClass:"tw-button-icon__icon"},[s("figure",{staticClass:"ffz-i-cancel"})])}],g=c(46949),x=c(10388),_=c.n(x),b=c(40638);const h={components:{ManageFFZ:b.Z,"chat-rich":async()=>(await c.e(2348).then(c.bind(c,18249))).default("./chat-rich.vue").default},props:["url","data","pos_x","pos_y","getZ","getFFZ","use_dest"],data(){const e={type:"link",force_rich:!0,is_mail:!1,url:this.url,text:this.url},l=this.getFFZ().resolve("chat");return{z:this.getZ(),active_tab:"preview",moreOpen:!1,rich_data:l.rich_providers.link.process.call(l,e),url_hash:null,loaded:!1,errored:!1,pinned:!1,embed:null,events:{on:(...s)=>this.getFFZ().on(...s),off:(...s)=>this.getFFZ().off(...s),emit:(...s)=>this.getFFZ().emit(...s)}}},computed:{isUnsafe(){return this.embed?.unsafe},ffzEmote(){return this.embed?.special?.type!=="ffz-emote"?null:{id:this.embed.special.id}},unsafeTip(){if(!Array.isArray(this.embed?.urls))return null;const e=Array.from(new Set(this.embed.urls.map(l=>l.flags).flat())).join(", ");return this.t("tooltip.link-unsafe","Caution: This URL is has been flagged as potentially harmful by: {reasons}",{reasons:e})},tabs(){const e={preview:{label:"Preview",label_i18n:"link-card.preview"}};return this.ffzEmote?.id&&(e.manage={label:"Manage Emote",label_i18n:"link-card.manage-emote"}),Array.isArray(this.embed?.urls)&&(e.urls={label:"Visited URLs",label_i18n:"tooltip.link.urls"},this.embed.urls.length>1&&(e.urls.pill=this.tNumber(this.embed.urls.length),this.embed.unsafe&&(e.urls.pill_classes=["ffz-pill--live"]))),e},accent(){return this.embed?.accent},_url(){return this.url instanceof URL?this.url:new URL(this.url)},targetUrl(){const e=this.use_dest?this.embed?.urls:null;if(Array.isArray(e)){for(const l of e)if(!l.shortened)return l.url}return this.url},urlPrefix(){return null},urlDomain(){return this._url.host},urlPath(){return this._url.toString().slice(this._url.origin.length)},moreActions(){const e=[];if(Array.isArray(this.embed?.actions))for(const l of this.embed.actions)e.push(l);return e},hasMoreActions(){return(this.moreActions?.length??0)>0}},beforeMount(){this.ffzEmit(":open",this),(0,g.sha256)(this.url).then(e=>{this.url_hash=e}),this.data.then(e=>{this.loaded=!0,this.ffzEmit(":load",this),this.embed=(0,g.deep_copy)(e),this.$nextTick(()=>this.handleResize())}).catch(e=>{console.error("Error loading link card data",e),this.errored=!0})},mounted(){this._on_resize=this.handleResize.bind(this),window.addEventListener("resize",this._on_resize),this.createDrag()},beforeDestroy(){this.ffzEmit(":close",this),this.destroyDrag(),this._on_resize&&(window.removeEventListener("resize",this._on_resize),this._on_resize=null)},methods:{toggleMore(){this.moreOpen=!this.moreOpen},closeMore(){this.moreOpen=!1},clickMore(e,l){this.moreOpen=!1,e.type!=="link"&&l.preventDefault()},constrain(){const e=this.$el;let l=e.parentElement,s=!1;l||(l=document.body);const r=e.getBoundingClientRect(),a=l.getBoundingClientRect();r.top<a.top?(e.style.top=`${e.offsetTop+(a.top-r.top)}px`,s=!0):r.bottom>a.bottom&&(e.style.top=`${e.offsetTop-(r.bottom-a.bottom)}px`,s=!0),r.left<a.left?(e.style.left=`${e.offsetLeft+(a.left-r.left)}px`,s=!0):r.right>a.right&&(e.style.left=`${e.offsetLeft-(r.right-a.right)}px`,s=!0),s&&this.displace&&this.displace.reinit()},pin(){this.pinned=!0,this.$emit("pin"),this.ffzEmit(":pin",this)},cleanTips(){this.$nextTick(()=>this.ffzEmit("tooltips:cleanup"))},close(){this.$emit("close")},createDrag(){this.$nextTick(()=>{this.displace=_()(this.$el,{handle:this.$el.querySelector(".ffz-viewer-card__header"),highlightInputs:!0,constrain:!0,onMouseDown:()=>this.onFocus(),onTouchStart:()=>this.onFocus(),ignoreFn:e=>e.target.closest(".viewer-card-drag-cancel")!=null})})},destroyDrag(){this.displace&&(this.displace.destroy(),this.displace=null)},handleResize(){this.displace&&this.displace.reinit()},onFocus(){this.z=this.getZ()},focus(){this.$el.focus()},ffzEmit(e,...l){this.$emit("emit",e,...l)}}};var u=c(72934),n=(0,u.Z)(h,C,w,!1,null,null,null);const m=n.exports},72934:(M,z,c)=>{"use strict";c.d(z,{Z:()=>C});function C(w,g,x,_,b,d,h,u){var n=typeof w=="function"?w.options:w;g&&(n.render=g,n.staticRenderFns=x,n._compiled=!0),_&&(n.functional=!0),d&&(n._scopeId="data-v-"+d);var m;if(h?(m=v(function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__<"u"&&(s=__VUE_SSR_CONTEXT__),b&&b.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(h)},"hook"),n._ssrRegister=m):b&&(m=u?function(){b.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:b),m)if(n.functional){n._injectStyles=m;var e=n.render;n.render=v(function(r,a){return m.call(a),e(r,a)},"renderWithStyleInjection")}else{var l=n.beforeCreate;n.beforeCreate=l?[].concat(l,m):[m]}return{exports:w,options:n}}v(C,"normalizeComponent")}}]);})();

//# sourceMappingURL=emote-cards.js.map