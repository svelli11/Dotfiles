(()=>{var w=Object.defineProperty;var p=(u,i)=>w(u,"name",{value:i,configurable:!0});(globalThis.ffzWebpackJsonp=globalThis.ffzWebpackJsonp||[]).push([[2348],{18249:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>n});const n=e(32668)},61669:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>f});var n=p(function(m,s){var d=s._c;return d("strong",{staticClass:"ffz-tooltip ffz--blocked",attrs:{"data-text":s.props.token.text,"data-categories":JSON.stringify(s.props.token.categories),"data-tooltip-type":"amterm"}},[s._v(`
	\xD7\xD7\xD7
`)])},"render"),o=[],h=e(72934),a={},c=(0,h.Z)(a,n,o,!0,null,null,null);const f=c.exports},87307:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>f});var n=p(function(m,s){var d=s._c;return d("strong",{staticClass:"ffz-tooltip ffz--blocked ffz-i-cancel",attrs:{"data-text":s.props.token.text,"data-tooltip-type":"blocked"}},[s._v(`
	\xD7\xD7\xD7
`)])},"render"),o=[],h=e(72934),a={},c=(0,h.Z)(a,n,o,!0,null,null,null);const f=c.exports},93114:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>f});var n=p(function(m,s){var d=s._c;return d("span",{staticClass:"ffz-cheer ffz-tooltip",attrs:{"data-prefix":s.props.token.prefix,"data-amount":s.props.token.amount,"data-tier":s.props.token.tier,"data-individuals":JSON.stringify(s.props.token.individuals||null),alt:s.props.token.text,"data-tooltip-type":"cheer"}})},"render"),o=[],h=e(72934),a={},c=(0,h.Z)(a,n,o,!0,null,null,null);const f=c.exports},27778:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>f});var n=p(function(m,s){var d=s._c;return d("strong",{staticClass:"ffz--highlight"},[s._v(`
	`+s._s(s.props.token.text)+`
`)])},"render"),o=[],h=e(72934),a={},c=(0,h.Z)(a,n,o,!0,null,null,null);const f=c.exports},38650:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>m});var n=p(function(){var s=this,d=s.$createElement,g=s._self._c||d;return g("div")},"render"),o=[];const a={};var c=e(72934),f=(0,c.Z)(a,n,o,!1,null,null,null);const m=f.exports},12868:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>f});var n=p(function(m,s){var d=s._c;return d("a",{staticClass:"ffz-tooltip",attrs:{href:s.props.token.url,"data-url":s.props.token.url,"data-is-mail":s.props.token.is_mail,"data-tooltip-type":"link",rel:"noopener noreferrer",target:"_blank"}},[s._v(`
	`+s._s(s.props.token.text)+`
`)])},"render"),o=[],h=e(72934),a={},c=(0,h.Z)(a,n,o,!0,null,null,null);const f=c.exports},30884:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>f});var n=p(function(m,s){var d=s._c;return d("strong",{staticClass:"chat-line__message-mention",class:{"ffz--mention-me":s.props.token.me}},[s._v(`
	`+s._s(s.props.token.text)+`
`)])},"render"),o=[],h=e(72934),a={},c=(0,h.Z)(a,n,o,!0,null,null,null);const f=c.exports},81793:(u,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>y});var n=e(17159),o=e(46949);const h="https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0";let a;const f={props:["data","url","events","forceFull","forceUnsafe","forceMedia","forceShort","forceMid","noLink","noTooltip","noElevation","noUnsafe"],data(){return{has_tokenizer:!1,loaded:!1,version:null,player_state:{},fragments:{},error:null,accent:null,short:null,mid:null,full:null,unsafe:!1,urls:null,i18n_prefix:null,allow_media:!1,allow_unsafe:!1}},computed:{has_full(){return!(this.full==null||this.full?.type==="media"&&!this.allow_media)}},watch:{data(){this.reset()},events(){this.listen()}},created(){this.loadTokenizer(),this.listen(),this.load(),this.handle_click=this.handleClick.bind(this)},beforeDestroy(){this.unlisten(),this.clearRefresh(),this.handle_click=null},methods:{handleClick(r){if(!this.events?.emit||r.ctrlKey||r.shiftKey)return;const t=r.currentTarget,l=t?.dataset;if(!l)return;const v=n.FFZEvent.makeEvent({url:l.url??t.href,source:r});if(this.events.emit("chat:click-link",v),v.defaultPrevented)return r.preventDefault(),!0},async loadTokenizer(){a?this.has_tokenizer=!0:(a=await Promise.all([e.e(2009),e.e(208)]).then(e.bind(e,30642)),this.has_tokenizer=!0)},listen(){this.unlisten(),this.events?.on&&(this._es=this.events,this._es.on("chat:update-link-resolver",this.checkReset,this))},unlisten(){this._es?.off&&(this._es.off("chat:update-link-resolver",this.checkReset,this),this._es=null)},checkReset(r){(!r||r&&r===this.url)&&this.reset()},clearRefresh(){this._refresh_timer&&(clearTimeout(this._refresh_timer),this._refresh_timer=null)},reset(r=!1){this.clearRefresh(),this.player_state={},this.loaded=!1,this.error=null,this.version=null,this.accent=null,this.short=null,this.mid=null,this.full=null,this.fragments={},this.unsafe=!1,this.urls=null,this.i18n_prefix=null,this.allow_media=!1,this.allow_unsafe=!1,this.load(r)},async load(r=!1){this.clearRefresh();let t;try{if(t=this.data.getData(r),t instanceof Promise){const l=(0,o.has)(this.data,"timeout")?this.data.timeout:1e3;l?t=await(0,o.timeout)(t,l):t=await t}}catch(l){t={error:String(l)}}if(t||(t={error:{type:"i18n",key:"card.empty",phrase:"No data was returned."}}),t.error&&(t={short:{type:"header",logo:{type:"image",url:h},title:{type:"i18n",key:"card.error",phrase:"An error occurred."},subtitle:t.error}}),t.refresh)try{this.clearRefresh();const l=new Date(t.refresh).getTime(),v=l-Date.now();v>0&&(this._refresh_timer=setTimeout(()=>this.load(!0),v+100*Math.floor(Math.random()*100)))}catch{}this.loaded=!0,this.version=t.v,this.error=t.error,this.accent=t.accent,this.short=t.short,this.mid=t.mid,this.full=t.full,this.fragments=t.fragments??{},this.unsafe=t.unsafe,this.urls=t.urls,this.i18n_prefix=t.i18n_prefix,this.allow_media=t.allow_media,this.allow_unsafe=t.allow_unsafe},renderCard(r){if(this.data.renderBody){const t=this.data.renderBody(r);return Array.isArray(t)?t:[t]}return[this.renderUnsafe(r),this.renderBody(r)]},renderUnsafe(r){if(!this.unsafe||this.noUnsafe)return null;const t=Array.from(new Set(this.urls.map(l=>l.flags).flat())).join(", ");return r("div",{class:"ffz--corner-flag ffz--corner-flag__warn ffz-tooltip ffz-tooltip--no-mouse",attrs:{"data-title":this.t("tooltip.link-unsafe","Caution: This URL is has been flagged as potentially harmful by: {reasons}",{reasons:t.toLowerCase()})}},[r("figure",{class:"ffz-i-attention"})])},renderBody(r){let t;return this.forceShort?t=this.short:this.forceMid?t=this.mid:this.forceFull||this.forceFull!==!1&&this.full?t=this.full:this.forceMid||this.forceMid!==!1&&this.mid?t=this.mid:t=this.short,this.has_tokenizer&&this.version&&this.version>a.VERSION&&(t=null),this.has_tokenizer&&this.loaded&&t?r("div",{class:"ffz--card-rich tw-full-width tw-overflow-hidden tw-flex tw-flex-column"},a.renderTokens(t,r,{vue:!0,tList:(...l)=>this.tList(...l),i18n:this.getI18n(),last_player:0,player_state:this.player_state,togglePlayer:l=>{this.$set(this.player_state,l,!this.player_state[l])},link_click_handler:this.handle_click,fragments:this.fragments,i18n_prefix:this.i18n_prefix,allow_media:this.forceMedia??this.allow_media,allow_unsafe:this.forceUnsafe??this.allow_unsafe})):this.renderBasic(r)},renderBasic(r){let t,l;return this.loaded&&this.forceFull&&!this.full?l="null":this.loaded&&this.forceMid&&!this.mid?l="null -- will use short instead":this.error?(t=this.t("card.error","An error occurred."),l=this.error):this.loaded&&this.has_tokenizer?(t=this.title,l=this.description):l=this.t("card.loading","Loading..."),!t&&!l&&(l=this.t("card.empty","No data was returned.")),l=l?l.split(/\n+/).slice(0,2).map(v=>r("div",{class:"tw-c-text-alt-2 tw-ellipsis tw-mg-x-05",attrs:{title:v}},[v])):[],[r("div",{class:"ffz--header-image"}),r("div",{class:"ffz--card-text tw-full-width tw-overflow-hidden tw-flex tw-flex-column tw-justify-content-center"},[t?r("div",{class:"chat-card__title tw-ellipsis tw-mg-x-05"},[r("span",{class:"tw-strong",attrs:{title:t}},[t])]):null,...l])]}},render(r){let t=r("div",{class:"tw-flex tw-flex-nowrap tw-full-width tw-pd-05"},this.renderCard(r));const l=!this.noTooltip&&this.has_full&&!this.forceFull;return this.url&&!this.noLink?t=r("a",{class:[l&&"ffz-tooltip",this.accent&&"ffz-accent-card",!this.error&&"ffz-interactable--hover-enabled","tw-block tw-border-radius-medium tw-full-width ffz-interactable ffz-interactable--default tw-interactive"],on:{click:this.handleClick},attrs:{"data-tooltip-type":"link","data-url":this.url,"data-is-mail":!1,target:"_blank",rel:"noreferrer noopener",href:this.url}},[t]):l&&(t=r("div",{class:"ffz-tooltip tw-block tw-border-radius-medium tw-full-width",attrs:{"data-tooltip-type":"link","data-url":this.url,"data-is-mail":!1}},[t])),r("div",{class:["tw-border-radius-medium ffz--chat-card tw-relative",this.noElevation?"":"tw-elevation-1",this.unsafe?"ffz--unsafe":""],style:{"--ffz-color-accent":this.accent}},[r("div",{class:"tw-border-radius-medium tw-c-background-base tw-flex tw-full-width"},[t])])}};var m=e(72934),s,d,g=(0,m.Z)(f,s,d,!1,null,null,null);const y=g.exports},32668:(u,i,e)=>{var n={"./chat-automod-blocked.vue":61669,"./chat-blocked.vue":87307,"./chat-cheer.vue":93114,"./chat-highlight.vue":27778,"./chat-line.vue":38650,"./chat-link.vue":12868,"./chat-mention.vue":30884,"./chat-rich.vue":81793};function o(a){var c=h(a);return e(c)}p(o,"webpackContext");function h(a){if(!e.o(n,a)){var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}return n[a]}p(h,"webpackContextResolve"),o.keys=p(function(){return Object.keys(n)},"webpackContextKeys"),o.resolve=h,u.exports=o,o.id=32668}}]);})();

//# sourceMappingURL=chat.js.map