(()=>{var Z=Object.defineProperty;var a=(R,x)=>Z(R,"name",{value:x,configurable:!0});(()=>{var R={8460:(d,u)=>{var l;const _=1n,i=4n,M=26n,h=8n,o=6n,k=0b1111111100001111111111111111111111111100000000111111n,f=0b0000000011110000000000000000000000000011111111000000n,A=0b1n,O=0b1111n,E=0b111111n,m=0b11111111n,v=0b111111111111n,p=0b11111111111111n,C=0b11111111111111111111111111n,S=0b111111111111111111111111111111111n,K="0123456789BCDFGHJKLMNPQRSTVWXY",U=B(K);function V(n){return n.replace(/-/g,"")}a(V,"removeDashes");function B(n){const e=new Map;for(let t=0;t<n.length;t++)e.set(n[t],BigInt(t));return e}a(B,"createBase30Map");function W(n){const e=30n;let t=0n;for(const s of n){if(!U.has(s))continue;const r=U.get(s);t=t*e+r}return t}a(W,"base30Decode");function D(n){const e=30n,t=[];for(;n>0n;){const s=n%e;t.push(K[s]),n=L(n,e)}return t.reverse().join("")}a(D,"base30Encode");function L(n,e){let t=0n;for(let s=63n;s>=0n;s--)n>>s>=e&&(t+=1n<<s,n-=e<<s);return t}a(L,"divMod");function z(n){const e=(3-n.length%3)%3,t=n.padStart(n.length+e,"0"),s=[];for(let r=0;r<t.length;r+=3)r>0&&s.push("-"),s.push(t.slice(r,r+3));for(;s.reduce((r,T)=>r+T.length,0)<11;)s.length>0&&s.unshift("-"),s.unshift("000");return s.join("")}a(z,"formatCode");const c=Symbol("valueOf"),b=class b{constructor(e){if(arguments.length===0){this[c]=0;return}if(arguments.length>1)throw new Error("Too many arguments");if(typeof e=="string")this[c]=W(V(e));else if(typeof e=="bigint")this[c]=e;else if(e instanceof b)this[c]=e[c];else throw new Error("Invalid argument")}inverse(){const e=D(this[c]).padStart(9,"0").split("").reverse().join("");return new b(W(e))}getMeta(){const e=this.inverse()[c],t=e>>M>>h>>o&O,s=e>>o&m,r=t<<h|s;return Number(r)}withMeta(e){if(e=BigInt(e),e>p)throw new Error("Meta value too large");let t=this.inverse()[c];const s=(e&p)>>h,r=e&m;return t=t&k,t=t|s<<M<<h<<o|r<<o,new b(t).inverse()}getValue(){const e=this.inverse()[c],t=e>>i>>M>>h>>o&A,s=e>>h>>o&C,r=e&E,T=t<<M<<o|s<<o|r;return Number(T)}withValue(e){if(e=BigInt(e),e>S)throw new Error("Value too large");let t=this.inverse()[c];const s=e>>M>>o&A,r=e>>o&C,T=e&E;return t=t&f,t=t|s<<i<<M<<h<<o|r<<h<<o|T,new b(t).inverse()}toString(){return z(D(this[c]))}[Symbol.toPrimitive](e){return e==="number"?this[c]:this.toString()}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.toStringTag](){return"Code"}toJSON(){return this.toString()}valueOf(){return this[c]}equals(e){return this[c]===e[c]}};a(b,"Code");let g=b;function G(n){return new g(n).getMeta()===2117}a(G,"isNSOCourseCode");function F(n){return new g(n).getMeta()===2245}a(F,"isNSOMakerCode");function j(n){return new g(n).getMeta()===808}a(j,"isOCWCourseCode");function J(n){return new g(n).getMeta()===1337}a(J,"isOCWMakerCode");function P(n){switch(new g(n).getMeta()){case 2117:return"NSO_COURSE";case 2245:return"NSO_MAKER";case 808:return"OCW_COURSE";case 1337:return"OCW_MAKER";default:return"UNKNOWN"}}a(P,"getCodeType"),u.EK=g,u.nJ=808,u.hU=1337,u.Mk=2117,u.S5=2245,l=G,l=F,l=j,l=J,l=P}},x={};function y(d){var u=x[d];if(u!==void 0)return u.exports;var l=x[d]={exports:{}};return R[d](l,l.exports,y),l.exports}a(y,"__webpack_require__");var Y={};(()=>{"use strict";var d=y(8460);const u=/\b(?:[0-9BCDFGHJKLMNPQRSTVWXY]{3}-?){2}[0-9BCDFGHJKLMNPQRSTVWXY]{3}\b/gi,N=class N extends FrankerFaceZ.utilities.addon.Addon{constructor(...w){super(...w),this.inject("chat"),this.inject("settings"),this.settings.add("addon.smm2-links.enabled",{default:null,requires:["context.categoryID"],process(_,i){return i??_.get("context.categoryID")==511399},ui:{sort:-1,path:"Add-Ons > SMM2 Links >> General",title:"Enable clickable Mario Maker 2 IDs.",description:"By default, this is only enabled if the current category is Super Mario Maker 2.",component:"setting-check-box"}}),this.settings.add("addon.smm2-links.allow-embed",{default:!1,ui:{path:"Add-Ons > SMM2 Links >> General",title:"Allow rich embeds for Mario Maker 2 IDs.",description:"**Note:** This only works when the IDs are clickable. Make sure to enable rich embeds in [Chat >> Appearance > Rich Content](~chat.appearance.rich_content).",component:"setting-check-box",extra:{component:"chat-rich-example",getChat:()=>this.chat,url:"https://smm2.wizul.us/smm2/course/SYG-7FR-QLG"}}}),this.settings.add("addon.smm2-links.viewer_link",{default:0,ui:{path:"Add-Ons > SMM2 Links >> General",title:"Wizulus's Viewer Link",description:"You can optionally include a link to view makers and courses using Wizulus's SMM2 Viewer.",component:"setting-select-box",data:[{value:0,title:"Disabled"},{value:1,title:"Replace ID link"},{value:2,title:"Add [Viewer] next to ID link"}]}});const I=this;this.tokenizer={type:"smm_link",priority:0,render(_,i){return i("strong",null,_.meta,": ",_.code)},process(_){if(!_||!_.length||!this.context.get("addon.smm2-links.enabled"))return;const i=[],M=this.context.get("addon.smm2-links.allow-embed"),h=this.context.get("addon.smm2-links.viewer_link");for(const o of _){if(o.type!=="text"){i.push(o);continue}u.lastIndex=0;const k=o.text;let f=0,A;for(;A=u.exec(k);){const O=A[0];let E,m;try{E=new d.EK(O),m=E.getMeta()}catch(K){I.log.debug("Unable to parse code:",O,K);continue}let v=!0,p;if(h===1)p="https://smm2.wizul.us/smm2/course/";else if(m===d.nJ)p="https://opencourse.world/courses/";else if(m===d.hU)p="https://opencourse.world/makers/";else if(m===d.Mk)p="https://makercentral.io/levels/view/",v=!1;else if(m===d.S5)p="https://makercentral.io/users/",v=!1;else continue;const C=A.index;f!==C&&i.push({type:"text",text:k.slice(f,C)});let S=E.toString();v||(S=S.replace(/-/g,"")),S=p+S,i.push({type:"link",allow_rich:M,url:S,is_mail:!1,text:O}),h===2&&(i.push({type:"text",text:" ["}),i.push({type:"link",allow_rich:!1,url:`https://smm2.wizul.us/smm2/course/${E.toString()}`,is_mail:!1,text:"Viewer"}),i.push({type:"text",text:"]"})),f=C+O.length}f===0?i.push(o):f<k.length&&i.push({type:"text",text:k.slice(f)})}return i}}}onEnable(){this.chat.addTokenizer(this.tokenizer);for(const w of["addon.smm2-links.enabled","addon.smm2-links.allow-embed","addon.smm2-links.viewer_link"])this.chat.context.on(`changed:${w}`,this.onChanged,this)}onDisable(){this.chat.removeTokenizer(this.tokenizer);for(const w of["addon.smm2-links.enabled","addon.smm2-links.allow-embed","addon.smm2-links.viewer_link"])this.chat.context.off(`changed:${w}`,this.onChanged,this)}onChanged(){this.emit("chat:update-line-tokens")}};a(N,"SMM2Links");let l=N;l.register("smm2-links",null,"1.2.0")})()})();})();

//# sourceMappingURL=script.js.map