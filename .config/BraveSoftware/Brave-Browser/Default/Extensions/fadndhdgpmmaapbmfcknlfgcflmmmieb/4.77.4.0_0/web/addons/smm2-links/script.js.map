{"version":3,"file":"smm2-links/script.js","mappings":"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","sources":["webpack://ffz-addons/./node_modules/.pnpm/@wizulus+code@1.0.2/node_modules/@wizulus/code/code.js","webpack://ffz-addons/webpack/bootstrap","webpack://ffz-addons/./src/smm2-links/index.jsx"],"sourcesContent":["const OCW_COURSE_META = 808\nconst OCW_MAKER_META = 1337\nconst NSO_COURSE_META = 2117\nconst NSO_MAKER_META = 2245\n\n// Nintendo Course Bit Map: 0000000000000000000_1000__________________________01000101______\n// Nintendo Player Bit Map: 0000000000000000000_1000__________________________11000101______\n\n// The layout is PADDING, VALUE_A, META_A, VALUE_B, META_B, VALUE_C\n\nconst VALUE_SIZE_A = 1n\nconst META_SIZE_A = 4n\nconst VALUE_SIZE_B = 26n\nconst META_SIZE_B = 8n\nconst VALUE_SIZE_C = 6n\n\n// OR this with an uint64 to filter out the meta bits\nconst VALUE_MASK = 0b1111111100001111111111111111111111111100000000111111n\n\n// OR this with an uint64 to filter out the value bits\nconst META_MASK = 0b0000000011110000000000000000000000000011111111000000n\n\nconst INT1_MASK = 0b1n\nconst INT4_MASK = 0b1111n\nconst INT6_MASK = 0b111111n\nconst INT8_MASK = 0b11111111n\nconst INT12_MASK = 0b111111111111n\nconst INT14_MASK = 0b11111111111111n\nconst INT26_MASK = 0b11111111111111111111111111n\nconst INT33_MASK = 0b111111111111111111111111111111111n\n\nconst nintendoBase30 = \"0123456789BCDFGHJKLMNPQRSTVWXY\"\n\nconst base30Map = createBase30Map(nintendoBase30)\n\n/**\n * Removes dashes from a string\n * @param {string} input \n * @returns string\n */\nfunction removeDashes(input) {\n    return input.replace(/-/g, \"\")\n}\n\n/**\n * Creates a map from a base30 character to its value\n * @param {string} base30\n * @returns {Map<string, number>}\n */\nfunction createBase30Map(base30) {\n    const map = new Map()\n    for (let i = 0; i < base30.length; i++) {\n        map.set(base30[i], BigInt(i))\n    }\n    return map\n}\n\n/**\n * Decodes a base30 string into a number\n * @param {string} encoded \n * @returns {number}\n */\nfunction base30Decode(encoded) {\n    const base = 30n\n    let decimal = 0n\n    for (const char of encoded) {\n        if (!base30Map.has(char)) continue\n        const value = base30Map.get(char)\n        decimal = decimal * base + value\n    }\n    return decimal\n}\n\nfunction base30Encode(decimal) {\n    const base = 30n\n    const encoded = []\n    while (decimal > 0n) {\n        const index = decimal % base\n        encoded.push(nintendoBase30[index])\n        decimal = divMod(decimal, base)\n    }\n    return encoded.reverse().join(\"\")\n}\n\n/**\n * Performs integer division on a number\n * @param {number} numerator\n * @param {number} denominator\n * @returns {number}\n */\nfunction divMod(numerator, denominator) {\n    let quotient = 0n\n    for (let i = 63n; i >= 0n; i--) {\n        if ((numerator >> i) >= denominator) {\n            quotient += 1n << i\n            numerator -= denominator << i\n        }\n    }\n    return quotient\n}\n\n/**\n * Formats a base30 string into a code with dashes, and a minimum of 3 segments.\n * @param {string} input \n * @returns {string}\n */\nfunction formatCode(input) {\n    const padding = (3 - input.length % 3) % 3\n    const paddedInput = input.padStart(input.length + padding, \"0\")\n    const formattedString = []\n    for (let i = 0; i < paddedInput.length; i += 3) {\n        if (i > 0) formattedString.push(\"-\")\n        formattedString.push(paddedInput.slice(i, i + 3))\n    }\n    while (formattedString.reduce((a, b) => a + b.length, 0) < 11) {\n        if (formattedString.length > 0) formattedString.unshift(\"-\")\n        formattedString.unshift(\"000\")\n    }\n    return formattedString.join(\"\")\n}\n\nconst VALUE_OF = Symbol('valueOf')\n\nclass Code {\n    /**\n     * Constructs a code from an optional string or a number\n     * @param {string | number | Code} [value]\n     */\n    constructor(value) {\n        if (arguments.length === 0) {\n            this[VALUE_OF] = 0\n            return\n        }\n        if (arguments.length > 1) {\n            throw new Error(\"Too many arguments\")\n        }\n        if (typeof value === \"string\") {\n            this[VALUE_OF] = base30Decode(removeDashes(value))\n        } else if (typeof value === \"bigint\") {\n            this[VALUE_OF] = value\n        } else if (value instanceof Code) {\n            this[VALUE_OF] = value[VALUE_OF]\n        } else {\n            throw new Error(\"Invalid argument\")\n        }\n    }\n\n    /**\n     * @private\n     * Inverts the base30 representation of the code.\n     * @returns {Code}\n     */\n    inverse() {\n        const s = base30Encode(this[VALUE_OF]).padStart(9, \"0\").split(\"\").reverse().join(\"\")\n         return new Code(base30Decode(s))\n    }\n\n    /**\n     * Reads the meta value of the code\n     * @returns {number}\n     */\n    getMeta() {\n        const i = this.inverse()[VALUE_OF]\n        const a = i >> VALUE_SIZE_B >> META_SIZE_B >> VALUE_SIZE_C & INT4_MASK\n        const b = i >> VALUE_SIZE_C & INT8_MASK\n        const ret = (a << META_SIZE_B) | b\n        return Number(ret)\n    }\n\n    /**\n     * Constructs a new code with the given meta value\n     * @param {number} meta\n     * @returns {Code}\n     * @throws {Error} If the meta value is too large\n     */\n    withMeta(meta) {\n        meta = BigInt(meta)\n        if (meta > INT14_MASK) {\n            throw new Error(\"Meta value too large\")\n        }\n        let i = this.inverse()[VALUE_OF]\n        const a = (meta & INT14_MASK) >> META_SIZE_B\n        const b = meta & INT8_MASK\n        i = i & VALUE_MASK\n        i = i | (a << VALUE_SIZE_B << META_SIZE_B << VALUE_SIZE_C) | (b << VALUE_SIZE_C)\n        return new Code(i).inverse()\n    }\n\n    /**\n     * Reads the value of the code\n     * @returns {number}\n     */\n    getValue() {\n        const i = this.inverse()[VALUE_OF]\n        const a = i >> META_SIZE_A >> VALUE_SIZE_B >> META_SIZE_B >> VALUE_SIZE_C & INT1_MASK\n        const b = i >> META_SIZE_B >> VALUE_SIZE_C & INT26_MASK\n        const c  = i & INT6_MASK\n        const value = (a << VALUE_SIZE_B << VALUE_SIZE_C) | (b << VALUE_SIZE_C) | c\n        return Number(value)\n    }\n\n    /**\n     * Constructs a new code with the given value\n     * @param {number} value\n     * @returns {Code}\n     * @throws {Error} if the value is too large\n     */\n    withValue(value) {\n        value = BigInt(value)\n        if (value > INT33_MASK) {\n            throw new Error(\"Value too large\")\n        }\n        let i = this.inverse()[VALUE_OF]\n        const a = (value >> VALUE_SIZE_B >> VALUE_SIZE_C) & INT1_MASK\n        const b = (value >> VALUE_SIZE_C) & INT26_MASK\n        const c = value & INT6_MASK\n        i = i & META_MASK\n        i = i | (a << META_SIZE_A << VALUE_SIZE_B << META_SIZE_B << VALUE_SIZE_C) | (b << META_SIZE_B << VALUE_SIZE_C) | c\n        return new Code(i).inverse()\n    }\n\n    /**\n     * @returns {string}\n     */\n    toString() {\n        return formatCode(base30Encode(this[VALUE_OF]))\n    }\n\n    [Symbol.toPrimitive](hint) {\n        if (hint === \"number\") {\n            return this[VALUE_OF]\n        }\n        return this.toString()\n    }\n\n    [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n        return this.toString()\n    }\n\n    [Symbol.toStringTag]() {\n        return \"Code\"\n    }\n\n    /**\n     * @returns {string}\n     */\n    toJSON() {\n        return this.toString()\n    }\n\n    /**\n     * @returns {number}\n     */\n    valueOf() {\n        return this[VALUE_OF]\n    }\n\n    /**\n     * @param {Code} other\n     * @returns {boolean}\n     */\n    equals(other) {\n        return this[VALUE_OF] === other[VALUE_OF]\n    }\n}\n\n/**\n * Determines if a given code is an NSO course\n * @param {string} code \n * @returns {boolean}\n */\nfunction isNSOCourseCode(code) {\n    return new Code(code).getMeta() === NSO_COURSE_META\n}\n\n/**\n * Determines if a given code is an NSO maker\n * @param {string} code\n * @returns {boolean}\n */\nfunction isNSOMakerCode(code) {\n    return new Code(code).getMeta() === NSO_MAKER_META\n}\n\n/**\n * Determines if a given code is an OCW course\n * @param {string} code\n * @returns {boolean}\n */\nfunction isOCWCourseCode(code) {\n    return new Code(code).getMeta() === OCW_COURSE_META\n}\n\n/**\n * Determines if a given code is an OCW maker\n * @param {string} code \n * @returns {boolean}\n */\nfunction isOCWMakerCode(code) {\n    return new Code(code).getMeta() === OCW_MAKER_META\n}\n\n/**\n * Returns the type of a given code, returning \"NSO_COURSE\", \"NSO_MAKER\", \"OCW_COURSE\", \"OCW_MAKER\", or \"UNKNOWN\".\n * @param {string} code \n * @returns {\"NSO_COURSE\"|\"NSO_MAKER\"|\"OCW_COURSE\"|\"OCW_MAKER\"|\"UNKNOWN\"}\n */\nfunction getCodeType(code) {\n    switch (new Code(code).getMeta()) {\n        case NSO_COURSE_META:\n            return \"NSO_COURSE\"\n        case NSO_MAKER_META:\n            return \"NSO_MAKER\"\n        case OCW_COURSE_META:\n            return \"OCW_COURSE\"\n        case OCW_MAKER_META:\n            return \"OCW_MAKER\"\n        default:\n            return \"UNKNOWN\"\n    }\n}\n\nexports.Code = Code\nexports.OCW_COURSE_META = OCW_COURSE_META\nexports.OCW_MAKER_META = OCW_MAKER_META\nexports.NSO_COURSE_META = NSO_COURSE_META\nexports.NSO_MAKER_META = NSO_MAKER_META\nexports.isNSOCourseCode = isNSOCourseCode\nexports.isNSOMakerCode = isNSOMakerCode\nexports.isOCWCourseCode = isOCWCourseCode\nexports.isOCWMakerCode = isOCWMakerCode\nexports.getCodeType = getCodeType\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","'use strict';\n\nimport { Code, OCW_COURSE_META, OCW_MAKER_META, NSO_COURSE_META, NSO_MAKER_META } from '@wizulus/code';\n\nconst SMM2_CODE = /\\b(?:[0-9BCDFGHJKLMNPQRSTVWXY]{3}-?){2}[0-9BCDFGHJKLMNPQRSTVWXY]{3}\\b/gi;\n\n\nclass SMM2Links extends Addon {\n\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('chat');\n\t\tthis.inject('settings');\n\n\t\tthis.settings.add('addon.smm2-links.enabled', {\n\t\t\tdefault: null,\n\t\t\trequires: ['context.categoryID'],\n\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val == null )\n\t\t\t\t\treturn ctx.get('context.categoryID') == 511399;\n\t\t\t\treturn val;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tsort: -1,\n\t\t\t\tpath: 'Add-Ons > SMM2 Links >> General',\n\t\t\t\ttitle: 'Enable clickable Mario Maker 2 IDs.',\n\t\t\t\tdescription: 'By default, this is only enabled if the current category is Super Mario Maker 2.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('addon.smm2-links.allow-embed', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > SMM2 Links >> General',\n\t\t\t\ttitle: 'Allow rich embeds for Mario Maker 2 IDs.',\n\t\t\t\tdescription: '**Note:** This only works when the IDs are clickable. Make sure to enable rich embeds in [Chat >> Appearance > Rich Content](~chat.appearance.rich_content).',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\textra: {\n\t\t\t\t\tcomponent: 'chat-rich-example',\n\t\t\t\t\tgetChat: () => this.chat,\n\t\t\t\t\turl: `https://smm2.wizul.us/smm2/course/SYG-7FR-QLG`\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('addon.smm2-links.viewer_link', {\n\t\t\tdefault: 0,\n\t\t\tui: {\n\t\t\t\tpath: 'Add-Ons > SMM2 Links >> General',\n\t\t\t\ttitle: 'Wizulus\\'s Viewer Link',\n\t\t\t\tdescription: 'You can optionally include a link to view makers and courses using Wizulus\\'s SMM2 Viewer.',\n\t\t\t\tcomponent: 'setting-select-box',\n\n\t\t\t\tdata: [\n\t\t\t\t\t{ value: 0, title: 'Disabled' },\n\t\t\t\t\t{ value: 1, title: 'Replace ID link' },\n\t\t\t\t\t{ value: 2, title: 'Add [Viewer] next to ID link' },\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tconst t = this;\n\n\t\tthis.tokenizer = {\n\t\t\ttype: 'smm_link',\n\t\t\tpriority: 0,\n\n\t\t\trender(token, createElement) {\n\t\t\t\treturn (<strong>{token.meta}: {token.code}</strong>)\n\t\t\t},\n\n\t\t\tprocess(tokens) {\n\t\t\t\tif ( ! tokens || ! tokens.length || ! this.context.get('addon.smm2-links.enabled') )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst out = [],\n\t\t\t\t\tallow_rich = this.context.get('addon.smm2-links.allow-embed'),\n\t\t\t\t\tviewer_link = this.context.get('addon.smm2-links.viewer_link');\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tfor(const token of tokens) {\n\t\t\t\t\tif ( token.type !== 'text' ) {\n\t\t\t\t\t\tout.push(token);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tSMM2_CODE.lastIndex = 0;\n\t\t\t\t\tconst text = token.text;\n\t\t\t\t\tlet idx = 0, match;\n\n\t\t\t\t\twhile((match = SMM2_CODE.exec(text))) {\n\t\t\t\t\t\tconst code = match[0];\n\n\t\t\t\t\t\tlet parsed, meta;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tparsed = new Code(code);\n\t\t\t\t\t\t\tmeta = parsed.getMeta();\n\t\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\t\tt.log.debug('Unable to parse code:', code, err);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tlet dashes = true,\n\t\t\t\t\t\t\tbase;\n\t\t\t\t\t\tif ( viewer_link === 1 )\n\t\t\t\t\t\t\tbase = 'https://smm2.wizul.us/smm2/course/';\n\t\t\t\t\t\telse if ( meta === OCW_COURSE_META )\n\t\t\t\t\t\t\tbase = 'https://opencourse.world/courses/';\n\t\t\t\t\t\telse if ( meta === OCW_MAKER_META )\n\t\t\t\t\t\t\tbase = 'https://opencourse.world/makers/';\n\t\t\t\t\t\telse if ( meta === NSO_COURSE_META ) {\n\t\t\t\t\t\t\tbase = 'https://makercentral.io/levels/view/';\n\t\t\t\t\t\t\tdashes = false;\n\t\t\t\t\t\t} else if ( meta === NSO_MAKER_META ) {\n\t\t\t\t\t\t\tbase = 'https://makercentral.io/users/';\n\t\t\t\t\t\t\tdashes = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst nix = match.index;\n\t\t\t\t\t\tif ( idx !== nix )\n\t\t\t\t\t\t\tout.push({type: 'text', text: text.slice(idx, nix)});\n\n\t\t\t\t\t\tlet url = parsed.toString();\n\t\t\t\t\t\tif ( ! dashes )\n\t\t\t\t\t\t\turl = url.replace(/-/g, '');\n\n\t\t\t\t\t\turl = base + url;\n\n\t\t\t\t\t\tout.push({\n\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\tallow_rich,\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\tis_mail: false,\n\t\t\t\t\t\t\ttext: code\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif ( viewer_link === 2 ) {\n\t\t\t\t\t\t\tout.push({type: 'text', text: ' ['});\n\t\t\t\t\t\t\tout.push({\n\t\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\t\tallow_rich : false,\n\t\t\t\t\t\t\t\turl : `https://smm2.wizul.us/smm2/course/${parsed.toString()}`,\n\t\t\t\t\t\t\t\tis_mail: false,\n\t\t\t\t\t\t\t\ttext: 'Viewer'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tout.push({type: 'text', text: ']'});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tidx = nix + code.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( idx === 0 )\n\t\t\t\t\t\tout.push(token);\n\t\t\t\t\telse if ( idx < text.length )\n\t\t\t\t\t\tout.push({type: 'text', text: text.slice(idx)});\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonEnable() {\n\t\tthis.chat.addTokenizer(this.tokenizer);\n\n\t\tfor(const setting of [\n\t\t\t'addon.smm2-links.enabled',\n\t\t\t'addon.smm2-links.allow-embed',\n\t\t\t'addon.smm2-links.viewer_link'\n\t\t])\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.onChanged, this);\n\t}\n\n\tonDisable() {\n\t\tthis.chat.removeTokenizer(this.tokenizer);\n\n\t\tfor(const setting of [\n\t\t\t'addon.smm2-links.enabled',\n\t\t\t'addon.smm2-links.allow-embed',\n\t\t\t'addon.smm2-links.viewer_link'\n\t\t])\n\t\t\tthis.chat.context.off(`changed:${setting}`, this.onChanged, this);\n\t}\n\n\tonChanged() {\n\t\tthis.emit('chat:update-line-tokens');\n\t}\n\n}\n\nSMM2Links.register();\n"],"names":["VALUE_SIZE_A","META_SIZE_A","VALUE_SIZE_B","META_SIZE_B","VALUE_SIZE_C","VALUE_MASK","META_MASK","INT1_MASK","INT4_MASK","INT6_MASK","INT8_MASK","INT12_MASK","INT14_MASK","INT26_MASK","INT33_MASK","nintendoBase30","base30Map","createBase30Map","removeDashes","input","base30","map","i","base30Decode","encoded","base","decimal","char","value","base30Encode","index","divMod","numerator","denominator","quotient","formatCode","padding","paddedInput","formattedString","a","b","VALUE_OF","s","ret","meta","c","hint","other","Code","isNSOCourseCode","code","isNSOMakerCode","isOCWCourseCode","isOCWMakerCode","getCodeType","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","SMM2_CODE","args","ctx","val","t","token","createElement","tokens","out","allow_rich","viewer_link","text","idx","match","parsed","err","dashes","nix","url","setting","SMM2Links"],"sourceRoot":""}