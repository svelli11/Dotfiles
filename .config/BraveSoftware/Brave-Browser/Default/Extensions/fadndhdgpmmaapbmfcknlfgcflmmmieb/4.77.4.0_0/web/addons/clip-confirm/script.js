(()=>{var B=Object.defineProperty;var f=(m,b)=>B(m,"name",{value:b,configurable:!0});(()=>{"use strict";var m={},b={};function o(e){var t=b[e];if(t!==void 0)return t.exports;var i=b[e]={exports:{}};return m[e](i,i.exports,o),i.exports}f(o,"__webpack_require__"),o.m=m,o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,i)=>(o.f[i](e,t),t),[])),o.u=e=>"clip-confirm/vue.js",o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ffz-addons:";o.l=(i,n,a,r)=>{if(e[i]){e[i].push(n);return}var s,p;if(a!==void 0)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==i||l.getAttribute("data-webpack")==t+a){s=l;break}}s||(p=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+a),s.src=i,s.src.indexOf(window.location.origin+"/")!==0&&(s.crossOrigin="anonymous")),e[i]=[n];var h=f((v,k)=>{s.onerror=s.onload=null,clearTimeout(u);var g=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),g&&g.forEach(S=>S(k)),v)return v(k)},"onScriptComplete"),u=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),p&&document.head.appendChild(s)}})(),o.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!e;)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../"})(),(()=>{var e={353:0};o.f.j=(n,a)=>{var r=o.o(e,n)?e[n]:void 0;if(r!==0)if(r)a.push(r[2]);else{var s=new Promise((l,h)=>r=e[n]=[l,h]);a.push(r[2]=s);var p=o.p+o.u(n),c=new Error,d=f(l=>{if(o.o(e,n)&&(r=e[n],r!==0&&(e[n]=void 0),r)){var h=l&&(l.type==="load"?"missing":l.type),u=l&&l.target&&l.target.src;c.message="Loading chunk "+n+` failed.
(`+h+": "+u+")",c.name="ChunkLoadError",c.type=h,c.request=u,r[1](c)}},"loadingEnded");o.l(p,d,"chunk-"+n,n)}};var t=f((n,a)=>{var[r,s,p]=a,c,d,l=0;if(r.some(u=>e[u]!==0)){for(c in s)o.o(s,c)&&(o.m[c]=s[c]);if(p)var h=p(o)}for(n&&n(a);l<r.length;l++)d=r[l],o.o(e,d)&&e[d]&&e[d][0](),e[d]=0},"webpackJsonpCallback"),i=globalThis.ffzAddonsWebpackJsonp=globalThis.ffzAddonsWebpackJsonp||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var T={};const w=o.p+"clip-confirm/style.css",y=class y extends FrankerFaceZ.utilities.addon.Addon{constructor(...t){super(...t),this.clipConfirmCSS=document.createElement("link"),this.clipConfirmCSS.rel="stylesheet",this.clipConfirmCSS.id="ffz-clip-confirm-css",this.clipConfirmCSS.href=w,this.inject("site.player"),this.inject("site.router"),this.settingsNamespace="addon.clip-confirm",this.rightControls=document.querySelector(this.player.RIGHT_CONTROLS),this.clipConfirmed=!1,this.keyNames={ctrl:"Ctrl / \u2318",alt:"Alt / Option",shift:"Shift"},this.hotkeyName="",this.eventListenerCallbacks={openConfirmationModal:this.openConfirmationModal.bind(this),onClipHotkey:this.onClipHotkey.bind(this),hideConfirmationModal:this.hideConfirmationModal.bind(this),fullscreenConfirmation:this.fullscreenConfirmation.bind(this),confirmClip:this.confirmClip.bind(this)},this.addSettings(),this.skipHotkey=this.settings.get(`${this.settingsNamespace}.skip-hotkey`),this.skipOnShortcut=this.settings.get(`${this.settingsNamespace}.skip-on-shortcut`),this.router.on(":route",this.detectRoute.bind(this))}addClipConfirmation(){this.clipButton||this.getClipButton(),this.clipButton.dataset.ffzClipConfirmReady="true",this.clipButtonTooltipText={original:this.clipButton.getAttribute("aria-label"),new:""},this.updateHotkey(this.skipHotkey),this.clipButton.addEventListener("click",this.eventListenerCallbacks.openConfirmationModal),document.documentElement.addEventListener("keydown",this.eventListenerCallbacks.onClipHotkey)}addSettings(){this.settings.add(`${this.settingsNamespace}.skip-hotkey`,{default:"",ui:{path:"Add-Ons > Clip Confirm >> Behavior",title:'"Skip Confirmation" Hotkey',description:`Hotkey for skipping the clip confirmation when attempting to clip.

If you press/hold whatever combination of hotkeys you select here when you click the clip button (or use Twitch's built-in "Alt + X" shortcut) you will bypass the confirmation window entirely (so basically, the default behavior when this add-on is not enabled). This makes it easier to make a clip when you know for a fact that you want to make a clip and don't require a confirmation.

If you do not select any hotkeys, this feature will be disabled.`,component:"setting-select-box",multiple:!0,data:[{value:"ctrl",title:"Ctrl / \u2318"},{value:"alt",title:"Alt / Option"},{value:"shift",title:"Shift"}]},changed:t=>{this.updateHotkey(t)}}),this.settings.add(`${this.settingsNamespace}.skip-on-shortcut`,{default:!1,ui:{path:"Add-Ons > Clip Confirm >> Behavior",title:"Skip Confirmation When Using Shortcut",description:'By default, Twitch allows clipping using the "Alt + X" shortcut hotkey. Enabing this setting will automatically bypass the confirmation window when using this shortcut to make clips without needing to use the "Skip Confirmation" hotkey you have set above.',component:"setting-check-box"},changed:t=>{this.skipOnShortcut=t}})}async buildVue(){const t=this.resolve("vue");await t.enable();const i=(await o.e(45).then(o.bind(o,5258))).default;return new t.Vue({el:document.createElement("div"),components:{"confirmation-vue":i},render:a=>a("confirmation-vue")}).$el}confirmClip(){this.clipConfirmed=!0,this.clipButton.click(),this.clipConfirmed=!1}detectRoute(t,i){this.onDisable(),this.rightControls=document.querySelector(this.player.RIGHT_CONTROLS),this.onEnable()}fullscreenConfirmation(){let t=document.body;document.fullscreenElement&&(t=document.fullscreenElement),t.appendChild(this.clipConfirmationModal)}getClipButton(){this.clipButton=this.rightControls.querySelector("#channel-player .ScCoreButton-sc-ocjdkq-0.yKpkn")}hideConfirmationModal(t){(t.target===this.clipConfirmationModal||t.target.classList.contains("ffz-clip-confirm-modal-button"))&&document.body.classList.remove("ffz-clip-confirm-modal-active")}onClipHotkey(t){t.altKey&&t.key.toLowerCase()==="x"&&(t.stopImmediatePropagation(),this.overridePressed(t)||this.skipOnShortcut?this.confirmClip():this.openConfirmationModal(t))}onDisable(){this.rightControlsObserver.disconnect(),this.tooltipObserver.disconnect(),this.clipButton&&(delete this.clipButton.dataset.ffzClipConfirmReady,this.clipButton.removeEventListener("click",this.eventListenerCallbacks.openConfirmationModal)),document.documentElement.removeEventListener("keydown",this.eventListenerCallbacks.onClipHotkey),document.removeEventListener("click",this.eventListenerCallbacks.hideConfirmationModal),document.removeEventListener("fullscreenchange",this.eventListenerCallbacks.fullscreenConfirmation),document.getElementById("ffz-clip-confirm-modal-confirm-button")?.removeEventListener("click",this.eventListenerCallbacks.confirmClip),document.body.contains(this.clipConfirmationModal)&&document.body.removeChild(this.clipConfirmationModal),document.head.contains(this.clipConfirmCSS)&&document.head.removeChild(this.clipConfirmCSS)}onEnable(){document.head.appendChild(this.clipConfirmCSS),this.rightControlsObserver=new MutationObserver(this.rightControlsObserverCallback.bind(this)),this.tooltipObserver=new MutationObserver(this.tooltipObserverCallback.bind(this)),this.rightControls&&(this.buildVue().then(t=>{document.body.appendChild(t),this.clipConfirmationModal=document.getElementById("ffz-clip-confirm-modal"),document.addEventListener("click",this.eventListenerCallbacks.hideConfirmationModal),document.getElementById("ffz-clip-confirm-modal-confirm-button").addEventListener("click",this.eventListenerCallbacks.confirmClip)}),this.rightControls.querySelector('[data-a-target="player-clip-button"]')&&this.addClipConfirmation(),this.rightControlsObserver.observe(this.rightControls,{childList:!0,subtree:!0}),this.tooltipObserver.observe(document.body,{childList:!0})),this.log.info("Clip Confirm add-on successfully enabled."),document.addEventListener("fullscreenchange",this.eventListenerCallbacks.fullscreenConfirmation)}openConfirmationModal(t){if(!this.clipConfirmed){if(this.overridePressed(t))return;t.stopImmediatePropagation(),document.body.classList.add("ffz-clip-confirm-modal-active")}}overridePressed(t){let i=!1;for(const n of this.skipHotkey)if(n==="ctrl"?i=t.ctrlKey||t.metaKey:i=t[n+"Key"],!i)break;return i}rightControlsObserverCallback(t,i){for(const n of t)this.getClipButton(),n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes[0].contains(this.clipButton)&&this.clipButton.dataset.ffzClipConfirmReady!=="true"&&this.addClipConfirmation()}updateHotkey(t){this.skipHotkey=t,this.hotkeyName="";for(const i of this.skipHotkey)this.hotkeyName!==""&&(this.hotkeyName+=" + "),this.hotkeyName+=this.keyNames[i]}updateTooltip(){this.clipButtonTooltip=document.getElementsByClassName("tw-tooltip-wrapper")[0],this.clipButtonTooltipText.new=this.clipButtonTooltipText.original,this.skipHotkey&&(this.clipButtonTooltipText.new+=" | Hold "+this.hotkeyName+" to skip confirmation"),this.clipButton.setAttribute("aria-label",this.clipButtonTooltipText.new),this.clipButtonTooltip&&(this.clipButtonTooltip.textContent=this.clipButton.getAttribute("aria-label"))}tooltipObserverCallback(t,i){for(const n of t)if(n.addedNodes.length>0){for(const a of n.addedNodes)if(a.classList.contains("tw-tooltip-layer")){const r=a;this.clipButtonTooltip=r.getElementsByClassName("tw-tooltip-wrapper")[0],this.clipButtonTooltip.textContent.includes("Clip (")&&this.updateTooltip()}}}};f(y,"ClipConfirm");let C=y;C.register("clip-confirm",null,"1.0.7")})();})();

//# sourceMappingURL=script.js.map