(()=>{var g=Object.defineProperty;var d=(o,i)=>g(o,"name",{value:i,configurable:!0});(()=>{var o={};const r=class r extends FrankerFaceZ.utilities.addon.Addon{constructor(...e){super(...e),this.inject("chat"),this.inject("chat.badges"),this.badgeUrls=["https://itzalex.github.io/badges","https://itzalex.github.io/badges2"],this.maxBadgeId=-1}onEnable(){this.updateBadges()}onDisable(){this.removeBadges()}getIdFromIndex(e){return`add_ons.chatterino_homies.badge-${e}`}async fetchAndMergeBadges(){try{const e=await Promise.all(this.badgeUrls.map(a=>fetch(a))),s=await Promise.all(e.map(a=>a.json()));return this.mergeData(...s)}catch(e){return console.error("Error fetching badges:",e),[]}}mergeData(...e){const s=[];return e.forEach(a=>{(a.badges||[]).forEach(t=>{const h=s.find(n=>n.tooltip===t.tooltip);h?t.users&&t.users.length&&h.users.push(...t.users):s.push({userId:t.id,tooltip:t.tooltip,image1:t.image1,image2:t.image2,image3:t.image3,users:t.users||[]})})}),s}async updateBadges(){this.removeBadges();const e=await this.fetchAndMergeBadges();this.maxBadgeId=e.length-1,e.forEach((s,a)=>{const t=this.getIdFromIndex(a);this.badges.loadBadgeData(t,{id:s.userId,title:s.tooltip,slot:78,image:s.image1,urls:{1:s.image1,2:s.image2,4:s.image3},click_url:"https://chatterinohomies.com/",svg:!1}),this.badges.setBulk("add_ons.chatterino_homies",t,s.users)}),this.emit("chat:update-lines")}removeBadges(){for(let e=0;e<=this.maxBadgeId;e++)this.badges.deleteBulk("add_ons.chatterino_homies",this.getIdFromIndex(e));this.maxBadgeId=-1}};d(r,"ChatterinoHomies");let i=r;i.register("chatterino-homies",null,"1.0")})();})();

//# sourceMappingURL=script.js.map