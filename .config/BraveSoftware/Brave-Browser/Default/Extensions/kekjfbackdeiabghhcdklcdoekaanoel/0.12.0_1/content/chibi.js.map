{"version":3,"file":"content/chibi.js","mappings":"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","sources":["webpack://MALSync/./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","webpack://MALSync/./node_modules/@vue/shared/dist/shared.esm-bundler.js","webpack://MALSync/./src/pages-chibi/ChibiProxy-exposed.ts","webpack://MALSync/./node_modules/expose-loader/dist/runtime/getGlobalThis.js","webpack://MALSync/./node_modules/semver/classes/semver.js","webpack://MALSync/./node_modules/semver/functions/compare.js","webpack://MALSync/./node_modules/semver/functions/gt.js","webpack://MALSync/./node_modules/semver/functions/gte.js","webpack://MALSync/./node_modules/semver/internal/constants.js","webpack://MALSync/./node_modules/semver/internal/debug.js","webpack://MALSync/./node_modules/semver/internal/identifiers.js","webpack://MALSync/./node_modules/semver/internal/parse-options.js","webpack://MALSync/./node_modules/semver/internal/re.js","webpack://MALSync/./src/api/storage/webextension.ts","webpack://MALSync/./src/api/request/requestWebextension.ts","webpack://MALSync/./src/api/settings.ts","webpack://MALSync/./src/api/webextension.ts","webpack://MALSync/./node_modules/webext-patterns/index.js","webpack://MALSync/./src/_provider/Errors.ts","webpack://MALSync/./src/chibiScript/ChibiReturn.ts","webpack://MALSync/./src/chibiScript/ChibiRegistry.ts","webpack://MALSync/./src/chibiScript/ChibiCtx.ts","webpack://MALSync/./src/chibiScript/ChibiErrors.ts","webpack://MALSync/./src/chibiScript/functions/literalFunctions.ts","webpack://MALSync/./src/chibiScript/functions/stringFunctions.ts","webpack://MALSync/./src/chibiScript/functions/domFunctions.ts","webpack://MALSync/./src/chibiScript/functions/core/coreFunctions.ts","webpack://MALSync/./src/chibiScript/functions/core/utilsFunctions.ts","webpack://MALSync/./src/chibiScript/functions/core/uiInjectionFunctions.ts","webpack://MALSync/./src/chibiScript/functions/core/asyncFunctions.ts","webpack://MALSync/./src/chibiScript/functions/index.ts","webpack://MALSync/./src/chibiScript/functions/controlFlowFunctions.ts","webpack://MALSync/./src/chibiScript/functions/core/index.ts","webpack://MALSync/./src/chibiScript/functions/conditionFunctions.ts","webpack://MALSync/./src/chibiScript/functions/arrayFunctions.ts","webpack://MALSync/./src/chibiScript/functions/objectFunctions.ts","webpack://MALSync/./src/chibiScript/ChibiConsumer.ts","webpack://MALSync/./src/pages-chibi/ChibiProxy.ts","webpack://MALSync/./src/pages-chibi/loader/ChibiListRepository.ts","webpack://MALSync/./src/utils/console.ts","webpack://MALSync/./src/utils/general.ts","webpack://MALSync/./src/utils/j.ts","webpack://MALSync/./src/utils/version.ts","webpack://MALSync/./node_modules/dompurify/dist/purify.es.mjs","webpack://MALSync/webpack/bootstrap","webpack://MALSync/webpack/runtime/compat get default export","webpack://MALSync/webpack/runtime/define property getters","webpack://MALSync/webpack/runtime/global","webpack://MALSync/webpack/runtime/hasOwnProperty shorthand","webpack://MALSync/webpack/runtime/make namespace object","webpack://MALSync/webpack/startup"],"sourcesContent":["/**\n* @vue/reactivity v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { hasChanged, extend, isArray, isIntegerKey, isSymbol, isMap, hasOwn, isObject, makeMap, toRawType, capitalize, def, isFunction, EMPTY_OBJ, isSet, isPlainObject, NOOP, remove } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this._isPaused = false;\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  pause() {\n    if (this._active) {\n      this._isPaused = true;\n      let i, l;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].pause();\n        }\n      }\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].pause();\n      }\n    }\n  }\n  /**\n   * Resumes the effect scope, including all child scopes and effects.\n   */\n  resume() {\n    if (this._active) {\n      if (this._isPaused) {\n        this._isPaused = false;\n        let i, l;\n        if (this.scopes) {\n          for (i = 0, l = this.scopes.length; i < l; i++) {\n            this.scopes[i].resume();\n          }\n        }\n        for (i = 0, l = this.effects.length; i < l; i++) {\n          this.effects[i].resume();\n        }\n      }\n    }\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    activeEffectScope = this;\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    activeEffectScope = this.parent;\n  }\n  stop(fromParent) {\n    if (this._active) {\n      this._active = false;\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      this.effects.length = 0;\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      this.cleanups.length = 0;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n        this.scopes.length = 0;\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn, failSilently = false) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeSub;\nconst EffectFlags = {\n  \"ACTIVE\": 1,\n  \"1\": \"ACTIVE\",\n  \"RUNNING\": 2,\n  \"2\": \"RUNNING\",\n  \"TRACKING\": 4,\n  \"4\": \"TRACKING\",\n  \"NOTIFIED\": 8,\n  \"8\": \"NOTIFIED\",\n  \"DIRTY\": 16,\n  \"16\": \"DIRTY\",\n  \"ALLOW_RECURSE\": 32,\n  \"32\": \"ALLOW_RECURSE\",\n  \"PAUSED\": 64,\n  \"64\": \"PAUSED\"\n};\nconst pausedQueueEffects = /* @__PURE__ */ new WeakSet();\nclass ReactiveEffect {\n  constructor(fn) {\n    this.fn = fn;\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 1 | 4;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    /**\n     * @internal\n     */\n    this.cleanup = void 0;\n    this.scheduler = void 0;\n    if (activeEffectScope && activeEffectScope.active) {\n      activeEffectScope.effects.push(this);\n    }\n  }\n  pause() {\n    this.flags |= 64;\n  }\n  resume() {\n    if (this.flags & 64) {\n      this.flags &= ~64;\n      if (pausedQueueEffects.has(this)) {\n        pausedQueueEffects.delete(this);\n        this.trigger();\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    if (this.flags & 2 && !(this.flags & 32)) {\n      return;\n    }\n    if (!(this.flags & 8)) {\n      batch(this);\n    }\n  }\n  run() {\n    if (!(this.flags & 1)) {\n      return this.fn();\n    }\n    this.flags |= 2;\n    cleanupEffect(this);\n    prepareDeps(this);\n    const prevEffect = activeSub;\n    const prevShouldTrack = shouldTrack;\n    activeSub = this;\n    shouldTrack = true;\n    try {\n      return this.fn();\n    } finally {\n      if (!!(process.env.NODE_ENV !== \"production\") && activeSub !== this) {\n        warn(\n          \"Active effect was not restored correctly - this is likely a Vue internal bug.\"\n        );\n      }\n      cleanupDeps(this);\n      activeSub = prevEffect;\n      shouldTrack = prevShouldTrack;\n      this.flags &= ~2;\n    }\n  }\n  stop() {\n    if (this.flags & 1) {\n      for (let link = this.deps; link; link = link.nextDep) {\n        removeSub(link);\n      }\n      this.deps = this.depsTail = void 0;\n      cleanupEffect(this);\n      this.onStop && this.onStop();\n      this.flags &= ~1;\n    }\n  }\n  trigger() {\n    if (this.flags & 64) {\n      pausedQueueEffects.add(this);\n    } else if (this.scheduler) {\n      this.scheduler();\n    } else {\n      this.runIfDirty();\n    }\n  }\n  /**\n   * @internal\n   */\n  runIfDirty() {\n    if (isDirty(this)) {\n      this.run();\n    }\n  }\n  get dirty() {\n    return isDirty(this);\n  }\n}\nlet batchDepth = 0;\nlet batchedSub;\nlet batchedComputed;\nfunction batch(sub, isComputed = false) {\n  sub.flags |= 8;\n  if (isComputed) {\n    sub.next = batchedComputed;\n    batchedComputed = sub;\n    return;\n  }\n  sub.next = batchedSub;\n  batchedSub = sub;\n}\nfunction startBatch() {\n  batchDepth++;\n}\nfunction endBatch() {\n  if (--batchDepth > 0) {\n    return;\n  }\n  if (batchedComputed) {\n    let e = batchedComputed;\n    batchedComputed = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      e = next;\n    }\n  }\n  let error;\n  while (batchedSub) {\n    let e = batchedSub;\n    batchedSub = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      if (e.flags & 1) {\n        try {\n          ;\n          e.trigger();\n        } catch (err) {\n          if (!error) error = err;\n        }\n      }\n      e = next;\n    }\n  }\n  if (error) throw error;\n}\nfunction prepareDeps(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    link.version = -1;\n    link.prevActiveLink = link.dep.activeLink;\n    link.dep.activeLink = link;\n  }\n}\nfunction cleanupDeps(sub) {\n  let head;\n  let tail = sub.depsTail;\n  let link = tail;\n  while (link) {\n    const prev = link.prevDep;\n    if (link.version === -1) {\n      if (link === tail) tail = prev;\n      removeSub(link);\n      removeDep(link);\n    } else {\n      head = link;\n    }\n    link.dep.activeLink = link.prevActiveLink;\n    link.prevActiveLink = void 0;\n    link = prev;\n  }\n  sub.deps = head;\n  sub.depsTail = tail;\n}\nfunction isDirty(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {\n      return true;\n    }\n  }\n  if (sub._dirty) {\n    return true;\n  }\n  return false;\n}\nfunction refreshComputed(computed) {\n  if (computed.flags & 4 && !(computed.flags & 16)) {\n    return;\n  }\n  computed.flags &= ~16;\n  if (computed.globalVersion === globalVersion) {\n    return;\n  }\n  computed.globalVersion = globalVersion;\n  const dep = computed.dep;\n  computed.flags |= 2;\n  if (dep.version > 0 && !computed.isSSR && computed.deps && !isDirty(computed)) {\n    computed.flags &= ~2;\n    return;\n  }\n  const prevSub = activeSub;\n  const prevShouldTrack = shouldTrack;\n  activeSub = computed;\n  shouldTrack = true;\n  try {\n    prepareDeps(computed);\n    const value = computed.fn(computed._value);\n    if (dep.version === 0 || hasChanged(value, computed._value)) {\n      computed._value = value;\n      dep.version++;\n    }\n  } catch (err) {\n    dep.version++;\n    throw err;\n  } finally {\n    activeSub = prevSub;\n    shouldTrack = prevShouldTrack;\n    cleanupDeps(computed);\n    computed.flags &= ~2;\n  }\n}\nfunction removeSub(link, soft = false) {\n  const { dep, prevSub, nextSub } = link;\n  if (prevSub) {\n    prevSub.nextSub = nextSub;\n    link.prevSub = void 0;\n  }\n  if (nextSub) {\n    nextSub.prevSub = prevSub;\n    link.nextSub = void 0;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && dep.subsHead === link) {\n    dep.subsHead = nextSub;\n  }\n  if (dep.subs === link) {\n    dep.subs = prevSub;\n    if (!prevSub && dep.computed) {\n      dep.computed.flags &= ~4;\n      for (let l = dep.computed.deps; l; l = l.nextDep) {\n        removeSub(l, true);\n      }\n    }\n  }\n  if (!soft && !--dep.sc && dep.map) {\n    dep.map.delete(dep.key);\n  }\n}\nfunction removeDep(link) {\n  const { prevDep, nextDep } = link;\n  if (prevDep) {\n    prevDep.nextDep = nextDep;\n    link.prevDep = void 0;\n  }\n  if (nextDep) {\n    nextDep.prevDep = prevDep;\n    link.nextDep = void 0;\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const e = new ReactiveEffect(fn);\n  if (options) {\n    extend(e, options);\n  }\n  try {\n    e.run();\n  } catch (err) {\n    e.stop();\n    throw err;\n  }\n  const runner = e.run.bind(e);\n  runner.effect = e;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction onEffectCleanup(fn, failSilently = false) {\n  if (activeSub instanceof ReactiveEffect) {\n    activeSub.cleanup = fn;\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onEffectCleanup() was called when there was no active effect to associate with.`\n    );\n  }\n}\nfunction cleanupEffect(e) {\n  const { cleanup } = e;\n  e.cleanup = void 0;\n  if (cleanup) {\n    const prevSub = activeSub;\n    activeSub = void 0;\n    try {\n      cleanup();\n    } finally {\n      activeSub = prevSub;\n    }\n  }\n}\n\nlet globalVersion = 0;\nclass Link {\n  constructor(sub, dep) {\n    this.sub = sub;\n    this.dep = dep;\n    this.version = dep.version;\n    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;\n  }\n}\nclass Dep {\n  constructor(computed) {\n    this.computed = computed;\n    this.version = 0;\n    /**\n     * Link between this dep and the current active effect\n     */\n    this.activeLink = void 0;\n    /**\n     * Doubly linked list representing the subscribing effects (tail)\n     */\n    this.subs = void 0;\n    /**\n     * For object property deps cleanup\n     */\n    this.map = void 0;\n    this.key = void 0;\n    /**\n     * Subscriber counter\n     */\n    this.sc = 0;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.subsHead = void 0;\n    }\n  }\n  track(debugInfo) {\n    if (!activeSub || !shouldTrack || activeSub === this.computed) {\n      return;\n    }\n    let link = this.activeLink;\n    if (link === void 0 || link.sub !== activeSub) {\n      link = this.activeLink = new Link(activeSub, this);\n      if (!activeSub.deps) {\n        activeSub.deps = activeSub.depsTail = link;\n      } else {\n        link.prevDep = activeSub.depsTail;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n      }\n      addSub(link);\n    } else if (link.version === -1) {\n      link.version = this.version;\n      if (link.nextDep) {\n        const next = link.nextDep;\n        next.prevDep = link.prevDep;\n        if (link.prevDep) {\n          link.prevDep.nextDep = next;\n        }\n        link.prevDep = activeSub.depsTail;\n        link.nextDep = void 0;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n        if (activeSub.deps === link) {\n          activeSub.deps = next;\n        }\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && activeSub.onTrack) {\n      activeSub.onTrack(\n        extend(\n          {\n            effect: activeSub\n          },\n          debugInfo\n        )\n      );\n    }\n    return link;\n  }\n  trigger(debugInfo) {\n    this.version++;\n    globalVersion++;\n    this.notify(debugInfo);\n  }\n  notify(debugInfo) {\n    startBatch();\n    try {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (let head = this.subsHead; head; head = head.nextSub) {\n          if (head.sub.onTrigger && !(head.sub.flags & 8)) {\n            head.sub.onTrigger(\n              extend(\n                {\n                  effect: head.sub\n                },\n                debugInfo\n              )\n            );\n          }\n        }\n      }\n      for (let link = this.subs; link; link = link.prevSub) {\n        if (link.sub.notify()) {\n          ;\n          link.sub.dep.notify();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n  }\n}\nfunction addSub(link) {\n  link.dep.sc++;\n  if (link.sub.flags & 4) {\n    const computed = link.dep.computed;\n    if (computed && !link.dep.subs) {\n      computed.flags |= 4 | 16;\n      for (let l = computed.deps; l; l = l.nextDep) {\n        addSub(l);\n      }\n    }\n    const currentTail = link.dep.subs;\n    if (currentTail !== link) {\n      link.prevSub = currentTail;\n      if (currentTail) currentTail.nextSub = link;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && link.dep.subsHead === void 0) {\n      link.dep.subsHead = link;\n    }\n    link.dep.subs = link;\n  }\n}\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Object iterate\" : \"\"\n);\nconst MAP_KEY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Map keys iterate\" : \"\"\n);\nconst ARRAY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Array iterate\" : \"\"\n);\nfunction track(target, type, key) {\n  if (shouldTrack && activeSub) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = new Dep());\n      dep.map = depsMap;\n      dep.key = key;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      dep.track({\n        target,\n        type,\n        key\n      });\n    } else {\n      dep.track();\n    }\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    globalVersion++;\n    return;\n  }\n  const run = (dep) => {\n    if (dep) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        dep.trigger({\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        });\n      } else {\n        dep.trigger();\n      }\n    }\n  };\n  startBatch();\n  if (type === \"clear\") {\n    depsMap.forEach(run);\n  } else {\n    const targetIsArray = isArray(target);\n    const isArrayIndex = targetIsArray && isIntegerKey(key);\n    if (targetIsArray && key === \"length\") {\n      const newLength = Number(newValue);\n      depsMap.forEach((dep, key2) => {\n        if (key2 === \"length\" || key2 === ARRAY_ITERATE_KEY || !isSymbol(key2) && key2 >= newLength) {\n          run(dep);\n        }\n      });\n    } else {\n      if (key !== void 0 || depsMap.has(void 0)) {\n        run(depsMap.get(key));\n      }\n      if (isArrayIndex) {\n        run(depsMap.get(ARRAY_ITERATE_KEY));\n      }\n      switch (type) {\n        case \"add\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          } else if (isArrayIndex) {\n            run(depsMap.get(\"length\"));\n          }\n          break;\n        case \"delete\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          }\n          break;\n        case \"set\":\n          if (isMap(target)) {\n            run(depsMap.get(ITERATE_KEY));\n          }\n          break;\n      }\n    }\n  }\n  endBatch();\n}\nfunction getDepFromReactive(object, key) {\n  const depMap = targetMap.get(object);\n  return depMap && depMap.get(key);\n}\n\nfunction reactiveReadArray(array) {\n  const raw = toRaw(array);\n  if (raw === array) return raw;\n  track(raw, \"iterate\", ARRAY_ITERATE_KEY);\n  return isShallow(array) ? raw : raw.map(toReactive);\n}\nfunction shallowReadArray(arr) {\n  track(arr = toRaw(arr), \"iterate\", ARRAY_ITERATE_KEY);\n  return arr;\n}\nconst arrayInstrumentations = {\n  __proto__: null,\n  [Symbol.iterator]() {\n    return iterator(this, Symbol.iterator, toReactive);\n  },\n  concat(...args) {\n    return reactiveReadArray(this).concat(\n      ...args.map((x) => isArray(x) ? reactiveReadArray(x) : x)\n    );\n  },\n  entries() {\n    return iterator(this, \"entries\", (value) => {\n      value[1] = toReactive(value[1]);\n      return value;\n    });\n  },\n  every(fn, thisArg) {\n    return apply(this, \"every\", fn, thisArg, void 0, arguments);\n  },\n  filter(fn, thisArg) {\n    return apply(this, \"filter\", fn, thisArg, (v) => v.map(toReactive), arguments);\n  },\n  find(fn, thisArg) {\n    return apply(this, \"find\", fn, thisArg, toReactive, arguments);\n  },\n  findIndex(fn, thisArg) {\n    return apply(this, \"findIndex\", fn, thisArg, void 0, arguments);\n  },\n  findLast(fn, thisArg) {\n    return apply(this, \"findLast\", fn, thisArg, toReactive, arguments);\n  },\n  findLastIndex(fn, thisArg) {\n    return apply(this, \"findLastIndex\", fn, thisArg, void 0, arguments);\n  },\n  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement\n  forEach(fn, thisArg) {\n    return apply(this, \"forEach\", fn, thisArg, void 0, arguments);\n  },\n  includes(...args) {\n    return searchProxy(this, \"includes\", args);\n  },\n  indexOf(...args) {\n    return searchProxy(this, \"indexOf\", args);\n  },\n  join(separator) {\n    return reactiveReadArray(this).join(separator);\n  },\n  // keys() iterator only reads `length`, no optimisation required\n  lastIndexOf(...args) {\n    return searchProxy(this, \"lastIndexOf\", args);\n  },\n  map(fn, thisArg) {\n    return apply(this, \"map\", fn, thisArg, void 0, arguments);\n  },\n  pop() {\n    return noTracking(this, \"pop\");\n  },\n  push(...args) {\n    return noTracking(this, \"push\", args);\n  },\n  reduce(fn, ...args) {\n    return reduce(this, \"reduce\", fn, args);\n  },\n  reduceRight(fn, ...args) {\n    return reduce(this, \"reduceRight\", fn, args);\n  },\n  shift() {\n    return noTracking(this, \"shift\");\n  },\n  // slice could use ARRAY_ITERATE but also seems to beg for range tracking\n  some(fn, thisArg) {\n    return apply(this, \"some\", fn, thisArg, void 0, arguments);\n  },\n  splice(...args) {\n    return noTracking(this, \"splice\", args);\n  },\n  toReversed() {\n    return reactiveReadArray(this).toReversed();\n  },\n  toSorted(comparer) {\n    return reactiveReadArray(this).toSorted(comparer);\n  },\n  toSpliced(...args) {\n    return reactiveReadArray(this).toSpliced(...args);\n  },\n  unshift(...args) {\n    return noTracking(this, \"unshift\", args);\n  },\n  values() {\n    return iterator(this, \"values\", toReactive);\n  }\n};\nfunction iterator(self, method, wrapValue) {\n  const arr = shallowReadArray(self);\n  const iter = arr[method]();\n  if (arr !== self && !isShallow(self)) {\n    iter._next = iter.next;\n    iter.next = () => {\n      const result = iter._next();\n      if (result.value) {\n        result.value = wrapValue(result.value);\n      }\n      return result;\n    };\n  }\n  return iter;\n}\nconst arrayProto = Array.prototype;\nfunction apply(self, method, fn, thisArg, wrappedRetFn, args) {\n  const arr = shallowReadArray(self);\n  const needsWrap = arr !== self && !isShallow(self);\n  const methodFn = arr[method];\n  if (methodFn !== arrayProto[method]) {\n    const result2 = methodFn.apply(self, args);\n    return needsWrap ? toReactive(result2) : result2;\n  }\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (needsWrap) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, toReactive(item), index, self);\n      };\n    } else if (fn.length > 2) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, item, index, self);\n      };\n    }\n  }\n  const result = methodFn.call(arr, wrappedFn, thisArg);\n  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;\n}\nfunction reduce(self, method, fn, args) {\n  const arr = shallowReadArray(self);\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (!isShallow(self)) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, toReactive(item), index, self);\n      };\n    } else if (fn.length > 3) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, item, index, self);\n      };\n    }\n  }\n  return arr[method](wrappedFn, ...args);\n}\nfunction searchProxy(self, method, args) {\n  const arr = toRaw(self);\n  track(arr, \"iterate\", ARRAY_ITERATE_KEY);\n  const res = arr[method](...args);\n  if ((res === -1 || res === false) && isProxy(args[0])) {\n    args[0] = toRaw(args[0]);\n    return arr[method](...args);\n  }\n  return res;\n}\nfunction noTracking(self, method, args = []) {\n  pauseTracking();\n  startBatch();\n  const res = toRaw(self)[method].apply(self, args);\n  endBatch();\n  resetTracking();\n  return res;\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    if (key === \"__v_skip\") return target[\"__v_skip\"];\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the receiver is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      let fn;\n      if (targetIsArray && (fn = arrayInstrumentations[key])) {\n        return fn;\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(\n      target,\n      key,\n      // if this is a proxy wrapping a ref, return methods using the raw ref\n      // as receiver so that we don't have to call `toRaw` on the ref in all\n      // its class methods\n      isRef(target) ? target : receiver\n    );\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(\n      target,\n      key,\n      value,\n      isRef(target) ? target : receiver\n    );\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction createIterableMethod(method, isReadonly2, isShallow2) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;\n    !isReadonly2 && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations(readonly, shallow) {\n  const instrumentations = {\n    get(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"get\", key);\n        }\n        track(rawTarget, \"get\", rawKey);\n      }\n      const { has } = getProto(rawTarget);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n      } else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n      } else if (target !== rawTarget) {\n        target.get(key);\n      }\n    },\n    get size() {\n      const target = this[\"__v_raw\"];\n      !readonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n      return Reflect.get(target, \"size\", target);\n    },\n    has(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"has\", key);\n        }\n        track(rawTarget, \"has\", rawKey);\n      }\n      return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n    },\n    forEach(callback, thisArg) {\n      const observed = this;\n      const target = observed[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      !readonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n      return target.forEach((value, key) => {\n        return callback.call(thisArg, wrap(value), wrap(key), observed);\n      });\n    }\n  };\n  extend(\n    instrumentations,\n    readonly ? {\n      add: createReadonlyMethod(\"add\"),\n      set: createReadonlyMethod(\"set\"),\n      delete: createReadonlyMethod(\"delete\"),\n      clear: createReadonlyMethod(\"clear\")\n    } : {\n      add(value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const proto = getProto(target);\n        const hadKey = proto.has.call(target, value);\n        if (!hadKey) {\n          target.add(value);\n          trigger(target, \"add\", value, value);\n        }\n        return this;\n      },\n      set(key, value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get.call(target, key);\n        target.set(key, value);\n        if (!hadKey) {\n          trigger(target, \"add\", key, value);\n        } else if (hasChanged(value, oldValue)) {\n          trigger(target, \"set\", key, value, oldValue);\n        }\n        return this;\n      },\n      delete(key) {\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get ? get.call(target, key) : void 0;\n        const result = target.delete(key);\n        if (hadKey) {\n          trigger(target, \"delete\", key, void 0, oldValue);\n        }\n        return result;\n      },\n      clear() {\n        const target = toRaw(this);\n        const hadItems = target.size !== 0;\n        const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n        const result = target.clear();\n        if (hadItems) {\n          trigger(\n            target,\n            \"clear\",\n            void 0,\n            void 0,\n            oldTarget\n          );\n        }\n        return result;\n      }\n    }\n  );\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    instrumentations[method] = createIterableMethod(method, readonly, shallow);\n  });\n  return instrumentations;\n}\nfunction createInstrumentationGetter(isReadonly2, shallow) {\n  const instrumentations = createInstrumentations(isReadonly2, shallow);\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (!hasOwn(value, \"__v_skip\") && Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction isRef(r) {\n  return r ? r[\"__v_isRef\"] === true : false;\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, isShallow2) {\n    this.dep = new Dep();\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isShallow\"] = false;\n    this._rawValue = isShallow2 ? value : toRaw(value);\n    this._value = isShallow2 ? value : toReactive(value);\n    this[\"__v_isShallow\"] = isShallow2;\n  }\n  get value() {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.dep.track({\n        target: this,\n        type: \"get\",\n        key: \"value\"\n      });\n    } else {\n      this.dep.track();\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    const oldValue = this._rawValue;\n    const useDirectValue = this[\"__v_isShallow\"] || isShallow(newValue) || isReadonly(newValue);\n    newValue = useDirectValue ? newValue : toRaw(newValue);\n    if (hasChanged(newValue, oldValue)) {\n      this._rawValue = newValue;\n      this._value = useDirectValue ? newValue : toReactive(newValue);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        this.dep.trigger({\n          target: this,\n          type: \"set\",\n          key: \"value\",\n          newValue,\n          oldValue\n        });\n      } else {\n        this.dep.trigger();\n      }\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  if (ref2.dep) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      ref2.dep.trigger({\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: ref2._value\n      });\n    } else {\n      ref2.dep.trigger();\n    }\n  }\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => key === \"__v_raw\" ? target : unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    const dep = this.dep = new Dep();\n    const { get, set } = factory(dep.track.bind(dep), dep.trigger.bind(dep));\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._value = this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return this._value = val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isReadonly\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    return this._value = this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nclass ComputedRefImpl {\n  constructor(fn, setter, isSSR) {\n    this.fn = fn;\n    this.setter = setter;\n    /**\n     * @internal\n     */\n    this._value = void 0;\n    /**\n     * @internal\n     */\n    this.dep = new Dep(this);\n    /**\n     * @internal\n     */\n    this.__v_isRef = true;\n    // TODO isolatedDeclarations \"__v_isReadonly\"\n    // A computed is also a subscriber that tracks other deps\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 16;\n    /**\n     * @internal\n     */\n    this.globalVersion = globalVersion - 1;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    // for backwards compat\n    this.effect = this;\n    this[\"__v_isReadonly\"] = !setter;\n    this.isSSR = isSSR;\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    this.flags |= 16;\n    if (!(this.flags & 8) && // avoid infinite self recursion\n    activeSub !== this) {\n      batch(this, true);\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) ;\n  }\n  get value() {\n    const link = !!(process.env.NODE_ENV !== \"production\") ? this.dep.track({\n      target: this,\n      type: \"get\",\n      key: \"value\"\n    }) : this.dep.track();\n    refreshComputed(this);\n    if (link) {\n      link.version = this.dep.version;\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.setter) {\n      this.setter(newValue);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\"Write operation failed: computed value is readonly\");\n    }\n  }\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.onTrack = debugOptions.onTrack;\n    cRef.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\",\n  \"IS_REF\": \"__v_isRef\"\n};\n\nconst WatchErrorCodes = {\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\"\n};\nconst INITIAL_WATCHER_VALUE = {};\nconst cleanupMap = /* @__PURE__ */ new WeakMap();\nlet activeWatcher = void 0;\nfunction getCurrentWatcher() {\n  return activeWatcher;\n}\nfunction onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {\n  if (owner) {\n    let cleanups = cleanupMap.get(owner);\n    if (!cleanups) cleanupMap.set(owner, cleanups = []);\n    cleanups.push(cleanupFn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onWatcherCleanup() was called when there was no active watcher to associate with.`\n    );\n  }\n}\nfunction watch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, once, scheduler, augmentJob, call } = options;\n  const warnInvalidSource = (s) => {\n    (options.onWarn || warn)(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const reactiveGetter = (source2) => {\n    if (deep) return source2;\n    if (isShallow(source2) || deep === false || deep === 0)\n      return traverse(source2, 1);\n    return traverse(source2);\n  };\n  let effect;\n  let getter;\n  let cleanup;\n  let boundCleanup;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return call ? call(s, 2) : s();\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = call ? () => call(source, 2) : source;\n    } else {\n      getter = () => {\n        if (cleanup) {\n          pauseTracking();\n          try {\n            cleanup();\n          } finally {\n            resetTracking();\n          }\n        }\n        const currentEffect = activeWatcher;\n        activeWatcher = effect;\n        try {\n          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);\n        } finally {\n          activeWatcher = currentEffect;\n        }\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    const depth = deep === true ? Infinity : deep;\n    getter = () => traverse(baseGetter(), depth);\n  }\n  const scope = getCurrentScope();\n  const watchHandle = () => {\n    effect.stop();\n    if (scope && scope.active) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (once && cb) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      watchHandle();\n    };\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = (immediateFirstRun) => {\n    if (!(effect.flags & 1) || !effect.dirty && !immediateFirstRun) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup) {\n          cleanup();\n        }\n        const currentWatcher = activeWatcher;\n        activeWatcher = effect;\n        try {\n          const args = [\n            newValue,\n            // pass undefined as the old value when it's changed for the first time\n            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n            boundCleanup\n          ];\n          call ? call(cb, 3, args) : (\n            // @ts-expect-error\n            cb(...args)\n          );\n          oldValue = newValue;\n        } finally {\n          activeWatcher = currentWatcher;\n        }\n      }\n    } else {\n      effect.run();\n    }\n  };\n  if (augmentJob) {\n    augmentJob(job);\n  }\n  effect = new ReactiveEffect(getter);\n  effect.scheduler = scheduler ? () => scheduler(job, false) : job;\n  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect);\n  cleanup = effect.onStop = () => {\n    const cleanups = cleanupMap.get(effect);\n    if (cleanups) {\n      if (call) {\n        call(cleanups, 4);\n      } else {\n        for (const cleanup2 of cleanups) cleanup2();\n      }\n      cleanupMap.delete(effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = options.onTrack;\n    effect.onTrigger = options.onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job(true);\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (scheduler) {\n    scheduler(job.bind(null, true), true);\n  } else {\n    effect.run();\n  }\n  watchHandle.pause = effect.pause.bind(effect);\n  watchHandle.resume = effect.resume.bind(effect);\n  watchHandle.stop = watchHandle;\n  return watchHandle;\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Set();\n  if (seen.has(value)) {\n    return value;\n  }\n  seen.add(value);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n    for (const key of Object.getOwnPropertySymbols(value)) {\n      if (Object.prototype.propertyIsEnumerable.call(value, key)) {\n        traverse(value[key], depth, seen);\n      }\n    }\n  }\n  return value;\n}\n\nexport { ARRAY_ITERATE_KEY, EffectFlags, EffectScope, ITERATE_KEY, MAP_KEY_ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, WatchErrorCodes, computed, customRef, effect, effectScope, enableTracking, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onEffectCleanup, onScopeDispose, onWatcherCleanup, pauseTracking, proxyRefs, reactive, reactiveReadArray, readonly, ref, resetTracking, shallowReactive, shallowReadArray, shallowReadonly, shallowRef, stop, toRaw, toReactive, toReadonly, toRef, toRefs, toValue, track, traverse, trigger, triggerRef, unref, watch };\n","/**\n* @vue/shared v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str) {\n  const map = /* @__PURE__ */ Object.create(null);\n  for (const key of str.split(\",\")) map[key] = 1;\n  return (val) => val in map;\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction(\n  (str) => {\n    return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n  }\n);\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction(\n  (str) => {\n    const s = str ? `on${capitalize(str)}` : ``;\n    return s;\n  }\n);\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\nfunction genCacheKey(source, options) {\n  return source + JSON.stringify(\n    options,\n    (_, val) => typeof val === \"function\" ? val.toString() : val\n  );\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"CACHED\": -1,\n  \"-1\": \"CACHED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  if (!styles) return \"\";\n  if (isString(styles)) return styles;\n  let ret = \"\";\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nconst isKnownMathMLAttr = /* @__PURE__ */ makeMap(\n  `accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\nconst cssVarNameEscapeSymbolsRE = /[ !\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]/g;\nfunction getEscapedCssVarName(key, doubleEscape) {\n  return key.replace(\n    cssVarNameEscapeSymbolsRE,\n    (s) => doubleEscape ? s === '\"' ? '\\\\\\\\\\\\\"' : `\\\\\\\\${s}` : `\\\\${s}`\n  );\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst isRef = (val) => {\n  return !!(val && val[\"__v_isRef\"] === true);\n};\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (isRef(val)) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, cssVarNameEscapeSymbolsRE, def, escapeHtml, escapeHtmlComment, extend, genCacheKey, genPropsAccessExp, generateCodeFrame, getEscapedCssVarName, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownMathMLAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","var ___EXPOSE_LOADER_IMPORT___ = require(\"-!../../node_modules/ts-loader/index.js??clonedRuleSet-1!./ChibiProxy.ts\");\nvar ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = require(\"../../node_modules/expose-loader/dist/runtime/getGlobalThis.js\");\nvar ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;\nvar ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.Chibi\nif (typeof ___EXPOSE_LOADER_GLOBAL_THIS___[\"_PageChibi\"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___[\"_PageChibi\"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;\nmodule.exports = ___EXPOSE_LOADER_IMPORT___;\n","\"use strict\";\n\n// eslint-disable-next-line func-names\nmodule.exports = function () {\n  if (typeof globalThis === \"object\") {\n    return globalThis;\n  }\n  var g;\n  try {\n    // This works if eval is allowed (see CSP)\n    // eslint-disable-next-line no-new-func\n    g = this || new Function(\"return this\")();\n  } catch (e) {\n    // This works if the window reference is available\n    if (typeof window === \"object\") {\n      return window;\n    }\n\n    // This works if the self reference is available\n    if (typeof self === \"object\") {\n      return self;\n    }\n\n    // This works if the global reference is available\n    if (typeof global !== \"undefined\") {\n      return global;\n    }\n  }\n  return g;\n}();","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, safeSrc: src, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const r = new RegExp(`^${this.options.loose ? src[t.PRERELEASELOOSE] : src[t.PRERELEASE]}$`)\n        const match = `-${identifier}`.match(r)\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","import { storageInterface } from './storageInterface';\n\ndeclare let i18n: string[];\n\nexport const webextension: storageInterface = {\n  async set(key: string, value: string): Promise<void> {\n    const obj = {} as any;\n    obj[key] = value;\n    return new Promise((resolve, reject) => {\n      getStorage(key).set(obj, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async get(key: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).get(key, function (results) {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve(results[key]);\n      });\n    });\n  },\n\n  async remove(key: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).remove(key, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async list(type = 'local'): Promise<{ [key: string]: any }> {\n    return new Promise((resolve, reject) => {\n      if (type === 'local') {\n        chrome.storage.local.get(null, function (results) {\n          resolve(results);\n        });\n      } else {\n        chrome.storage.sync.get(null, function (results) {\n          resolve(results);\n        });\n      }\n    });\n  },\n\n  async addStyle(css) {\n    try {\n      const style = document.createElement('style');\n      style.textContent = css;\n      (document.head || document.body || document.documentElement || document).appendChild(style);\n    } catch (e) {\n      console.log(`Could not add css:${e}`);\n    }\n  },\n\n  version() {\n    return chrome.runtime.getManifest().version;\n  },\n\n  lang(selector, args) {\n    if (api.settings.get('forceEn') && typeof i18n !== 'undefined') {\n      let message = i18n[selector];\n      if (typeof args !== 'undefined') {\n        for (let argIndex = 0; argIndex < args.length; argIndex++) {\n          message = message.replace(`$${argIndex + 1}`, args[argIndex]);\n        }\n      }\n      return message;\n    }\n    // @ts-ignore\n    return chrome.i18n.getMessage(selector, args);\n  },\n\n  langDirection() {\n    try {\n      const lang = chrome.i18n.getUILanguage();\n      if (/^(ar)(-|$)/i.test(lang) && !api.settings.get('forceEn')) {\n        return 'rtl';\n      }\n    } catch (error) {\n      con.error(error);\n    }\n    return 'ltr';\n  },\n\n  assetUrl(filename) {\n    return chrome.runtime.getURL(`assets/${filename}`);\n  },\n\n  injectCssResource(res, head) {\n    alert('injectCssResource not supported in webextension');\n  },\n\n  injectjsResource(res, head) {\n    const s = document.createElement('script');\n    s.src = chrome.runtime.getURL(`vendor/${res}`);\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  addProxyScriptToTag(tag, name) {\n    tag.src = chrome.runtime.getURL(`/content/proxy/proxy_${name}.js`);\n    return tag;\n  },\n\n  updateDom(head) {\n    const s = document.createElement('script');\n    s.text = `\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }`;\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  storageOnChanged(cb) {\n    chrome.storage.onChanged.addListener(cb);\n  },\n};\n\nfunction getStorage(key: string) {\n  if (utils.syncRegex.test(key)) {\n    return chrome.storage.sync;\n  }\n  return chrome.storage.local;\n}\n","import { sendMessageI, responseMessageI } from '../messageInterface';\nimport { requestInterface } from './requestInterface';\n\nexport const requestApi: requestInterface = {\n  async xhr(method, url) {\n    if (typeof requestApi.sendMessage !== 'undefined') {\n      return requestApi.sendMessage({ name: 'xhr', method, url }).then(xhr => {\n        if (xhr.status === 429) throw 'Rate limit Timeout';\n        if (xhr.status === 0) throw xhr.responseText;\n        return xhr;\n      });\n    }\n    throw 'Could not send xhr';\n  },\n\n  async sendMessage(message: sendMessageI): Promise<any> {\n    return new Promise((resolve, reject) => {\n      chrome.runtime.sendMessage(message, function (response: responseMessageI) {\n        resolve(response);\n      });\n    });\n  },\n\n  notification(options) {\n    this.sendMessage({\n      name: 'notification',\n      options,\n    });\n  },\n  database(call, param) {\n    return this.sendMessage({\n      name: 'database',\n      options: {\n        call,\n        param,\n      },\n    });\n  },\n};\n","import { reactive, ref } from 'vue';\nimport { ChibiListRepository } from '../pages-chibi/loader/ChibiListRepository';\nimport type { PageListJsonInterface } from '../pages-chibi/pageInterface';\n\nexport const settingsObj = {\n  options: reactive({\n    autoTrackingModeanime: 'video',\n    readerTracking: true,\n    askBefore: true,\n    autoTrackingModemanga: 'instant',\n    enablePages: {},\n    forceEn: false,\n    forceEnglishTitles: false,\n    rpc: true,\n    presenceLargeImage: 'cover',\n    presenceShowButtons: true,\n    presenceShowMalsync: false,\n    userscriptModeButton: false,\n    syncMode: 'MAL',\n    syncModeSimkl: 'MAL',\n    localSync: true,\n    delay: 0,\n    videoDuration: 85,\n    malTags: false,\n    malContinue: true,\n    malResume: true,\n    usedPage: true,\n    epPredictions: true,\n    mangaCompletionPercentage: 90,\n\n    theme: 'auto',\n    themeSidebars: true,\n    themeColor: '#000000',\n    themeOpacity: 100,\n    themeImage: '',\n\n    minimalWindow: false,\n    posLeft: 'left',\n    miniMALonMal: false,\n    floatButtonStealth: false,\n    minimizeBigPopup: false,\n    floatButtonCorrection: true,\n    floatButtonHide: false,\n    autoCloseMinimal: false,\n    outWay: true,\n    miniMalWidth: '550px',\n    miniMalHeight: '90%',\n    malThumbnail: 100,\n    friendScore: true,\n    loadPTWForProgress: false,\n\n    quicklinks: [\n      'Crunchyroll',\n      'Gogoanime',\n      'Mangadex',\n      'MangaNato',\n      'MangaFox',\n      'MangaSee',\n      'MangaFire',\n      'HiAnime',\n      'Hulu',\n      'Netflix',\n      'Hidive',\n      'VIZ',\n      'MangaPlus',\n      'MangaReader',\n      'ComicK',\n      'WeebCentral',\n      'KickAssAnime',\n      'animepahe',\n    ],\n    quicklinksPosition: 'default',\n\n    autofull: false,\n    autoresume: false,\n    autoNextEp: false,\n    highlightAllEp: false,\n    checkForFiller: true,\n    crashReport: true,\n\n    introSkip: 85,\n    introSkipFwd: [17, 39],\n    introSkipBwd: [17, 37],\n    nextEpShort: [],\n    correctionShort: [67],\n    syncShort: [],\n\n    progressInterval: 120,\n    progressIntervalDefaultAnime: 'en/sub',\n    progressIntervalDefaultManga: 'en/sub',\n    progressNotificationsAnime: true,\n    progressNotificationsManga: true,\n    notificationsSticky: true,\n\n    bookMarksList: false,\n    bookMarksListManga: false,\n\n    customDomains: [],\n\n    anilistUpdateUi: true,\n\n    anilistToken: '',\n    anilistOptions: {\n      displayAdultContent: true,\n      scoreFormat: 'POINT_10',\n    },\n    kitsuToken: '',\n    kitsuOptions: {\n      titleLanguagePreference: 'canonical',\n      sfwFilter: false,\n      ratingSystem: 'regular',\n    },\n    simklToken: '',\n\n    malToken: '',\n    malRefresh: '',\n\n    shikiToken: '',\n    shikiOptions: {\n      locale: 'ru',\n    },\n  }),\n\n  debounceArray: {},\n\n  chibiList: {} as PageListJsonInterface['pages'],\n\n  isInit: ref(false),\n\n  async init() {\n    const tempSettings = [];\n    for (const key in this.options) {\n      const store = await api.storage.get(`settings/${key}`);\n      if (typeof store !== 'undefined') {\n        this.options[key] = store;\n        tempSettings[key] = /(token|refresh)/i.test(key) && store ? '********' : store;\n      }\n    }\n\n    try {\n      const chibiRepo = await ChibiListRepository.getInstance(true).init();\n      this.chibiList = chibiRepo.getList();\n    } catch (e) {\n      con.error('Error loading chibi repo', e);\n    }\n\n    con.log('Settings', tempSettings);\n\n    let rateDebounce;\n\n    api.storage.storageOnChanged((changes, namespace) => {\n      if (namespace === 'sync') {\n        for (const key in changes) {\n          const storageChange = changes[key];\n          if (/^settings\\//i.test(key)) {\n            this.options[key.replace('settings/', '')] = storageChange.newValue;\n            con.info(`Update ${key} option to ${JSON.stringify(storageChange.newValue, null, 2)}`);\n          }\n        }\n      }\n      if (namespace === 'local' && changes.rateLimit) {\n        try {\n          clearTimeout(rateDebounce);\n          if (changes.rateLimit.newValue) {\n            con.log('Rate limited');\n            if (!$('.type-rate').length) {\n              utils.flashm('Rate limited. Retrying in a moment', {\n                error: true,\n                type: 'rate',\n                permanent: true,\n              });\n            }\n          } else {\n            rateDebounce = setTimeout(() => {\n              con.log('No Rate limited');\n              $('.type-rate').remove();\n            }, 5000);\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      }\n    });\n\n    this.isInit.value = true;\n\n    return this;\n  },\n\n  get(name: string) {\n    if (!this.isInit.value) throw 'Settings not initialized';\n    return this.options[name];\n  },\n\n  set(name: string, value: any) {\n    if (!Object.prototype.hasOwnProperty.call(this.options, name)) {\n      const err = Error(`${name} is not a defined option`);\n      con.error(err);\n      throw err;\n    }\n\n    this.options[name] = value;\n    return api.storage.set(`settings/${name}`, value);\n  },\n\n  setDebounce(name: string, value: any) {\n    this.options[name] = value;\n    clearTimeout(this.debounceArray[name]);\n    this.debounceArray[name] = setTimeout(() => {\n      this.set(name, value);\n      delete this.debounceArray[name];\n    }, 1000);\n  },\n\n  async getAsync(name: string) {\n    const value = await api.storage.get(`settings/${name}`);\n    if (typeof value === 'undefined' && typeof this.options[name] !== 'undefined')\n      return this.options[name];\n    return value;\n  },\n\n  getStaticChibi(): PageListJsonInterface['pages'] {\n    if (!this.isInit.value) throw 'Settings not initialized';\n    return this.chibiList;\n  },\n};\n","import { webextension } from './storage/webextension';\nimport { requestApi } from './request/requestWebextension';\nimport { settingsObj } from './settings';\n\nexport const storage = webextension;\n\nexport const request = requestApi;\n\nexport const settings = settingsObj;\n\nexport const type = 'webextension';\n","import escapeStringRegexp from 'escape-string-regexp';\n// Copied from https://github.com/mozilla/gecko-dev/blob/073cc24f53d0cf31403121d768812146e597cc9d/toolkit/components/extensions/schemas/manifest.json#L487-L491\nexport const patternValidationRegex = /^(https?|wss?|file|ftp|\\*):\\/\\/(\\*|\\*\\.[^*/]+|[^*/]+)\\/.*$|^file:\\/\\/\\/.*$|^resource:\\/\\/(\\*|\\*\\.[^*/]+|[^*/]+)\\/.*$|^about:/;\nconst isFirefox = globalThis.navigator?.userAgent.includes('Firefox/');\nexport const allStarsRegex = isFirefox\n    ? /^(https?|wss?):[/][/][^/]+([/].*)?$/\n    : /^https?:[/][/][^/]+([/].*)?$/;\nexport const allUrlsRegex = /^(https?|file|ftp):[/]+/;\nexport function assertValidPattern(matchPattern) {\n    if (!isValidPattern(matchPattern)) {\n        throw new Error(matchPattern + ' is an invalid pattern, it must match ' + String(patternValidationRegex));\n    }\n}\nexport function isValidPattern(matchPattern) {\n    return matchPattern === '<all_urls>' || patternValidationRegex.test(matchPattern);\n}\nexport function doesUrlMatchPatterns(url, ...matchPattern) {\n    if (matchPattern.includes('<all_urls>') && allUrlsRegex.test(url)) {\n        return true;\n    }\n    if (matchPattern.includes('*://*/*') && allStarsRegex.test(url)) {\n        return true;\n    }\n    for (const pattern of matchPattern) {\n        if (patternToRegex(pattern).test(url)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction getRawPatternRegex(matchPattern) {\n    assertValidPattern(matchPattern);\n    // Host undefined for file:///\n    let [, protocol, host = '', pathname] = matchPattern.split(/(^[^:]+:[/][/])([^/]+)?/);\n    protocol = protocol\n        .replace('*', isFirefox ? '(https?|wss?)' : 'https?') // Protocol wildcard\n        .replaceAll(/[/]/g, '[/]'); // Escape slashes\n    if (host === '*') {\n        host = '[^/]+';\n    }\n    else if (host) {\n        host = host\n            .replace(/^[*][.]/, '([^/]+.)*') // Initial wildcard\n            .replaceAll(/[.]/g, '[.]') // Escape dots\n            .replace(/[*]$/, '[^.]+'); // Last wildcard\n    }\n    pathname = pathname\n        .replaceAll(/[/]/g, '[/]') // Escape slashes\n        .replaceAll(/[.]/g, '[.]') // Escape dots\n        .replaceAll(/[*]/g, '.*'); // Any wildcard\n    return '^' + protocol + host + '(' + pathname + ')?$';\n}\nexport function patternToRegex(...matchPatterns) {\n    // No pattern, match nothing https://stackoverflow.com/q/14115522/288906\n    if (matchPatterns.length === 0) {\n        return /$./;\n    }\n    if (matchPatterns.includes('<all_urls>')) {\n        return allUrlsRegex;\n    }\n    if (matchPatterns.includes('*://*/*')) {\n        return allStarsRegex;\n    }\n    return new RegExp(matchPatterns.map(x => getRawPatternRegex(x)).join('|'));\n}\n// The parens are required by .split() to preserve the symbols\nconst globSymbols = /([?*]+)/;\nfunction splitReplace(part, index) {\n    if (part === '') {\n        // Shortcut for speed\n        return '';\n    }\n    if (index % 2 === 0) {\n        // Raw text, escape it\n        return escapeStringRegexp(part);\n    }\n    // Else: Symbol\n    if (part.includes('*')) { // Can be more than one and it swallows surrounding question marks\n        return '.*';\n    }\n    return [...part].map(() => isFirefox ? '.' : '.?').join('');\n}\nfunction getRawGlobRegex(glob) {\n    const regexString = glob\n        .split(globSymbols)\n        // eslint-disable-next-line unicorn/no-array-callback-reference -- tis ok 🤫\n        .map(splitReplace)\n        .join('');\n    // Drop \"start with anything\" and \"end with anything\" sequences because they're the default for regex\n    return ('^' + regexString + '$')\n        .replace(/^[.][*]/, '')\n        .replace(/[.][*]$/, '')\n        .replace(/^[$]$/, '.+'); // Catch `*` and `*`\n}\nexport function globToRegex(...globs) {\n    // No glob, match anything; `include_globs: []` is the default\n    if (globs.length === 0) {\n        return /.*/;\n    }\n    return new RegExp(globs.map(x => getRawGlobRegex(x)).join('|'));\n}\nexport function excludeDuplicatePatterns(matchPatterns) {\n    if (matchPatterns.includes('<all_urls>')) {\n        return ['<all_urls>'];\n    }\n    if (matchPatterns.includes('*://*/*')) {\n        return ['*://*/*'];\n    }\n    return matchPatterns.filter(possibleSubset => !matchPatterns.some(possibleSuperset => possibleSubset !== possibleSuperset && patternToRegex(possibleSuperset).test(possibleSubset)));\n}\n","/* eslint-disable max-classes-per-file */\nexport class NotAutenticatedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotAutenticatedError';\n  }\n}\n\nexport class UrlNotSupportedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UrlNotSupportedError';\n  }\n}\n\nexport class ServerOfflineError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'ServerOfflineError';\n  }\n}\n\nexport class NotFoundError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class UnexpectedResponseError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UnexpectedResponseError';\n  }\n}\n\nexport function parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    throw new UnexpectedResponseError(e.message);\n  }\n}\n\nexport function errorMessage(error, authenticationUrl: string) {\n  if (error instanceof NotAutenticatedError) {\n    return api.storage.lang('Error_Authenticate', [authenticationUrl]);\n  }\n  if (error instanceof ServerOfflineError) {\n    return 'Server Offline';\n  }\n  if (error instanceof UrlNotSupportedError) {\n    return `Incorrect url provided [${error.message}]`;\n  }\n  if (error instanceof NotFoundError) {\n    return 'Could not find this entry';\n  }\n  return error.message;\n}\n","export class ChibiReturn {\n  private value;\n\n  constructor(value) {\n    this.value = value;\n  }\n\n  getValue() {\n    return this.value;\n  }\n}\n","const reservedKeys = ['url', 'ui', 'provider', 'trigger', 'pageObject', 'element'] as const;\nexport type ReservedKey = (typeof reservedKeys)[number];\nexport function isReservedKey<T extends string>(key: T): T extends ReservedKey ? true : false {\n  return reservedKeys.includes(key as ReservedKey) as ReturnType<typeof isReservedKey<T>>;\n}\n\nexport class ChibiRegistry<T = any> {\n  private store: Map<string, T> = new Map();\n\n  public set(key: string, value: T): void {\n    this.store.set(key, value);\n  }\n\n  public get(key: string): T | undefined {\n    return this.store.get(key);\n  }\n\n  public has(key: string): boolean {\n    return this.store.has(key);\n  }\n\n  public delete(key: string): boolean {\n    return this.store.delete(key);\n  }\n\n  public clear(): void {\n    this.store.clear();\n  }\n\n  public keys(): string[] {\n    return Array.from(this.store.keys());\n  }\n}\n\nexport const chibiRegistrySingleton = new ChibiRegistry();\n","import type { ChibiConsumer } from './ChibiConsumer';\nimport type { ChibiJson } from './ChibiGenerator';\nimport { ChibiReturn } from './ChibiReturn';\nimport { ChibiRegistry, chibiRegistrySingleton } from './ChibiRegistry';\n\nexport class ChibiCtx {\n  private registry: ChibiRegistry;\n\n  private globalRegistry = chibiRegistrySingleton;\n\n  private intervalRegistry: { [key: string]: NodeJS.Timer } = {};\n\n  private consumer: ChibiConsumer;\n\n  constructor(consumer: ChibiConsumer) {\n    this.consumer = consumer;\n    this.registry = new ChibiRegistry();\n  }\n\n  run(script: ChibiJson<any>, startState: any = null) {\n    return this.getConsumer()._subroutine(script, startState);\n  }\n\n  set(name: string, value: any) {\n    this.registry.set(name, value);\n  }\n\n  get(name: string) {\n    return this.registry.get(name);\n  }\n\n  globalSet(name: string, value: any) {\n    this.globalRegistry.set(name, value);\n  }\n\n  globalGet(name: string) {\n    return this.globalRegistry.get(name);\n  }\n\n  getConsumer() {\n    return this.consumer;\n  }\n\n  return(value: any) {\n    return new ChibiReturn(value);\n  }\n\n  setInterval(key: string, interval: NodeJS.Timer) {\n    this.intervalRegistry[key] = interval;\n  }\n\n  getInterval(key: string) {\n    return this.intervalRegistry[key];\n  }\n\n  clearIntervals() {\n    Object.values(this.intervalRegistry).forEach(interval => {\n      clearInterval(interval);\n    });\n    this.intervalRegistry = {};\n  }\n}\n","/* eslint-disable max-classes-per-file */\nexport class ChibiError extends Error {}\n\nexport class UnknownChibiFunctionError extends ChibiError {\n  constructor(functionName: string) {\n    super(`Unknown function: ${functionName}`);\n  }\n}\n","import type { ChibiCtx } from '../ChibiCtx';\n\nexport default {\n  /**\n   * Converts input to string or returns the provided static value\n   * @input any\n   * @param value - Optional static string value to return instead of converting input\n   * @returns A string representation of the input or the static value\n   */\n  string: (ctx: ChibiCtx, input: any, value?: string) => {\n    if (value !== undefined) return value;\n    return String(input);\n  },\n\n  /**\n   * Converts input to boolean or returns the provided static value\n   * @input any\n   * @param value - Optional static boolean value to return instead of converting input\n   * @returns A boolean representation of the input or the static value\n   */\n  boolean: (ctx: ChibiCtx, input: any, value?: boolean) => {\n    if (value !== undefined) return value;\n    return Boolean(input);\n  },\n\n  /**\n   * Converts input to number or returns the provided static value\n   * @input any\n   * @param value - Optional static number value to return instead of converting input\n   * @returns A number representation of the input or the static value\n   */\n  number: (ctx: ChibiCtx, input: any, value?: number) => {\n    if (value !== undefined) return value;\n    return Number(input);\n  },\n\n  /**\n   * Returns the provided array\n   * @input void\n   * @param value - array value to return\n   * @returns returns the array\n   */\n  array: (ctx: ChibiCtx, input: void, value: string[]) => {\n    return value;\n  },\n\n  /**\n   * Returns the provided object\n   * @input void\n   * @param value - object value to return\n   * @returns returns the object\n   */\n  object: (ctx: ChibiCtx, input: void, value: object) => {\n    return value;\n  },\n};\n","import type { ChibiCtx } from '../ChibiCtx';\nimport type { ChibiJson } from '../ChibiGenerator';\n\nexport default {\n  /**\n   * Splits a string into an array using a delimiter\n   * @input string - The input string to split\n   * @param delimiter - The delimiter to split by\n   * @returns Array of substrings\n   * @example\n   * $c.string(\"a,b,c\").split(\",\") // returns [\"a\", \"b\", \"c\"]\n   */\n  split: (ctx: ChibiCtx, input: string, delimiter: string) => {\n    return input.split(delimiter);\n  },\n\n  /**\n   * Joins an array of strings into a single string\n   * @input string[] - Array of strings to join\n   * @param separator - The separator to join with\n   * @returns Joined string\n   * @example\n   * $c.array([\"a\", \"b\", \"c\"]).join(\",\") // returns \"a,b,c\"\n   */\n  join: (ctx: ChibiCtx, input: string[], separator: string) => {\n    return input.join(separator);\n  },\n\n  /**\n   * Replaces occurrences of a pattern in a string\n   * @input string - The input string\n   * @param pattern - String to replace\n   * @param replacement - Replacement string or return string of function\n   * @returns String with replacements\n   * @example\n   * $c.string(\"Hello World\").replace(\"World\", \"Chibi\") // returns \"Hello Chibi\"\n   * $c.string(\"Hello World\").replace(\"World\", $c.string('Chibi').run()) // returns \"Hella Chibi\"\n   */\n  replace: (\n    ctx: ChibiCtx,\n    input: string,\n    pattern: string,\n    replacement: string | ChibiJson<string>,\n  ) => {\n    const replacementValue = typeof replacement === 'string' ? replacement : ctx.run(replacement);\n    return input.replace(pattern, replacementValue);\n  },\n\n  /**\n   * Replaces all occurrences of a pattern in a string\n   * @input string - The input string\n   * @param pattern - String to replace\n   * @param replacement - Replacement string or function\n   * @returns String with all replacements\n   * @example\n   * $c.string(\"Hello World\").replaceAll(\"o\", \"e\") // returns \"Hella Werld\"\n   * $c.string(\"Hello World\").replaceAll(\"o\", $c.string('e').run()) // returns \"Hella Werld\"\n   */\n  replaceAll: (\n    ctx: ChibiCtx,\n    input: string,\n    pattern: string,\n    replacement: string | ChibiJson<string>,\n  ) => {\n    const replacementValue = typeof replacement === 'string' ? replacement : ctx.run(replacement);\n    // eslint-disable-next-line es-x/no-string-prototype-replaceall\n    return input.replaceAll(pattern, replacementValue);\n  },\n\n  /**\n   * Replaces text using a regular expression pattern\n   * @input string - The input string\n   * @param pattern - Regular expression pattern\n   * @param replacement - Replacement string or function\n   * @param flags - Regex flags (default: 'i' for case-insensitive)\n   * @returns String with regex replacements\n   * @example\n   * $c.string(\"Hello123\").replaceRegex(\"\\\\d+\", \"!\") // returns \"Hello!\"\n   * $c.string(\"Hello123\").replaceRegex(\"\\\\d+\", $c.string('!').run()) // returns \"Hello!\"\n   */\n  replaceRegex: (\n    ctx: ChibiCtx,\n    input: string,\n    pattern: string,\n    replacement: string | ChibiJson<string>,\n    flags: string = 'gi',\n  ) => {\n    const replacementValue = typeof replacement === 'string' ? replacement : ctx.run(replacement);\n    const regex = new RegExp(pattern, flags);\n    return input.replace(regex, replacementValue);\n  },\n\n  /**\n   * Extracts a substring from a string\n   * @input string - The input string\n   * @param start - Start index\n   * @param end - Optional end index\n   * @returns Extracted substring\n   * @example\n   * $c.string(\"Hello World\").substring(0, 5) // returns \"Hello\"\n   */\n  substring: (ctx: ChibiCtx, input: string, start: number, end?: number) => {\n    return input.substring(start, end);\n  },\n\n  /**\n   * Extracts specific characters from a string\n   * @input string - The input string\n   * @param pattern - Regular expression pattern\n   * @param group - Capture group to extract (default: 0 - full match)\n   * @param flags - Regex flags (default: 'i' for case-insensitive)\n   * @returns Extracted string from the specified group\n   * @example\n   * $c.string(\"Hello123\").regex(\"o(\\\\d+)\", 0) // returns \"o123\"\n   * $c.string(\"Hello123\").regex(\"o(\\\\d+)\", 1) // returns \"123\"\n   */\n  regex: (\n    ctx: ChibiCtx,\n    input: string,\n    pattern: string,\n    group: number = 0,\n    flags: string = 'i',\n  ) => {\n    const regex = new RegExp(pattern, flags);\n    const match = input.match(regex);\n\n    if (!match) {\n      throw new Error(`No match found for regex '${pattern}' in input '${input}'`);\n    }\n\n    return match[group];\n  },\n\n  /**\n   * Converts a string to lowercase\n   * @input string - The input string\n   * @returns Lowercase string\n   * @example\n   * $c.string(\"Hello World\").toLowerCase() // returns \"hello world\"\n   */\n  toLowerCase: (ctx: ChibiCtx, input: string) => {\n    return input.toLowerCase();\n  },\n\n  /**\n   * Converts a string to uppercase\n   * @input string - The input string\n   * @returns Uppercase string\n   * @example\n   * $c.string(\"Hello World\").toUpperCase() // returns \"HELLO WORLD\"\n   */\n  toUpperCase: (ctx: ChibiCtx, input: string) => {\n    return input.toUpperCase();\n  },\n\n  /**\n   * Trims whitespace from both ends of a string\n   * @input string - The input string\n   * @returns Trimmed string\n   * @example\n   * $c.string(\"   Hello World   \").trim() // returns \"Hello World\"\n   */\n  trim: (ctx: ChibiCtx, input: string) => {\n    return input.trim();\n  },\n\n  /**\n   * Checks if a string includes a substring\n   * @input string - The input string\n   * @param searchString - String to search for\n   * @param position - Optional position to start search\n   * @returns Boolean indicating if string includes the substring\n   * @example\n   * $c.string(\"Hello World\").includes(\"World\") // returns true\n   */\n  includes: (ctx: ChibiCtx, input: string, searchString: string, position?: number) => {\n    return input.includes(searchString, position);\n  },\n\n  /**\n   * Concatenates two strings\n   * @input string - The first string\n   * @param value - The second string to concatenate or function\n   * @returns Concatenated string\n   * @example\n   * $c.string(\"Hello\").concat(\" World\") // returns \"Hello World\"\n   * $c.string(\"Hello\").concat($c.string(\" World\").run()) // returns \"Hello World\"\n   */\n  concat: (ctx: ChibiCtx, input: string, value: string | ChibiJson<string>) => {\n    const concatValue = typeof value === 'string' ? value : ctx.run(value);\n    return input.concat(concatValue);\n  },\n\n  /**\n   * Parses a string as JSON\n   * @input string - The JSON string to parse\n   * @returns Parsed JavaScript object\n   * @example\n   * $c.string('{\"key\":\"value\"}').jsonParse() // returns { key: 'value' }\n   */\n  jsonParse: (ctx: ChibiCtx, input: string) => {\n    return JSON.parse(input);\n  },\n};\n","import type { ChibiCtx } from '../ChibiCtx';\nimport type { ChibiJson } from '../ChibiGenerator';\n\nexport default {\n  /**\n   * Selects an element from the DOM using a CSS selector\n   * @input void - No input required\n   * @param selector - CSS selector string or ChibiJson that resolves to a string\n   * @returns The first matching Element or null if not found\n   * @example\n   * $c.querySelector('h1')\n   */\n  querySelector: (ctx: ChibiCtx, input: void, selector: string | ChibiJson<string>) => {\n    const selectorValue = typeof selector === 'string' ? selector : (ctx.run(selector) as string);\n    return document.querySelector(selectorValue);\n  },\n\n  /**\n   * Selects multiple elements from the DOM using a CSS selector\n   * @input void - No input required\n   * @param selector - CSS selector string or ChibiJson that resolves to a string\n   * @returns Array of all matching elements\n   * @example\n   * $c.querySelectorAll('h1')\n   */\n  querySelectorAll: (ctx: ChibiCtx, input: void, selector: string | ChibiJson<string>) => {\n    const selectorValue = typeof selector === 'string' ? selector : (ctx.run(selector) as string);\n    return Array.from(document.querySelectorAll(selectorValue));\n  },\n\n  /**\n   * Finds elements within the input element using a CSS selector\n   * @input Element - DOM element to search within\n   * @param selector - CSS selector string or ChibiJson that resolves to a string\n   * @returns The first matching Element or null if not found\n   * @example\n   * $c.querySelector('div').find('h1')\n   */\n  find: (ctx: ChibiCtx, input: Element, selector: string | ChibiJson<string>) => {\n    const selectorValue = typeof selector === 'string' ? selector : (ctx.run(selector) as string);\n    return input.querySelector(selectorValue);\n  },\n\n  /**\n   * Finds all elements within the input element using a CSS selector\n   * @input Element - DOM element to search within\n   * @param selector - CSS selector string or ChibiJson that resolves to a string\n   * @returns Array of all matching elements\n   * @example\n   * $c.querySelector('div').findAll('h1')\n   */\n  findAll: (ctx: ChibiCtx, input: Element, selector: string | ChibiJson<string>) => {\n    const selectorValue = typeof selector === 'string' ? selector : (ctx.run(selector) as string);\n    return Array.from(input.querySelectorAll(selectorValue));\n  },\n\n  /**\n   * Gets the text content of an element\n   * @input Element - DOM element\n   * @returns Text content of the element\n   * @example\n   * $c.querySelector('h1').text()\n   */\n  text: (ctx: ChibiCtx, input: Element) => {\n    return input.textContent;\n  },\n\n  /**\n   * Gets the HTML content of an element\n   * @input Element - DOM element\n   * @returns HTML content of the element\n   * @example\n   * $c.querySelector('h1').html()\n   */\n  html: (ctx: ChibiCtx, input: Element) => {\n    return input.innerHTML;\n  },\n\n  /**\n   * Gets the value of an attribute on an element\n   * @input Element - DOM element\n   * @param name - Name of the attribute\n   * @returns Value of the attribute or null if not present\n   * @example\n   * $c.querySelector('input').getAttribute('value')\n   */\n  getAttribute: (ctx: ChibiCtx, input: Element, name: string) => {\n    return input.getAttribute(name);\n  },\n\n  /**\n   * Gets computed style of an element\n   * @input Element - DOM element\n   * @param property - CSS property name\n   * @returns Value of the computed style property\n   * @example\n   * $c.querySelector('h1').getComputedStyle('color')\n   */\n  getComputedStyle: (ctx: ChibiCtx, input: Element, property: string) => {\n    return window.getComputedStyle(input).getPropertyValue(property);\n  },\n\n  /**\n   * Finds the closest ancestor of an element matching a selector\n   * @input Element - DOM element to start from\n   * @param selector - CSS selector to match ancestors against or ChibiJson that resolves to a string\n   * @returns The matching ancestor element or null if none found\n   * @example\n   * $c.querySelector('h1').closest('.container')\n   */\n  closest: (ctx: ChibiCtx, input: Element, selector: string | ChibiJson<string>) => {\n    const selectorValue = typeof selector === 'string' ? selector : (ctx.run(selector) as string);\n    return input.closest(selectorValue);\n  },\n\n  /**\n   * Gets the parent element of a DOM node\n   * @input Element - DOM element\n   * @returns The parent Element or null if no parent exists\n   * @example\n   * $c.querySelector('h1').parent()\n   */\n  parent: (ctx: ChibiCtx, input: Element) => {\n    return input.parentElement;\n  },\n\n  /**\n   * Gets the next sibling element of a DOM node\n   * @input Element - DOM element\n   * @returns The next sibling Element or null if no sibling exists\n   * @example\n   * $c.querySelector('h1').next()\n   */\n  next: (ctx: ChibiCtx, input: Element) => {\n    return input.nextElementSibling;\n  },\n\n  /**\n   * Gets the previous sibling element of a DOM node\n   * @input Element - DOM element\n   * @returns The previous sibling Element or null if no sibling exists\n   * @example\n   * $c.querySelector('h1').prev()\n   */\n  prev: (ctx: ChibiCtx, input: Element) => {\n    return input.previousElementSibling;\n  },\n\n  /**\n   * Checks if an element matches a CSS selector\n   * @input Element - DOM element\n   * @param selector - CSS selector string\n   * @returns Boolean indicating if the element matches the selector\n   * @example\n   * $c.querySelector('h1').matches('.highlight')\n   */\n  elementMatches: (ctx: ChibiCtx, input: Element, selector: string) => {\n    return input.matches(selector);\n  },\n\n  /**\n   * Gets the current document title\n   * @returns The current document title\n   * @example\n   * $c.document().title() // returns \"My Page Title\"\n   */\n  title: (ctx: ChibiCtx, input: void) => {\n    return document.title;\n  },\n};\n","import { ChibiError } from '../../ChibiErrors';\nimport type { ChibiCtx } from '../../ChibiCtx';\nimport type { ChibiJson } from '../../ChibiGenerator';\nimport { isReservedKey, type ReservedKey } from '../../ChibiRegistry';\nimport { ChibiReturn } from '../../ChibiReturn';\n\nexport default {\n  /**\n   * Gets the current URL or URL from context\n   * @input void - No input required\n   * @returns Current URL as string\n   * @example\n   * $c.url() // returns https://example.com/anime/123\n   */\n  url: (ctx: ChibiCtx, input: void): string => {\n    const url = ctx.get('url');\n\n    if (url && typeof url === 'string') {\n      return url;\n    }\n\n    return typeof window !== 'undefined' ? window.location.href : '';\n  },\n\n  /**\n   * Gets the current provider from context\n   * @returns Current provider as string\n   * @example\n   * $c.provider() // returns 'MAL'\n   */\n  provider: (ctx: ChibiCtx, input: void): 'MAL' | 'ANILIST' | 'KITSU' | 'SIMKL' | 'SHIKI' => {\n    const provider = ctx.get('provider');\n\n    if (!provider) {\n      throw new ChibiError('Provider not set');\n    }\n\n    return provider;\n  },\n\n  /**\n   * Gets the current target element from context\n   * @returns Current target element\n   * @example\n   * $c.target()\n   */\n  target: (ctx: ChibiCtx, input: void): Element => {\n    const target = ctx.get('element');\n\n    if (!target) {\n      throw new ChibiError('target element not set');\n    }\n\n    return target;\n  },\n\n  /**\n   * Returns the input value immediately, stopping execution\n   * @input any - Value to return\n   * @returns The input value unchanged\n   * @example\n   * $c.string('/anime/123').ifThen($c => $c.urlAbsolute().return().run()).boolean(false)\n   */\n  return: (ctx: ChibiCtx, input: any): void => {\n    return ctx.return(input) as unknown as void;\n  },\n\n  /**\n   * Triggers lifecycle events\n   * @input void - No input required\n   */\n  trigger: (ctx: ChibiCtx, input: void): void => {\n    const trigger = ctx.get('trigger');\n\n    if (!trigger) {\n      throw new ChibiError('Trigger not set');\n    }\n\n    trigger();\n  },\n\n  /**\n   * Calls a different function of the page implementation\n   * @input any - Value to pass to the function\n   * @param property - Function name to call\n   * @returns The result of the function call\n   * @example\n   * $c.url().this('overview.getIdentifier') // Calls the getTitle function with the current URL as parameter\n   */\n  this: <Property extends string>(\n    ctx: ChibiCtx,\n    input: any,\n    property: Property,\n  ): Property extends `${string}.is${string}` | `is${string}`\n    ? boolean\n    : Property extends `${string}.elementsSelector` | 'elementsSelector'\n      ? Element[]\n      : Property extends\n            | `${string}.getTitle`\n            | 'getTitle'\n            | `${string}.getIdentifier`\n            | 'getIdentifier'\n            | `${string}.getOverviewUrl`\n            | 'getOverviewUrl'\n            | `${string}.elementUrl`\n            | 'elementUrl'\n        ? string\n        : Property extends `${string}.elementsSelector` | 'elementsSelector'\n          ? Element[]\n          : Property extends\n                | `${string}.getEpisode`\n                | 'getEpisode'\n                | `${string}.getVolume`\n                | 'getVolume'\n            ? number\n            : Property extends `${string}.nextEpUrl` | 'nextEpUrl'\n              ? string | undefined | boolean\n              : Property extends `${string}.getMalUrl` | 'getMalUrl'\n                ? Promise<string | boolean> | string | boolean\n                : any => {\n    const page = ctx.get('pageObject');\n\n    let propertyName: string = property;\n    switch (property) {\n      case 'sync.isSyncPage':\n        propertyName = 'isSyncPage';\n        break;\n      case 'overview.isOverviewPage':\n        propertyName = 'isOverviewPage';\n        break;\n      case 'sync.uiInjection':\n        propertyName = 'sync.uiSelector';\n        break;\n      case 'overview.uiInjection':\n        propertyName = 'overview.uiSelector';\n        break;\n      case 'list.elementsSelector':\n        propertyName = 'overview.list.elementsSelector';\n        break;\n      case 'list.elementUrl':\n        propertyName = 'overview.list.elementUrl';\n        break;\n      case 'list.elementEp':\n        propertyName = 'overview.list.elementEp';\n        break;\n      default:\n        break;\n    }\n\n    const propParts = propertyName.split('.');\n\n    let value = page;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const prop of propParts) {\n      if (value[prop] === undefined) {\n        throw new Error(`Property ${property} not found`);\n      }\n      value = value[prop];\n    }\n\n    if (typeof value === 'function') {\n      return value(input);\n    }\n    return value;\n  },\n\n  /**\n   * Gets a value from the variables in context\n   * @input void - No input required\n   * @param key - Variable name to retrieve\n   * @param defaultValue - Default value if variable is not found\n   * @returns Variable value or default value\n   * @example\n   * $c.getVariable('myVar', 'default') // returns the value of myVar or 'default' if not set\n   */\n  getVariable: (ctx: ChibiCtx, input: void, key: string, defaultValue?: any): any => {\n    const value = ctx.get(key);\n    return value !== undefined ? value : defaultValue;\n  },\n\n  /**\n   * Sets a variable in the context\n   * @input any - Value to set if no value parameter is provided\n   * @param key - Variable name to store the value under\n   * @param value - Optional value to set instead of the input\n   * @returns The input value (for chaining)\n   * @example\n   * $c.string('hello').setVariable('myKey') // sets myVar to 'hello'\n   * $c.string('world').setVariable('myKey', $c.string('newValue').run()) // sets myVar to 'newValue'\n   */\n  setVariable: <Input>(\n    ctx: ChibiCtx,\n    input: Input,\n    key: Exclude<string, ReservedKey>,\n    value?: ChibiJson<any>,\n  ): Input => {\n    if (isReservedKey(key)) {\n      throw new ChibiError(`Cannot set reserved key: ${key}`);\n    }\n\n    if (value !== undefined) {\n      const resolvedValue = ctx.run(value);\n      ctx.set(key, resolvedValue);\n    } else {\n      ctx.set(key, input);\n    }\n    return input;\n  },\n\n  /**\n   * Gets a value from the global registry\n   * @input void - No input required\n   * @param key - Global variable name to retrieve\n   * @param defaultValue - Default value if variable is not found\n   * @returns Global variable value or default value\n   * @example\n   * $c.getGlobalVariable('myGlobalVar', 'default') // returns the value of myGlobalVar or 'default' if not set\n   */\n  getGlobalVariable: (ctx: ChibiCtx, input: void, key: string, defaultValue?: any): any => {\n    const value = ctx.globalGet(key);\n    return value !== undefined ? value : defaultValue;\n  },\n\n  /**\n   * Sets a variable in the global registry\n   * @input any - Value to set if no value parameter is provided\n   * @param key - Global variable name to store the value under\n   * @param value - Optional value to set instead of the input\n   * @returns The input value (for chaining)\n   * @example\n   * $c.string('hello').setGlobalVariable('myKey') // sets myVar to 'hello'\n   * $c.string('world').setGlobalVariable('myKey', $c.string('newValue').run()) // sets myVar to 'newValue'\n   */\n  setGlobalVariable: <Input>(\n    ctx: ChibiCtx,\n    input: Input,\n    key: Exclude<string, ReservedKey>,\n    value?: ChibiJson<any>,\n  ): Input => {\n    if (isReservedKey(key)) {\n      throw new ChibiError(`Cannot set reserved global key: ${key}`);\n    }\n\n    if (value !== undefined) {\n      const resolvedValue = ctx.run(value);\n      ctx.globalSet(key, resolvedValue);\n    } else {\n      ctx.globalSet(key, input);\n    }\n    return input;\n  },\n\n  /**\n   * Creates a function scope.\n   * Makes it possible to catch return values similar to a function\n   * @input void - No input required\n   * @param functionBody - Function body to execute\n   * @returns The result of the function body\n   * @example\n   * $c\n   *  .function($c.string('hello').return().run())\n   *  .concat(' world')\n   *  .log(); // 'hello world'\n   */\n  fn: <T = any>(ctx: ChibiCtx, input: void, functionBody: ChibiJson<T>): T => {\n    const result = ctx.run(functionBody);\n\n    if (result && result instanceof ChibiReturn) {\n      return result.getValue();\n    }\n\n    return result;\n  },\n\n  /**\n   * Adds a style to the page\n   * @param css - CSS to add to the page\n   * @example\n   * $c.addStyle('body { background-color: red; }') // Adds a red background to the page\n   */\n  addStyle: (ctx: ChibiCtx, input: void, css: string): void => {\n    api.storage.addStyle(css);\n  },\n\n  /**\n   * Logs a value to the console\n   * @input any - Value to log\n   * @param prefix - Optional prefix for the log\n   * @returns The input value (for chaining)\n   * @example\n   * $c.string('hello').log() // Logs 'hello' to the console\n   */\n  log: <Input>(ctx: ChibiCtx, input: Input, prefix: string = 'ChibiScript'): Input => {\n    con.m(prefix).log(input);\n    return input;\n  },\n\n  /**\n   * Throws an error with custom message\n   * @input any - Optional context for the error\n   * @param message - Error message to throw\n   * @returns Never returns, always throws\n   */\n  error: (ctx: ChibiCtx, input: any, message: string): never => {\n    throw new ChibiError(message);\n  },\n};\n","import type { ChibiCtx } from '../../ChibiCtx';\n\nexport default {\n  /**\n   * Extracts a specific segment from a URL path by splitting the URL on '/' characters\n   * @input string - URL or path to split\n   * @param part - Index of the segment to return (0-based)\n   * @returns The URL segment at the specified index after splitting by '/', or undefined if index is out of bounds\n   * @example\n   * $c.string(\"https://example.com/anime/123\").urlpart(4) // returns \"123\"\n   * $c.string(\"/manga/456/chapter/7\").urlpart(2) // returns \"456\"\n   */\n  urlPart: (ctx: ChibiCtx, input: string, part: number) => {\n    return utils.urlPart(input, part);\n  },\n\n  /**\n   * Removes URL hash and query parameters\n   * @input string - URL to strip\n   * @returns URL with hash and query parameters removed\n   * @example\n   * $c.string(\"https://example.com/page?param=1#section\").urlStrip() // returns \"https://example.com/page\"\n   */\n  urlStrip: (ctx: ChibiCtx, input: string) => {\n    return utils.urlStrip(input);\n  },\n\n  /**\n   * Gets the value of a query parameter from a URL\n   * @input string - URL to extract parameter from\n   * @param name - Name of the parameter to extract\n   * @returns Value of the parameter or null if not found\n   * @example\n   * $c.string(\"https://example.com/page?id=123&view=list\").urlParam(\"id\") // returns \"123\"\n   */\n  urlParam: (ctx: ChibiCtx, input: string, name: string) => {\n    return utils.urlParam(input, name);\n  },\n\n  /**\n   * Converts a relative URL to an absolute URL\n   * @input string - URL to convert (can be relative)\n   * @param domain - Domain to use for converting relative URLs\n   * @returns Absolute URL\n   * @example\n   * $c.string(\"/path/to/page\").urlAbsolute() // returns \"https://example.com/path/to/page\"\n   */\n  urlAbsolute: (ctx: ChibiCtx, input: string, domain?: string): string => {\n    if (!domain) {\n      domain = `${window.location.protocol}//${window.location.host}`;\n    }\n    return utils.absoluteLink(input, domain);\n  },\n\n  /**\n   * Gets the text content of an element excluding the text of its children\n   * @input Element - DOM element\n   * @returns Text content of the element excluding child elements' text\n   * @example\n   * $c.html(\"<div>Parent <span>Child</span></div>\").getBaseText() // returns \"Parent \"\n   */\n  getBaseText: (ctx: ChibiCtx, input: Element): string => {\n    return utils.getBaseText(input);\n  },\n};\n","import { ChibiError } from '../../ChibiErrors';\nimport type { ChibiCtx } from '../../ChibiCtx';\n\nexport default {\n  /**\n   * Prepends HTML content inside a target element (as the first child)\n   * @input Element - Target DOM element to inject into\n   * @example\n   * $c.querySelector('div').uiPrepend()\n   */\n  uiPrepend: (ctx: ChibiCtx, input: Element): void => {\n    const ui = ctx.get('ui');\n    if (typeof ui !== 'string') throw new ChibiError('UI html not found');\n\n    j.$(input).prepend(j.html(ui));\n  },\n\n  /**\n   * Appends HTML content inside a target element (as the last child)\n   * @input Element - Target DOM element to inject into\n   * @example\n   * $c.querySelector('div').uiAppend()\n   */\n  uiAppend: (ctx: ChibiCtx, input: Element): void => {\n    const ui = ctx.get('ui');\n    if (typeof ui !== 'string') throw new ChibiError('UI html not found');\n\n    j.$(input).append(j.html(ui));\n  },\n\n  /**\n   * Inserts HTML content after a target element (as a sibling)\n   * @input Element - Target DOM element to inject after\n   * @example\n   * $c.querySelector('div').uiAfter()\n   */\n  uiAfter: (ctx: ChibiCtx, input: Element): void => {\n    const ui = ctx.get('ui');\n    if (typeof ui !== 'string') throw new ChibiError('UI html not found');\n\n    j.$(input).after(j.html(ui));\n  },\n\n  /**\n   * Inserts HTML content before a target element (as a sibling)\n   * @input Element - Target DOM element to inject before\n   * @example\n   * $c.querySelector('div').uiBefore()\n   */\n  uiBefore: (ctx: ChibiCtx, input: Element): void => {\n    const ui = ctx.get('ui');\n    if (typeof ui !== 'string') throw new ChibiError('UI html not found');\n\n    j.$(input).before(j.html(ui));\n  },\n};\n","import type { ChibiJson } from 'src/chibiScript/ChibiGenerator';\nimport type { ChibiCtx } from '../../ChibiCtx';\n\nexport default {\n  /**\n   * Wait for the DOM to be ready\n   * @input void - No input required\n   * @example\n   * $c.domReady().trigger()\n   */\n  domReady: (ctx: ChibiCtx, input: void): Promise<void> => {\n    return new Promise(resolve => {\n      $(() => {\n        resolve();\n      });\n    });\n  },\n\n  /**\n   * Wait for a specific condition to be true\n   * @param condition - Condition to evaluate\n   * @param _intervalKey - Internal never provide this\n   * @returns Promise that resolves when the condition is true\n   * @example\n   * $c.waitUntilTrue($c.boolean(true).run()).trigger().run()\n   */\n  waitUntilTrue: (\n    ctx: ChibiCtx,\n    input: void,\n    condition: ChibiJson<boolean>,\n    _intervalKey?,\n  ): Promise<void> => {\n    return new Promise(resolve => {\n      clearInterval(ctx.getInterval(_intervalKey));\n      ctx.setInterval(\n        _intervalKey,\n        utils.waitUntilTrue(\n          () => ctx.run(condition),\n          () => resolve(),\n        ),\n      );\n    });\n  },\n\n  /**\n   * Detect changes in a specific target and run a callback every time a change is detected\n   * @param target - Target to monitor for changes\n   * @param callback - Callback to execute when changes are detected\n   * @param _intervalKey - Internal never provide this\n   * @example\n   * $c.detectChanges($c.querySelector('h1').text().run(), $c.trigger().run())\n   */\n  detectChanges: (\n    ctx: ChibiCtx,\n    input: void,\n    target: ChibiJson<any>,\n    callback: ChibiJson<any>,\n    _intervalKey?,\n  ): void => {\n    clearInterval(ctx.getInterval(_intervalKey));\n    let currentState = ctx.run(target);\n    ctx.setInterval(\n      _intervalKey,\n      setInterval(() => {\n        const temp = ctx.run(target);\n        if (typeof temp !== 'undefined' && currentState !== temp) {\n          currentState = temp;\n          ctx.run(callback);\n        }\n      }, 500),\n    );\n  },\n\n  /**\n   * Detect changes in the URL and run a callback every time a change is detected\n   * @param callback - Callback to execute when URL changes are detected\n   * @param options - Options to configure the detection\n   * @param _intervalKey - Internal never provide this\n   * @example\n   * $c.detectURLChanges($c.trigger().run())\n   */\n  detectURLChanges: (\n    ctx: ChibiCtx,\n    input: void,\n    callback: ChibiJson<any>,\n    options: {\n      ignoreQuery: boolean;\n      ignoreAnchor: boolean;\n    } | null = null,\n    _intervalKey?,\n  ): void => {\n    const ignoreQuery = options?.ignoreQuery ?? false;\n    const ignoreAnchor = options?.ignoreAnchor ?? true;\n\n    const normalizeUrl = (url: string) => {\n      let normalized = url;\n      if (ignoreQuery) {\n        normalized = normalized.split('?')[0];\n      }\n      if (ignoreAnchor) {\n        normalized = normalized.split('#')[0];\n      }\n      return normalized;\n    };\n\n    clearInterval(ctx.getInterval(_intervalKey));\n    let currentUrl = normalizeUrl(window.location.href);\n    ctx.setInterval(\n      _intervalKey,\n      setInterval(() => {\n        const newUrl = normalizeUrl(window.location.href);\n        if (currentUrl !== newUrl) {\n          currentUrl = newUrl;\n          ctx.run(callback);\n        }\n      }, 500),\n    );\n  },\n};\n","import literalFunctions from './literalFunctions';\nimport controlFlowFunctions from './controlFlowFunctions';\nimport stringFunctions from './stringFunctions';\nimport domFunctions from './domFunctions';\nimport coreFunctions from './core';\nimport conditionFunctions from './conditionFunctions';\nimport arrayFunctions from './arrayFunctions';\nimport objectFunctions from './objectFunctions';\n\nexport default {\n  ...literalFunctions,\n  ...controlFlowFunctions,\n  ...stringFunctions,\n  ...domFunctions,\n  ...coreFunctions,\n  ...conditionFunctions,\n  ...arrayFunctions,\n  ...objectFunctions,\n};\n","import type { ChibiCtx } from '../ChibiCtx';\nimport type { ChibiGenerator, ChibiJson } from '../ChibiGenerator';\nimport type * as CT from '../ChibiTypeHelper';\n\nexport default {\n  /**\n   * Conditional execution based on a condition\n   * @input any\n   * @param condition - Boolean condition to evaluate\n   * @param thenAction - Action to execute if condition is true\n   * @param elseAction - Action to execute if condition is false\n   * @returns Result of either thenAction or elseAction based on condition\n   * @example\n   * $c.if(\n   *  $c.boolean(true).run(),\n   *  $c.string('hello').run(),\n   *  $c.string('world').run()\n   * ).concat('world').run(); // returns 'helloworld'\n   */\n  if<Input, Then extends ChibiJson<any>, Else extends ChibiJson<any>>(\n    ctx: ChibiCtx,\n    input: void,\n    condition: ChibiJson<boolean>,\n    thenAction: Then,\n    elseAction: Else,\n  ): CT.UnwrapJson<Then> | CT.UnwrapJson<Else> {\n    const conditionState = ctx.run(condition);\n    if (conditionState) {\n      return ctx.run(thenAction);\n    }\n    return ctx.run(elseAction);\n  },\n\n  /**\n   * Conditional execution based on a condition\n   * @input condition - Boolean condition to evaluate\n   * @param thenAction - Action to execute if condition is true\n   * @returns Result of thenAction if condition is true, otherwise input\n   * @example\n   * $c.string('/anime/123').ifThen($c => $c.urlAbsolute().return().run()).boolean(false)\n   */\n  ifThen<Input, Then extends ($c: ChibiGenerator<Input>) => ChibiJson<any>>(\n    ctx: ChibiCtx,\n    input: Input,\n    thenAction: Then,\n  ): CT.UnwrapJson<ReturnType<Then>> | Input {\n    if (input) {\n      return ctx.run(thenAction as any, input);\n    }\n    return input;\n  },\n\n  /**\n   * If the input is falsy stop further execution and return the result of returnAction\n   * @input condition - Boolean condition to evaluate\n   * @param returnAction - Action to execute if input is falsy\n   * @example\n   * $c.querySelector('a').ifNotReturn($c.number(0).run()).text().trim().run();\n   * $c.querySelector('a').ifNotReturn().text().trim().run();\n   */\n  ifNotReturn<Input>(\n    ctx: ChibiCtx,\n    input: Input,\n    returnAction?: ChibiJson<any>,\n  ): Exclude<Input, false | 0 | '' | null | undefined> {\n    if (input) {\n      return input as any;\n    }\n    return ctx.return(returnAction ? ctx.run(returnAction) : null) as any;\n  },\n};\n","import coreFunctions from './coreFunctions';\nimport utilsFunctions from './utilsFunctions';\nimport uiInjectionFunctions from './uiInjectionFunctions';\nimport asyncFunctions from './asyncFunctions';\n\nexport default {\n  ...coreFunctions,\n  ...utilsFunctions,\n  ...uiInjectionFunctions,\n  ...asyncFunctions,\n};\n","import type { ChibiCtx } from '../ChibiCtx';\nimport type { ChibiJson } from '../ChibiGenerator';\nimport type * as CT from '../ChibiTypeHelper';\n\nexport default {\n  /**\n   * Checks if two values are equal (using strict equality ===)\n   * @input any - First value to compare\n   * @param value - Second value to compare\n   * @returns Boolean indicating if values are equal\n   * @example\n   * $c.string(\"abc\").equals(\"abc\") // returns true\n   */\n  equals: (ctx: ChibiCtx, input: any, value: any) => {\n    return input === value;\n  },\n\n  /**\n   * Checks if input is greater than the given value\n   * @input any - First value to compare\n   * @param value - Value to compare against\n   * @returns Boolean indicating if input is greater than value\n   * @example\n   * $c.number(10).greaterThan(5) // returns true\n   */\n  greaterThan: (ctx: ChibiCtx, input: any, value: any) => {\n    return input > value;\n  },\n\n  /**\n   * Checks if input is greater than or equal to the given value\n   * @input any - First value to compare\n   * @param value - Value to compare against\n   * @returns Boolean indicating if input is greater than or equal to value\n   * @example\n   * $c.number(10).greaterThanOrEqual(10) // returns true\n   */\n  greaterThanOrEqual: (ctx: ChibiCtx, input: any, value: any) => {\n    return input >= value;\n  },\n\n  /**\n   * Checks if input is less than the given value\n   * @input any - First value to compare\n   * @param value - Value to compare against\n   * @returns Boolean indicating if input is less than value\n   * @example\n   * $c.number(5).lessThan(10) // returns true\n   */\n  lessThan: (ctx: ChibiCtx, input: any, value: any) => {\n    return input < value;\n  },\n\n  /**\n   * Checks if input is less than or equal to the given value\n   * @input any - First value to compare\n   * @param value - Value to compare against\n   * @returns Boolean indicating if input is less than or equal to value\n   * @example\n   * $c.number(10).lessThanOrEqual(10) // returns true\n   */\n  lessThanOrEqual: (ctx: ChibiCtx, input: any, value: any) => {\n    return input <= value;\n  },\n\n  /**\n   * Checks if string contains a substring\n   * @input string - String to search within\n   * @param substring - Substring to search for\n   * @returns Boolean indicating if input contains the substring\n   * @example\n   * $c.string(\"Hello world\").contains(\"world\") // returns true\n   */\n  contains: (ctx: ChibiCtx, input: string, substring: string) => {\n    return input.includes(substring);\n  },\n\n  /**\n   * Checks if string matches a regular expression\n   * @input string - String to test\n   * @param pattern - Regular expression pattern\n   * @param flags - Regex flags (default: 'i' for case-insensitive)\n   * @returns Boolean indicating if the string matches the pattern\n   * @example\n   * $c.string(\"abc123\").matches(\"^[a-z]+\\\\d+$\") // returns true\n   */\n  matches: (ctx: ChibiCtx, input: string, pattern: string, flags: string = 'i') => {\n    const regex = new RegExp(pattern, flags);\n    return regex.test(input);\n  },\n\n  /**\n   * Performs logical AND operation on all provided boolean values\n   * @input void - No input used\n   * @param values - One or more boolean values to AND together\n   * @returns Result of AND operation on all values\n   * @example\n   * $c.and($c.boolean(true).run(), $c.boolean(false).run(), $c.boolean(true).run()) // returns false\n   * $c.and($c.boolean(true).run(), $c.boolean(true).run()) // returns true\n   */\n  and: (ctx: ChibiCtx, input: void, ...values: ChibiJson<boolean>[]) => {\n    return values.reduce((result, val) => result && ctx.run(val), true);\n  },\n\n  /**\n   * Performs logical OR operation on all provided boolean values\n   * @input void - No input used\n   * @param values - One or more boolean values to OR together\n   * @returns Result of OR operation on all values\n   * @example\n   * $c.or($c.boolean(false).run(), $c.boolean(true).run()) // returns true\n   * $c.or($c.boolean(false).run(), $c.boolean(false).run()) // returns false\n   */\n  or: (ctx: ChibiCtx, input: void, ...values: ChibiJson<boolean>[]) => {\n    return values.reduce((result, val) => result || ctx.run(val), false);\n  },\n\n  /**\n   * Performs logical NOT operation on input\n   * @input boolean - Boolean value to negate\n   * @returns Negated boolean value\n   * @example\n   * $c.boolean(true).not() // returns false\n   */\n  not: (ctx: ChibiCtx, input: boolean) => {\n    return !input;\n  },\n\n  /**\n   * Checks if value is null or undefined\n   * @input any - Value to check\n   * @returns Boolean indicating if value is null or undefined\n   * @example\n   * $c.value(null).isNil() // returns true\n   * $c.value(undefined).isNil() // returns true\n   * $c.value(\"\").isNil() // returns false\n   */\n  isNil: (ctx: ChibiCtx, input: any) => {\n    return input === null || input === undefined;\n  },\n\n  /**\n   * Checks if value is empty (empty string, array, object or null/undefined)\n   * @input any - Value to check\n   * @returns Boolean indicating if value is empty\n   * @example\n   * $c.string(\"\").isEmpty() // returns true\n   * $c.array([]).isEmpty() // returns true\n   * $c.object({}).isEmpty() // returns true\n   */\n  isEmpty: (ctx: ChibiCtx, input: any) => {\n    if (input === null || input === undefined) return true;\n    if (typeof input === 'string') return input === '';\n    if (Array.isArray(input)) return input.length === 0;\n    if (typeof input === 'object') return Object.keys(input).length === 0;\n    return false;\n  },\n\n  /**\n   * Returns the first non-nil value from a list of values\n   * @input void - No input used\n   * @param values - List of values to check\n   * @returns First non-nil value, or undefined if all values are nil\n   * @example\n   * $c.coalesce($c.boolean(false).run(), $c.string(\"Hello\").run()) // returns \"Hello\"\n   */\n  coalesce: <Input, Values extends ChibiJson<any>[]>(\n    ctx: ChibiCtx,\n    input: void,\n    ...values: Values\n  ): CT.UnwrapJson<Values[number]> | undefined => {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const val of values) {\n      const result = ctx.run(val);\n      if (result !== null && result !== undefined) {\n        return result;\n      }\n    }\n    return undefined;\n  },\n};\n","import type { ChibiCtx } from '../ChibiCtx';\nimport type { ChibiGenerator, ChibiJson } from '../ChibiGenerator';\nimport type * as CT from '../ChibiTypeHelper';\n\nexport default {\n  /**\n   * Gets the first element from an array\n   * @input any[] - Array to get element from\n   * @returns First element of the array or undefined if empty\n   * @example\n   * $c.array([\"1\", \"2\", \"3\"]).first() // returns \"1\"\n   */\n  first: <Input>(\n    ctx: ChibiCtx,\n    input: Input,\n  ): CT.GetArrayType<Input extends any[] ? Input : never> => {\n    return input[0];\n  },\n\n  /**\n   * Gets the last element from an array\n   * @input any[] - Array to get element from\n   * @returns Last element of the array or undefined if empty\n   * @example\n   * $c.array([\"1\", \"2\", \"3\"]).last() // returns \"3\"\n   */\n  last: <Input>(\n    ctx: ChibiCtx,\n    input: Input extends any[] ? Input : never,\n  ): CT.GetArrayType<Input extends any[] ? Input : never> => {\n    return input[input.length - 1];\n  },\n\n  /**\n   * Gets element at a specific index from an array\n   * @input any[] - Array to get element from\n   * @param index - Index of element to get\n   * @returns Element at the specified index or undefined if index is out of bounds\n   * @example\n   * $c.array([\"1\", \"2\", \"3\"]).at(1) // returns \"2\"\n   */\n  at: <Input>(\n    ctx: ChibiCtx,\n    input: Input,\n    index: number,\n  ): CT.GetArrayType<Input extends any[] ? Input : never> => {\n    return input[index];\n  },\n\n  /**\n   * Gets the length of an array\n   * @input any[] - Array to get length of\n   * @returns Number of elements in the array\n   * @example\n   * $c.array([\"1\", \"2\", \"3\"]).length() // returns 3\n   */\n  length: (ctx: ChibiCtx, input: any[]) => {\n    return input.length;\n  },\n\n  /**\n   * Slices an array to extract a section\n   * @input any[] - Array to slice\n   * @param start - Start index\n   * @param end - Optional end index (exclusive)\n   * @returns New array with extracted section\n   * @example\n   * $c.array([\"1\", \"2\", \"3\", \"4\", \"5\"]).slice(1, 3) // returns [\"2\", \"3\"]\n   */\n  slice: <Input>(\n    ctx: ChibiCtx,\n    input: Input extends any[] ? Input : never,\n    start: number,\n    end?: number,\n  ): Input => {\n    return input.slice(start, end) as Input;\n  },\n\n  /**\n   * Reverses an array in place\n   * @input any[] - Array to reverse\n   * @returns Reversed array (same reference as input)\n   * @example\n   * $c.array([\"1\", \"2\", \"3\"]).reverse() // returns [\"3\", \"2\", \"1\"]\n   */\n  reverse: <Input>(ctx: ChibiCtx, input: Input extends any[] ? Input : never) => {\n    return input.reverse() as Input;\n  },\n\n  /**\n   * Checks if an array includes a certain element\n   * @input any[] - Array to search\n   * @param searchElement - Element to search for\n   * @returns Boolean indicating if the element is found\n   * @example\n   * $c.array([\"1\", \"2\", \"3\"]).arrayIncludes(\"2\") // returns true\n   */\n  arrayIncludes: (ctx: ChibiCtx, input: any[], searchElement: any) => {\n    return input.includes(searchElement);\n  },\n\n  /**\n   * Maps each element in an array to a new value using a callback function\n   * @input any[] - Array to map over\n   * @param callback - Function that transforms each element\n   * @returns New array with transformed elements\n   * @example\n   * $c.array(['1', '2', '3']).map($item => $item.concat('2').run()) // returns [\"12\", \"22\", \"32\"]\n   */\n  map: <Input>(\n    ctx: ChibiCtx,\n    input: any[],\n    callback: (\n      $c: ChibiGenerator<CT.GetArrayType<Input extends any[] ? Input : never>>,\n    ) => ChibiJson<any>,\n  ) => {\n    return input.map(item => {\n      return ctx.run(callback as unknown as ChibiJson<any>, item);\n    });\n  },\n\n  /**\n   * Finds the first element in an array that satisfies the condition\n   * @input any[] - Array to search in\n   * @param callback - Function that returns true for the desired element\n   * @returns First element that satisfies condition or undefined if not found\n   * @example\n   * $c.array(['1', '2', '3', '4']).arrayFind($item => $item.number().greaterThan(2).run()) // returns \"3\"\n   */\n  arrayFind: <Input>(\n    ctx: ChibiCtx,\n    input: Input extends any[] ? Input : never,\n    condition: (\n      $c: ChibiGenerator<CT.GetArrayType<Input extends any[] ? Input : never>>,\n    ) => ChibiJson<boolean>,\n  ): CT.GetArrayType<Input extends any[] ? Input : never> | undefined => {\n    for (let i = 0; i < input.length; i++) {\n      if (ctx.run(condition as unknown as ChibiJson<any>, input[i])) {\n        return input[i];\n      }\n    }\n    return undefined;\n  },\n\n  /**\n   * Filters an array to include only elements that satisfy the condition\n   * @input any[] - Array to filter\n   * @param callback - Function that returns true for elements to keep\n   * @returns New array with elements that satisfy the condition\n   * @example\n   * $c.array(['1', '2', '3', '4']).filter($item => $item.number().greaterThan(2).run()) // returns [\"3\", \"4\"]\n   */\n  filter: <Input>(\n    ctx: ChibiCtx,\n    input: Input extends any[] ? Input : never,\n    condition: (\n      $c: ChibiGenerator<CT.GetArrayType<Input extends any[] ? Input : never>>,\n    ) => ChibiJson<boolean>,\n  ): Input => {\n    return input.filter(item => ctx.run(condition as unknown as ChibiJson<any>, item)) as Input;\n  },\n};\n","import type { ChibiCtx } from '../ChibiCtx';\n\nexport default {\n  /**\n   * Gets a property from an object by key\n   * @input object - Object to get property from\n   * @param key - Key to access the property\n   * @returns Value at the specified key or undefined if not found\n   * @example\n   * $c.object({user: {name: \"John\"}}).get(\"user\") // returns {name: \"John\"}\n   */\n  get: (ctx: ChibiCtx, input: any, key: string) => {\n    if (!input || typeof input !== 'object') {\n      return undefined;\n    }\n\n    return input[key];\n  },\n\n  /**\n   * Gets all keys from an object\n   * @input object - Object to get keys from\n   * @returns Array of key strings\n   * @example\n   * $c.object({name: \"John\", age: 30}).keys() // returns [\"name\", \"age\"]\n   */\n  keys: (ctx: ChibiCtx, input: any) => {\n    if (!input || typeof input !== 'object') {\n      return [];\n    }\n\n    return Object.keys(input);\n  },\n\n  /**\n   * Gets all values from an object\n   * @input object - Object to get values from\n   * @returns Array of values\n   * @example\n   * $c.object({name: \"John\", age: 30}).values() // returns [\"John\", 30]\n   */\n  values: (ctx: ChibiCtx, input: any) => {\n    if (!input || typeof input !== 'object') {\n      return [];\n    }\n\n    return Object.values(input);\n  },\n};\n","import { ChibiCtx } from './ChibiCtx';\nimport { ChibiError, UnknownChibiFunctionError } from './ChibiErrors';\nimport type { ChibiJson } from './ChibiGenerator';\nimport { ChibiReturn } from './ChibiReturn';\nimport functionsRegistry from './functions';\n\nexport class ChibiConsumer {\n  private script: ChibiJson<any>;\n\n  private name: string;\n\n  private ctx: ChibiCtx;\n\n  private hasRun: boolean = false;\n\n  constructor(script: ChibiJson<any>, name = 'Unknown') {\n    this.script = script;\n    this.name = name;\n    this.ctx = new ChibiCtx(this);\n  }\n\n  run(startState: any = null) {\n    if (this.hasRun) {\n      throw new ChibiError('Run method can only be executed once');\n    }\n    this.hasRun = true;\n    const state = this._subroutine(this.script, startState);\n\n    if (state && state instanceof ChibiReturn) {\n      return state.getValue();\n    }\n\n    return state;\n  }\n\n  _subroutine(script: ChibiJson<any>, startState: any = null) {\n    let state: any = startState;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [functionName, ...args] of script) {\n      if (!functionsRegistry[functionName]) {\n        throw new UnknownChibiFunctionError(functionName);\n      }\n      const func = functionsRegistry[functionName];\n      try {\n        state = func(this.ctx, state, ...args);\n      } catch (error) {\n        if (error instanceof ChibiError) {\n          throw error;\n        }\n        this.logError(error, functionName, state, args);\n        state = null;\n      }\n\n      if (state && state instanceof Promise) {\n        throw new ChibiError('Async functions are not supported in this context');\n      }\n\n      if (state && state instanceof ChibiReturn) {\n        return state;\n      }\n    }\n\n    return state;\n  }\n\n  async runAsync() {\n    if (this.hasRun) {\n      throw new ChibiError('Run method can only be executed once');\n    }\n    this.hasRun = true;\n    const state = await this._subroutineAsync(this.script);\n\n    if (state && state instanceof ChibiReturn) {\n      return state.getValue();\n    }\n\n    return state;\n  }\n\n  async _subroutineAsync(script: ChibiJson<any>, startState: any = null) {\n    let state: any = startState;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [functionName, ...args] of script) {\n      if (!functionsRegistry[functionName]) {\n        throw new UnknownChibiFunctionError(functionName);\n      }\n      const func = functionsRegistry[functionName];\n      try {\n        state = func(this.ctx, state, ...args);\n\n        if (state && state instanceof Promise) {\n          state = await state;\n        }\n      } catch (error) {\n        if (error instanceof ChibiError) {\n          throw error;\n        }\n        this.logError(error, functionName, state, args);\n        state = null;\n      }\n\n      if (state && state instanceof ChibiReturn) {\n        return state;\n      }\n    }\n\n    return state;\n  }\n\n  addVariable(name: string, value: any) {\n    this.ctx.set(name, value);\n  }\n\n  clearIntervals() {\n    return this.ctx.clearIntervals();\n  }\n\n  logError(error, functionName, input, args) {\n    console.log(\n      '%cMAL-Sync',\n      'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n      error.message,\n      {\n        name: this.name,\n        functionName,\n        input,\n        args,\n      },\n    );\n  }\n}\n","import { doesUrlMatchPatterns } from 'webext-patterns';\nimport { NotFoundError } from '../_provider/Errors';\nimport type { ChibiJson } from '../chibiScript/ChibiGenerator';\nimport { ChibiConsumer } from '../chibiScript/ChibiConsumer';\nimport { pageInterface } from '../pages/pageInterface';\nimport { ChibiListRepository } from './loader/ChibiListRepository';\n\nfunction getConsumer(code: ChibiJson<any>, page: pageInterface, name: string) {\n  const cons = new ChibiConsumer(code, name);\n  cons.addVariable('pageObject', page);\n  return cons;\n}\n\nfunction getUrlConsumer(code: ChibiJson<any>, url: string, page: pageInterface, name: string) {\n  const consumer = getConsumer(code, page, name);\n  consumer.addVariable('url', url);\n  return consumer;\n}\n\nexport const Chibi = async (): Promise<pageInterface> => {\n  const repo = await ChibiListRepository.getInstance().init();\n  const allPages = repo.getList();\n\n  const currentUrl = window.location.href;\n  const matchingPages = Object.values(allPages).filter(el => {\n    if (!el.urls.match || !el.urls.match.length) return false;\n    return doesUrlMatchPatterns(currentUrl, ...el.urls.match);\n  });\n\n  if (matchingPages.length === 0) {\n    throw new NotFoundError('No matching page found');\n  }\n  if (matchingPages.length > 1) {\n    con.error('Multiple matching pages found', matchingPages);\n  }\n\n  const currentPage = await repo.getPage(matchingPages[0].key);\n\n  const pageD: pageInterface = {\n    name: currentPage.name,\n    database: currentPage.database || undefined,\n    domain: currentPage.domain,\n    languages: currentPage.languages,\n    type: currentPage.type,\n    isSyncPage(url) {\n      const consumer = getUrlConsumer(currentPage.sync.isSyncPage, url, pageD, 'sync.isSyncPage');\n      return consumer.run();\n    },\n    isOverviewPage: currentPage.overview\n      ? url => {\n          const consumer = getUrlConsumer(\n            currentPage.overview!.isOverviewPage,\n            url,\n            pageD,\n            'overview.isOverviewPage',\n          );\n          return consumer.run();\n        }\n      : undefined,\n    sync: {\n      getTitle(url) {\n        const consumer = getUrlConsumer(currentPage.sync.getTitle, url, pageD, 'sync.getTitle');\n        return consumer.run() || '';\n      },\n      getIdentifier(url) {\n        const consumer = getUrlConsumer(\n          currentPage.sync.getIdentifier,\n          url,\n          pageD,\n          'sync.getIdentifier',\n        );\n        return consumer.run();\n      },\n      getOverviewUrl(url) {\n        const consumer = getUrlConsumer(\n          currentPage.sync.getOverviewUrl,\n          url,\n          pageD,\n          'sync.getOverviewUrl',\n        );\n        return consumer.run();\n      },\n      getEpisode(url) {\n        const consumer = getUrlConsumer(currentPage.sync.getEpisode, url, pageD, 'sync.getEpisode');\n        return consumer.run();\n      },\n      getVolume: currentPage.sync.getVolume\n        ? url => {\n            const consumer = getUrlConsumer(\n              currentPage.sync.getVolume!,\n              url,\n              pageD,\n              'sync.getVolume',\n            );\n            return consumer.run();\n          }\n        : undefined,\n      nextEpUrl: currentPage.sync.nextEpUrl\n        ? url => {\n            const consumer = getUrlConsumer(\n              currentPage.sync.nextEpUrl!,\n              url,\n              pageD,\n              'sync.nextEpUrl',\n            );\n            return consumer.run();\n          }\n        : undefined,\n      uiSelector: currentPage.sync.uiInjection\n        ? html => {\n            const consumer = getConsumer(currentPage.sync.uiInjection!, pageD, 'sync.uiInjection');\n            consumer.addVariable('ui', html);\n            return consumer.run();\n          }\n        : undefined,\n      getMalUrl: currentPage.sync.getMalUrl\n        ? provider => {\n            const consumer = getConsumer(currentPage.sync.getMalUrl!, pageD, 'sync.getMalUrl');\n            consumer.addVariable('provider', provider);\n            return consumer.run();\n          }\n        : undefined,\n      readerConfig: currentPage.sync.readerConfig ? currentPage.sync.readerConfig : undefined,\n    },\n    overview:\n      currentPage.overview || currentPage.list\n        ? {\n            getTitle(url) {\n              const consumer = getUrlConsumer(\n                currentPage.overview!.getTitle,\n                url,\n                pageD,\n                'overview.getTitle',\n              );\n              return consumer.run() || '';\n            },\n            getIdentifier(url) {\n              const consumer = getUrlConsumer(\n                currentPage.overview!.getIdentifier,\n                url,\n                pageD,\n                'overview.getIdentifier',\n              );\n              return consumer.run();\n            },\n            uiSelector(html) {\n              const consumer = getConsumer(\n                currentPage.overview!.uiInjection,\n                pageD,\n                'overview.uiInjection',\n              );\n              consumer.addVariable('ui', html);\n              return consumer.run();\n            },\n            getMalUrl:\n              currentPage.overview && currentPage.overview.getMalUrl\n                ? provider => {\n                    const consumer = getConsumer(\n                      currentPage.overview!.getMalUrl!,\n                      pageD,\n                      'overview.getMalUrl',\n                    );\n                    consumer.addVariable('provider', provider);\n                    return consumer.run();\n                  }\n                : undefined,\n            list: currentPage.list\n              ? {\n                  offsetHandler: false,\n                  elementsSelector() {\n                    const consumer = getConsumer(\n                      currentPage.list!.elementsSelector,\n                      pageD,\n                      'list.elementsSelector',\n                    );\n                    return j.$(consumer.run());\n                  },\n                  elementUrl: currentPage.list.elementUrl\n                    ? selector => {\n                        if (selector instanceof j.$) {\n                          selector = selector.get(0) as any;\n                        }\n\n                        const consumer = getConsumer(\n                          currentPage.list!.elementUrl!,\n                          pageD,\n                          'list.elementUrl',\n                        );\n                        consumer.addVariable('element', selector);\n                        return consumer.run(selector);\n                      }\n                    : undefined,\n                  elementEp(selector) {\n                    if (selector instanceof j.$) {\n                      selector = selector.get(0) as any;\n                    }\n\n                    const consumer = getConsumer(\n                      currentPage.list!.elementEp,\n                      pageD,\n                      'list.elementEp',\n                    );\n                    consumer.addVariable('element', selector);\n                    return consumer.run(selector);\n                  },\n                }\n              : undefined,\n          }\n        : undefined,\n    init(page) {\n      const logger = con.m('Chibi');\n\n      let activeConsumer: ChibiConsumer | null = null;\n      let defaultInterval: NodeJS.Timer | null = null;\n\n      const setupConsumer = getConsumer(currentPage.lifecycle.setup, pageD, 'setup');\n      setupConsumer.run();\n\n      const readyConsumer = getConsumer(currentPage.lifecycle.ready, pageD, 'ready');\n      readyConsumer.addVariable('trigger', () => {\n        logger.info('Ready Trigger');\n        if (activeConsumer) {\n          activeConsumer.clearIntervals();\n          activeConsumer = null;\n        }\n        clearInterval(defaultInterval!);\n        page.reset();\n\n        const pageReady = () => {\n          logger.info('Handle page');\n          page.handlePage();\n        };\n\n        if (pageD.isSyncPage(window.location.href)) {\n          logger.info('Is Sync Page');\n          if (currentPage.lifecycle.syncIsReady) {\n            activeConsumer = getConsumer(currentPage.lifecycle.syncIsReady, pageD, 'syncIsReady');\n            activeConsumer.addVariable('trigger', pageReady);\n            activeConsumer.runAsync();\n          } else {\n            defaultInterval = utils.waitUntilTrue(\n              () =>\n                pageD.sync.getTitle(window.location.href) &&\n                pageD.sync.getIdentifier(window.location.href),\n              pageReady,\n            );\n          }\n        } else if (pageD.isOverviewPage && pageD.isOverviewPage(window.location.href)) {\n          logger.info('Is Overview Page');\n          if (currentPage.lifecycle.overviewIsReady) {\n            activeConsumer = getConsumer(\n              currentPage.lifecycle.overviewIsReady,\n              pageD,\n              'overviewIsReady',\n            );\n            activeConsumer.addVariable('trigger', pageReady);\n            activeConsumer.runAsync();\n          } else {\n            defaultInterval = utils.waitUntilTrue(\n              () =>\n                pageD.overview!.getTitle(window.location.href) &&\n                pageD.overview!.getIdentifier(window.location.href),\n              pageReady,\n            );\n          }\n        } else {\n          logger.info('Not a sync or overview page');\n        }\n      });\n      readyConsumer.runAsync();\n\n      if (currentPage.lifecycle.listChange) {\n        const listConsumer = getConsumer(currentPage.lifecycle.listChange, pageD, 'listChange');\n        listConsumer.addVariable('trigger', () => {\n          logger.info('List Trigger');\n          page.handleList();\n        });\n        listConsumer.runAsync();\n      }\n    },\n  };\n\n  return pageD;\n};\n","import type { domainType } from 'src/background/customDomain';\nimport { PageJsonInterface, PageListJsonInterface } from '../pageInterface';\nimport { greaterCurrentVersion } from '../../utils/version';\n\ntype StorageInterface = {\n  chibiPages: PageListJsonInterface['pages'];\n  errors: Record<string, unknown>;\n};\n\nexport class ChibiListRepository {\n  private collections: string[];\n\n  private pages: PageListJsonInterface['pages'] | null = null;\n\n  private useCache: boolean;\n\n  static getInstance(useCache = false) {\n    let repos;\n    if ((api.type as any) === 'userscript') {\n      repos = ['https://chibi.malsync.moe/config'];\n    } else {\n      repos = [chrome.runtime.getURL('chibi'), 'https://chibi.malsync.moe/config'];\n    }\n    return new ChibiListRepository(repos, useCache);\n  }\n\n  constructor(collections: string[], useCache = false) {\n    this.collections = collections;\n    this.useCache = useCache;\n  }\n\n  async init() {\n    const storageKey = `chibiPages-${api.storage.version()}`;\n    const data: StorageInterface = ((await api.storage.get(\n      storageKey,\n    )) as StorageInterface | null) || { chibiPages: {}, errors: {} };\n\n    if (this.useCache && data.chibiPages && Object.keys(data.chibiPages).length > 0) {\n      this.pages = data.chibiPages;\n      return this;\n    }\n\n    const errors = {};\n    const collectionsData = (\n      await Promise.all(\n        this.collections.map(c =>\n          this.retrieveCollection(c).catch(e => {\n            errors[c] = e;\n            return null as unknown as PageListJsonInterface;\n          }),\n        ),\n      )\n    ).filter(c => c);\n    data.errors = errors;\n\n    collectionsData.forEach(col => {\n      Object.keys(col.pages).forEach(key => {\n        // Skip pages that require a higher version than current\n        if (col.pages[key].minimumVersion && greaterCurrentVersion(col.pages[key].minimumVersion)) {\n          return;\n        }\n\n        const newer =\n          data.chibiPages[key] &&\n          data.chibiPages[key].version.hash !== col.pages[key].version.hash &&\n          Number(data.chibiPages[key].version.timestamp) < Number(col.pages[key].version.timestamp);\n\n        if (!data.chibiPages[key] || newer) {\n          data.chibiPages[key] = col.pages[key];\n        }\n      });\n    });\n\n    await api.storage.set(storageKey, data);\n    this.pages = data.chibiPages;\n\n    return this;\n  }\n\n  async retrieveCollection(root: string) {\n    const response = await api.request.xhr('GET', `${root}/list.json`);\n    const res: PageListJsonInterface = JSON.parse(response.responseText);\n\n    Object.keys(res.pages).forEach(key => {\n      res.pages[key].root = root;\n    });\n    return res;\n  }\n\n  public getList() {\n    if (!this.pages) {\n      throw new Error('Pages not loaded');\n    }\n    return this.pages;\n  }\n\n  public async getPage(key: string) {\n    if (!this.pages) {\n      throw new Error('Pages not loaded');\n    }\n    const page = this.pages[key];\n    if (!page) {\n      throw new Error(`Page ${key} not found`);\n    }\n\n    const response = await api.request.xhr(\n      'GET',\n      `${page.root}/pages/${key}.json?version=${page.version.hash}`,\n    );\n    const res: PageJsonInterface = JSON.parse(response.responseText);\n\n    return res;\n  }\n\n  public getPermissions(): domainType[] {\n    const pages = this.getList();\n    const permissions = Object.values(pages).map(page => {\n      return page.urls.match.map(url => {\n        return {\n          page: `${page.name} (chibi)`,\n          domain: url,\n          auto: true,\n          chibi: true,\n        };\n      });\n    });\n    return permissions.flat();\n  }\n\n  public getPermissionsElements() {\n    const pages = this.getList();\n    return Object.values(pages).map(page => {\n      return {\n        name: `${page.name} (chibi)`,\n        match: page.urls.match,\n      };\n    });\n  }\n}\n","/* eslint-disable no-bitwise */\n\nexport const log = (function () {\n  return Function.prototype.bind.call(\n    console.log,\n    console,\n    '%cMAL-Sync',\n    'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const error = (function () {\n  return Function.prototype.bind.call(\n    console.error,\n    console,\n    '%cMAL-Sync',\n    'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const info = (function () {\n  return Function.prototype.bind.call(\n    console.info,\n    console,\n    '%cMAL-Sync',\n    'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const debug = (function () {\n  return Function.prototype.bind.call(\n    console.debug,\n    console,\n    '%cMAL-Sync',\n    'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const m = (name, color = '', blocks: { name: string; style: string }[] = []) => {\n  let fontColor = 'white';\n  if (!color) color = stringToColour(name);\n  if (color[0] === '#') fontColor = getColorByBgColor(color);\n  const style = `background-color: ${color}; color: ${fontColor}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;\n  blocks.push({\n    name,\n    style,\n  });\n\n  const temp: any = {};\n\n  temp.m = (name2, color2 = '') => {\n    return m(name2, color2, [...blocks]);\n  };\n\n  const moduleText = blocks.reduce((sum, el) => `${sum}%c${el.name}`, '');\n  const moduleStyle = blocks.map(el => el.style);\n\n  temp.log = (function () {\n    return Function.prototype.bind.call(\n      console.log,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.error = (function () {\n    return Function.prototype.bind.call(\n      console.error,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.info = (function () {\n    return Function.prototype.bind.call(\n      console.info,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.debug = (function () {\n    return Function.prototype.bind.call(\n      console.debug,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  return temp;\n};\n\nfunction stringToColour(str) {\n  if (!str) return '#ffffff';\n  str = String(str);\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let colour = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    colour += `00${value.toString(16)}`.substr(-2);\n  }\n  return colour;\n}\n\nfunction getColorByBgColor(bgColor) {\n  return parseInt(bgColor.replace('#', ''), 16) > 0xffffff / 2 ? '#000' : '#fff';\n}\n","declare let browser: any;\n\nexport function urlPart(url: string, part: number) {\n  if (!url) return '';\n\n  const urlParts = url.split('/');\n\n  if (!urlParts[part]) return '';\n\n  return urlParts[part].replace(/[#?].*/, '');\n}\n\nexport function urlStrip(url: string) {\n  return url.replace(/[#?].*/, '');\n}\n\nexport function urlParam(url, name) {\n  const results = new RegExp(`[?&]${name}=([^&#]*)`).exec(url);\n  if (results === null) {\n    return null;\n  }\n  return decodeURI(results[1]) || 0;\n}\n\nexport function getBaseText(element) {\n  let text = element.text();\n  element.children().each(function () {\n    // @ts-ignore\n    text = text.replace(j.$(this).text(), '');\n  });\n  return text;\n}\n\nexport function favicon(domain) {\n  if (!domain) return '';\n  const res = domain.match(/^(https?:\\/\\/)?[^/]+/);\n\n  if (res) domain = res[0];\n\n  return `https://favicon.malsync.moe/?domain=${domain}`;\n}\n\nexport function watching(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Reading';\n  return 'Watching';\n}\n\nexport function planTo(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Plan to Read';\n  return 'Plan to Watch';\n}\n\nexport function episode(type: 'anime' | 'manga') {\n  if (type === 'manga') return api.storage.lang('UI_Chapter');\n  return api.storage.lang('UI_Episode');\n}\n\nexport const syncRegex =\n  /(^settings\\/.*|^updateCheckTime$|^tempVersion$|^local:\\/\\/|^list-tagSettings$)/;\n\nexport const rateLimitExclude = /^https:\\/\\/api.malsync.moe\\/(shark|mal\\/|nc\\/mal\\/.*\\/progress$)/i;\n\n// eslint-disable-next-line no-shadow\nexport enum status {\n  // eslint-disable-next-line no-shadow\n  watching = 1,\n  completed = 2,\n  onhold = 3,\n  dropped = 4,\n  planToWatch = 6,\n}\n\nexport function getselect(data, name) {\n  let temp = data.split(`name=\"${name}\"`)[1].split('</select>')[0];\n  if (temp.indexOf('selected=\"selected\"') > -1) {\n    temp = temp.split('<option');\n    for (let i = 0; i < temp.length; ++i) {\n      if (temp[i].indexOf('selected=\"selected\"') > -1) {\n        return temp[i].split('value=\"')[1].split('\"')[0];\n      }\n    }\n  }\n  return '';\n}\n\nexport function absoluteLink(url, domain) {\n  if (typeof url === 'undefined') {\n    return url;\n  }\n  if (!url.startsWith('http')) {\n    if (url.charAt(0) !== '/') url = `/${url}`;\n    url = domain + url;\n  }\n  return url;\n}\n\nexport function parseHtml(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(`<!doctype html><body>${text}`, 'text/html');\n  return dom.body.textContent;\n}\n\nexport function urlChangeDetect(callback) {\n  let currentPage = window.location.href;\n  return setInterval(function () {\n    if (currentPage !== window.location.href) {\n      currentPage = window.location.href;\n      callback();\n    }\n  }, 100);\n}\n\nexport function fullUrlChangeDetect(callback, strip = false) {\n  let currentPage = '';\n  const intervalId = setInterval(function () {\n    const url = strip ? urlStrip(window.location.href) : window.location.href;\n    if (currentPage !== url) {\n      currentPage = url;\n      callback();\n    }\n  }, 100);\n\n  return Number(intervalId);\n}\n\nexport function changeDetect(callback, func, immediate = false) {\n  let currentPage = func();\n  const intervalId = setInterval(function () {\n    const temp = func();\n    if (typeof temp !== 'undefined' && currentPage !== temp) {\n      currentPage = func();\n      callback();\n    }\n  }, 500);\n\n  if (immediate) callback();\n\n  return Number(intervalId);\n}\n\nexport function waitUntilTrue(condition: Function, callback: Function, interval = 100) {\n  let counter = 0;\n\n  const intervalId = setInterval(function () {\n    counter++;\n    let state = false;\n    try {\n      state = condition();\n    } catch (e) {\n      con.info('Error in waitUntilTrue', e);\n    }\n    if (state) {\n      clearInterval(intervalId);\n      callback();\n    }\n    if (counter > 10) {\n      clearInterval(intervalId);\n      const newIntervalTime = Math.max(Math.min(interval * 2, 15000), 500);\n      waitUntilTrue(condition, callback, newIntervalTime);\n    }\n  }, interval);\n\n  return intervalId;\n}\n\nexport function getAsyncWaitUntilTrue(condition: Function, interval = 100) {\n  let intervalId;\n  let rejectThis;\n  const reset = () => {\n    clearTimeout(intervalId);\n    if (rejectThis) rejectThis('AsyncWait stopped');\n  };\n\n  return {\n    asyncWaitUntilTrue: () => {\n      reset();\n      return new Promise<void>((resolve, reject) => {\n        rejectThis = reject;\n        intervalId = waitUntilTrue(condition, () => resolve(), interval);\n      });\n    },\n    reset,\n  };\n}\n\nconst doubleId = Math.random();\nexport function checkDoubleExecution() {\n  if ($('.mal-sync-double-detect').length) {\n    $('.mal-sync-double-detect').each(function (index) {\n      if ($(this).text() !== doubleId.toString()) {\n        alert('Double execution detected! Please run MAL-Sync once only.');\n      }\n    });\n  }\n  $('body').after(\n    j.html(\n      `<div class=\"mal-sync-double-detect\" style=\"display: none;\">${doubleId.toString()}</div>`,\n    ),\n  );\n}\n\nexport function getUrlFromTags(tags: string) {\n  if (/malSync::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('malSync::')[1].split('::')[0]);\n  }\n  if (/last::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('last::')[1].split('::')[0]);\n  }\n  return undefined;\n\n  function atobURL(encoded) {\n    try {\n      return atob(encoded);\n    } catch (e) {\n      return encoded;\n    }\n  }\n}\n\nexport function setUrlInTags(url: string, tags: string) {\n  if (url === '') {\n    tags = tags.replace(/,?(malSync|last)::[^ \\n]+?::/, '');\n    return tags;\n  }\n  if (!api.settings.get('malTags')) return tags;\n  const addition = `malSync::${btoa(url)}::`;\n  if (/(last|malSync)::[\\d\\D]+::/.test(tags)) {\n    tags = tags.replace(/(last|malSync)::[^^]*?::/, addition);\n  } else {\n    tags = `${tags},${addition}`;\n  }\n  return tags;\n}\n\nexport async function setResumeWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`resume/${type}/${id}`, { url, ep });\n}\n\nexport async function getResumeWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malResume')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`resume/${type}/${id}`);\n}\n\nexport async function setContinueWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`continue/${type}/${id}`, { url, ep });\n}\n\nexport async function getContinueWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malContinue')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`continue/${type}/${id}`);\n}\n\nexport async function setEntrySettings(type, id, options, tags = '') {\n  const tempOptions = {};\n  if (options) {\n    for (const key in options) {\n      switch (key) {\n        case 'u':\n        case 'p':\n          tempOptions[key] = options[key];\n          break;\n        default:\n      }\n    }\n\n    if (api.settings.get('malTags')) {\n      // TAG mode\n      tags = setUrlInTags(JSON.stringify(tempOptions), tags);\n    } else {\n      // No TAG mode\n      await api.storage.set(`tagSettings/${type}/${id}`, JSON.stringify(tempOptions));\n    }\n  }\n\n  if (!Object.values(tempOptions).find(el => Boolean(el))) {\n    tags = setUrlInTags('', tags);\n    if (!api.settings.get('malTags')) {\n      await api.storage.remove(`tagSettings/${type}/${id}`);\n    }\n  }\n\n  return tags;\n}\n\nexport async function getEntrySettings(type, id, tags = '') {\n  const tempOptions: any = {\n    u: null, // url\n    c: null, // Continue Url\n    r: null, // Resume Url\n    p: '', // Progress Mode\n  };\n\n  if (api.settings.get('malTags')) {\n    // TAG mode\n    const tagString = getUrlFromTags(tags);\n    if (tagString) {\n      if (tagString[0] === '{') {\n        try {\n          const temp = JSON.parse(tagString);\n          for (const key in tempOptions) {\n            if (temp[key]) tempOptions[key] = temp[key];\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      } else {\n        tempOptions.u = tagString;\n      }\n    }\n  } else {\n    // No TAG mode\n    let temp: any = await api.storage.get(`tagSettings/${type}/${id}`);\n\n    if (temp) {\n      temp = JSON.parse(temp);\n\n      for (const key in tempOptions) {\n        if (temp[key]) tempOptions[key] = temp[key];\n      }\n    }\n  }\n\n  const continueUrlObj = await getContinueWaching(type, id);\n  if (continueUrlObj) tempOptions.c = continueUrlObj;\n  const resumeUrlObj = await getResumeWaching(type, id);\n  if (resumeUrlObj) tempOptions.r = resumeUrlObj;\n\n  if (!api.settings.get('usedPage')) tempOptions.u = null;\n\n  return tempOptions;\n}\n\nexport function handleMalImages(url) {\n  if (url.indexOf('questionmark') !== -1) return api.storage.assetUrl('questionmark.gif');\n  return url;\n}\n\nexport function getTooltip(text, style = '', direction = 'top') {\n  const rNumber = Math.floor(Math.random() * 1000 + 1);\n  return `<div id=\"tt${rNumber}\" class=\"icon material-icons\" style=\"font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${style}\">contact_support</div>\\\n  <div class=\"mdl-tooltip mdl-tooltip--${direction} mdl-tooltip--large\" for=\"tt${rNumber}\">${text}</div>`;\n}\n\nexport function timeDiffToText(delta) {\n  let text = '';\n\n  delta /= 1000;\n\n  const diffYears = Math.floor(delta / 31536000);\n  delta -= diffYears * 31536000;\n  if (diffYears) {\n    text += `${diffYears}y `;\n  }\n\n  const diffDays = Math.floor(delta / 86400);\n  delta -= diffDays * 86400;\n  if (diffDays) {\n    text += `${diffDays}d `;\n  }\n\n  const diffHours = Math.floor(delta / 3600) % 24;\n  delta -= diffHours * 3600;\n  if (diffHours && diffDays < 2) {\n    text += `${diffHours}h `;\n  }\n\n  const diffMinutes = Math.floor(delta / 60) % 60;\n  delta -= diffMinutes * 60;\n  if (diffMinutes && !diffDays && diffHours < 3) {\n    text += `${diffMinutes}min `;\n  }\n\n  return text;\n}\n\nexport function canHideTabs() {\n  if (typeof browser !== 'undefined' && typeof browser.tabs.hide !== 'undefined') {\n    return true;\n  }\n  return false;\n}\n\n// eslint-disable-next-line no-shadow\nexport function statusTag(status, type, id) {\n  const info = {\n    anime: {\n      1: {\n        class: 'watching',\n        text: 'CW',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantowatch',\n        text: 'PTW',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n    manga: {\n      1: {\n        class: 'reading',\n        text: 'CR',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantoread',\n        text: 'PTR',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n  };\n\n  $.each([1, 2, 3, 4, 6, 23], function (i, el) {\n    info.anime[info.anime[el].title] = info.anime[el];\n    info.manga[info.manga[el].title] = info.manga[el];\n  });\n\n  if (status && info[type][status]) {\n    const tempInfo = info[type][status];\n    return ` <a href=\"https://myanimelist.net/ownlist/${type}/${id}/edit?hideLayout=1\" title=\"${tempInfo.title}\" class=\"Lightbox_AddEdit button_edit ${tempInfo.class}\">${tempInfo.text}</a>`;\n  }\n  return false;\n}\n\nexport function getStatusText(type: 'anime' | 'manga', state) {\n  switch (state) {\n    case 1:\n      return api.storage.lang(`UI_Status_watching_${type}`);\n    case 2:\n      return api.storage.lang('UI_Status_Completed');\n    case 3:\n      return api.storage.lang('UI_Status_OnHold');\n    case 4:\n      return api.storage.lang('UI_Status_Dropped');\n    case 6:\n      return api.storage.lang(`UI_Status_planTo_${type}`);\n    case 7:\n      return api.storage.lang('UI_Status_All');\n    case 23:\n      return api.storage.lang(`UI_Status_Rewatching_${type}`);\n    default:\n      return '';\n  }\n}\n\n// eslint-disable-next-line consistent-return\nexport function notifications(url: string, title: string, message: string, iconUrl = '') {\n  const messageObj: chrome.notifications.NotificationOptions<true> = {\n    type: 'basic',\n    title,\n    message,\n    iconUrl,\n  };\n\n  con.log('Notification', url, messageObj);\n\n  api.storage.get('notificationHistory').then(history => {\n    if (history === undefined) {\n      history = [];\n    }\n\n    if (typeof history !== 'object') return;\n\n    if (history.length >= 10) {\n      history.shift();\n    }\n    history.push({\n      url,\n      title: messageObj.title,\n      message: messageObj.message,\n      iconUrl: messageObj.iconUrl,\n      timestamp: Date.now(),\n    });\n    api.storage.set('notificationHistory', history);\n  });\n\n  try {\n    return chrome.notifications.create(url, messageObj);\n  } catch (e) {\n    con.error(e);\n  }\n}\n\nexport async function timeCache(key, dataFunction, ttl) {\n  const value = await api.storage.get(key);\n  if (typeof value === 'object' && new Date().getTime() < value.timestamp) {\n    return value.data;\n  }\n  const result = await dataFunction();\n  return api.storage.set(key, { data: result, timestamp: new Date().getTime() + ttl }).then(() => {\n    return result;\n  });\n}\n\n// flashm\nexport function flashm(\n  text,\n  options?: {\n    error?: boolean;\n    type?: string;\n    permanent?: boolean;\n    hoverInfo?: boolean;\n    position?: 'top' | 'bottom';\n    minimized?: boolean;\n  },\n) {\n  if (!j.$('#flash-div-top').length) {\n    initflashm();\n  }\n  con.log('[Flash] Message:', text);\n\n  let colorF = '#323232';\n  if (typeof options !== 'undefined' && typeof options.error !== 'undefined' && options.error) {\n    colorF = '#3e0808';\n  }\n\n  let flashdiv = '#flash-div-bottom';\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.position !== 'undefined' &&\n    options.position\n  ) {\n    flashdiv = `#flash-div-${options.position}`;\n  }\n\n  let messClass = 'flash';\n  if (typeof options !== 'undefined' && typeof options.type !== 'undefined' && options.type) {\n    const tempClass = `type-${options.type}`;\n    j.$(`${flashdiv} .${tempClass}, #flashinfo-div .${tempClass}`)\n      .removeClass(tempClass)\n      .fadeOut({\n        duration: 1000,\n        queue: false,\n        complete() {\n          j.$(this).remove();\n        },\n      });\n\n    messClass += ` ${tempClass}`;\n  }\n\n  let mess = `<div class=\"${messClass}\" style=\"display:none;\">\\\n        <div style=\"display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; \">\\\n          ${text}\\\n        </div>\\\n      </div>`;\n\n  let flashmEl;\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    messClass += ' flashinfo';\n    mess = `<div class=\"${messClass}\" style=\"display:none; max-height: 5000px; overflow: hidden;\"><div style=\"display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; position: relative;\"><div style=\"max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;\">${text}</div></div></div>`;\n    j.$('#flashinfo-div').addClass('hover');\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo('#flashinfo-div');\n    if (\n      typeof options !== 'undefined' &&\n      typeof options.minimized !== 'undefined' &&\n      options.minimized\n    )\n      flashmEl.css('max-height', '8px');\n  } else {\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo(flashdiv);\n  }\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.permanent !== 'undefined' &&\n    options.permanent\n  ) {\n    flashmEl.slideDown(800);\n  } else if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .queue(function () {\n        j.$('#flashinfo-div').removeClass('hover');\n        flashmEl.css('max-height', '8px');\n      });\n  } else {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .slideUp(800, () => {\n        // @ts-ignore\n        j.$(this).remove();\n      });\n  }\n  return flashmEl;\n}\n\nexport async function flashConfirm(\n  message,\n  type,\n  yesCall = () => {\n    /* Placeholder */\n  },\n  cancelCall = () => {\n    /* Placeholder */\n  },\n  yesNo = false,\n): Promise<boolean> {\n  return new Promise(function (resolve, reject) {\n    let yesText = api.storage.lang('Ok');\n    let noText = api.storage.lang('Cancel');\n    if (yesNo) {\n      yesText = api.storage.lang('Yes');\n      noText = api.storage.lang('No');\n    }\n    message = `<div style=\"text-align: center;\">${message}</div><div style=\"display: flex; justify-content: space-around;\"><button class=\"Yes\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${yesText}</button><button class=\"Cancel\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${noText}</button></div>`;\n    const flasmessage = flashm(message, {\n      permanent: true,\n      position: 'top',\n      type,\n    });\n    flasmessage.find('.Yes').click(function (evt) {\n      resolve(true);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      yesCall();\n    });\n    flasmessage.find('.Cancel').click(function (evt) {\n      resolve(false);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      cancelCall();\n    });\n  });\n}\n\nfunction initflashm() {\n  api.storage.addStyle(\n    `.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }`,\n  );\n\n  let extraClass = '';\n  if (api.settings.get('floatButtonStealth')) extraClass = 'mini-stealth';\n\n  j.$('body').after(\n    j.html(\n      `<div id=\"flash-div-top\" dir=\"${api.storage.langDirection()}\" style=\"text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;\"></div>\\\n        <div id=\"flash-div-bottom\" dir=\"${api.storage.langDirection()}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;\"><div id=\"flash\" style=\"display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);\"></div></div>\\\n        <div id=\"flashinfo-div\" dir=\"${api.storage.langDirection()}\" class=\"${extraClass}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;\">`,\n    ),\n  );\n}\n\nlet lazyloaded = false;\nlet lazyimages: any[] = [];\n\nexport function lazyload(doc, scrollElement = '.mdl-layout__content') {\n  /* lazyload.js (c) Lorenzo Giuliani\n   * MIT License (http://www.opensource.org/licenses/mit-license.html)\n   *\n   * expects a list of:\n   * `<img src=\"blank.gif\" data-src=\"my_image.png\" width=\"600\" height=\"400\" class=\"lazy\">`\n   */\n  // eslint-disable-next-line\n  function loadImage(el, fn) {\n    if (!j.$(el).is(':visible')) return false;\n    if (j.$(el).hasClass('lazyBack')) {\n      j.$(el)\n        .css('background-image', `url(${el.getAttribute('data-src')})`)\n        .removeClass('lazyBack');\n    } else {\n      const img = new Image();\n      const src = el.getAttribute('data-src');\n      img.onload = function () {\n        if (el.parent) el.parent.replaceChild(img, el);\n        else el.src = src;\n        // eslint-disable-next-line\n        fn ? fn() : null;\n      };\n      img.src = src;\n    }\n  }\n\n  for (let i = 0; i < lazyimages.length; i++) {\n    $(lazyimages[i]).addClass('init');\n  }\n\n  lazyimages = [];\n  const query = doc.find('img.lazy.init, .lazyBack.init');\n  const processScroll = function () {\n    for (let i = 0; i < lazyimages.length; i++) {\n      if (utils.elementInViewport(lazyimages[i], 600)) {\n        // eslint-disable-next-line\n        loadImage(lazyimages[i], function() {\n          lazyimages.splice(i, i);\n        });\n      }\n      if (!$(lazyimages[i]).length) {\n        lazyimages.splice(i, i);\n      }\n    }\n  };\n  // Array.prototype.slice.call is not callable under our lovely IE8\n  for (let i = 0; i < query.length; i++) {\n    lazyimages.push(query[i]);\n    $(query[i]).removeClass('init');\n  }\n\n  processScroll();\n\n  if (!lazyloaded) {\n    lazyloaded = true;\n    doc.find(scrollElement).scroll(function () {\n      processScroll();\n    });\n  }\n}\n\nexport function elementInViewport(el, horizontalOffset = 0) {\n  const rect = el.getBoundingClientRect();\n\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    // @ts-ignore\n    rect.top - horizontalOffset <= (window.innerHeight || document.documentElement.clientHeight)\n  );\n}\n\nexport function wait(ms: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport function pageUrl(\n  page: 'mal' | 'anilist' | 'kitsu' | 'simkl',\n  type: 'anime' | 'manga',\n  id: string | number,\n) {\n  switch (page) {\n    case 'mal':\n      return `https://myanimelist.net/${type}/${id}`;\n    case 'anilist':\n      return `https://anilist.co/${type}/${id}`;\n    case 'kitsu':\n      return `https://kitsu.app/${type}/${id}`;\n    case 'simkl':\n      return `https://simkl.com/${type}/${id}`;\n    default:\n      throw `${page} not a valid page`;\n  }\n}\n\nexport function returnYYYYMMDD(numFromToday = 0) {\n  const d = new Date();\n  d.setDate(d.getDate() + numFromToday);\n  const month = (d.getMonth() + 1).toString().padStart(2, '0');\n  const day = d.getDate().toString().padStart(2, '0');\n  return `${d.getFullYear()}-${month}-${day}`;\n}\n\nexport function htmlDecode(text) {\n  return $('<textarea/>').html(j.html(text)).text();\n}\n\nexport function isFirefox(): boolean {\n  return Boolean(typeof browser !== 'undefined' && typeof chrome !== 'undefined');\n}\n\nexport function waitForPageToBeVisible() {\n  const condition = () =>\n    Boolean(!document.visibilityState || document.visibilityState === 'visible');\n\n  if (condition()) return Promise.resolve();\n\n  con.log('Page in background');\n\n  const { asyncWaitUntilTrue: awaitUi } = getAsyncWaitUntilTrue(() => condition());\n\n  return awaitUi().then(() => {\n    con.log('Page is visible');\n  });\n}\n\nexport async function clearCache() {\n  const cacheObj = await api.storage.list();\n  let deleted = 0;\n\n  for (const key in cacheObj) {\n    if (!utils.syncRegex.test(key) && !/(^tagSettings\\/.*)/.test(key)) {\n      api.storage.remove(key);\n      deleted++;\n    }\n  }\n\n  utils.flashm(`Cache Cleared [${deleted}]`);\n}\n\nexport function sortAlphabetically(a, b) {\n  if (a.toLowerCase() < b.toLowerCase()) return -1;\n  if (a.toLowerCase() > b.toLowerCase()) return 1;\n  return 0;\n}\n\nexport function isDomainMatching(url, domain) {\n  const urlObj = new URL(url);\n  const { host } = urlObj;\n  return host === domain || host.endsWith(`.${domain}`);\n}\n\nexport function upperCaseFirstLetter(string) {\n  if (!string || string.length < 2) return string;\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import DOMPurify from 'dompurify';\n\nexport const $ = jQuery;\n\nexport function html(htmlContent) {\n  return DOMPurify.sanitize(htmlContent, {\n    ALLOW_UNKNOWN_PROTOCOLS: true,\n    ADD_ATTR: ['target'],\n  });\n}\n","import semverGte from 'semver/functions/gte';\nimport semverGt from 'semver/functions/gt';\n\nexport function getCurrentVersion(): string {\n  return api.storage.version();\n}\n\nexport function greaterOrEqualCurrentVersion(version: string): boolean {\n  return semverGte(version, getCurrentVersion());\n}\n\nexport function greaterCurrentVersion(version: string): boolean {\n  return semverGt(version, getCurrentVersion()) && version !== getCurrentVersion();\n}\n","/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.2.5';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      let value = name === 'value' ? attrValue : stringTrim(attrValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n        } else {\n          arrayPop(DOMPurify.removed);\n        }\n      } catch (_) {}\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(55002);\n"],"names":["batchedSub","batchedComputed","batchDepth","startBatch","endBatch","e","next","flags","error","trigger","err","shouldTrack","trackStack","Dep","constructor","computed","this","version","activeLink","subs","map","key","sc","track","debugInfo","notify","link","prevSub","sub","dep","targetMap","WeakMap","ITERATE_KEY","Symbol","MAP_KEY_ITERATE_KEY","ARRAY_ITERATE_KEY","target","type","newValue","oldValue","oldTarget","depsMap","get","run","forEach","targetIsArray","isArrayIndex","newLength","Number","key2","has","reactiveReadArray","array","raw","toRaw","isShallow","toReactive","shallowReadArray","arr","arrayInstrumentations","__proto__","iterator","concat","args","x","entries","value","every","fn","thisArg","apply","arguments","filter","v","find","findIndex","findLast","findLastIndex","includes","searchProxy","indexOf","join","separator","lastIndexOf","pop","noTracking","push","reduce","reduceRight","shift","some","splice","toReversed","toSorted","comparer","toSpliced","unshift","values","self","method","wrapValue","iter","_next","result","arrayProto","Array","prototype","wrappedRetFn","needsWrap","methodFn","result2","wrappedFn","item","index","call","length","acc","res","last","resetTracking","isNonTrackableKeys","builtInSymbols","Set","Object","getOwnPropertyNames","hasOwnProperty","String","obj","BaseReactiveHandler","_isReadonly","_isShallow","receiver","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","getPrototypeOf","Reflect","isRef","readonly","reactive","MutableReactiveHandler","super","set","isOldValueReadonly","isReadonly","hadKey","deleteProperty","ownKeys","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","toShallow","getProto","createReadonlyMethod","createInstrumentationGetter","shallow","instrumentations","rawTarget","rawKey","wrap","toReadonly","size","callback","observed","add","delete","clear","hadItems","targetIsMap","isPair","innerIterator","done","createIterableMethod","createInstrumentations","mutableCollectionHandlers","readonlyCollectionHandlers","createReactiveObject","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","isExtensible","rawType","targetTypeMap","proxy","Proxy","r","ref","rawValue","RefImpl","_rawValue","_value","useDirectValue","makeMap","str","create","split","val","extend","assign","hasOwn","isArray","isMap","toTypeString","isSymbol","isObject","objectToString","toString","toRawType","slice","isIntegerKey","parseInt","cacheStringFunction","cache","camelizeRE","hyphenateRE","replace","_","c","toUpperCase","capitalize","toLowerCase","charAt","hasChanged","is","___EXPOSE_LOADER_IMPORT___","___EXPOSE_LOADER_GLOBAL_THIS___","___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___","Chibi","module","exports","globalThis","g","Function","window","debug","MAX_LENGTH","MAX_SAFE_INTEGER","safeRe","re","safeSrc","src","t","parseOptions","compareIdentifiers","SemVer","options","loose","includePrerelease","TypeError","m","trim","match","LOOSE","FULL","major","minor","patch","prerelease","id","test","num","build","format","compare","other","compareMain","comparePre","i","a","b","undefined","compareBuild","inc","release","identifier","identifierBase","startsWith","Error","RegExp","PRERELEASELOOSE","PRERELEASE","base","isNaN","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","RELEASE_TYPES","SEMVER_SPEC_VERSION","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","process","env","NODE_DEBUG","console","numeric","anum","bnum","rcompareIdentifiers","looseOption","freeze","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","name","isGlobal","safe","token","max","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","BUILD","FULLPLAIN","MAINVERSIONLOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","COERCE","COERCEFULL","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","webextension","Promise","resolve","reject","getStorage","chrome","runtime","lastError","async","results","remove","storage","local","sync","addStyle","css","style","document","createElement","textContent","head","body","documentElement","appendChild","log","getManifest","lang","selector","api","settings","i18n","message","argIndex","getMessage","langDirection","getUILanguage","con","assetUrl","filename","getURL","injectCssResource","alert","injectjsResource","s","onload","addProxyScriptToTag","tag","updateDom","text","storageOnChanged","cb","onChanged","addListener","utils","syncRegex","requestApi","xhr","url","sendMessage","then","status","responseText","response","notification","database","param","settingsObj","autoTrackingModeanime","readerTracking","askBefore","autoTrackingModemanga","enablePages","forceEn","forceEnglishTitles","rpc","presenceLargeImage","presenceShowButtons","presenceShowMalsync","userscriptModeButton","syncMode","syncModeSimkl","localSync","delay","videoDuration","malTags","malContinue","malResume","usedPage","epPredictions","mangaCompletionPercentage","theme","themeSidebars","themeColor","themeOpacity","themeImage","minimalWindow","posLeft","miniMALonMal","floatButtonStealth","minimizeBigPopup","floatButtonCorrection","floatButtonHide","autoCloseMinimal","outWay","miniMalWidth","miniMalHeight","malThumbnail","friendScore","loadPTWForProgress","quicklinks","quicklinksPosition","autofull","autoresume","autoNextEp","highlightAllEp","checkForFiller","crashReport","introSkip","introSkipFwd","introSkipBwd","nextEpShort","correctionShort","syncShort","progressInterval","progressIntervalDefaultAnime","progressIntervalDefaultManga","progressNotificationsAnime","progressNotificationsManga","notificationsSticky","bookMarksList","bookMarksListManga","customDomains","anilistUpdateUi","anilistToken","anilistOptions","displayAdultContent","scoreFormat","kitsuToken","kitsuOptions","titleLanguagePreference","sfwFilter","ratingSystem","simklToken","malToken","malRefresh","shikiToken","shikiOptions","locale","debounceArray","chibiList","isInit","init","tempSettings","store","chibiRepo","ChibiListRepository","getInstance","getList","rateDebounce","changes","namespace","storageChange","info","JSON","stringify","rateLimit","clearTimeout","$","flashm","permanent","setTimeout","setDebounce","getAsync","getStaticChibi","request","patternValidationRegex","isFirefox","navigator","userAgent","allStarsRegex","allUrlsRegex","patternToRegex","matchPatterns","matchPattern","isValidPattern","assertValidPattern","protocol","host","pathname","replaceAll","getRawPatternRegex","NotFoundError","ChibiReturn","getValue","reservedKeys","isReservedKey","ChibiRegistry","Map","keys","from","chibiRegistrySingleton","ChibiCtx","consumer","globalRegistry","intervalRegistry","registry","script","startState","getConsumer","_subroutine","globalSet","globalGet","setInterval","interval","getInterval","clearIntervals","clearInterval","ChibiError","UnknownChibiFunctionError","functionName","string","ctx","input","boolean","Boolean","number","object","delimiter","pattern","replacement","replacementValue","replaceRegex","regex","substring","start","end","group","searchString","position","concatValue","jsonParse","parse","querySelector","selectorValue","querySelectorAll","findAll","html","innerHTML","getAttribute","getComputedStyle","property","getPropertyValue","closest","parent","parentElement","nextElementSibling","prev","previousElementSibling","elementMatches","matches","title","location","href","provider","return","page","propertyName","propParts","prop","getVariable","defaultValue","setVariable","resolvedValue","getGlobalVariable","setGlobalVariable","functionBody","prefix","urlPart","part","urlStrip","urlParam","urlAbsolute","domain","absoluteLink","getBaseText","uiPrepend","ui","j","prepend","uiAppend","append","uiAfter","after","uiBefore","before","literalFunctions","if","condition","thenAction","elseAction","ifThen","ifNotReturn","returnAction","stringFunctions","domFunctions","coreFunctions","utilsFunctions","uiInjectionFunctions","domReady","waitUntilTrue","_intervalKey","detectChanges","currentState","temp","detectURLChanges","ignoreQuery","ignoreAnchor","normalizeUrl","normalized","currentUrl","newUrl","equals","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","contains","and","or","not","isNil","isEmpty","coalesce","first","at","reverse","arrayIncludes","searchElement","arrayFind","ChibiConsumer","hasRun","state","functions","func","logError","runAsync","_subroutineAsync","addVariable","code","cons","getUrlConsumer","repo","allPages","matchingPages","el","urls","doesUrlMatchPatterns","currentPage","getPage","pageD","languages","isSyncPage","isOverviewPage","overview","getTitle","getIdentifier","getOverviewUrl","getEpisode","getVolume","nextEpUrl","uiSelector","uiInjection","getMalUrl","readerConfig","list","offsetHandler","elementsSelector","elementUrl","elementEp","logger","activeConsumer","defaultInterval","lifecycle","setup","readyConsumer","ready","reset","pageReady","handlePage","syncIsReady","overviewIsReady","listChange","listConsumer","handleList","useCache","repos","collections","pages","storageKey","data","chibiPages","errors","collectionsData","all","retrieveCollection","catch","col","minimumVersion","newer","hash","timestamp","root","getPermissions","auto","chibi","flat","getPermissionsElements","bind","color","blocks","fontColor","charCodeAt","colour","substr","stringToColour","name2","color2","moduleText","sum","moduleStyle","urlParts","exec","decodeURI","element","children","each","favicon","watching","planTo","episode","rateLimitExclude","getselect","parseHtml","DOMParser","parseFromString","urlChangeDetect","fullUrlChangeDetect","strip","intervalId","changeDetect","immediate","counter","newIntervalTime","Math","min","getAsyncWaitUntilTrue","rejectThis","asyncWaitUntilTrue","doubleId","random","checkDoubleExecution","getUrlFromTags","tags","atobURL","encoded","atob","setUrlInTags","addition","btoa","setResumeWaching","ep","getResumeWaching","setContinueWaching","getContinueWaching","setEntrySettings","tempOptions","getEntrySettings","u","p","tagString","continueUrlObj","resumeUrlObj","handleMalImages","getTooltip","direction","rNumber","floor","timeDiffToText","delta","diffYears","diffDays","diffHours","diffMinutes","canHideTabs","browser","tabs","hide","statusTag","anime","class","manga","tempInfo","getStatusText","notifications","iconUrl","messageObj","history","Date","now","timeCache","dataFunction","ttl","getTime","extraClass","initflashm","colorF","flashdiv","messClass","tempClass","removeClass","fadeOut","duration","queue","complete","flashmEl","mess","hoverInfo","addClass","appendTo","minimized","slideDown","slideUp","flashConfirm","yesCall","cancelCall","yesNo","yesText","noText","flasmessage","click","evt","parentsUntil","lazyloaded","lazyimages","lazyload","doc","scrollElement","loadImage","hasClass","img","Image","replaceChild","query","processScroll","elementInViewport","scroll","horizontalOffset","rect","getBoundingClientRect","top","left","innerHeight","clientHeight","wait","ms","pageUrl","returnYYYYMMDD","numFromToday","d","setDate","getDate","month","getMonth","padStart","day","getFullYear","htmlDecode","waitForPageToBeVisible","visibilityState","awaitUi","clearCache","cacheObj","deleted","sortAlphabetically","isDomainMatching","urlObj","URL","endsWith","upperCaseFirstLetter","jQuery","htmlContent","sanitize","ALLOW_UNKNOWN_PROTOCOLS","ADD_ATTR","getCurrentVersion","greaterCurrentVersion","setPrototypeOf","isFrozen","getOwnPropertyDescriptor","seal","construct","fun","thisValue","Func","arrayForEach","unapply","arrayLastIndexOf","arrayPop","arrayPush","arraySplice","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","_len2","_key2","lastIndex","_len","_key","addToSet","transformCaseFunc","l","lcElement","cleanArray","clone","newObject","lookupGetter","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","getGlobal","purify","createDOMPurify","DOMPurify","removed","nodeType","Element","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","trustedTypes","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","content","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","afterSanitizeAttributes","afterSanitizeElements","afterSanitizeShadowDOM","beforeSanitizeAttributes","beforeSanitizeElements","beforeSanitizeShadowDOM","uponSanitizeAttribute","uponSanitizeElement","uponSanitizeShadowNode","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","table","tbody","TRUSTED_TYPES_POLICY","createHTML","createScriptURL","purifyHostElement","createPolicy","suffix","ATTR_NAME","hasAttribute","policyName","scriptUrl","warn","_createTrustedTypesPolicy","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","node","removeChild","_removeAttribute","attribute","getAttributeNode","removeAttribute","setAttribute","_initDocument","dirty","leadingWhitespace","dirtyPayload","createDocument","insertBefore","createTextNode","childNodes","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","nodeName","attributes","namespaceURI","hasChildNodes","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","tagName","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","childClone","__removalCount","parentTagName","_checkValidNamespace","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","forceKeepAttr","attr","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","importedNode","returnNode","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","entryPoint","hookFunction","removeHook","removeHooks","removeAllHooks","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","definition","o","defineProperty","toStringTag"],"sourceRoot":""}