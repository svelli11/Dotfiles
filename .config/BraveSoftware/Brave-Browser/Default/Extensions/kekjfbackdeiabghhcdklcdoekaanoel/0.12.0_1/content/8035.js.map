{"version":3,"file":"content/8035.js","mappings":"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","sources":["webpack://MALSync/./src/_minimal/utils/reactive.ts","webpack://MALSync/./src/_provider/AniList/helper.ts","webpack://MALSync/./src/_provider/Errors.ts","webpack://MALSync/./src/_provider/Kitsu/helper.ts","webpack://MALSync/./src/_provider/MyAnimeList_api/helper.ts","webpack://MALSync/./src/_provider/Shikimori/helper.ts","webpack://MALSync/./src/_provider/Simkl/helper.ts","webpack://MALSync/./src/_provider/definitions.ts","webpack://MALSync/./src/_provider/helper.ts","webpack://MALSync/./src/background/releaseProgressUtils.ts","webpack://MALSync/./src/utils/IntlWrapper.ts","webpack://MALSync/./src/utils/emitter.ts","webpack://MALSync/./src/utils/oauth.ts","webpack://MALSync/./src/utils/progress.ts","webpack://MALSync/./src/_minimal/components/card.vue?6cda","webpack://MALSync/./src/_minimal/components/card.vue","webpack://MALSync/./src/_minimal/components/card.vue?cade","webpack://MALSync/./src/_minimal/components/header.vue?3904","webpack://MALSync/./src/_minimal/components/header.vue","webpack://MALSync/./src/_minimal/components/header.vue?b176","webpack://MALSync/./src/_minimal/components/header.vue?dd58","webpack://MALSync/./src/_minimal/components/section.vue?dc1e","webpack://MALSync/./src/_minimal/components/section.vue","webpack://MALSync/./src/_minimal/components/section.vue?2285","webpack://MALSync/./src/_minimal/components/settings/settings-discord-icon.vue","webpack://MALSync/./src/_minimal/components/settings/settings-discord-icon.vue?db9c","webpack://MALSync/./src/_minimal/components/settings/settings-discord-icon.vue?d419","webpack://MALSync/./src/_minimal/components/text-icon.vue?3a81","webpack://MALSync/./src/_minimal/components/text-icon.vue","webpack://MALSync/./src/_minimal/components/text-icon.vue?b47f"],"sourcesContent":["import { reactive, Ref, watch } from 'vue';\nimport { Cache } from '../../utils/Cache';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars, no-shadow\ntype Parameter<G> = G extends (arg: infer G) => any ? G : never;\n\nexport function createRequest<F extends (arg: any) => Promise<any>>(\n  parameter: Ref<Parameter<F>>,\n  fn: F,\n  options: {\n    cache?: {\n      prefix: string;\n      ttl: number;\n      refetchTtl: number;\n      keyFn?: (param: Ref<Parameter<F>>) => string;\n    };\n    executeCondition?: (param: Ref<Parameter<F>>) => boolean;\n    keepData?: boolean;\n  } = {},\n) {\n  let id = 0;\n\n  const result = reactive({\n    loading: true,\n    temporaryCache: false,\n    cache: false,\n    data: null as null | Awaited<ReturnType<F>>,\n    error: null as null | Error,\n    execute: () => Promise.resolve(),\n  });\n\n  const execute = async (params: Ref<Parameter<F>>, forceFresh = false) => {\n    result.loading = true;\n    result.temporaryCache = false;\n    result.error = null;\n    if (!options.keepData) result.data = null;\n    const tempId = Math.random();\n    id = tempId;\n\n    let state;\n    let cache;\n    if (options.cache) {\n      cache = new Cache(\n        options.cache.prefix +\n          (options.cache.keyFn ? options.cache.keyFn(params) : JSON.stringify(params.value)),\n        options.cache.ttl,\n        true,\n        options.cache.refetchTtl,\n      );\n\n      if (forceFresh) {\n        cache.clearValue();\n      } else {\n        state = await cache.fullState();\n        if (state.hasValue) {\n          result.data = state.value.data;\n          result.loading = false;\n          result.cache = true;\n          result.temporaryCache = state.refetch;\n        }\n      }\n    }\n\n    if (state && !state.refetch && state.hasValue) return Promise.resolve();\n\n    if (options.executeCondition && !options.executeCondition(params)) {\n      result.loading = false;\n      return Promise.resolve();\n    }\n\n    return fn(params)\n      .then(res => {\n        if (tempId !== id) return;\n        result.loading = false;\n        result.temporaryCache = false;\n        result.cache = false;\n        result.data = res;\n        if (cache && res) cache.setValue(res);\n      })\n      .catch(err => {\n        if (tempId !== id) return;\n        con.error(err);\n        result.loading = false;\n        result.temporaryCache = false;\n        result.cache = false;\n        result.error = err;\n      });\n  };\n\n  watch(parameter, value => execute(parameter), { deep: true });\n\n  execute(parameter);\n\n  result.execute = () => execute(parameter, true);\n\n  return result;\n}\n","/* eslint-disable no-shadow */\nimport { status, fuzzyDate, startFinishDate } from '../definitions';\nimport {\n  NotAutenticatedError,\n  NotFoundError,\n  parseJson,\n  ServerOfflineError,\n  UnexpectedResponseError,\n} from '../Errors';\n\nconst logger = con.m('anilist', '#3db4f2');\n\nexport function translateList(aniStatus, malStatus: null | number = null) {\n  const list = {\n    CURRENT: status.Watching,\n    PLANNING: status.PlanToWatch,\n    COMPLETED: status.Completed,\n    DROPPED: status.Dropped,\n    PAUSED: status.Onhold,\n    REPEATING: status.Watching,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[aniStatus];\n}\n\nexport enum statusTranslate {\n  CURRENT = status.Watching,\n  PLANNING = status.PlanToWatch,\n  COMPLETED = status.Completed,\n  DROPPED = status.Dropped,\n  PAUSED = status.Onhold,\n  REPEATING = status.Rewatching,\n}\n\nexport function parseFuzzyDate(date?: fuzzyDate): startFinishDate {\n  if (!date?.year || !date?.month || !date?.day) {\n    return null;\n  }\n\n  const year = String(date.year).padStart(4, '0');\n  const month = String(date.month).padStart(2, '0');\n  const day = String(date.day).padStart(2, '0');\n\n  return `${year}-${month}-${day}`;\n}\n\nexport function getFuzzyDate(date?: startFinishDate): fuzzyDate {\n  const fuzzyDate: fuzzyDate = {\n    year: null,\n    month: null,\n    day: null,\n  };\n  // ES6 doesn't support named capture groups\n  const regexMatch = date?.match(/^(\\d{4})-(\\d{2})-(\\d{2})$/);\n  if (regexMatch?.[1] && regexMatch?.[2] && regexMatch?.[3]) {\n    fuzzyDate.year = parseInt(regexMatch[1]);\n    fuzzyDate.month = parseInt(regexMatch[2]);\n    fuzzyDate.day = parseInt(regexMatch[3]);\n  }\n\n  return fuzzyDate;\n}\n\nexport function aniListToMal(anilistId: number, type: 'anime' | 'manga') {\n  const query = `\n  query ($id: Int, $type: MediaType) {\n    Media (id: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  `;\n\n  const variables = {\n    id: anilistId,\n    type: type.toUpperCase(),\n  };\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      const res = parseJson(response.responseText);\n      con.log(res);\n      return res.data.Media.idMal;\n    });\n}\n\nexport function malToAnilist(malId: number, type: 'anime' | 'manga') {\n  const query = `\n  query ($id: Int, $type: MediaType) {\n    Media (idMal: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  `;\n\n  const variables = {\n    id: malId,\n    type: type.toUpperCase(),\n  };\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      if (response.status === 404) return NaN;\n      const res = parseJson(response.responseText);\n      con.log(res);\n      return res.data.Media.id;\n    });\n}\n\nexport function getCacheKey(id, kitsuId) {\n  if (Number.isNaN(id) || !id) {\n    return `anilist:${kitsuId}`;\n  }\n  return id;\n}\n\nexport async function apiCall(query, variables, requiresAuthentication = true) {\n  if (requiresAuthentication && !api.settings.get('anilistToken')) {\n    throw new NotAutenticatedError('No token found');\n  }\n\n  const headers: any = {\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n  };\n\n  if (api.settings.get('anilistToken'))\n    headers.Authorization = `Bearer ${api.settings.get('anilistToken')}`;\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers,\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      try {\n        const res = parseJson(response.responseText);\n\n        if (typeof res.errors !== 'undefined' && res.errors.length) {\n          logger.error('[SINGLE]', 'Error', res.errors);\n          const error = res.errors[0];\n          switch (error.status) {\n            case 400:\n              if (error.message === 'Invalid token' && !requiresAuthentication) {\n                api.settings.set('anilistToken', null);\n                return apiCall(query, variables, requiresAuthentication);\n              }\n              if (error.message === 'validation') throw new Error('Wrong request format');\n              if (error.message.includes('invalid')) throw new Error('Wrong request format');\n              throw new NotAutenticatedError(error.message);\n            case 404:\n              throw new NotFoundError(error.message);\n            default:\n              throw new Error(error.message);\n          }\n        }\n\n        return res;\n      } catch (err) {\n        if (err instanceof UnexpectedResponseError) {\n          if ((response.status > 499 && response.status < 600) || response.status === 0) {\n            throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n          }\n          if (response.status === 403) {\n            throw new Error(api.storage.lang('Error_Blocked', ['AniList']));\n          }\n        }\n        throw err;\n      }\n    });\n}\n\nexport function imgCheck(url: string) {\n  if (!url || url.endsWith('/default.jpg')) return '';\n  return url;\n}\n","/* eslint-disable max-classes-per-file */\nexport class NotAutenticatedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotAutenticatedError';\n  }\n}\n\nexport class UrlNotSupportedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UrlNotSupportedError';\n  }\n}\n\nexport class ServerOfflineError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'ServerOfflineError';\n  }\n}\n\nexport class NotFoundError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class UnexpectedResponseError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UnexpectedResponseError';\n  }\n}\n\nexport function parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    throw new UnexpectedResponseError(e.message);\n  }\n}\n\nexport function errorMessage(error, authenticationUrl: string) {\n  if (error instanceof NotAutenticatedError) {\n    return api.storage.lang('Error_Authenticate', [authenticationUrl]);\n  }\n  if (error instanceof ServerOfflineError) {\n    return 'Server Offline';\n  }\n  if (error instanceof UrlNotSupportedError) {\n    return `Incorrect url provided [${error.message}]`;\n  }\n  if (error instanceof NotFoundError) {\n    return 'Could not find this entry';\n  }\n  return error.message;\n}\n","import { startFinishDate, status } from '../definitions';\nimport { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nconst logger = con.m('kitsu', '#d65e43');\n\nexport function translateList(aniStatus, malStatus: null | number = null) {\n  const list = {\n    current: status.Watching,\n    planned: status.PlanToWatch,\n    completed: status.Completed,\n    dropped: status.Dropped,\n    on_hold: status.Onhold,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[aniStatus];\n}\n\nexport function timestampToDate(timestamp: string | null): startFinishDate {\n  if (typeof timestamp !== 'string') {\n    return null;\n  }\n\n  return timestamp.substring(0, 10);\n}\n\nexport function dateToTimestamp(date: startFinishDate): string | null {\n  if (typeof date !== 'string') {\n    return null;\n  }\n\n  return `${date}T00:00:00.000Z`;\n}\n\nexport function getTitle(titles, canonicalTitle) {\n  let title: string;\n  switch (api.settings.get('kitsuOptions').titleLanguagePreference) {\n    case 'english':\n      title = titles.en;\n      break;\n    case 'romanized':\n      title = titles.en_jp;\n      break;\n    case 'canonical':\n    default:\n      title = canonicalTitle;\n  }\n\n  if (typeof title === 'undefined' || !title) title = titles.en;\n  if (typeof title === 'undefined' || !title) title = titles.en_jp;\n  if (typeof title === 'undefined' || !title) title = titles.ja_jp;\n  if (typeof title === 'undefined' || !title) {\n    const keys = Object.keys(titles);\n    if (!keys.length) {\n      return 'No Title';\n    }\n    title = titles[keys[0]];\n  }\n\n  return title;\n}\n\nexport function getCacheKey(id, kitsuId) {\n  if (Number.isNaN(id) || !id) {\n    return `kitsu:${kitsuId}`;\n  }\n  return id;\n}\n\nexport function malToKitsu(malid: number, type: 'anime' | 'manga') {\n  return apiCall(\n    'GET',\n    `https://kitsu.app/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n    {},\n    false,\n  );\n}\n\nexport function kitsuToMal(kitsuId: number, type: 'anime' | 'manga') {\n  return api.request\n    .xhr('GET', {\n      url: `https://kitsu.app/api/edge/${type}/${kitsuId}/mappings?filter[externalSite]=myanimelist/${type}`,\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        Accept: 'application/vnd.api+json',\n      },\n    })\n    .then(response => {\n      const res = JSON.parse(response.responseText);\n      con.log('[KtoM]', res);\n      if (typeof res.data === 'undefined' || !res.data.length) return null;\n      return Number(res.data[0].attributes.externalId);\n    });\n}\n\nexport function apiCall(\n  mode: 'GET' | 'POST' | 'DELETE' | 'PUT',\n  url,\n  variables = {},\n  authentication = true,\n) {\n  const headers: any = {\n    'Content-Type': 'application/vnd.api+json',\n    Accept: 'application/vnd.api+json',\n  };\n  if (authentication) headers.Authorization = `Bearer ${api.settings.get('kitsuToken')}`;\n  return api.request\n    .xhr(mode, {\n      url,\n      headers,\n      data: mode !== 'GET' ? JSON.stringify(variables) : undefined,\n    })\n    .then(response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      if (response.status === 204) {\n        return {};\n      }\n\n      const res = parseJson(response.responseText);\n\n      if (typeof res.errors !== 'undefined' && res.errors.length) {\n        logger.error('[SINGLE]', 'Error', res.errors);\n        const error = res.errors[0];\n        switch (parseInt(error.status)) {\n          case 401:\n          case 403:\n            throw new NotAutenticatedError(error.detail);\n          case 404:\n            throw new NotFoundError(error.detail);\n          default:\n            throw new Error(error.detail);\n        }\n      }\n\n      return res;\n    });\n}\n","/* eslint-disable no-shadow */\nimport { startFinishDate, status } from '../definitions';\nimport { clientId } from '../../utils/oauth';\nimport { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nexport const apiDomain = 'https://api.myanimelist.net/v2/';\n\nexport const authenticationUrl = 'https://malsync.moe/mal/oauth';\n\nexport async function apiCall(options: {\n  type: 'GET' | 'PUT' | 'DELETE' | 'POST';\n  path: string;\n  fields?: string[];\n  dataObj?: { [key: string]: string };\n}) {\n  let url = apiDomain + options.path;\n  if (options.fields && options.fields.length) {\n    url += url.includes('?') ? '&' : '?';\n    url += `fields=${options.fields.join(',')}`;\n  }\n  const headers: any = {\n    Authorization: `Bearer ${api.settings.get('malToken')}`,\n    'Content-Type': 'application/x-www-form-urlencoded',\n  };\n  let data = '';\n  if (options.dataObj) {\n    const formBody: string[] = [];\n    for (const property in options.dataObj) {\n      const encodedKey = encodeURIComponent(property);\n      const encodedValue = encodeURIComponent(options.dataObj[property]);\n      formBody.push(`${encodedKey}=${encodedValue}`);\n    }\n    data = formBody.join('&');\n  }\n  return api.request\n    .xhr(options.type, {\n      url,\n      headers,\n      data,\n    })\n    .then(async response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      let res;\n      try {\n        res = JSON.parse(response.responseText);\n      } catch (e) {\n        if (checkIfBanned(response.responseText)) {\n          throw new Error(api.storage.lang('Error_Blocked', ['MyAnimeList']));\n        }\n        throw e;\n      }\n\n      if (res && res.error) {\n        switch (res.error) {\n          case 'forbidden':\n          case 'invalid_token':\n            if (await refreshToken(this.logger)) {\n              return this.apiCall(options);\n            }\n            throw new NotAutenticatedError(res.message ?? res.error);\n          case 'not_found':\n            throw new NotFoundError(res.message ?? res.error);\n          case 'invalid_content':\n            throw new Error(\n              'This Entry is currently pending approval. It canÂ´t be saved to mal for now',\n            );\n          default:\n            throw new Error(res.message ?? res.error);\n        }\n      }\n\n      switch (response.status) {\n        case 400:\n          throw new Error('Invalid Parameters');\n        case 403:\n        default:\n      }\n\n      return res;\n    });\n}\n\nasync function refreshToken(logger) {\n  const l = logger.m('Refresh');\n  l.log('Refresh Access Token');\n  const rToken = api.settings.get('malRefresh');\n  if (!rToken) return false;\n  return api.request\n    .xhr('POST', {\n      url: 'https://myanimelist.net/v1/oauth2/token',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      data: `client_id=${clientId}&grant_type=refresh_token&refresh_token=${rToken}`,\n    })\n    .then(res => {\n      try {\n        return parseJson(res.responseText);\n      } catch (e) {\n        if (checkIfBanned(res.responseText)) {\n          throw new Error(api.storage.lang('Error_Blocked', ['MyAnimeList']));\n        }\n        throw e;\n      }\n    })\n    .then(json => {\n      if (json && json.refresh_token && json.access_token) {\n        api.settings.set('malToken', json.access_token);\n        api.settings.set('malRefresh', json.refresh_token);\n        return true;\n      }\n      if (json && json.error) {\n        l.error(json.error, '|', json.message);\n        api.settings.set('malRefresh', '');\n        return false;\n      }\n      l.error('Something went wrong');\n      return false;\n    });\n}\n\nfunction checkIfBanned(text: string) {\n  return Boolean(text.includes('Request blocked') || text.includes('your IP has been banned'));\n}\n\nexport enum animeStatus {\n  watching = status.Watching,\n  completed = status.Completed,\n  on_hold = status.Onhold,\n  dropped = status.Dropped,\n  plan_to_watch = status.PlanToWatch,\n}\n\nexport enum mangaStatus {\n  reading = status.Watching,\n  completed = status.Completed,\n  on_hold = status.Onhold,\n  dropped = status.Dropped,\n  plan_to_read = status.PlanToWatch,\n}\n\nexport function getRoundedDate(date?: string): startFinishDate {\n  if (!date || !/^\\d{4}(?:-\\d\\d){0,2}$/.test(date)) {\n    return null;\n  }\n\n  const year = date.substring(0, 4);\n\n  let month = date.substring(5, 7);\n  if (month.length !== 2) {\n    month = '01';\n  }\n\n  let day = date.substring(8, 10);\n  if (day.length !== 2) {\n    day = '01';\n  }\n\n  return `${year}-${month}-${day}`;\n}\n","import { NotAutenticatedError, NotFoundError, ServerOfflineError } from '../Errors';\nimport { status } from '../definitions';\nimport { Cache } from '../../utils/Cache';\n\nconst clientId = 'z3NJ84kK9iy5NU6SnhdCDB38rr4-jFIJ67bMIUDzdoo';\n\nexport const authUrl = `https://shikimori.one/oauth/authorize?client_id=${clientId}&redirect_uri=https%3A%2F%2Fmalsync.moe%2Fshikimori%2Foauth&response_type=code&scope=user_rates`;\n\nconst apiDomain = 'https://shikimori.one/api/';\n\nexport const domain = 'https://shikimori.one';\n\nexport async function apiCall(options: {\n  type: 'GET' | 'PUT' | 'DELETE' | 'POST';\n  path: string;\n  parameter?: { [key: string]: string | number };\n  dataObj?: { [key: string]: any };\n  auth?: boolean;\n}) {\n  const type = options.type || 'GET';\n  const token = api.settings.get('shikiToken');\n\n  if (!token && !token.access_token && !options.auth) {\n    throw new NotAutenticatedError('No token set');\n  }\n\n  let url = apiDomain + options.path;\n  if (options.parameter && Object.keys(options.parameter).length) {\n    url += url.includes('?') ? '&' : '?';\n    const params = [] as string[];\n    for (const key in options.parameter) {\n      params.push(`${key}=${options.parameter[key]}`);\n    }\n    url += params.join('&');\n  }\n\n  const headers: any = {\n    Authorization: `Bearer ${token.access_token}`,\n    'User-Agent': 'MAL-Sync',\n    'Content-Type': 'application/json',\n  };\n\n  let data = '';\n  if (options.dataObj) {\n    data = JSON.stringify(options.dataObj);\n  }\n\n  if (options.auth) {\n    delete headers.Authorization;\n    url = 'https://shikimori.one/oauth/token';\n  }\n\n  return api.request\n    .xhr(type, {\n      url,\n      headers,\n      data,\n    })\n    .then(async response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      let res: any = null;\n      if (response.responseText) {\n        res = JSON.parse(response.responseText);\n      }\n\n      if (response.status === 401) {\n        if (options.auth) throw new NotAutenticatedError(res.message ?? res.error);\n        await refreshToken(token.refresh_token);\n        return apiCall(options);\n      }\n\n      if (res && res.error) {\n        switch (res.error) {\n          case 'forbidden':\n          case 'invalid_token':\n            if (options.auth) throw new NotAutenticatedError(res.message ?? res.error);\n            await refreshToken(token.refresh_token);\n            return apiCall(options);\n          case 'not_found':\n            throw new NotFoundError(res.message ?? res.error);\n          default:\n            throw new Error(res.message ?? res.error);\n        }\n      }\n\n      switch (response.status) {\n        case 400:\n          throw new Error('Invalid Parameters');\n        case 403:\n        default:\n      }\n\n      return res;\n    });\n}\n\nexport function authRequest(data: { code: string } | { refresh_token: string }) {\n  const dataObj: any = {\n    client_id: clientId,\n    client_secret: '6vkFaJN_wxQHmBoq23ac1z6tZKiAD7xqsXGudkkOqTg',\n    redirect_uri: 'https://malsync.moe/shikimori/oauth',\n  };\n\n  if ('code' in data) {\n    dataObj.code = data.code;\n    dataObj.grant_type = 'authorization_code';\n  }\n\n  if ('refresh_token' in data) {\n    dataObj.refresh_token = data.refresh_token;\n    dataObj.grant_type = 'refresh_token';\n  }\n\n  return apiCall({\n    type: 'POST',\n    path: 'oauth/token',\n    auth: true,\n    dataObj,\n  });\n}\n\nasync function refreshToken(refresh_token: string) {\n  const res = await authRequest({ refresh_token }).catch(err => {\n    if (err.message === 'invalid_request') {\n      api.settings.set('shikiToken', '');\n    }\n    throw err;\n  });\n  await api.settings.set('shikiToken', {\n    access_token: res.access_token,\n    refresh_token: res.refresh_token,\n  });\n}\n\nexport function userRequest(): Promise<userRequestInterface> {\n  return apiCall({\n    type: 'GET',\n    path: 'users/whoami',\n  }).then(res => {\n    if (res.locale) {\n      api.settings.set('shikiOptions', {\n        locale: res.locale,\n      });\n    }\n    return res;\n  });\n}\n\nexport async function userId() {\n  const cacheObj = new Cache('shiki/userId', 4 * 60 * 60 * 1000);\n\n  if (await cacheObj.hasValue()) {\n    return cacheObj.getValue();\n  }\n\n  const res = await userRequest();\n  if (res.id) {\n    cacheObj.setValue(res.id);\n  }\n  return res.id;\n}\n\nexport function title(rus: string, eng: string, headline = false) {\n  const options = api.settings.get('shikiOptions');\n  const locale = options && options.locale ? options.locale : 'ru';\n  if (locale === 'ru') return rus || eng;\n  if (headline && eng && rus) return `${eng} / ${rus}`;\n  return eng || rus;\n}\n\nexport type StatusType =\n  | 'planned'\n  | 'watching'\n  | 'rewatching'\n  | 'completed'\n  | 'on_hold'\n  | 'dropped';\n\n// eslint-disable-next-line no-shadow\nexport enum statusTranslate {\n  watching = status.Watching,\n  planned = status.PlanToWatch,\n  completed = status.Completed,\n  dropped = status.Dropped,\n  on_hold = status.Onhold,\n  rewatching = status.Rewatching,\n}\n\nexport interface StatusRequest {\n  id?: number;\n  user_id: number;\n  target_id: number;\n  target_type: 'Anime' | 'Manga';\n  score: number;\n  status: StatusType;\n  rewatches: number;\n  episodes: number;\n  volumes: number;\n  chapters: number;\n  text: string;\n  text_html?: string;\n  created_at?: Date;\n  updated_at?: Date;\n}\n\nexport interface Image {\n  original: string;\n  preview: string;\n  x96: string;\n  x48: string;\n}\n\nexport interface MetaRequest {\n  id: number;\n  name: string;\n  russian: string;\n  image: Image;\n  url: string;\n  kind: string;\n  score: string;\n  status: string;\n  volumes: number;\n  chapters: number;\n  episodes: number;\n  aired_on: string;\n  released_on: string;\n}\n\nexport interface userRequestInterface {\n  id: number;\n  nickname: string;\n  avatar: string;\n  image: {\n    x80: string;\n  };\n  url: string;\n  locale: string;\n}\n","import { status } from '../definitions';\nimport { NotAutenticatedError, parseJson, ServerOfflineError } from '../Errors';\n\nexport const client_id = __MAL_SYNC_KEYS__.simkl.id;\n\nexport function getAuthUrl() {\n  return `https://simkl.com/oauth/authorize?response_type=code&client_id=${client_id}&redirect_uri=https://simkl.com/apps/chrome/mal-sync/connected/`;\n}\n\nexport function translateList(simklStatus, malStatus: null | number = null) {\n  const list = {\n    watching: status.Watching,\n    plantowatch: status.PlanToWatch,\n    completed: status.Completed,\n    notinteresting: status.Dropped,\n    hold: status.Onhold,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[simklStatus];\n}\n\nexport function getCacheKey(id, simklId) {\n  if (Number.isNaN(id) || !id) {\n    return `simkl:${simklId}`;\n  }\n  return id;\n}\n\nexport function simklIdToMal(simklId) {\n  return this.call(`https://api.simkl.com/anime/${simklId}`, { extended: 'full' }, true).then(\n    res => {\n      if (typeof res.ids.mal === 'undefined') return null;\n      return res.ids.mal;\n    },\n  );\n}\n\nexport function getEpisode(episode: string): number {\n  if (typeof episode === 'number') return episode;\n  if (episode) {\n    const temp = episode.match(/e\\d+/i);\n    if (temp !== null) {\n      const episodePart = parseInt(temp[0].replace(/\\D/, ''));\n      if (Number.isNaN(episodePart)) return 0;\n      return episodePart;\n    }\n  }\n  return 0;\n}\n\nlet cacheList;\n\nexport async function syncList(lazy = false) {\n  const logger = con.m('Simkl', '#9b7400').m('list');\n\n  if (typeof cacheList === 'undefined') {\n    cacheList = await api.storage.get('simklList');\n  } else if (lazy) {\n    return cacheList;\n  }\n\n  const lastCheck = await api.storage.get('simklLastCheck');\n  const activity = await this.call('https://api.simkl.com/sync/activities');\n  logger.log('Activity', lastCheck, activity.anime);\n\n  // removed_from_list\n  if (lastCheck && lastCheck.removed_from_list !== activity.anime.removed_from_list) {\n    const checkRemoveList = await this.call('https://api.simkl.com/sync/all-items/anime');\n    const newCacheList = {};\n    if (checkRemoveList) {\n      for (let i = 0; i < checkRemoveList.anime.length; i++) {\n        const el = checkRemoveList.anime[i];\n        if (cacheList[el.show.ids.simkl] !== undefined) {\n          newCacheList[el.show.ids.simkl] = cacheList[el.show.ids.simkl];\n        }\n      }\n    }\n    cacheList = newCacheList;\n    logger.log('remove', cacheList);\n  }\n\n  // Check if update Needed\n  let dateFrom = '';\n  if (lastCheck && cacheList) {\n    dateFrom = `date_from=${lastCheck.all}`;\n    if (lastCheck.all === activity.anime.all) {\n      logger.log('Up to date');\n      return cacheList;\n    }\n  }\n\n  if (!cacheList) cacheList = {};\n\n  if (lastCheck && lastCheck.rated_at !== activity.anime.rated_at) {\n    const rated = await this.call(`https://api.simkl.com/sync/ratings/anime?${dateFrom}`);\n    logger.log('ratedUpdate', rated);\n    if (rated) {\n      for (let i = 0; i < rated.anime.length; i++) {\n        const el = rated.anime[i];\n        cacheList[el.show.ids.simkl] = el;\n      }\n    }\n  }\n\n  const list = await this.call(`https://api.simkl.com/sync/all-items/anime?${dateFrom}`);\n  logger.log('listUpdate', list);\n  if (list) {\n    for (let i = 0; i < list.anime.length; i++) {\n      const el = list.anime[i];\n      cacheList[el.show.ids.simkl] = el;\n    }\n  }\n  logger.log('totalList', cacheList);\n  await api.storage.set('simklList', cacheList);\n  await api.storage.set('simklLastCheck', activity.anime);\n  return cacheList;\n}\n\nexport async function getSingle(\n  ids: { simkl?: string | number; mal?: string | number },\n  lazy = false,\n) {\n  const list = await this.syncList(lazy);\n  if (ids.simkl) {\n    if (list[ids.simkl] !== undefined) {\n      return list[ids.simkl];\n    }\n  } else if (ids.mal) {\n    // TODO: Use map for better performance\n    const listVal = Object.values(list);\n    for (let i = 0; i < listVal.length; i++) {\n      const el: any = listVal[i];\n      if (typeof el.show.ids.mal !== 'undefined' && Number(el.show.ids.mal) === Number(ids.mal)) {\n        return el;\n      }\n    }\n  } else {\n    throw 'No id passed';\n  }\n  return null;\n}\n\nexport async function call(\n  url,\n  sData: any = {},\n  asParameter = false,\n  method: 'GET' | 'POST' = 'GET',\n  login = true,\n) {\n  const logger = con.m('Simkl', '#9b7400').m('call');\n\n  if (asParameter) {\n    url += `?${new URLSearchParams(Object.entries(sData))}`;\n    sData = undefined;\n  }\n  logger.log(method, url, sData);\n\n  const headers: any = {\n    'simkl-api-key': client_id,\n    Accept: 'application/vnd.api+json',\n    'Content-Type': 'application/json',\n  };\n\n  if (login) headers.Authorization = `Bearer ${api.settings.get('simklToken')}`;\n  else logger.log('No login');\n\n  if (method === 'GET') {\n    sData = undefined;\n  }\n\n  return api.request\n    .xhr(method, {\n      url,\n      headers,\n      data: sData,\n    })\n    .then(async response => {\n      const res = parseJson(response.responseText);\n      this.errorHandling(res, response.status);\n      return res;\n    });\n}\n\nexport function errorHandling(res, code) {\n  if ((code > 499 && code < 600) || code === 0) {\n    throw new ServerOfflineError(`Server Offline status: ${code}`);\n  }\n\n  if (res && typeof res.error !== 'undefined') {\n    this.logger.error('[SINGLE]', 'Error', res.error);\n    const { error } = res;\n    if (error.code) {\n      switch (error.code) {\n        default:\n          throw new Error(error.error);\n      }\n    } else {\n      switch (error) {\n        case 'user_token_failed':\n          throw new NotAutenticatedError('user_token_failed');\n        default:\n          throw error;\n      }\n    }\n  }\n}\n","/* eslint-disable no-shadow */\n/* export enum type {\n  Anime = \"anime\",\n  Manga = \"manga\"\n} */\n\nimport { Component } from 'vue';\n\nexport type contentType = 'anime' | 'manga';\n\nexport type syncMethod = 'normal' | 'listSync';\n\nexport enum status {\n  NoState = 0,\n  Watching = 1,\n  Completed = 2,\n  Onhold = 3,\n  Dropped = 4,\n  PlanToWatch = 6,\n  All = 7,\n  Rewatching = 23,\n}\n\nexport enum score {\n  NoScore = 0,\n  R1 = 1,\n  R2 = 2,\n  R3 = 3,\n  R4 = 4,\n  R5 = 5,\n  R6 = 6,\n  R7 = 7,\n  R8 = 8,\n  R9 = 9,\n  R10 = 10,\n}\n\n// score range 0 - 100\nexport type score100 = number;\n\n// YYYY-MM-DD format\nexport type startFinishDate = string | null;\n\nexport type fuzzyDate = {\n  year: number | null;\n  month: number | null;\n  day: number | null;\n};\n\nexport type rewatchCount = number;\n\nexport type searchResult = {\n  id: number;\n  name: string;\n  altNames: string[];\n  url: string;\n  malUrl: () => Promise<string | null>;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  media_type: string;\n  isNovel: boolean;\n  score: string;\n  year: string;\n  totalEp?: number;\n  list?: {\n    status: status;\n    score: score;\n    episode: number;\n  };\n};\n\nexport type searchInterface = (\n  keyword: string,\n  type: 'anime' | 'manga',\n  options?: {},\n  sync?: boolean,\n) => Promise<searchResult[]>;\n\nexport interface ConfObj {\n  key: string;\n  title: string | (() => string);\n  system?: 'userscript' | 'webextension';\n  component: Component;\n  condition?: () => boolean;\n  change?: () => void;\n  props?: { [key: string]: any };\n  children?: ConfObj[];\n}\n","export type SyncTypes = 'MAL' | 'ANILIST' | 'KITSU' | 'SIMKL' | 'SHIKI' | 'MALAPI';\n\nexport function getSyncMode(type = '') {\n  const mode = api.settings.get('syncMode');\n  //\n  if (mode === 'SIMKL' && (type === 'manga' || type.indexOf('/manga/') !== -1)) {\n    return api.settings.get('syncModeSimkl');\n  }\n  //\n  return mode;\n}\n","import { Cache } from '../utils/Cache';\nimport type { listElement } from '../_provider/listAbstract';\nimport { xhrResponseI } from '../api/messageInterface';\n\nexport interface releaseItemInterface {\n  timestamp: number;\n  value: any;\n  finished: boolean;\n  mode: string;\n}\n\nexport async function predictionXhrGET(type: string, apiCacheKey: number | string | null) {\n  if (!apiCacheKey) return {};\n  const response = await api.request.xhr(\n    'GET',\n    `https://api.malsync.moe/nc/mal/${type}/${apiCacheKey}/pr`,\n  );\n  return JSON.parse(response.responseText);\n}\n\nexport async function predictionXhrPOST(type: string, malDATA: listElement[] | null) {\n  if (malDATA === null) return [];\n  if (malDATA.length <= 0) return [];\n  const malDATAID = malDATA.map(el => el.apiCacheKey);\n  const returnArray: xhrResponseI[] = [];\n  for (let i = 0; i <= malDATAID.length; ) {\n    const tempArray = malDATAID.slice(i, i + 49);\n    const Request = {\n      url: `https://api.malsync.moe/nc/mal/${type}/POST/pr`,\n      data: JSON.stringify({ malids: tempArray }),\n      headers: { 'Content-Type': 'application/json' },\n    };\n    await utils.wait(5000);\n    const response = await api.request.xhr('POST', Request);\n    returnArray.push(JSON.parse(response.responseText));\n    i += 50;\n  }\n\n  return returnArray.reduce((acc: xhrResponseI[], val) => acc.concat(val), []);\n}\n\nexport async function single(\n  el: {\n    uid: number;\n    apiCacheKey: number | string | null;\n    title: string;\n    cacheKey: string;\n    watchedEp: number;\n    single: any;\n    xhr?: object;\n  },\n  type,\n  mode = 'default',\n  logger = con.m('release'),\n) {\n  if (!mode) mode = 'default';\n  logger = logger.m(el.uid.toString());\n  logger.log(el.title, el.cacheKey, el.apiCacheKey, `Mode: ${mode}`);\n  if (!el.apiCacheKey) {\n    logger.log('No Api Cache Id');\n    return;\n  }\n  if (!api.settings.get('epPredictions')) {\n    logger.log('epPredictions disabled');\n    return;\n  }\n  const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n    `release/${type}/${el.cacheKey}`,\n  );\n\n  logger.m('Load').log(releaseItem);\n\n  let force = false;\n\n  if (releaseItem && releaseItem.mode && releaseItem.mode !== mode) force = true;\n\n  if (\n    releaseItem &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 2 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Up to date');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    releaseItem.finished &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 7 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Finished');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    !releaseItem.value &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 1 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Nulled');\n    return;\n  }\n\n  if (force) logger.log('Update forced');\n\n  if (mode === 'off') {\n    logger.log('Disabled');\n    el.xhr = [];\n  }\n\n  let xhr;\n  if (typeof el.xhr !== 'undefined') {\n    xhr = el.xhr;\n  } else {\n    xhr = await predictionXhrGET(type, el.apiCacheKey);\n    await utils.wait(500);\n  }\n  logger.log(xhr);\n\n  const progressValue = getProgress(xhr, mode, type);\n\n  if (!progressValue) {\n    logger.log('No value for the selected mode');\n  }\n\n  let finished = false;\n\n  if (progressValue && progressValue.state && progressValue.state === 'complete') finished = true;\n\n  logger.m('Save').log(progressValue);\n  if (releaseItem && releaseItem.value) {\n    notificationCheck(el, releaseItem.value, progressValue, type);\n  }\n\n  await api.storage.set(`release/${type}/${el.cacheKey}`, {\n    timestamp: Date.now(),\n    value: progressValue,\n    mode,\n    finished,\n  } as releaseItemInterface);\n}\n\nexport function progressIsOld(releaseItem: releaseItemInterface) {\n  if (releaseItem && releaseItem.timestamp) {\n    const diff = new Date().getTime() - releaseItem.timestamp;\n\n    if (releaseItem.finished && diff < 7 * 24 * 60 * 60 * 1000) {\n      // logger.log('Finished');\n      return false;\n    }\n\n    if (!releaseItem.value && diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('Nulled');\n      return false;\n    }\n\n    if (diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('not old');\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getProgress(res, mode, type) {\n  const config: {\n    mainId?: string;\n    fallbackPrediction?: string;\n    fallback?: string;\n  } = {};\n\n  if (!res.length) return null;\n\n  if (mode === 'default') {\n    if (type === 'anime') {\n      config.mainId = api.settings.get('progressIntervalDefaultAnime');\n    } else {\n      config.mainId = api.settings.get('progressIntervalDefaultManga');\n    }\n    config.fallback = 'en/sub';\n  } else {\n    config.mainId = mode;\n  }\n\n  config.fallbackPrediction = 'jp/dub';\n\n  let top;\n\n  if (config.mainId) {\n    const mainTemp = res.find(el => el.id === config.mainId);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallback && !top) {\n    const mainTemp = res.find(el => el.id === config.fallback);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallbackPrediction && top && !top.predicition && top.lastEp && top.lastEp.timestamp) {\n    const predTemp = res.find(el => el.id === config.fallbackPrediction);\n    const predTime = top.lastEp.timestamp + 7 * 24 * 60 * 60 * 1000;\n    if (predTime && predTemp && predTemp.predicition) {\n      if (top.lastEp.total === predTemp.lastEp.total) {\n        if (Math.abs(predTime - predTemp.predicition.timestamp) < 30 * 60 * 60 * 1000) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      } else if (predTemp.lastEp.total && top.lastEp.total === predTemp.lastEp.total - 1) {\n        if (\n          Math.abs(predTime - (predTemp.predicition.timestamp - 7 * 24 * 60 * 60 * 1000)) <\n          30 * 60 * 60 * 1000\n        ) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      }\n    }\n  }\n\n  // Fallback to jp if no other language found and episode 0 -> Before release\n  if (config.fallbackPrediction && !top) {\n    const predSoon = res.find(el => el.id === config.fallbackPrediction);\n    if (predSoon && predSoon.lastEp && predSoon.predicition && predSoon.lastEp.total === 0) {\n      top = predSoon;\n      top.predicition.probability = 'medium';\n    }\n  }\n\n  if (!top) return null;\n\n  return top;\n}\n\nexport async function getProgressTypeList(\n  type: 'anime' | 'manga',\n): Promise<{ key: string; label: string }[]> {\n  const cacheObj = new Cache(`ProgressTypeList${type}`, 24 * 60 * 60 * 1000, false);\n  if (!(await cacheObj.hasValueAndIsNotEmpty())) {\n    con.log('Getting new ProgressTypeList Cache');\n    const url = `https://api.malsync.moe/general/progress/${type}`;\n    const request = await api.request.xhr('GET', url).then(async response => {\n      if (response.status === 200 && response.responseText) {\n        return JSON.parse(response.responseText);\n      }\n      return [];\n    });\n    await cacheObj.setValue(request);\n    return request;\n  }\n  con.log('PageSearch Cached');\n  return cacheObj.getValue();\n}\n\nexport async function notificationCheck(el, cProgress, nProgress, type) {\n  try {\n    if (\n      (type === 'anime' && !api.settings.get('progressNotificationsAnime')) ||\n      (type === 'manga' && !api.settings.get('progressNotificationsManga'))\n    ) {\n      return;\n    }\n    if (el && nProgress && nProgress) {\n      if (\n        cProgress.lastEp &&\n        typeof cProgress.lastEp.total !== 'undefined' &&\n        nProgress.lastEp &&\n        nProgress.lastEp.total &&\n        cProgress.lang === nProgress.lang &&\n        cProgress.type === nProgress.type\n      ) {\n        if (cProgress.lastEp.total < nProgress.lastEp.total) {\n          // Check if new ep is one higher than the watched one\n          if (el.watchedEp + 1 === nProgress.lastEp.total) {\n            let noti;\n            if (el.single) {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: api.settings.get('notificationsSticky'),\n                image: await el.single.getImage(),\n                url: el.single.getStreamingUrl() ? el.single.getStreamingUrl() : el.single.getUrl(),\n              };\n            } else {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: api.settings.get('notificationsSticky'),\n                image: el.image,\n                url: el.options && el.options.u ? el.options.u : el.url,\n              };\n            }\n            api.request.notification(noti);\n          }\n        }\n      }\n    }\n  } catch (e) {\n    con.error('Could not check notification Progress', e);\n  }\n}\n","/* eslint-disable no-case-declarations */\n/* eslint-disable max-classes-per-file */\n// TODO: Delete @ts-expect-error comments after TS will add support for Intl.DurationFormat\n\nexport type DurationStyle = 'Duration' | 'Progress' | 'M/H/D/Y';\n\nexport interface DurationFormatOptions {\n  style?: 'long' | 'short' | 'narrow' | 'digital' | 'significantLongNarrow' | undefined;\n  years?: 'long' | 'short' | 'narrow' | undefined;\n  yearsDisplay?: 'auto' | 'always' | undefined;\n  months?: 'long' | 'short' | 'narrow' | undefined;\n  monthsDisplay?: 'auto' | 'always' | undefined;\n  weeks?: 'long' | 'short' | 'narrow' | undefined;\n  weeksDisplay?: 'auto' | 'always' | undefined;\n  days?: 'long' | 'short' | 'narrow' | undefined;\n  daysDisplay?: 'auto' | 'always' | undefined;\n  hours?: 'long' | 'short' | 'narrow' | 'numeric' | '2-digit' | undefined;\n  hoursDisplay?: 'auto' | 'always' | undefined;\n  minutes?: 'long' | 'short' | 'narrow' | 'numeric' | '2-digit' | undefined;\n  minutesDisplay?: 'auto' | 'always' | undefined;\n  seconds?: 'long' | 'short' | 'narrow' | 'numeric' | '2-digit' | undefined;\n  secondsDisplay?: 'auto' | 'always' | undefined;\n  milliseconds?: 'long' | 'short' | 'narrow' | 'numeric' | undefined;\n  millisecondsDisplay?: 'auto' | 'always' | undefined;\n  microseconds?: 'long' | 'short' | 'narrow' | 'numeric' | undefined;\n  microsecondsDisplay?: 'auto' | 'always' | undefined;\n  nanoseconds?: 'long' | 'short' | 'narrow' | 'numeric' | undefined;\n  nanosecondsDisplay?: 'auto' | 'always' | undefined;\n  fractionalDigits?: number | undefined;\n}\n\nexport interface DurationFormat {\n  years?: number;\n  months?: number;\n  weeks?: number;\n  days?: number;\n  hours?: number;\n  minutes?: number;\n  seconds?: number;\n  milliseconds?: number;\n  microseconds?: number;\n  nanoseconds?: number;\n}\n\nexport const dateUnitToMs = {\n  years: 365 * 24 * 60 * 60 * 1000,\n  months: 30 * 24 * 60 * 60 * 1000,\n  weeks: 7 * 24 * 60 * 60 * 1000,\n  days: 24 * 60 * 60 * 1000,\n  hours: 60 * 60 * 1000,\n  minutes: 60 * 1000,\n  seconds: 1000,\n  milliseconds: 1,\n} as const;\n\nexport class IntlDuration {\n  protected duration?: DurationFormat;\n\n  protected locale: Intl.LocalesArgument;\n\n  // @ts-expect-error surely it works\n  protected isFallback = !Intl.DurationFormat;\n\n  constructor(locale: Intl.LocalesArgument = api.storage.lang('locale')) {\n    this.locale = locale;\n    return this;\n  }\n\n  setLocale(locale: Intl.LocalesArgument) {\n    this.locale = locale;\n    return this;\n  }\n\n  // For {hours: 2, minutes: 15}\n  setDuration(duration: DurationFormat) {\n    this.duration = duration;\n    return this;\n  }\n\n  // For {minutes: 155}\n  setDurationFormatted(duration: DurationFormat, style: DurationStyle = 'Duration') {\n    const ms = IntlDuration.durationToMs(duration);\n    this.setRelativeTime(ms, 'milliseconds', style);\n    return this;\n  }\n\n  // For 9000 (seconds)\n  setRelativeTime(\n    relativeTime: number,\n    convertFrom: keyof typeof dateUnitToMs,\n    style: DurationStyle = 'Duration',\n  ) {\n    const ms = relativeTime * dateUnitToMs[convertFrom];\n    this.duration = this.process(ms, style);\n    return this;\n  }\n\n  // For 1733320467580 (timestamp)\n  setTimestamp(\n    timestamp: number,\n    style: DurationStyle = 'Duration',\n    relativeTo: Date | number = Date.now(),\n  ) {\n    const ms = timestamp - new Date(relativeTo).getTime();\n    this.setRelativeTime(ms, 'milliseconds', style);\n    return this;\n  }\n\n  protected process(relativeTime: number, style: DurationStyle) {\n    switch (style) {\n      case 'Duration':\n        return relativeToDuration(relativeTime, ['seconds', 'minutes', 'hours', 'days']).duration;\n      case 'Progress':\n        if (!relativeTime) break;\n        const time = relativeToDuration(relativeTime, [\n          'seconds',\n          'minutes',\n          'hours',\n          'days',\n          'years',\n        ]);\n        return shortTime(time.duration);\n      case 'M/H/D/Y':\n        if (!relativeTime) break;\n        return relativeToDuration(relativeTime, ['minutes', 'hours', 'days', 'years']).duration;\n      default:\n        return {};\n    }\n    return {};\n  }\n\n  static durationToMs(input: DurationFormat): number {\n    const keys = Object.keys(input);\n    let timestamp = 0;\n    if (keys.length <= 0) return timestamp;\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const value = input[key];\n      timestamp += dateUnitToMs[key] * value;\n    }\n    return timestamp || 0;\n  }\n\n  getRelativeText(options: DurationFormatOptions = { style: 'narrow' }): string {\n    if (!this.duration) return '';\n    if (this.isFallback) return timeToString(this.duration);\n    const newOptions: DurationFormatOptions = options;\n    if (options.style === 'significantLongNarrow') {\n      const keys = Object.keys(dateUnitToMs);\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (this.duration[key]) {\n          newOptions[key] = 'long';\n          newOptions.style = 'narrow';\n          break;\n        }\n      }\n    }\n    // @ts-expect-error surely it works\n    return new Intl.DurationFormat(this.locale, newOptions).format(this.duration);\n  }\n\n  getDuration() {\n    return this.duration;\n  }\n\n  getLocale() {\n    return this.locale;\n  }\n}\n\nexport class IntlRange {\n  protected from: IntlDateTime;\n\n  protected to: IntlDateTime;\n\n  protected locale: Intl.LocalesArgument;\n\n  constructor(\n    from: Date | number | string,\n    to: Date | number | string,\n    locale: Intl.LocalesArgument = api.storage.lang('locale'),\n  ) {\n    this.from = new IntlDateTime(from);\n    this.to = new IntlDateTime(to);\n    this.locale = locale;\n    return this;\n  }\n\n  getDateTimeRangeText(style: Intl.DateTimeFormatOptions = { dateStyle: 'medium' }) {\n    const validFrom = this.from.isValidDate();\n    const validTo = this.to.isValidDate();\n    if (!validFrom || !validTo) {\n      const from = validFrom ? this.from.getDateTimeText(style) : '?';\n      const to = validTo ? this.to.getDateTimeText(style) : '?';\n      return `${from} - ${to}`;\n    }\n    return new Intl.DateTimeFormat(this.locale, style).formatRange(\n      this.from.getDate(),\n      this.to.getDate(),\n    );\n  }\n}\n\nexport class IntlDateTime {\n  protected date: Date;\n\n  protected locale: Intl.LocalesArgument;\n\n  constructor(\n    date: Date | number | string,\n    locale: Intl.LocalesArgument = api.storage.lang('locale'),\n  ) {\n    this.locale = locale;\n    if (typeof date === 'string') {\n      const number = Number(date);\n      if (!Number.isNaN(number)) {\n        this.date = new Date(number);\n        return this;\n      }\n    }\n    this.date = new Date(date);\n    return this;\n  }\n\n  // Setters\n  setDate(date: Date | number | string) {\n    this.date = new Date(date);\n    return this;\n  }\n\n  setLocale(locale: Intl.LocalesArgument) {\n    this.locale = locale;\n    return this;\n  }\n\n  // Utility\n  isValidDate() {\n    return isValidDate(this.date);\n  }\n\n  isNow() {\n    return checkForNow(this.date.getTime());\n  }\n\n  isFuture() {\n    return this.date.getTime() > Date.now();\n  }\n\n  // Getters\n  getDate() {\n    return this.date;\n  }\n\n  getLocale() {\n    return this.locale;\n  }\n\n  getDateTimeText(options: Intl.DateTimeFormatOptions = { dateStyle: 'medium' }) {\n    if (!isValidDate(this.date)) return '';\n    return new Intl.DateTimeFormat(this.locale, options).format(this.date);\n  }\n\n  getRelativeNowText(style: DurationStyle = 'Duration', options?: DurationFormatOptions) {\n    if (!this.isValidDate()) return '';\n    const relative = new IntlDuration(this.locale);\n    relative.setTimestamp(this.date.getTime(), style);\n    return relative.getRelativeText(options);\n  }\n\n  getRelativeNowFriendlyText(style: DurationStyle = 'Duration', options?: DurationFormatOptions) {\n    if (!this.isValidDate()) return '';\n    if (this.isNow()) return api.storage.lang('bookmarksItem_now');\n    const timeString = this.getRelativeNowText(style, options);\n    return this.isFuture() ? timeString : api.storage.lang('bookmarksItem_ago', [timeString]);\n  }\n}\n\n// Utility for exporting\nexport function shortTime(time: DurationFormat): DurationFormat {\n  let totalDays = time.days || 0;\n  if (time.years) {\n    if (time.years > 1) {\n      if (time.days && time.days > 182) {\n        return {\n          years: time.years + 1,\n        };\n      }\n      return {\n        years: time.years,\n      };\n    }\n    return {\n      years: time.years,\n      days: time.days,\n    };\n  }\n  if (time.months || time.weeks) {\n    totalDays += time.months ? time.months * 30 : 0;\n    totalDays += time.weeks ? time.weeks * 7 : 0;\n  }\n  if (totalDays) {\n    if (totalDays > 3) {\n      if (time.hours && time.hours > 11) {\n        return {\n          days: totalDays + 1,\n        };\n      }\n      return {\n        days: totalDays,\n      };\n    }\n    return {\n      days: totalDays,\n      hours: time.hours,\n    };\n  }\n  if (time.hours) {\n    if (time.hours > 5) {\n      if (time.minutes && time.minutes > 29) {\n        return {\n          hours: time.hours + 1,\n        };\n      }\n      return {\n        hours: time.hours,\n      };\n    }\n    return {\n      hours: time.hours,\n      minutes: time.minutes,\n    };\n  }\n  if (time.minutes && time.minutes > 14) {\n    return {\n      minutes: time.minutes,\n    };\n  }\n  return {\n    minutes: time.minutes || 0,\n    seconds: time.seconds || 0,\n  };\n}\n\nexport function relativeToDuration(\n  input: number,\n  units: (keyof typeof dateUnitToMs)[] = ['minutes', 'hours', 'days', 'years'],\n  relativeTo: Date | number = 0,\n): { duration: DurationFormat; isFuture: boolean } {\n  const duration: DurationFormat = {};\n  const relative = new Date(relativeTo).getTime();\n  let time = Math.abs(relative - input);\n  const isFuture = input > relative;\n\n  for (const key in dateUnitToMs) {\n    if (!units.includes(key as keyof typeof dateUnitToMs)) continue;\n    const value = Math.floor(time / dateUnitToMs[key]);\n    duration[key] = value;\n  }\n  const mapKeys = Object.keys(duration);\n  for (let i = 1; i < mapKeys.length; i++) {\n    const keyPrev = mapKeys[i - 1];\n    const valuePrev = duration[keyPrev];\n    const keyCurr = mapKeys[i];\n\n    time -= dateUnitToMs[keyPrev] * valuePrev;\n    const valueCurr = Math.floor(time / dateUnitToMs[keyCurr]);\n    duration[keyCurr] = valueCurr;\n  }\n  return { duration, isFuture };\n}\n\nexport function timeToString(time: DurationFormat): string {\n  let output = '';\n\n  if (time.years) {\n    if (time.years === 1) output += ` ${time.years} ${api.storage.lang('bookmarksItem_Year')}`;\n    else output += ` ${time.years} ${api.storage.lang('bookmarksItem_Years')}`;\n  }\n  if (time.days) {\n    if (time.days === 1) output += ` ${time.days} ${api.storage.lang('bookmarksItem_Day')}`;\n    else output += ` ${time.days} ${api.storage.lang('bookmarksItem_Days')}`;\n  }\n  if (time.hours) {\n    if (time.hours === 1) output += ` ${time.hours} ${api.storage.lang('bookmarksItem_Hour')}`;\n    else output += ` ${time.hours} ${api.storage.lang('bookmarksItem_Hours')}`;\n  }\n  if (time.minutes) {\n    if (time.minutes === 1) output += ` ${time.minutes} ${api.storage.lang('bookmarksItem_min')}`;\n    else output += ` ${time.minutes} ${api.storage.lang('bookmarksItem_mins')}`;\n  }\n  if (time.seconds) {\n    if (time.seconds === 1) output += ` ${time.seconds} ${api.storage.lang('bookmarksItem_sec')}`;\n    else output += ` ${time.seconds} ${api.storage.lang('bookmarksItem_secs')}`;\n  }\n\n  return output.trim();\n}\n\nexport function isValidDate(date: Date | string | number | null | undefined): boolean {\n  if (!date) return false;\n  if (typeof date === 'number') return true;\n  const str = typeof date === 'string' ? new Date(date) : date;\n  return str instanceof Date && !Number.isNaN(str.getTime());\n}\n\nexport function checkForNow(\n  input: number,\n  relativeTo: Date | number = Date.now(),\n  threshold: DurationFormat = { seconds: 30 },\n): boolean {\n  if (Number.isNaN(input)) return false;\n  const relativeToTs = new Date(relativeTo).getTime();\n  const thresholdTs = IntlDuration.durationToMs(threshold);\n  const diff = Math.abs(input - relativeToTs);\n\n  if (diff > thresholdTs) return false;\n  return true;\n}\n","import { EventEmitter2 } from 'eventemitter2';\n\nconst scriptId = Math.floor(Math.random() * 1000000000);\n\nexport const emitter = new EventEmitter2({\n  wildcard: true,\n});\n\nexport function globalEmit(eventName: string, ...params) {\n  con\n    .m('Global')\n    .m('Emit')\n    .debug(eventName, ...params);\n\n  emitter.emit(`${eventName}`, ...params);\n\n  if (typeof api !== 'undefined' && api && api.type === 'webextension') {\n    chrome.runtime.sendMessage({\n      name: 'emitter',\n      item: { event: eventName, params, id: scriptId },\n    });\n  }\n}\n\nif (typeof api !== 'undefined' && api && api.type === 'webextension') {\n  chrome.runtime.sendMessage({\n    name: 'registerEmitter',\n  });\n\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.name && message.name === 'emitter') {\n      con.m('Global').m('Event').debug(message.item.id, message.item.event, message.item.params);\n\n      if (message.item.id !== scriptId) {\n        emitter.emit(message.item.event, ...message.item.params);\n      }\n    }\n  });\n}\n","export const clientId = '10093a3f9f0174b6b5577c40e9accdae';\n\nexport function oauth() {\n  $(document).ready(async function () {\n    if (window.location.href.includes('code=')) {\n      try {\n        await getRefreshToken();\n      } catch (e) {\n        console.error(e);\n        $('.card-text').first().text(`Error: ${e}`);\n        $('body').removeClass();\n        $('body').addClass('noExtension');\n      }\n      return;\n    }\n    generateUrl();\n  });\n}\n\nfunction generateUrl() {\n  const challenge = generateRandomString(50);\n  const state = generateRandomString(10);\n  sessionStorage.setItem(state, challenge);\n  const url = `https://myanimelist.net/v1/oauth2/authorize?response_type=code&client_id=${clientId}&state=${state}&code_challenge=${challenge}&code_challenge_method=plain`;\n  $('.card-text.succ').prepend(\n    j.html(`<a class=\"btn btn-outline-light\" href=\"${url}\">Start Authentication</a>`),\n  );\n  $('body').removeClass();\n  $('body').addClass('success');\n}\n\nfunction generateRandomString(length: number): string {\n  let text = '';\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\n  for (let i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n}\n\nasync function getRefreshToken() {\n  const code = utils.urlParam(window.location.href, 'code');\n  const state = utils.urlParam(window.location.href, 'state');\n  window.history.replaceState('', '', '/mal/oauth');\n  if (!state || !code) throw 'Url wrong';\n  const challenge = sessionStorage.getItem(state);\n  if (!challenge) throw 'No challenge found';\n  return api.request\n    .xhr('POST', {\n      url: 'https://myanimelist.net/v1/oauth2/token',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      data: `&client_id=${clientId}&grant_type=authorization_code&code=${code}&code_verifier=${challenge}`,\n    })\n    .then(res => JSON.parse(res.responseText))\n    .then(json => {\n      if (json && json.refresh_token && json.access_token) {\n        api.settings.set('malToken', json.access_token);\n        api.settings.set('malRefresh', json.refresh_token);\n        $('.card-text.succ').prepend(j.html(api.storage.lang('anilistClass_authentication')));\n        $('body').removeClass();\n        $('body').addClass('success');\n        return;\n      }\n      if (json && json.error) throw json.error;\n      throw 'Something went wrong';\n    });\n}\n","import {\n  releaseItemInterface,\n  progressIsOld,\n  single as updateProgress,\n} from '../background/releaseProgressUtils';\nimport { IntlDateTime } from './IntlWrapper';\n\nexport class Progress {\n  protected logger;\n\n  protected releaseItem: undefined | releaseItemInterface = undefined;\n\n  constructor(\n    protected cacheKey: string,\n    protected type: 'anime' | 'manga',\n  ) {\n    this.logger = con.m('progress').m(cacheKey.toString());\n    return this;\n  }\n\n  // Progress\n  protected async initReleaseProgress(liveData) {\n    if (liveData) await updateProgress(liveData, this.type, liveData.progressMode);\n\n    const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n      `release/${this.type}/${this.cacheKey}`,\n    );\n\n    this.logger.m('Init Release').log(releaseItem);\n    if (!releaseItem) return;\n    if (progressIsOld(releaseItem)) {\n      this.logger.log('Too old');\n      return;\n    }\n\n    this.releaseItem = releaseItem;\n  }\n\n  protected getProgressCurrentEpisode() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.total) return re.value.lastEp.total;\n    return null;\n  }\n\n  protected isProgressFinished() {\n    const re = this.releaseItem;\n    if (re && re.finished) return true;\n    return false;\n  }\n\n  protected getProgressPrediction() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.predicition && re.value.predicition.timestamp)\n      return re.value.predicition.timestamp;\n    return null;\n  }\n\n  protected getProgressLastTimestamp() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.timestamp)\n      return re.value.lastEp.timestamp;\n    return null;\n  }\n\n  // General\n  async init(\n    live:\n      | {\n          uid: number;\n          apiCacheKey: number | string | null;\n          title: string;\n          cacheKey: string;\n          progressMode: string;\n          watchedEp: number;\n          single: any;\n          xhr?: object;\n        }\n      | false = false,\n  ) {\n    await Promise.all([this.initReleaseProgress(live)]);\n\n    return this;\n  }\n\n  getCurrentEpisode(): number {\n    // @ts-ignore\n    if (!api.settings.get('epPredictions')) return null;\n    return this.getProgressCurrentEpisode();\n  }\n\n  isFinished(): boolean {\n    return this.isProgressFinished();\n  }\n\n  isAiring(): boolean {\n    return !this.isFinished();\n  }\n\n  getPredictionTimestamp(): number {\n    if (!this.getProgressPrediction() || new Date().getTime() > this.getProgressPrediction())\n      return NaN;\n    return this.getProgressPrediction();\n  }\n\n  getPrediction(): string {\n    const timestamp = Number(this.getPredictionTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const progress = new IntlDateTime(timestamp).getRelativeNowFriendlyText('Progress', {\n      style: 'significantLongNarrow',\n    });\n    return progress;\n  }\n\n  getPredictionText(): string {\n    const timestamp = Number(this.getPredictionTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const dt = new IntlDateTime(Number(timestamp));\n    const time = dt.getRelativeNowText('Progress', { style: 'long' });\n    if (!dt.isValidDate()) return '';\n    if (dt.isNow()) return api.storage.lang('bookmarksItem_now');\n    return api.storage.lang(`prediction_Episode_${this.type}`, [time]);\n  }\n\n  getLastTimestamp(): number {\n    if (!this.getProgressLastTimestamp()) return NaN;\n    return this.getProgressLastTimestamp();\n  }\n\n  getLast(): string {\n    const timestamp = Number(this.getLastTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const last = new IntlDateTime(timestamp).getRelativeNowFriendlyText('Progress', {\n      style: 'significantLongNarrow',\n    });\n    return last;\n  }\n\n  getLastText(): string {\n    const timestamp = Number(this.getLastTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const dt = new IntlDateTime(Number(timestamp));\n    const time = dt.getRelativeNowText('Progress', { style: 'long' });\n    if (!dt.isValidDate()) return '';\n    if (dt.isNow()) return api.storage.lang('bookmarksItem_now');\n    return api.storage.lang(`prediction_Last_${this.type}`, [time]);\n  }\n\n  getAuto(): string {\n    const preT = this.getPrediction();\n    if (preT) return preT;\n    const lastT = this.getLast();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getAutoText(): string {\n    const preT = this.getPredictionText();\n    if (preT) return preT;\n    const lastT = this.getLastText();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getColor(): string {\n    return '#f57c00';\n  }\n\n  getBars(curEp, totalEp): { totalWidth: number; epWidth: number; predWidth: number } {\n    const predEp = this.getCurrentEpisode();\n    const res = {\n      totalWidth: 100,\n      epWidth: 0,\n      predWidth: 0,\n    };\n    if (!totalEp) {\n      res.totalWidth = 0;\n      if (curEp && (!predEp || curEp >= predEp)) {\n        totalEp = Math.ceil(curEp * 1.2);\n      } else if (predEp && (!curEp || curEp < predEp)) {\n        totalEp = Math.ceil(predEp * 1.2);\n      } else {\n        return res;\n      }\n    }\n    if (curEp) {\n      res.epWidth = (curEp / totalEp) * 100;\n      if (res.epWidth > 100) res.epWidth = 100;\n    }\n    if (predEp) {\n      res.predWidth = (predEp / totalEp) * 100;\n      if (res.predWidth > 100) res.predWidth = 100;\n    }\n    return res;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"inner-card\" }\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'card',\n  props: {\n  border: {\n    type: String,\n    default: '',\n  },\n},\n  setup(__props) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"card\", { [`border-${__props.border}`]: __props.border }])\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ])\n  ], 2 /* CLASS */))\n}\n}\n\n})","import script from \"./card.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./card.vue?vue&type=script&lang=ts&setup=true\"\n\nimport _style_0 from \"./card.vue?vue&type=style&index=0&id=07c8406b&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['styles',[_style_0]],['__scopeId',\"data-v-07c8406b\"],['__file',\"card.vue\"]])\n\nexport default __exports__","export default \"/* stylelint-disable prettier/prettier */\\n/* Aspect ratios */\\n/* Transitions */\\n/* Typography */\\n/* Shadows */\\n/* Fonts */\\n@keyframes skeleton-loading-malsync-07c8406b {\\nto {\\n    transform: translateX(100%);\\n}\\n}\\n.card[data-v-07c8406b] {\\n  border-radius: 10px;\\n  border: 2px solid var(--cl-backdrop);\\n  padding: var(--size-spacer-half);\\n  background-color: var(--cl-backdrop);\\n}\\n.card .inner-card[data-v-07c8406b] {\\n  --cl-foreground: var(--cl-background-solid);\\n  --cl-backdrop: var(--cl-background-solid);\\n}\\n.card.border-secondary[data-v-07c8406b] {\\n  border-color: var(--cl-secondary);\\n}\\n\"","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 1,\n  class: \"loading-placeholder\"\n}\n\nimport { computed, PropType } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'header',\n  props: {\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n  spacer: {\n    type: [Boolean, String] as PropType<boolean | 'half'>,\n    default: false,\n  },\n  weight: {\n    type: String as PropType<'bold' | 'normal'>,\n    default: 'bold',\n  },\n},\n  setup(__props) {\n\nconst props = __props;\n\nconst spacerClass = computed(() => {\n  if (props.spacer === 'half') return 'spacer-half';\n  if (props.spacer) return 'spacer';\n  return '';\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"h4\", {\n    class: _normalizeClass([\"header\", { loading: __props.loading, [spacerClass.value]: spacerClass.value, [__props.weight]: __props.weight }])\n  }, [\n    (!__props.loading)\n      ? _renderSlot(_ctx.$slots, \"default\", { key: 0 })\n      : (_openBlock(), _createElementBlock(\"span\", _hoisted_1))\n  ], 2 /* CLASS */))\n}\n}\n\n})","<template>\n  <h4 class=\"header\" :class=\"{ loading, [spacerClass]: spacerClass, [weight]: weight }\">\n    <template v-if=\"!loading\"><slot /></template>\n    <span v-else class=\"loading-placeholder\"></span>\n  </h4>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, PropType } from 'vue';\n\nconst props = defineProps({\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n  spacer: {\n    type: [Boolean, String] as PropType<boolean | 'half'>,\n    default: false,\n  },\n  weight: {\n    type: String as PropType<'bold' | 'normal'>,\n    default: 'bold',\n  },\n});\n\nconst spacerClass = computed(() => {\n  if (props.spacer === 'half') return 'spacer-half';\n  if (props.spacer) return 'spacer';\n  return '';\n});\n</script>\n\n<style lang=\"less\" scoped>\n@import './../less/_globals.less';\n\n.header {\n  .header-normal();\n\n  margin-bottom: 0;\n\n  &.spacer {\n    margin-bottom: @spacer;\n  }\n  &.spacer-half {\n    margin-bottom: @spacer-half;\n  }\n\n  &.bold {\n    .header-bold();\n  }\n}\n\n.loading-placeholder {\n  .skeleton-text();\n}\n</style>\n","import script from \"./header.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./header.vue?vue&type=script&lang=ts&setup=true\"\n\nimport _style_0 from \"./header.vue?vue&type=style&index=0&id=685d1d1c&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['styles',[_style_0]],['__scopeId',\"data-v-685d1d1c\"],['__file',\"header.vue\"]])\n\nexport default __exports__","export default \"/* stylelint-disable prettier/prettier */\\n/* Aspect ratios */\\n/* Transitions */\\n/* Typography */\\n/* Shadows */\\n/* Fonts */\\n@keyframes skeleton-loading-malsync-685d1d1c {\\nto {\\n    transform: translateX(100%);\\n}\\n}\\n.header[data-v-685d1d1c] {\\n  margin-top: 0;\\n  font-weight: 500;\\n  font-size: calc(var(--base-font-size) * 1.5);\\n  line-height: 1.25;\\n  margin-bottom: 0;\\n}\\n.header.spacer[data-v-685d1d1c] {\\n  margin-bottom: var(--size-spacer);\\n}\\n.header.spacer-half[data-v-685d1d1c] {\\n  margin-bottom: var(--size-spacer-half);\\n}\\n.header.bold[data-v-685d1d1c] {\\n  margin-top: 0;\\n  font-weight: bold;\\n  font-size: calc(var(--base-font-size) * 1.563);\\n  line-height: 1.2;\\n}\\n.loading-placeholder[data-v-685d1d1c] {\\n  position: relative;\\n  overflow: hidden;\\n  transition: background-color 0.1s ease-in-out;\\n  background-color: var(--cl-backdrop);\\n  width: 20em;\\n  height: 1em;\\n  margin-bottom: 0.2em;\\n  border-radius: 0.25rem;\\n  max-width: 100%;\\n}\\n.loading-placeholder[data-v-685d1d1c]::after {\\n  opacity: var(--cl-loading);\\n  transition: opacity 0.25s ease-in-out;\\n  animation: skeleton-loading-malsync-685d1d1c 1.5s infinite;\\n  content: '';\\n  height: 100%;\\n  left: 0;\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n  transform: translateX(-100%);\\n  z-index: 1;\\n  background: linear-gradient(90deg, hsla(0, 0%, 100%, 0), var(--cl-backdrop), hsla(0, 0%, 100%, 0));\\n  filter: brightness(1.15);\\n}\\n\"","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { PropType } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'section',\n  props: {\n  spacer: {\n    type: String as PropType<'half' | 'full' | 'double' | 'none'>,\n    default: 'full',\n  },\n  direction: {\n    type: String as PropType<'down' | 'both'>,\n    default: 'down',\n  },\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n},\n  setup(__props) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"section\", `${__props.direction} ${__props.spacer} ${__props.loading ? 'loading' : ''}`])\n  }, [\n    (!__props.loading)\n      ? _renderSlot(_ctx.$slots, \"default\", { key: 0 })\n      : _createCommentVNode(\"v-if\", true)\n  ], 2 /* CLASS */))\n}\n}\n\n})","import script from \"./section.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./section.vue?vue&type=script&lang=ts&setup=true\"\n\nimport _style_0 from \"./section.vue?vue&type=style&index=0&id=0ddb4728&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['styles',[_style_0]],['__scopeId',\"data-v-0ddb4728\"],['__file',\"section.vue\"]])\n\nexport default __exports__","export default \"/* stylelint-disable prettier/prettier */\\n/* Aspect ratios */\\n/* Transitions */\\n/* Typography */\\n/* Shadows */\\n/* Fonts */\\n@keyframes skeleton-loading-malsync-0ddb4728 {\\nto {\\n    transform: translateX(100%);\\n}\\n}\\n.section[data-v-0ddb4728] {\\n  margin-bottom: var(--size-spacer);\\n}\\n.section.both[data-v-0ddb4728] {\\n  margin-top: var(--size-spacer);\\n}\\n.section.half[data-v-0ddb4728] {\\n  margin-bottom: var(--size-spacer-half);\\n}\\n.section.half.both[data-v-0ddb4728] {\\n  margin-top: var(--size-spacer-half);\\n}\\n.section.double[data-v-0ddb4728] {\\n  margin-bottom: calc(var(--size-spacer) * 2);\\n}\\n.section.double.both[data-v-0ddb4728] {\\n  margin-top: calc(var(--size-spacer) * 2);\\n}\\n.section.none[data-v-0ddb4728] {\\n  margin-bottom: 0;\\n}\\n.section.loading[data-v-0ddb4728] {\\n  position: relative;\\n  overflow: hidden;\\n  transition: background-color 0.1s ease-in-out;\\n  background-color: var(--cl-backdrop);\\n  width: 100%;\\n  border-radius: 0.25rem;\\n  min-height: 200px;\\n}\\n.section.loading[data-v-0ddb4728]::after {\\n  opacity: var(--cl-loading);\\n  transition: opacity 0.25s ease-in-out;\\n  animation: skeleton-loading-malsync-0ddb4728 1.5s infinite;\\n  content: '';\\n  height: 100%;\\n  left: 0;\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n  transform: translateX(-100%);\\n  z-index: 1;\\n  background: linear-gradient(90deg, hsla(0, 0%, 100%, 0), var(--cl-backdrop), hsla(0, 0%, 100%, 0));\\n  filter: brightness(1.15);\\n}\\n.section.loading.none[data-v-0ddb4728] {\\n  margin-bottom: var(--size-spacer);\\n}\\n\"","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 71 55\" fill=\"none\">\n    <g clip-path=\"url(#clip0)\">\n      <path\n        class=\"icon\"\n        d=\"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z\"\n        fill=\"#23272A\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"71\" height=\"55\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n\n<script lang=\"ts\" setup></script>\n\n<style lang=\"less\" scoped>\n.icon {\n  fill: var(--cl-text);\n}\n</style>\n","import { render } from \"./settings-discord-icon.vue?vue&type=template&id=4defc5d6&scoped=true\"\nconst script = {}\n\nimport _style_0 from \"./settings-discord-icon.vue?vue&type=style&index=0&id=4defc5d6&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['styles',[_style_0]],['__scopeId',\"data-v-4defc5d6\"],['__file',\"settings-discord-icon.vue\"]])\n\nexport default __exports__","export default \".icon[data-v-4defc5d6] {\\n  fill: var(--cl-text);\\n}\\n\"","import { useCssVars as _useCssVars, unref as _unref, defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderSlot as _renderSlot, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"before discord\"\n}\nconst _hoisted_2 = {\n  key: 1,\n  class: \"material-icons before\"\n}\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = {\n  key: 3,\n  class: \"material-icons after\"\n}\nconst _hoisted_5 = [\"src\"]\n\nimport { PropType } from 'vue';\nimport SettingsDiscordIcon from './settings/settings-discord-icon.vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'text-icon',\n  props: {\n  icon: {\n    type: String,\n    default: '',\n  },\n  src: {\n    type: String,\n    default: '',\n  },\n  position: {\n    type: String as PropType<'before' | 'after'>,\n    default: 'before',\n  },\n  color: {\n    type: String,\n    default: 'inherit',\n  },\n  mode: {\n    type: String as PropType<'normal' | 'flex' | 'space-between'>,\n    default: 'normal',\n  },\n  background: {\n    type: String as PropType<'round' | ''>,\n    default: '',\n  },\n  spacer: {\n    type: String as PropType<'small' | 'medium' | 'big'>,\n    default: 'medium',\n  },\n},\n  setup(__props) {\n\n_useCssVars(_ctx => ({\n  \"a37b54d4\": (__props.color)\n}))\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    class: _normalizeClass([\"text-icon\", [__props.mode, __props.background, __props.spacer].join(' ')])\n  }, [\n    (__props.icon && __props.position === 'before' && __props.icon === 'discord')\n      ? (_openBlock(), _createElementBlock(\"span\", _hoisted_1, [\n          _createVNode(SettingsDiscordIcon)\n        ]))\n      : (__props.icon && __props.position === 'before')\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(__props.icon), 1 /* TEXT */))\n        : _createCommentVNode(\"v-if\", true),\n    (__props.src && __props.position === 'before')\n      ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 2,\n          class: \"img-icons before\",\n          src: __props.src\n        }, null, 8 /* PROPS */, _hoisted_3))\n      : _createCommentVNode(\"v-if\", true),\n    _renderSlot(_ctx.$slots, \"default\"),\n    (__props.icon && __props.position === 'after')\n      ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(__props.icon), 1 /* TEXT */))\n      : _createCommentVNode(\"v-if\", true),\n    (__props.src && __props.position === 'after')\n      ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 4,\n          class: \"img-icons after\",\n          src: __props.src\n        }, null, 8 /* PROPS */, _hoisted_5))\n      : _createCommentVNode(\"v-if\", true)\n  ], 2 /* CLASS */))\n}\n}\n\n})","import script from \"./text-icon.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./text-icon.vue?vue&type=script&lang=ts&setup=true\"\n\nimport _style_0 from \"./text-icon.vue?vue&type=style&index=0&id=06e4f3c8&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['styles',[_style_0]],['__scopeId',\"data-v-06e4f3c8\"],['__file',\"text-icon.vue\"]])\n\nexport default __exports__","export default \"/* stylelint-disable prettier/prettier */\\n/* Aspect ratios */\\n/* Transitions */\\n/* Typography */\\n/* Shadows */\\n/* Fonts */\\n@keyframes skeleton-loading-malsync-06e4f3c8 {\\nto {\\n    transform: translateX(100%);\\n}\\n}\\n.text-icon[data-v-06e4f3c8] {\\n  line-height: 1;\\n}\\n.text-icon .before[data-v-06e4f3c8] {\\n  margin-inline-end: 8px;\\n}\\n.text-icon .after[data-v-06e4f3c8] {\\n  margin-inline-start: 8px;\\n}\\n.text-icon.small .before[data-v-06e4f3c8] {\\n  margin-inline-end: 5px;\\n}\\n.text-icon.small .after[data-v-06e4f3c8] {\\n  margin-inline-start: 5px;\\n}\\n.text-icon.big .before[data-v-06e4f3c8] {\\n  margin-inline-end: 16px;\\n}\\n.text-icon.big .after[data-v-06e4f3c8] {\\n  margin-inline-start: 16px;\\n}\\n.text-icon .material-icons[data-v-06e4f3c8] {\\n  font-size: 18px;\\n  vertical-align: sub;\\n  color: var(--a37b54d4);\\n}\\n.text-icon .img-icons[data-v-06e4f3c8] {\\n  display: inline-block;\\n  vertical-align: sub;\\n  height: 18px;\\n  width: 18px;\\n}\\n.text-icon .discord[data-v-06e4f3c8] {\\n  display: flex;\\n  align-items: center;\\n}\\n.text-icon.flex[data-v-06e4f3c8] {\\n  display: flex;\\n  align-items: center;\\n}\\n.text-icon.flex .material-icons[data-v-06e4f3c8] {\\n  font-size: inherit;\\n}\\n.text-icon.space-between[data-v-06e4f3c8] {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n.text-icon.round .material-icons[data-v-06e4f3c8] {\\n  background-color: var(--cl-text);\\n  color: var(--cl-foreground-solid);\\n  border-radius: 50%;\\n  height: 30px;\\n  width: 30px;\\n  font-size: 20px;\\n  text-align: center;\\n  line-height: 30px;\\n}\\n\""],"names":["createRequest","parameter","fn","options","id","result","loading","temporaryCache","cache","data","error","execute","Promise","resolve","async","params","forceFresh","keepData","tempId","Math","random","state","prefix","keyFn","JSON","stringify","value","ttl","refetchTtl","clearValue","fullState","hasValue","refetch","executeCondition","then","res","setValue","catch","err","con","deep","logger","m","translateList","aniStatus","malStatus","list","CURRENT","Watching","PLANNING","PlanToWatch","COMPLETED","Completed","DROPPED","Dropped","PAUSED","Onhold","REPEATING","Object","keys","find","key","statusTranslate","parseFuzzyDate","date","year","month","day","String","padStart","getFuzzyDate","fuzzyDate","regexMatch","match","parseInt","malToAnilist","malId","type","variables","toUpperCase","api","request","xhr","url","headers","Accept","query","response","status","NaN","responseText","log","Media","getCacheKey","kitsuId","Number","isNaN","apiCall","requiresAuthentication","settings","get","Authorization","errors","length","message","set","Error","includes","storage","lang","imgCheck","endsWith","Rewatching","NotAutenticatedError","constructor","super","this","name","UrlNotSupportedError","ServerOfflineError","NotFoundError","UnexpectedResponseError","parseJson","json","parse","e","errorMessage","authenticationUrl","current","planned","completed","dropped","on_hold","timestampToDate","timestamp","substring","dateToTimestamp","getTitle","titles","canonicalTitle","title","titleLanguagePreference","en","en_jp","ja_jp","malToKitsu","malid","kitsuToMal","attributes","externalId","mode","authentication","undefined","detail","apiDomain","path","fields","join","dataObj","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","checkIfBanned","l","rToken","refresh_token","access_token","refreshToken","text","Boolean","animeStatus","mangaStatus","getRoundedDate","test","clientId","authUrl","domain","token","auth","client_id","client_secret","redirect_uri","code","grant_type","authRequest","userRequest","locale","userId","cacheObj","getValue","rus","eng","headline","getAuthUrl","simklStatus","watching","plantowatch","notinteresting","hold","simklId","getEpisode","episode","temp","episodePart","replace","cacheList","syncList","lazy","lastCheck","activity","call","anime","removed_from_list","checkRemoveList","newCacheList","i","el","show","ids","simkl","dateFrom","all","rated_at","rated","getSingle","mal","listVal","values","sData","asParameter","method","login","URLSearchParams","entries","errorHandling","score","getSyncMode","indexOf","predictionXhrGET","apiCacheKey","single","uid","toString","cacheKey","releaseItem","force","Date","now","finished","utils","wait","progressValue","config","top","mainId","fallback","fallbackPrediction","mainTemp","predicition","lastEp","predTemp","predTime","total","abs","probability","predSoon","getProgress","cProgress","nProgress","watchedEp","noti","sticky","image","getImage","getStreamingUrl","getUrl","u","notification","notificationCheck","progressIsOld","diff","getTime","getProgressTypeList","hasValueAndIsNotEmpty","dateUnitToMs","years","months","weeks","days","hours","minutes","seconds","milliseconds","IntlDuration","isFallback","Intl","DurationFormat","setLocale","setDuration","duration","setDurationFormatted","style","ms","durationToMs","setRelativeTime","relativeTime","convertFrom","process","setTimestamp","relativeTo","relativeToDuration","time","totalDays","shortTime","input","getRelativeText","output","trim","timeToString","newOptions","format","getDuration","getLocale","IntlRange","from","to","IntlDateTime","getDateTimeRangeText","dateStyle","validFrom","isValidDate","validTo","DateTimeFormat","formatRange","getDate","getDateTimeText","number","setDate","isNow","threshold","relativeToTs","thresholdTs","checkForNow","isFuture","getRelativeNowText","relative","getRelativeNowFriendlyText","timeString","units","floor","mapKeys","keyPrev","valuePrev","keyCurr","valueCurr","str","scriptId","emitter","EventEmitter2","wildcard","globalEmit","eventName","debug","emit","chrome","runtime","sendMessage","item","event","onMessage","addListener","sender","sendResponse","Progress","initReleaseProgress","liveData","progressMode","getProgressCurrentEpisode","re","isProgressFinished","getProgressPrediction","getProgressLastTimestamp","init","live","getCurrentEpisode","isFinished","isAiring","getPredictionTimestamp","getPrediction","getPredictionText","dt","getLastTimestamp","getLast","getLastText","getAuto","preT","getAutoText","getColor","getBars","curEp","totalEp","predEp","totalWidth","epWidth","predWidth","ceil","_hoisted_1","class","__name","props","border","default","setup","__props","_ctx","_cache","$slots","spacer","weight","spacerClass","direction","xmlns","width","height","viewBox","fill","script","d","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","icon","src","position","color","background"],"sourceRoot":""}