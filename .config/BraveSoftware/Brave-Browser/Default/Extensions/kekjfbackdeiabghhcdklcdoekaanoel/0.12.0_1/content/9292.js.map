{"version":3,"file":"content/9292.js","mappings":"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","sources":["webpack://MALSync/./src/_provider/Local/helper.ts","webpack://MALSync/./src/_provider/Local/list.ts","webpack://MALSync/./src/_provider/listAbstract.ts","webpack://MALSync/./src/_minimal/components/form/form-switch.vue?f13b","webpack://MALSync/./src/_minimal/components/form/form-switch.vue","webpack://MALSync/./src/_minimal/components/form/form-switch.vue?e0d4","webpack://MALSync/./src/_minimal/components/form/form-switch.vue?5bef","webpack://MALSync/./src/_minimal/components/spinner.vue","webpack://MALSync/./src/_minimal/components/spinner.vue?159e","webpack://MALSync/./src/_minimal/components/spinner.vue?7ee5","webpack://MALSync/./src/_minimal/components/error/error-search.vue?b156","webpack://MALSync/./src/_minimal/components/error/error-search.vue","webpack://MALSync/./src/_provider/MyAnimeList_api/search.ts","webpack://MALSync/./src/_provider/MyAnimeList_hybrid/search.ts","webpack://MALSync/./src/_provider/Simkl/search.ts","webpack://MALSync/./src/_provider/searchFactory.ts","webpack://MALSync/./src/_provider/Kitsu/search.ts","webpack://MALSync/./src/_provider/AniList/search.ts","webpack://MALSync/./src/_provider/Shikimori/search.ts","webpack://MALSync/./src/utils/Search.ts","webpack://MALSync/./src/_provider/Local/search.ts","webpack://MALSync/./src/_minimal/views/search.vue?2526","webpack://MALSync/./src/_minimal/views/search.vue","webpack://MALSync/./src/_minimal/views/search.vue?9ea7","webpack://MALSync/./src/_minimal/views/search.vue?50e0"],"sourcesContent":["export function getCacheKey(id, page) {\n  return `local:${id}:${page}`;\n}\n\nexport async function getSyncList() {\n  let data;\n\n  // @ts-ignore\n  if (api.type === 'userscript') {\n    const list = await api.storage.list('sync');\n    for (const key in list) {\n      list[key] = await api.storage.get(key);\n    }\n    data = list;\n  } else {\n    data = api.storage.list('sync');\n  }\n  return data;\n}\n\nexport function getRegex(listType) {\n  return new RegExp(`^local://[^/]*/${listType}`, 'i');\n}\n","import { ListAbstract, listElement } from '../listAbstract';\nimport * as helper from './helper';\nimport * as definitions from '../definitions';\n\nexport class UserList extends ListAbstract {\n  name = 'local';\n\n  authenticationUrl = '';\n\n  async getUserObject() {\n    return Promise.resolve({ username: 'local', picture: '', href: '' });\n  }\n\n  _getSortingOptions() {\n    return [];\n  }\n\n  async getPart() {\n    con.log('[UserList][Local]', `status: ${this.status}`);\n    this.done = true;\n    const data = await this.prepareData(await this.getSyncList(), this.listType, this.status);\n    return data;\n  }\n\n  private async prepareData(data, listType, status): Promise<listElement[]> {\n    const newData = [] as listElement[];\n    for (const key in data) {\n      if (this.getRegex(listType).test(key)) {\n        const el = data[key];\n        con.log(key, el);\n        if (status !== definitions.status.All && parseInt(el.status) !== status) {\n          continue;\n        }\n        if (listType === 'anime') {\n          newData.push(\n            await this.fn(\n              {\n                uid: key,\n                cacheKey: this.getCacheKey(utils.urlPart(key, 4), utils.urlPart(key, 2)),\n                type: 'anime',\n                airingState: 2,\n                image: el.image ?? '',\n                imageLarge: el.image ?? '',\n                malId: 0,\n                apiCacheKey: 0,\n                tags: el.tags,\n                title: `[L] ${el.name}`,\n                url: key,\n                score: el.score,\n                watchedEp: el.progress,\n                totalEp: 0,\n                status: el.status,\n              },\n              el.sUrl,\n            ),\n          );\n        } else {\n          newData.push(\n            await this.fn(\n              {\n                uid: key,\n                cacheKey: this.getCacheKey(utils.urlPart(key, 4), utils.urlPart(key, 2)),\n                type: 'manga',\n                airingState: 2,\n                image: el.image ?? '',\n                imageLarge: el.image ?? '',\n                malId: 0,\n                apiCacheKey: 0,\n                tags: el.tags,\n                title: `[L] ${el.name}`,\n                url: key,\n                score: el.score,\n                watchedEp: el.progress,\n                readVol: el.volumeprogress,\n                totalEp: 0,\n                totalVol: 0,\n                status: el.status,\n              },\n              el.sUrl,\n            ),\n          );\n        }\n      }\n    }\n\n    con.log('data', newData);\n    return newData;\n  }\n\n  private getRegex = helper.getRegex;\n\n  protected getSyncList = helper.getSyncList;\n\n  protected getCacheKey = helper.getCacheKey;\n}\n","import { Cache } from '../utils/Cache';\nimport { Progress } from '../utils/progress';\nimport { emitter } from '../utils/emitter';\nimport { errorMessage as _errorMessage } from './Errors';\n\nObject.seal(emitter);\n\nexport interface listElement {\n  uid: number;\n  malId: number;\n  apiCacheKey: number | string;\n  cacheKey: any;\n  type: 'anime' | 'manga';\n  title: string;\n  url: string;\n  score: number;\n  watchedEp: number;\n  readVol?: number;\n  totalEp: number;\n  totalVol?: number;\n  status: number;\n  startDate: string | null;\n  finishDate: string | null;\n  rewatchCount: number;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  tags: string;\n  airingState: number;\n  fn: {\n    continueUrl: () => string;\n    initProgress: () => void;\n    progress: false | Progress;\n  };\n  options?: {\n    u: string;\n    r: any;\n    c: any;\n    p: any;\n  };\n}\n\nexport abstract class ListAbstract {\n  protected done = false;\n\n  protected loading = false;\n\n  protected firstLoaded = false;\n\n  protected abstract authenticationUrl: string;\n\n  abstract readonly name;\n\n  protected logger;\n\n  public seperateRewatching = false;\n\n  // Modes\n  modes = {\n    frontend: false,\n    sortAiring: false,\n    initProgress: false,\n    cached: false,\n  };\n\n  protected username = '';\n\n  protected offset = 0;\n\n  protected templist: listElement[] = [];\n\n  constructor(\n    protected status: number = 1,\n    protected listType: 'anime' | 'manga' = 'anime',\n    protected sort: string = 'default',\n  ) {\n    this.status = Number(this.status);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  public api = api;\n\n  public setTemplist(list) {\n    this.templist = list;\n    return this;\n  }\n\n  public getTemplist() {\n    return this.templist;\n  }\n\n  public setSort(sort) {\n    if (this.firstLoaded || this.loading) throw 'To late to change sort';\n    this.sort = sort;\n  }\n\n  isDone() {\n    return this.done;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isFirstLoaded() {\n    return this.firstLoaded;\n  }\n\n  async getCompleteList(): Promise<listElement[]> {\n    do {\n      // eslint-disable-next-line no-await-in-loop\n      await this.getNext();\n    } while (!this.done);\n\n    if (this.modes.sortAiring) await this.sortAiringList();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 18));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  async getNextPage(): Promise<listElement[]> {\n    if (this.done) return this.templist;\n\n    if (\n      this.modes.frontend &&\n      this.status === 1 &&\n      (this.sort === 'default' || this.sort === 'unread')\n    ) {\n      this.modes.sortAiring = true;\n      return this.getCompleteList();\n    }\n\n    await this.getNext();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 24));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  private async getNext() {\n    this.loading = true;\n    const retList = await this.getPart();\n    this.templist = this.templist.concat(retList);\n    this.loading = false;\n  }\n\n  async getCached(): Promise<listElement[]> {\n    if (await this.getCache().hasValue()) {\n      const cachelist = await this.getCache().getValue();\n      cachelist.forEach(item => {\n        item = this.fn(item);\n        item.watchedEp = '';\n        item.score = '';\n      });\n      return cachelist;\n    }\n    return [];\n  }\n\n  protected updateListener;\n\n  public initFrontendMode() {\n    this.modes.frontend = true;\n    this.updateListener = emitter.on(\n      'update.*',\n      data => {\n        con.log('update', data);\n        if (data.cacheKey) {\n          const item = this.templist.find(el => el.cacheKey === data.cacheKey);\n          con.log(item);\n          if (item && data.state) {\n            item.watchedEp = data.state.episode;\n            item.score = data.state.score;\n            item.status = data.state.status;\n          }\n        }\n      },\n      { objectify: true },\n    );\n  }\n\n  public destroy() {\n    if (this.updateListener) {\n      this.updateListener.off();\n    }\n  }\n\n  public getUsername() {\n    return this.getUserObject().then(user => user.username);\n  }\n\n  abstract getUserObject(): Promise<{ username: string; picture: string; href: string }>;\n\n  abstract _getSortingOptions(): { icon: string; title: string; value: string; asc?: boolean }[];\n\n  getSortingOptions(\n    simple = false,\n  ): { icon: string; title: string; value: string; asc?: boolean }[] {\n    const res = [\n      {\n        icon: 'filter_list',\n        title: api.storage.lang('settings_progress_default'),\n        value: 'default',\n      },\n    ];\n\n    if (this.status === 1 && this.listType === 'manga') {\n      res.push({\n        icon: 'adjust',\n        title: api.storage.lang('list_sorting_unread'),\n        value: 'unread',\n      });\n    }\n\n    const options = this._getSortingOptions();\n    options.forEach(el => {\n      if (!simple) {\n        if (el.asc) {\n          const asc = { ...el };\n          delete asc.asc;\n          asc.value += '_asc';\n          asc.title += ' Ascending';\n          res.push(asc);\n        }\n        delete el.asc;\n      }\n      res.push(el);\n    });\n    return res;\n  }\n\n  abstract getPart(): Promise<listElement[]>;\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n\n  // itemFunctions;\n  async fn(item, streamurl = '') {\n    let continueUrlTemp: any = null;\n    item.fn = {\n      continueUrl: () => {\n        if (continueUrlTemp !== null) return continueUrlTemp;\n        return utils.getContinueWaching(item.type, item.cacheKey).then(obj => {\n          const curEp = parseInt(item.watchedEp.toString());\n\n          if (obj === undefined || obj.ep !== curEp + 1) return '';\n\n          continueUrlTemp = obj.url;\n\n          return continueUrlTemp;\n        });\n      },\n      initProgress: () => {\n        return new Progress(item.cacheKey, item.type).init().then(progress => {\n          item.fn.progress = progress;\n        });\n      },\n      progress: false,\n    };\n    item.options = await utils.getEntrySettings(item.type, item.cacheKey, item.tags);\n    if (streamurl) item.options.u = streamurl;\n    if (this.modes.sortAiring || this.modes.initProgress) await item.fn.initProgress();\n\n    return item;\n  }\n\n  // Modes\n  async initProgress() {\n    const listP: any = [];\n    this.templist.forEach(item => {\n      listP.push(item.fn.initProgress());\n    });\n\n    await Promise.all(listP);\n  }\n\n  async sortAiringList() {\n    if (this.sort === 'unread') {\n      this.sortUnread();\n      return;\n    }\n\n    const normalItems: listElement[] = [];\n    let preItems: listElement[] = [];\n    let watchedItems: listElement[] = [];\n    this.templist.forEach(item => {\n      const prediction = item.fn.progress;\n      if (this.listType === 'anime') {\n        if (prediction && prediction.isAiring() && prediction.getPredictionTimestamp()) {\n          if (item.watchedEp < prediction.getCurrentEpisode()) {\n            preItems.push(item);\n          } else {\n            watchedItems.push(item);\n          }\n        } else {\n          normalItems.push(item);\n        }\n      } else if (\n        // Manga only if less than 5 chapters to read\n        prediction &&\n        prediction.isAiring() &&\n        prediction.getCurrentEpisode() &&\n        item.watchedEp &&\n        item.watchedEp < prediction.getCurrentEpisode() &&\n        item.watchedEp + 6 > prediction.getCurrentEpisode()\n      ) {\n        preItems.push(item);\n      } else {\n        normalItems.push(item);\n      }\n    });\n\n    preItems = preItems.sort(sortItems).reverse();\n    watchedItems = watchedItems.sort(sortItems);\n\n    this.templist = preItems.concat(watchedItems, normalItems);\n\n    function sortItems(a, b) {\n      let valA = a.fn.progress.getPredictionTimestamp();\n      let valB = b.fn.progress.getPredictionTimestamp();\n\n      if (!valA) valA = 999999999999;\n      if (!valB) valB = valA;\n\n      return valA - valB;\n    }\n  }\n\n  sortUnread() {\n    this.templist = this.templist.sort(function (a, b) {\n      let valA = 10000;\n      let valB = 10000;\n\n      if (a.fn.progress && a.fn.progress.getCurrentEpisode()) {\n        const tempA = a.fn.progress.getCurrentEpisode() - a.watchedEp;\n        if (tempA > 0) valA = tempA;\n      }\n      if (b.fn.progress && b.fn.progress.getCurrentEpisode()) {\n        const tempB = b.fn.progress.getCurrentEpisode() - b.watchedEp;\n        if (tempB > 0) valB = tempB;\n      }\n\n      return valA - valB;\n    });\n  }\n\n  cacheObj: any = undefined;\n\n  getCache() {\n    if (this.cacheObj) return this.cacheObj;\n    this.cacheObj = new Cache(\n      `list/${this.name}/${this.listType}/${this.status}/${this.sort}`,\n      48 * 60 * 60 * 1000,\n    );\n    return this.cacheObj;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, vModelRadio as _vModelRadio, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withKeys as _withKeys } from \"vue\"\n\nconst _hoisted_1 = { class: \"radio-slider\" }\nconst _hoisted_2 = [\"id\", \"name\", \"value\", \"checked\"]\nconst _hoisted_3 = [\"for\", \"onKeyup\"]\n\nimport { PropType, computed } from 'vue';\n\ninterface Option {\n  value: string;\n  title: string;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'form-switch',\n  props: {\n  options: {\n    type: Array as PropType<Option[]>,\n    required: true,\n  },\n  modelValue: {\n    type: String,\n    required: true,\n    default: '',\n  },\n},\n  emits: ['update:modelValue'],\n  setup(__props, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst picked = computed({\n  get() {\n    return props.modelValue;\n  },\n  set(value) {\n    emit('update:modelValue', value);\n  },\n});\n\nconst id = Math.floor(Math.random() * 10000);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.options, (option, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, {\n        key: option.value\n      }, [\n        _withDirectives(_createElementVNode(\"input\", {\n          id: `radio-${_unref(id)}-${index}`,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((picked).value = $event)),\n          class: \"input\",\n          type: \"radio\",\n          name: `radio-slide-${_unref(id)}`,\n          value: option.value,\n          checked: __props.modelValue === option.value\n        }, null, 8 /* PROPS */, _hoisted_2), [\n          [_vModelRadio, picked.value]\n        ]),\n        _createElementVNode(\"label\", {\n          class: \"label\",\n          for: `radio-${_unref(id)}-${index}`,\n          tabindex: \"0\",\n          onKeyup: _withKeys(($event: any) => (picked.value = option.value), [\"enter\"])\n        }, _toDisplayString(option.title), 41 /* TEXT, PROPS, NEED_HYDRATION */, _hoisted_3)\n      ], 64 /* STABLE_FRAGMENT */))\n    }), 128 /* KEYED_FRAGMENT */)),\n    _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"select-pill\" }, null, -1 /* HOISTED */))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"radio-slider\">\n    <template v-for=\"(option, index) in options\" :key=\"option.value\">\n      <input\n        :id=\"`radio-${id}-${index}`\"\n        v-model=\"picked\"\n        class=\"input\"\n        type=\"radio\"\n        :name=\"`radio-slide-${id}`\"\n        :value=\"option.value\"\n        :checked=\"modelValue === option.value\"\n      />\n      <label\n        class=\"label\"\n        :for=\"`radio-${id}-${index}`\"\n        tabindex=\"0\"\n        @keyup.enter=\"picked = option.value\"\n      >\n        {{ option.title }}\n      </label>\n    </template>\n    <div class=\"select-pill\" />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { PropType, computed } from 'vue';\n\ninterface Option {\n  value: string;\n  title: string;\n}\n\nconst props = defineProps({\n  options: {\n    type: Array as PropType<Option[]>,\n    required: true,\n  },\n  modelValue: {\n    type: String,\n    required: true,\n    default: '',\n  },\n});\n\nconst emit = defineEmits(['update:modelValue']);\n\nconst picked = computed({\n  get() {\n    return props.modelValue;\n  },\n  set(value) {\n    emit('update:modelValue', value);\n  },\n});\n\nconst id = Math.floor(Math.random() * 10000);\n</script>\n\n<style lang=\"less\" scoped>\n@import '../../less/_globals.less';\n\n.radio-slider {\n  .block-select();\n  .border-pill();\n\n  border: 2px solid var(--cl-backdrop);\n  background-color: var(--cl-foreground);\n  display: inline-flex;\n  align-items: stretch;\n  padding: 0;\n\n  .label {\n    .border-pill();\n    .link();\n\n    display: inline-flex;\n    align-items: center;\n    padding: 5px 10px;\n    margin: -2px;\n    transition:\n      background-color @fast-transition,\n      color @fast-transition;\n  }\n\n  :checked + label {\n    .border-pill();\n\n    background-color: var(--cl-primary);\n    color: white;\n  }\n\n  &:focus-visible {\n    .focus-outline();\n  }\n\n  .input {\n    display: none;\n  }\n}\n</style>\n","import script from \"./form-switch.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./form-switch.vue?vue&type=script&lang=ts&setup=true\"\n\nimport _style_0 from \"./form-switch.vue?vue&type=style&index=0&id=0436ca5d&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['styles',[_style_0]],['__scopeId',\"data-v-0436ca5d\"],['__file',\"form-switch.vue\"]])\n\nexport default __exports__","export default \"/* stylelint-disable prettier/prettier */\\n/* Aspect ratios */\\n/* Transitions */\\n/* Typography */\\n/* Shadows */\\n/* Fonts */\\n@keyframes skeleton-loading-malsync-0436ca5d {\\nto {\\n    transform: translateX(100%);\\n}\\n}\\n.radio-slider[data-v-0436ca5d] {\\n  user-select: none;\\n  border-radius: 30px;\\n  border: 2px solid var(--cl-backdrop);\\n  background-color: var(--cl-foreground);\\n  display: inline-flex;\\n  align-items: stretch;\\n  padding: 0;\\n}\\n.radio-slider .label[data-v-0436ca5d] {\\n  border-radius: 30px;\\n  cursor: pointer;\\n  display: inline-flex;\\n  align-items: center;\\n  padding: 5px 10px;\\n  margin: -2px;\\n  transition: background-color 0.25s, color 0.25s;\\n}\\n.radio-slider :checked + label[data-v-0436ca5d] {\\n  border-radius: 30px;\\n  background-color: var(--cl-primary);\\n  color: white;\\n}\\n.radio-slider[data-v-0436ca5d]:focus-visible {\\n  outline: 2px solid var(--cl-secondary);\\n}\\n.radio-slider .input[data-v-0436ca5d] {\\n  display: none;\\n}\\n\"","<template>\n  <div class=\"square-spinner\">\n    <div class=\"e1\"></div>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.square-spinner {\n  position: relative;\n  height: 50px;\n  width: 50px;\n  margin: 50px auto;\n\n  .e1 {\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    border-radius: 50%;\n    border-top: 5px solid var(--cl-text);\n    border-bottom: 5px solid var(--cl-text);\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    animation: spinner 0.75s infinite;\n  }\n}\n\n@keyframes spinner {\n  0% {\n    transform: rotateZ(45deg);\n  }\n\n  70% {\n    transform: rotateZ(225deg);\n  }\n\n  100% {\n    transform: rotateZ(225deg);\n  }\n}\n</style>\n","import { render } from \"./spinner.vue?vue&type=template&id=68101cfe&scoped=true\"\nconst script = {}\n\nimport _style_0 from \"./spinner.vue?vue&type=style&index=0&id=68101cfe&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['styles',[_style_0]],['__scopeId',\"data-v-68101cfe\"],['__file',\"spinner.vue\"]])\n\nexport default __exports__","export default \".square-spinner[data-v-68101cfe] {\\n  position: relative;\\n  height: 50px;\\n  width: 50px;\\n  margin: 50px auto;\\n}\\n.square-spinner .e1[data-v-68101cfe] {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  bottom: 0;\\n  border-radius: 50%;\\n  border-top: 5px solid var(--cl-text);\\n  border-bottom: 5px solid var(--cl-text);\\n  border-left: 5px solid transparent;\\n  border-right: 5px solid transparent;\\n  animation: spinner-68101cfe 0.75s infinite;\\n}\\n@keyframes spinner-68101cfe {\\n0% {\\n    transform: rotateZ(45deg);\\n}\\n70% {\\n    transform: rotateZ(225deg);\\n}\\n100% {\\n    transform: rotateZ(225deg);\\n}\\n}\\n\"","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nimport ErrorGeneral from './error-general.vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'error-search',\n  props: {\n  listRequest: {\n    type: Object,\n    default: () => ({}),\n  },\n},\n  setup(__props) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (!__props.listRequest.loading && __props.listRequest.error)\n    ? (_openBlock(), _createBlock(ErrorGeneral, { key: 0 }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(__props.listRequest.error.message || __props.listRequest.error), 1 /* TEXT */)\n        ]),\n        _: 1 /* STABLE */\n      }))\n    : _createCommentVNode(\"v-if\", true)\n}\n}\n\n})","import script from \"./error-search.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./error-search.vue?vue&type=script&lang=ts&setup=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__file',\"error-search.vue\"]])\n\nexport default __exports__","import { searchInterface } from '../definitions';\nimport * as helper from './helper';\n\nconst tempObj = {\n  apiCall: helper.apiCall,\n  logger: con.m('MAL Search'),\n  type: 'anime',\n};\n\nexport const search: searchInterface = async function (\n  keyword,\n  type: 'anime' | 'manga',\n  options = {},\n  sync = false,\n) {\n  tempObj.type = type;\n\n  keyword = keyword.trim();\n  if (keyword.length > 64) {\n    keyword = keyword.substr(0, 64);\n  }\n\n  if (!keyword) return [];\n\n  if (keyword.length < 3) {\n    throw new Error('Search term must be at least 3 characters long');\n  }\n\n  return tempObj\n    .apiCall({\n      type: 'GET',\n      path: `${type}?q=${keyword}&limit=15&nsfw=true`,\n      fields: [\n        'start_date',\n        'mean',\n        'alternative_titles',\n        'media_type',\n        'num_episodes',\n        'num_chapters',\n      ],\n    })\n    .then(json => {\n      const resItems: any = [];\n\n      json.data.forEach(function (item) {\n        let alt = [item.node.title];\n        if (item.node.alternative_titles) {\n          if (item.node.alternative_titles.en) alt.push(item.node.alternative_titles.en);\n          if (item.node.alternative_titles.ja) alt.push(item.node.alternative_titles.ja);\n          if (item.node.alternative_titles.synonyms)\n            alt = alt.concat(item.node.alternative_titles.synonyms);\n        }\n\n        resItems.push({\n          id: item.node.id,\n          name: item.node.title,\n          altNames: alt,\n          url: `https://myanimelist.net/${type}/${item.node.id}`,\n          malUrl: () => {\n            return `https://myanimelist.net/${type}/${item.node.id}`;\n          },\n          image: item.node.main_picture?.medium ?? '',\n          imageLarge: item.node.main_picture?.large || item.node.main_picture?.medium || '',\n          media_type: item.node.media_type\n            ? (\n                item.node.media_type.charAt(0) + item.node.media_type.slice(1).toLowerCase()\n              ).replace('_', ' ')\n            : '',\n          isNovel: item.node.media_type.toLowerCase().includes('novel'),\n          score: item.node.mean,\n          year: item.node.start_date,\n          totalEp: item.node.num_episodes || item.node.num_chapters || 0,\n        });\n      });\n\n      tempObj.logger.log(resItems);\n      return resItems;\n    });\n};\n","import { search as temp } from '../MyAnimeList_api/search';\n\nexport const search = temp;\n","import { searchInterface } from '../definitions';\nimport { parseJson } from '../Errors';\nimport * as helper from './helper';\n\nexport const search: searchInterface = async function (\n  keyword,\n  type: 'anime' | 'manga',\n  options = {},\n  sync = false,\n) {\n  return call(`https://api.simkl.com/search/${type}`, { q: keyword }, true).then(res => {\n    const resItems: any = [];\n    con.log('search', res);\n    j.$.each(res, function (index, item) {\n      resItems.push({\n        id: item.ids.simkl_id,\n        name: item.title,\n        altNames: [],\n        url: `https://simkl.com/${type}/${item.ids.simkl_id}/${item.ids.slug}`,\n        malUrl: async () => {\n          const malId = await simklIdToMal(item.ids.simkl_id);\n          return malId ? `https://myanimelist.net/${type}/${malId}` : null;\n        },\n        image: `https://simkl.in/posters/${item.poster}_ca.jpg`,\n        imageLarge: `https://simkl.in/posters/${item.poster}_m.jpg`,\n        imageBanner: `https://simkl.in/posters/${item.poster}_w.jpg`,\n        media_type: item.type,\n        isNovel: false,\n        score: null,\n        year: item.year,\n      });\n    });\n    return resItems;\n  });\n};\n\nasync function call(\n  url,\n  sData = {} as any,\n  asParameter = false,\n  methode: 'GET' | 'POST' = 'GET',\n  login = true,\n) {\n  if (asParameter) {\n    url += `?${j.$.param(sData)}`;\n  }\n  con.log('call', methode, url, sData);\n\n  const headers = {\n    Authorization: login ? `Bearer ${api.settings.get('simklToken')}` : undefined,\n    'simkl-api-key': helper.client_id,\n    Accept: 'application/vnd.api+json',\n    'Content-Type': 'application/json',\n  };\n\n  if (!login) {\n    con.log('No login');\n  }\n\n  if (methode === 'GET') {\n    sData = undefined;\n  }\n\n  return api.request\n    .xhr(methode, {\n      url,\n      headers,\n      data: sData,\n    })\n    .then(async response => {\n      switch (response.status) {\n        case 200:\n        case 201:\n        case 204:\n        case 302:\n          break;\n        case 401:\n          if (login) {\n            return call(url, sData, asParameter, methode, false);\n            break;\n          }\n          utils.flashm(\n            `Please Authenticate <a target=\"_blank\" href=\"${helper.getAuthUrl()}\">Here</a>`,\n            { error: true, type: 'error' },\n          );\n          throw getThrowError();\n          break;\n        default:\n          utils.flashm(`Simkl: ${getErrorText()}`, {\n            error: true,\n            type: 'error',\n          });\n          throw getThrowError();\n      }\n\n      try {\n        return parseJson(response.responseText);\n      } catch (e) {\n        con.error(response);\n        throw e;\n      }\n\n      function getErrorText() {\n        return parseJson(response.responseText).error;\n      }\n\n      function getThrowError() {\n        return new Error(getErrorText());\n      }\n    });\n}\n\nexport function simklIdToMal(simklId) {\n  return call(`https://api.simkl.com/anime/${simklId}`, { extended: 'full' }, true).then(res => {\n    if (typeof res.ids.mal === 'undefined') return null;\n    return res.ids.mal;\n  });\n}\n","import * as helper from './helper';\nimport { search as malSearch } from './MyAnimeList_hybrid/search';\nimport { search as malApiSearch } from './MyAnimeList_api/search';\nimport { search as aniSearch } from './AniList/search';\nimport { search as kitsuSearch } from './Kitsu/search';\nimport { search as simklSearch } from './Simkl/search';\nimport { search as shikiSearch } from './Shikimori/search';\n\nexport function search(\n  keyword,\n  type: 'anime' | 'manga',\n  options = {},\n  sync = false,\n  syncMode = '',\n) {\n  if (!syncMode) {\n    syncMode = helper.getSyncMode(type);\n  }\n\n  if (syncMode === 'KITSU') {\n    return kitsuSearch(keyword, type, options, sync);\n  }\n  if (syncMode === 'ANILIST') {\n    return aniSearch(keyword, type, options, sync);\n  }\n  if (syncMode === 'SIMKL') {\n    return simklSearch(keyword, type, options, sync);\n  }\n  if (syncMode === 'SHIKI') {\n    return shikiSearch(keyword, type, options, sync);\n  }\n  if (syncMode === 'MALAPI') {\n    return malApiSearch(keyword, type, options, sync);\n  }\n  return malSearch(keyword, type, options, sync);\n}\n","import { searchInterface } from '../definitions';\nimport * as helper from './helper';\n\nexport const search: searchInterface = async function (\n  keyword,\n  type: 'anime' | 'manga',\n  options = {},\n  sync = false,\n) {\n  return helper\n    .apiCall(\n      'GET',\n      `https://kitsu.app/api/edge/${type}?filter[text]=${keyword}&page[limit]=20&page[offset]=0&fields[${type}]=id,slug,titles,averageRating,startDate,posterImage,coverImage,subtype,${\n        type === 'anime' ? 'episodeCount' : 'chapterCount'\n      }`,\n      {},\n    )\n    .then(res => {\n      con.log('search', res);\n\n      const resItems: any = [];\n      res.data.forEach(function (item) {\n        resItems.push({\n          id: Number(item.id),\n          name: helper.getTitle(item.attributes.titles, item.attributes.canonicalTitle),\n          altNames: Object.values(item.attributes.titles),\n          url: `https://kitsu.app/${type}/${item.attributes.slug}`,\n          malUrl: async () => {\n            const malId = await helper.kitsuToMal(item.id, type);\n            return malId ? `https://myanimelist.net/${type}/${malId}` : null;\n          },\n          image:\n            item.attributes.posterImage && item.attributes.posterImage.small\n              ? item.attributes.posterImage.small\n              : '',\n          imageLarge:\n            item.attributes.posterImage && item.attributes.posterImage.original\n              ? item.attributes.posterImage.original\n              : '',\n          imageBanner:\n            item.attributes.coverImage && item.attributes.coverImage.large\n              ? item.attributes.coverImage.large\n              : '',\n          media_type: item.attributes.subtype,\n          isNovel: item.attributes.subtype === 'novel',\n          score: item.attributes.averageRating,\n          year: item.attributes.startDate,\n          totalEp: item.attributes.episodeCount || item.attributes.chapterCount || 0,\n        });\n      });\n      return resItems;\n    });\n};\n","import { searchInterface } from '../definitions';\nimport * as helper from './helper';\n\nexport const search: searchInterface = async function (\n  keyword,\n  type: 'anime' | 'manga',\n  options = {},\n  sync = false,\n) {\n  const query = `\n    query ($search: String) {\n      ${type}: Page (perPage: 25) {\n        pageInfo {\n          total\n        }\n        results: media (type: ${type.toUpperCase()}, search: $search) {\n          id\n          siteUrl\n          idMal\n          episodes\n          chapters\n          title {\n            userPreferred\n            romaji\n            english\n            native\n          }\n          coverImage {\n            large\n            extraLarge\n          }\n          bannerImage\n          type\n          format\n          averageScore\n          startDate {\n            year\n          }\n          synonyms\n        }\n      }\n    }\n  `;\n\n  const variables = {\n    search: keyword,\n  };\n\n  const res = await helper.apiCall(query, variables, false);\n  con.log(res);\n\n  const resItems: any = [];\n\n  j.$.each(res.data[type].results, function (index, item) {\n    resItems.push({\n      id: item.id,\n      name: item.title.userPreferred,\n      altNames: Object.values(item.title).concat(item.synonyms),\n      url: item.siteUrl,\n      malUrl: () => {\n        return item.idMal ? `https://myanimelist.net/${type}/${item.idMal}` : null;\n      },\n      image: helper.imgCheck(item.coverImage.large),\n      imageLarge: helper.imgCheck(item.coverImage.extraLarge),\n      imageBanner: helper.imgCheck(item.bannerImage),\n      media_type: item.format\n        ? (item.format.charAt(0) + item.format.slice(1).toLowerCase()).replace('_', ' ')\n        : '',\n      isNovel: item.format === 'NOVEL',\n      score: item.averageScore,\n      year: item.startDate.year,\n      totalEp: item.episodes || item.chapters || 0,\n    });\n  });\n\n  return resItems;\n};\n","import { searchInterface } from '../definitions';\nimport * as helper from './helper';\n\nexport const search: searchInterface = async function (\n  keyword,\n  type: 'anime' | 'manga',\n  options = {},\n  sync = false,\n) {\n  const list: helper.MetaRequest[] = await helper.apiCall({\n    path: `${type}s`,\n    parameter: { limit: 25, search: keyword },\n    type: 'GET',\n  });\n\n  return list.map(item => {\n    return {\n      id: item.id,\n      name: helper.title(item.russian, item.name),\n      altNames: [item.name, item.russian].filter(el => el),\n      url: helper.domain + item.url,\n      malUrl: () => {\n        return Promise.resolve(item.id ? `https://myanimelist.net/${type}/${item.id}` : null);\n      },\n      image: helper.domain + item.image.preview,\n      imageLarge: helper.domain + item.image.original,\n      media_type: item.kind,\n      isNovel: item.kind === 'light_novel',\n      score: Number(item.score) ? item.score : '',\n      year: item.aired_on,\n      totalEp: item.episodes || item.chapters || 0,\n    };\n  });\n};\n","import { search } from '../_provider/searchFactory';\nimport { searchResult } from '../_provider/definitions';\n\nexport async function normalSearch(\n  searchterm: string,\n  type: 'anime' | 'manga',\n): Promise<searchResult[]> {\n  return search(searchterm, type).then(res =>\n    Promise.all(\n      res.map(async el => {\n        const dbEntry = await api.request.database('entry', { id: el.id, type });\n        if (dbEntry) {\n          el.list = {\n            status: dbEntry.status,\n            score: dbEntry.score,\n            episode: dbEntry.watchedEp,\n          };\n        }\n        return el;\n      }),\n    ),\n  );\n}\n","import Fuse from 'fuse.js';\n\nimport { listElement } from '../listAbstract';\nimport { UserList as LocalList } from './list';\nimport { searchResult } from '../definitions';\nimport { normalSearch } from '../../utils/Search';\n\nconst searchFuse: {\n  anime: null | Fuse<listElement>;\n  manga: null | Fuse<listElement>;\n} = {\n  anime: null,\n  manga: null,\n};\n\nexport async function search(searchterm: string, type: 'anime' | 'manga'): Promise<searchResult[]> {\n  if (!searchFuse[type]) {\n    const localListEl = new LocalList(7, type);\n    const tempList = await localListEl.getCompleteList();\n    searchFuse[type] = new Fuse(tempList, {\n      minMatchCharLength: 3,\n      threshold: 0.4,\n      keys: ['title'],\n    });\n  }\n\n  const results = searchFuse[type]!.search(searchterm);\n\n  return results.map(el => {\n    return {\n      id: 0,\n      name: el.item.title,\n      altNames: [],\n      url: el.item.url,\n      malUrl: () => Promise.resolve(null),\n      image: el.item.image,\n      imageLarge: el.item.image,\n      media_type: el.item.type,\n      isNovel: false,\n      score: '',\n      year: '',\n      list: {\n        status: el.item.status,\n        score: el.item.score,\n        episode: el.item.watchedEp,\n      },\n    };\n  });\n}\n\nexport async function miniMALSearch(searchterm: string, type: 'anime' | 'manga') {\n  return [\n    ...(await search(searchterm, type)).slice(0, 8),\n    ...(await normalSearch(searchterm, type)),\n  ];\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"search\" }\n\nimport { PropType, ref, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { setTypeContext } from '../utils/state';\nimport { createRequest } from '../utils/reactive';\nimport FormSwitch from '../components/form/form-switch.vue';\nimport Section from '../components/section.vue';\nimport Spinner from '../components/spinner.vue';\nimport Grid from '../components/grid.vue';\nimport Empty from '../components/empty.vue';\nimport TransitionStaggered from '../components/transition-staggered.vue';\nimport { searchFormats } from '../utils/bookmarks';\nimport { searchResult } from '../../_provider/definitions';\nimport { bookmarkItem } from '../minimalClass';\nimport ErrorSearch from '../components/error/error-search.vue';\nimport { getTyping } from '../components/nav/nav-search-state';\nimport { miniMALSearch } from '../../_provider/Local/search';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'search',\n  props: {\n  type: {\n    type: String as PropType<'anime' | 'manga'>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst props = __props;\n\nconst result = ref(route.query.s ? route.query.s.toString() : '');\nconst type = ref(props.type.toString() as 'anime' | 'manga');\nconst parameters = ref({ result, type });\n\nconst listRequest = createRequest(parameters, async param => {\n  if (!param.value.result) return [];\n  return miniMALSearch(param.value.result, param.value.type);\n});\n\nwatch(\n  () => props.type,\n  value => {\n    type.value = value.toString() as 'anime' | 'manga';\n  },\n);\n\nwatch(type, newValue => {\n  router.replace({\n    name: 'Search',\n    params: { type: newValue },\n    query: { s: route.query.s },\n  });\n  setTypeContext(newValue as 'anime' | 'manga');\n});\n\nwatch(\n  () => route.query.s,\n  searchTerm => {\n    result.value = searchTerm as string;\n  },\n);\n\nconst listTheme = searchFormats[0];\n\nconst formatItem = (item: searchResult): bookmarkItem => {\n  return {\n    title: item.name,\n    type: type.value,\n    url: item.url,\n    image: item.image,\n    imageLarge: item.imageLarge,\n    imageBanner: item.imageBanner,\n    status: item.list ? item.list.status : 0,\n    score: item.list ? item.list.score : item.score,\n    watchedEp: item.list ? item.list.episode : 0,\n    totalEp: item.totalEp || 0,\n  };\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (!_unref(listRequest).error)\n      ? (_openBlock(), _createBlock(Section, {\n          key: 0,\n          class: \"controls\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(FormSwitch, {\n              modelValue: type.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((type).value = $event)),\n              options: [\n          {\n            value: 'anime',\n            title: _ctx.lang('Anime'),\n          },\n          {\n            value: 'manga',\n            title: _ctx.lang('Manga'),\n          },\n        ]\n            }, null, 8 /* PROPS */, [\"modelValue\", \"options\"])\n          ]),\n          _: 1 /* STABLE */\n        }))\n      : _createCommentVNode(\"v-if\", true),\n    (_unref(listRequest).loading || _unref(getTyping)())\n      ? (_openBlock(), _createBlock(Section, { key: 1 }, {\n          default: _withCtx(() => [\n            _createVNode(Spinner)\n          ]),\n          _: 1 /* STABLE */\n        }))\n      : (_unref(listRequest).data && !_unref(listRequest).error)\n        ? (_openBlock(), _createBlock(Section, {\n            key: 2,\n            spacer: \"double\"\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(), _createBlock(Grid, {\n                key: _unref(listTheme).name,\n                \"min-width\": _unref(listTheme).width,\n                class: _normalizeClass([\"grid\", { loading: _unref(listRequest).loading || _unref(getTyping)() }])\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(TransitionStaggered, {\n                    \"delay-duration\": _unref(listTheme).transition\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(listRequest).data!, (item) => {\n                        return (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(listTheme).component), {\n                          key: item.id,\n                          item: formatItem(item)\n                        }, null, 8 /* PROPS */, [\"item\"]))\n                      }), 128 /* KEYED_FRAGMENT */))\n                    ]),\n                    _: 1 /* STABLE */\n                  }, 8 /* PROPS */, [\"delay-duration\"])\n                ]),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"min-width\", \"class\"]))\n            ]),\n            _: 1 /* STABLE */\n          }))\n        : _createCommentVNode(\"v-if\", true),\n    (!(_unref(listRequest).loading || _unref(getTyping)()) && _unref(listRequest).data && !_unref(listRequest).data.length)\n      ? (_openBlock(), _createBlock(Section, {\n          key: 3,\n          class: \"spinner-wrap\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(Empty, { icon: \"search_off\" })\n          ]),\n          _: 1 /* STABLE */\n        }))\n      : _createCommentVNode(\"v-if\", true),\n    _createVNode(ErrorSearch, { \"list-request\": _unref(listRequest) }, null, 8 /* PROPS */, [\"list-request\"])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"search\">\n    <Section v-if=\"!listRequest.error\" class=\"controls\">\n      <FormSwitch\n        v-model=\"type\"\n        :options=\"[\n          {\n            value: 'anime',\n            title: lang('Anime'),\n          },\n          {\n            value: 'manga',\n            title: lang('Manga'),\n          },\n        ]\"\n      />\n    </Section>\n    <Section v-if=\"listRequest.loading || getTyping()\">\n      <Spinner />\n    </Section>\n    <Section v-else-if=\"listRequest.data && !listRequest.error\" spacer=\"double\">\n      <Grid\n        :key=\"listTheme.name\"\n        :min-width=\"listTheme.width\"\n        class=\"grid\"\n        :class=\"{ loading: listRequest.loading || getTyping() }\"\n      >\n        <TransitionStaggered :delay-duration=\"listTheme.transition\">\n          <component\n            :is=\"listTheme.component\"\n            v-for=\"item in listRequest.data!\"\n            :key=\"item.id\"\n            :item=\"formatItem(item)\"\n          />\n        </TransitionStaggered>\n      </Grid>\n    </Section>\n    <Section\n      v-if=\"!(listRequest.loading || getTyping()) && listRequest.data && !listRequest.data.length\"\n      class=\"spinner-wrap\"\n    >\n      <Empty icon=\"search_off\" />\n    </Section>\n    <ErrorSearch :list-request=\"listRequest\" />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { PropType, ref, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { setTypeContext } from '../utils/state';\nimport { createRequest } from '../utils/reactive';\nimport FormSwitch from '../components/form/form-switch.vue';\nimport Section from '../components/section.vue';\nimport Spinner from '../components/spinner.vue';\nimport Grid from '../components/grid.vue';\nimport Empty from '../components/empty.vue';\nimport TransitionStaggered from '../components/transition-staggered.vue';\nimport { searchFormats } from '../utils/bookmarks';\nimport { searchResult } from '../../_provider/definitions';\nimport { bookmarkItem } from '../minimalClass';\nimport ErrorSearch from '../components/error/error-search.vue';\nimport { getTyping } from '../components/nav/nav-search-state';\nimport { miniMALSearch } from '../../_provider/Local/search';\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst props = defineProps({\n  type: {\n    type: String as PropType<'anime' | 'manga'>,\n    required: true,\n  },\n});\n\nconst result = ref(route.query.s ? route.query.s.toString() : '');\nconst type = ref(props.type.toString() as 'anime' | 'manga');\nconst parameters = ref({ result, type });\n\nconst listRequest = createRequest(parameters, async param => {\n  if (!param.value.result) return [];\n  return miniMALSearch(param.value.result, param.value.type);\n});\n\nwatch(\n  () => props.type,\n  value => {\n    type.value = value.toString() as 'anime' | 'manga';\n  },\n);\n\nwatch(type, newValue => {\n  router.replace({\n    name: 'Search',\n    params: { type: newValue },\n    query: { s: route.query.s },\n  });\n  setTypeContext(newValue as 'anime' | 'manga');\n});\n\nwatch(\n  () => route.query.s,\n  searchTerm => {\n    result.value = searchTerm as string;\n  },\n);\n\nconst listTheme = searchFormats[0];\n\nconst formatItem = (item: searchResult): bookmarkItem => {\n  return {\n    title: item.name,\n    type: type.value,\n    url: item.url,\n    image: item.image,\n    imageLarge: item.imageLarge,\n    imageBanner: item.imageBanner,\n    status: item.list ? item.list.status : 0,\n    score: item.list ? item.list.score : item.score,\n    watchedEp: item.list ? item.list.episode : 0,\n    totalEp: item.totalEp || 0,\n  };\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import '../less/_globals.less';\n.search {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n.spinner-wrap {\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n}\n.controls {\n  display: flex;\n  gap: 20px;\n  height: 30px;\n}\n\n.grid {\n  transition:\n    filter @normal-transition,\n    opacity @normal-transition;\n  &.loading {\n    opacity: 0.4;\n    filter: grayscale(1);\n    transition: none;\n  }\n}\n</style>\n","import script from \"./search.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./search.vue?vue&type=script&lang=ts&setup=true\"\n\nimport _style_0 from \"./search.vue?vue&type=style&index=0&id=67d3df6a&inline&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['styles',[_style_0]],['__scopeId',\"data-v-67d3df6a\"],['__file',\"search.vue\"]])\n\nexport default __exports__","export default \"/* stylelint-disable prettier/prettier */\\n/* Aspect ratios */\\n/* Transitions */\\n/* Typography */\\n/* Shadows */\\n/* Fonts */\\n@keyframes skeleton-loading-malsync-67d3df6a {\\nto {\\n    transform: translateX(100%);\\n}\\n}\\n.search[data-v-67d3df6a] {\\n  flex-grow: 1;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.spinner-wrap[data-v-67d3df6a] {\\n  flex-grow: 1;\\n  display: flex;\\n  align-items: center;\\n}\\n.controls[data-v-67d3df6a] {\\n  display: flex;\\n  gap: 20px;\\n  height: 30px;\\n}\\n.grid[data-v-67d3df6a] {\\n  transition: filter 0.4s, opacity 0.4s;\\n}\\n.grid.loading[data-v-67d3df6a] {\\n  opacity: 0.4;\\n  filter: grayscale(1);\\n  transition: none;\\n}\\n\""],"names":["getCacheKey","id","page","async","getSyncList","data","api","type","list","storage","key","get","getRegex","listType","RegExp","UserList","name","authenticationUrl","getUserObject","Promise","resolve","username","picture","href","_getSortingOptions","getPart","con","log","this","status","done","prepareData","newData","test","el","All","parseInt","push","fn","uid","cacheKey","utils","urlPart","airingState","image","imageLarge","malId","apiCacheKey","tags","title","url","score","watchedEp","progress","totalEp","sUrl","readVol","volumeprogress","totalVol","Object","seal","ListAbstract","constructor","sort","loading","firstLoaded","seperateRewatching","modes","frontend","sortAiring","initProgress","cached","offset","templist","cacheObj","undefined","Number","logger","m","setTemplist","getTemplist","setSort","isDone","isLoading","isFirstLoaded","getCompleteList","getNext","sortAiringList","getCache","setValue","slice","getNextPage","retList","concat","getCached","hasValue","cachelist","getValue","forEach","item","initFrontendMode","updateListener","on","find","state","episode","objectify","destroy","off","getUsername","then","user","getSortingOptions","simple","res","icon","lang","value","asc","flashmError","error","flashm","errorMessage","streamurl","continueUrlTemp","continueUrl","getContinueWaching","obj","curEp","toString","ep","init","options","getEntrySettings","u","listP","all","sortUnread","normalItems","preItems","watchedItems","sortItems","a","b","valA","getPredictionTimestamp","valB","prediction","isAiring","getCurrentEpisode","reverse","tempA","tempB","_hoisted_1","class","_hoisted_2","_hoisted_3","__name","props","Array","required","modelValue","String","default","emits","setup","__props","emit","__emit","picked","set","Math","floor","random","_ctx","_cache","option","index","$event","checked","for","tabindex","onKeyup","script","listRequest","message","_","tempObj","apiCall","search","keyword","sync","trim","length","substr","Error","path","fields","json","resItems","alt","node","alternative_titles","en","ja","synonyms","altNames","malUrl","main_picture","medium","large","media_type","charAt","toLowerCase","replace","isNovel","includes","mean","year","start_date","num_episodes","num_chapters","call","sData","asParameter","methode","login","$","param","headers","Authorization","settings","Accept","request","xhr","response","getThrowError","getErrorText","responseText","e","syncMode","helper","attributes","titles","canonicalTitle","values","slug","posterImage","small","original","imageBanner","coverImage","subtype","averageRating","startDate","episodeCount","chapterCount","query","toUpperCase","variables","j","each","results","userPreferred","siteUrl","idMal","extraLarge","bannerImage","format","averageScore","episodes","chapters","q","ids","simkl_id","simklId","extended","mal","poster","parameter","limit","map","russian","filter","preview","kind","aired_on","normalSearch","searchterm","dbEntry","database","searchFuse","anime","manga","localListEl","tempList","minMatchCharLength","threshold","keys","route","router","result","s","parameters","miniMALSearch","newValue","params","searchTerm","listTheme","formatItem","spacer","width","transition","component"],"sourceRoot":""}