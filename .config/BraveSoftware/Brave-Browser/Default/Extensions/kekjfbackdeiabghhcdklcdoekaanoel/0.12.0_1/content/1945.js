"use strict";(self.webpackChunkMALSync=self.webpackChunkMALSync||[]).push([[1945],{1945:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var n=t(20641),l=t(50953),s=t(53751),i=t(90033),o=t(75220),r=t(59805),u=t(94096),p=t(86255),d=t(60773),c=t(3507),m=t(66222),v=t(35336),g=t(39813),f=t(18221),y=t(17304),k=t(11312),h=t(26017);const w={class:"progress-text"},_=(0,n.pM)({__name:"media-status-dropdown",props:{modelValue:{type:Number,require:!0,default:null},color:{type:String,default:"blue"},rewatching:{type:Boolean,default:!0},type:{type:String,default:"anime"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,s=(0,n.EW)((()=>{const e=[7,1,2,3,4,6];return t.rewatching&&e.push(23),e.map((e=>({value:e,title:h.getStatusText(t.type,e)})))})),o=a,r=(0,l.KR)(t.modelValue);return(0,n.wB)(r,(e=>{o("update:modelValue",e)})),(0,n.wB)((()=>t.modelValue),(e=>{r.value=e})),(e,a)=>((0,n.uX)(),(0,n.Wv)(f.A,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),options:s.value,"align-items":"left"},{select:(0,n.k6)((e=>[(0,n.bF)(k.A,{tabindex:-1,animation:!1,padding:"pill"},{default:(0,n.k6)((()=>[(0,n.bF)(y.A,{status:e.value,"relative-height":!0},null,8,["status"]),(0,n.Lk)("span",w,(0,i.v_)(e.currentTitle),1)])),_:2},1024)])),option:(0,n.k6)((e=>[(0,n.bF)(y.A,{status:e.option.value},null,8,["status"]),(0,n.eW)(" "+(0,i.v_)(e.option.title),1)])),_:1},8,["modelValue","options"]))}});var b=t(66262);const x=(0,b.A)(_,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-147ff95a {\nto {\n    transform: translateX(100%);\n}\n}\nbutton[data-v-147ff95a] {\n  border-radius: 15px;\n}\n@media screen and (max-width: 499px) {\n.progress-text[data-v-147ff95a] {\n    display: none;\n}\n}\n"]],["__scopeId","data-v-147ff95a"],["__file","media-status-dropdown.vue"]]);var A=t(97024),R=t(7783);const W={key:0},E=(0,n.pM)({__name:"error-bookmarks",props:{listRequest:{type:Object,default:()=>({})}},setup:e=>(a,t)=>{const l=(0,n.gN)("dompurify-html");return!e.listRequest.loading&&e.listRequest.error?((0,n.uX)(),(0,n.Wv)(R.A,{key:0},{default:(0,n.k6)((()=>[e.listRequest.error.html?(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",W,null,512)),[[l,e.listRequest.error.html]]):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,i.v_)(e.listRequest.error.message||e.listRequest.error),1)],64))])),_:1})):(0,n.Q3)("v-if",!0)}}),F=(0,b.A)(E,[["__file","error-bookmarks.vue"]]);var L=t(49257),V=t(97920),C=t(80737),X=t(97453),S=t(26017),M=t(13647),q=t(78584);const B={class:"bookmarks"},Q=["title"],U={class:"select-icon"},T={class:"material-icons"},N={key:2,class:"material-icons sortPlaceholder"},K={class:"material-icons select-icon"},I={class:"material-icons select-icon"},$=(0,n.pM)({__name:"bookmarks",props:{type:{type:String,default:"anime"},state:{type:String,default:"2"}},setup(e){const a=(0,n.WQ)("rootWindow"),t=(0,n.WQ)("rootDocument"),y=(0,o.rd)(),h=e,w=(0,l.KR)({state:Number(h.state),type:h.type}),_=(0,l.KR)([]);(0,n.wB)((()=>h.type),(e=>{w.value.type=e})),(0,n.wB)((()=>w.value.type),(e=>{y.push({name:"Bookmarks",params:{type:e}}),e&&(0,p.KB)(e)})),(0,n.wB)((()=>h.state),(e=>{w.value.state=Number(e),e&&(0,p.v4)(Number(e))})),(0,n.wB)((()=>w.value.state),(e=>{y.push({name:"Bookmarks",params:{state:Number(e)}})}));const b=e=>{const a=X.x.getItem(`sort/${w.value.type}/${w.value.state}`);return a&&e.find((e=>e.value===a.replace("_asc","")))?a:"default"},R=(0,c.W)(w,(async e=>{_.value=[];const a=await(0,m.vS)(e.value.state,e.value.type);return a.setSort(b(a.getSortingOptions())),a.modes.cached=!0,a.getCached().then((e=>{_.value=e})),a.modes.initProgress=!0,a.initFrontendMode(),await a.getNextPage().catch((e=>{throw{e,html:a.errorMessage(e)}})),a})),W=(0,n.EW)((()=>_.value.length&&R.loading?_.value:R.data&&!R.loading?R.data.getTemplist():null)),E=e=>{const a=e;if(e.options){const t=e.options.u,n=e.options.r,l=e.options.c;l&&l.ep===e.watchedEp+1?a.streamUrl=l.url:n&&n.ep===e.watchedEp?a.streamUrl=n.url:t&&(a.streamUrl=t),a.streamUrl&&(a.streamIcon=S.favicon(a.streamUrl.split("/")[2]))}return e.fn.progress&&e.fn.progress.isAiring()&&(a.progressText=e.fn.progress.getAuto(),a.progressEp=e.fn.progress.getCurrentEpisode(),a.progress=e.fn.progress),a},$=A.R.map((e=>({value:e.icon,title:e.name}))),O=(0,n.EW)({get:()=>M.settings.get("bookMarksList"+("manga"===h.type?"Manga":"")),set(e){M.settings.set("bookMarksList"+("manga"===h.type?"Manga":""),e)}}),P=(0,n.EW)((()=>A.R.find((e=>e.icon===O.value))||A.R[0])),z=()=>{a.pageYOffset+a.innerHeight>t.documentElement.scrollHeight-600&&async function(){R.data&&!R.data.isLoading()&&await R.data.getNextPage()}()};(0,n.wB)((()=>R.data),(()=>z())),(0,n.n)((()=>{a.addEventListener("scroll",z)})),(0,n.Y4)((()=>{a.removeEventListener("scroll",z)})),(0,n.sV)((()=>{a.addEventListener("scroll",z)})),(0,n.hi)((()=>{a.removeEventListener("scroll",z)}));const D=(0,n.EW)((()=>(R.data?R.data.getSortingOptions(!0):[]).map((e=>({value:e.value,title:e.title,meta:{icon:e.icon,asc:e.asc}}))))),H=(0,n.EW)({get:()=>b(D.value),set(e){X.x.setItem(`sort/${w.value.type}/${w.value.state}`,e),R.execute()}}),Y={anime:[],manga:[]};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",B,[(0,n.bF)(d.A,{class:"controls"},{default:(0,n.k6)((()=>[(0,n.bF)(u.A,{modelValue:w.value.type,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.type=e),options:[{value:"anime",title:e.lang("Anime")},{value:"manga",title:e.lang("Manga")}]},null,8,["modelValue","options"]),(0,n.bF)(x,{modelValue:w.value.state,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value.state=e),type:w.value.type,rewatching:(0,l.R1)(R).data?(0,l.R1)(R).data?.seperateRewatching:23===w.value.state},null,8,["modelValue","type","rewatching"]),(0,n.bF)(k.A,{padding:"pill",onClick:a[2]||(a[2]=e=>{R.execute()})},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:"material-icons m-pill",title:e.lang("updateCheck_Refresh")},"refresh",8,Q)])),_:1}),6===w.value.state?((0,n.uX)(),(0,n.Wv)(k.A,{key:0,padding:"pill",onClick:a[3]||(a[3]=e=>async function(e,a){if(!Y[a].length){S.flashm("Loading");const e=await(0,m.vS)(6,a);await e.getCompleteList().then((async e=>{Y[a]=e})).catch((e=>{q.error(e)}))}if(Y[a].length>1){const e=Y[a][Math.floor(Math.random()*Y[a].length)].url,t=(0,C.q)(e);y.push({name:"Overview",params:t.path})}else S.flashm("List is too small!")}(0,w.value.type))},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.Lk)("div",{class:"material-icons m-pill",title:"random"},"shuffle",-1)]))),_:1})):(0,n.Q3)("v-if",!0),a[8]||(a[8]=(0,n.Lk)("div",{style:{"flex-grow":"1"}},null,-1)),D.value&&D.value.length?((0,n.uX)(),(0,n.Wv)(f.A,{key:1,modelValue:H.value,"onUpdate:modelValue":a[5]||(a[5]=e=>H.value=e),options:D.value,"align-items":"left","compare-func":(e,a)=>e.toString()===a.toString().replace("_asc","")},{select:(0,n.k6)((e=>[(0,n.Lk)("div",U,[e.meta.asc?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"material-icons",onClick:a[4]||(a[4]=(0,s.withModifiers)((e=>H.value.endsWith("_asc")?H.value=H.value.replace("_asc",""):H.value=H.value+"_asc"),["stop"]))},(0,i.v_)(H.value.endsWith("_asc")?"arrow_upward":"arrow_downward"),1)):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",T,(0,i.v_)(e.meta.icon||"filter_list"),1)])])),option:(0,n.k6)((e=>[(0,n.bF)(V.A,{icon:e.option.meta.icon},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.option.title),1)])),_:2},1032,["icon"])])),_:1},8,["modelValue","options","compare-func"])):((0,n.uX)(),(0,n.CE)("span",N,"filter_list")),(0,n.bF)(f.A,{modelValue:O.value,"onUpdate:modelValue":a[6]||(a[6]=e=>O.value=e),options:(0,l.R1)($),"align-items":"left",direction:"row",size:"small"},{select:(0,n.k6)((()=>[(0,n.Lk)("span",K,(0,i.v_)(P.value.icon),1)])),option:(0,n.k6)((e=>[(0,n.Lk)("span",I,(0,i.v_)(e.option.value),1)])),_:1},8,["modelValue","options"])])),_:1}),(0,l.R1)(R).error?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[W.value?((0,n.uX)(),(0,n.Wv)(d.A,{key:0,spacer:"double",class:(0,i.C4)(["grid",{cached:_.value.length&&(0,l.R1)(R).loading}])},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(v.A,{key:P.value.name,"min-width":P.value.width,"min-width-popup":P.value.popupWidth,class:(0,i.C4)(["grid-el",`type-${P.value.name.replace(" ","-").toLowerCase()}`])},{default:(0,n.k6)((()=>[(0,n.bF)(g.A,{"delay-duration":P.value.transition},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(W.value,(e=>((0,n.uX)(),(0,n.Wv)((0,n.$y)(P.value.component),{key:e.uid,item:E(e)},null,8,["item"])))),128))])),_:1},8,["delay-duration"])])),_:1},8,["min-width","min-width-popup","class"]))])),_:1},8,["class"])):(0,n.Q3)("v-if",!0),(0,l.R1)(R).loading||!W.value||W.value.length?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(d.A,{key:1,class:"spinner-wrap"},{default:(0,n.k6)((()=>[(0,n.bF)(L.A)])),_:1})),(0,l.R1)(R).loading?((0,n.uX)(),(0,n.Wv)(d.A,{key:2,class:"spinner-wrap"},{default:(0,n.k6)((()=>[(0,n.bF)(r.A)])),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(s.Transition,{duration:100},{default:(0,n.k6)((()=>[(0,l.R1)(R).loading||!(0,l.R1)(R).data||(0,l.R1)(R).data.isDone()?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(d.A,{key:0,class:"spinner-wrap"},{default:(0,n.k6)((()=>[(0,n.bF)(r.A)])),_:1}))])),_:1})],64)),(0,n.bF)(F,{"list-request":(0,l.R1)(R)},null,8,["list-request"])]))}}),O=(0,b.A)($,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-1aa53746 {\nto {\n    transform: translateX(100%);\n}\n}\n.bookmarks[data-v-1aa53746] {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n.spinner-wrap[data-v-1aa53746] {\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n}\n.controls[data-v-1aa53746] {\n  display: flex;\n  gap: var(--size-spacer-half);\n  flex-wrap: wrap;\n  min-height: 30px;\n}\n.grid[data-v-1aa53746] {\n  transition: filter 0.4s, opacity 0.4s;\n}\n.grid.cached[data-v-1aa53746] {\n  opacity: 0.4;\n  filter: grayscale(1);\n  transition: none;\n}\n.grid .grid-el.type-tiles[data-v-1aa53746] {\n  gap: 20px;\n}\n@media screen and (max-width: 600px) {\n.grid .grid-el.type-tiles[data-v-1aa53746] {\n    gap: var(--size-spacer);\n}\n}\n.sortPlaceholder[data-v-1aa53746] {\n  padding-top: 3px;\n  pointer-events: not-allowed;\n}\n.select-icon[data-v-1aa53746] {\n  display: flex;\n}\n@media screen and (max-width: 600px) {\n.m-pill[data-v-1aa53746] {\n    font-size: 20px;\n}\n}\n"]],["__scopeId","data-v-1aa53746"],["__file","bookmarks.vue"]])}}]);
//# sourceMappingURL=1945.js.map