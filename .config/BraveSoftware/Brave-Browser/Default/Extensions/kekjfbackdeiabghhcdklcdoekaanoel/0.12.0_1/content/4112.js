"use strict";(self.webpackChunkMALSync=self.webpackChunkMALSync||[]).push([[4112],{35336:(t,e,n)=>{n.d(e,{A:()=>l});var s=n(20641),i=n(53751),a=n(90033);const o=(0,s.pM)({__name:"grid",props:{minWidth:{type:Number,default:100},minWidthPopup:{type:Number,default:null}},setup(t){(0,i.useCssVars)((t=>({"8eeca9dc":n.value,"122f4aae":o.value})));const e=t,n=(0,s.EW)((()=>`${e.minWidth}px`)),o=(0,s.EW)((()=>e.minWidthPopup?`${e.minWidthPopup}px`:n.value));return(e,n)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,a.C4)({grid:t.minWidth})},[(0,s.RG)(e.$slots,"default")],2))}}),l=(0,n(66262).A)(o,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-e44a7ed8 {\nto {\n    transform: translateX(100%);\n}\n}\n.grid[data-v-e44a7ed8] {\n  display: grid;\n  grid-gap: var(--size-spacer);\n  grid-template-columns: repeat(auto-fill, minmax(var(--8eeca9dc), 1fr));\n}\n@media screen and (max-width: 600px) {\n.grid[data-v-e44a7ed8] {\n    grid-template-columns: repeat(auto-fill, minmax(var(--122f4aae), 1fr));\n}\n}\n"]],["__scopeId","data-v-e44a7ed8"],["__file","grid.vue"]])},34112:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Ze});var s=n(20641),i=n(90033),a=n(53751),o=n(82304),l=n(50953),r=n(81039),c=n(20545),p=n(3507),d=n(66222),g=n(59465),u=n(72702),m=n(97920),v=n(60773),f=n(37353),_=n(13647);const h={style:{width:"fit-content"}},y={class:"button-flex"},k=(0,s.pM)({__name:"settings-profile",props:{title:{type:String,required:!0}},setup(t){const e=(0,s.EW)((()=>({listObj:(0,d.IA)(_.settings.get("syncMode"))}))),n=(0,p.W)(e,(t=>{const{listObj:e}=t.value;return e.getUserObject().catch((t=>{if(t instanceof g.jH)return{username:"",picture:"error",href:""};throw t}))}),{cache:{prefix:"settings-profile",ttl:1e4,refetchTtl:36e5,keyFn:t=>t.value.listObj.name}}),a=(0,s.EW)((()=>n.loading?"loading":n.data&&!n.data.username?"noAuth":"auth"));return(t,o)=>((0,s.uX)(),(0,s.Wv)(v.A,{spacer:"full"},{default:(0,s.k6)((()=>[(0,s.bF)(r.A,{image:(0,l.R1)(n).data?.picture,href:(0,l.R1)(n).data?.href},{default:(0,s.k6)((()=>[(0,l.R1)(n).error?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(c.A,null,{default:(0,s.k6)((()=>o[2]||(o[2]=[(0,s.eW)(" Error ")]))),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(f.A,{to:{name:"Settings",params:{path:["tracking","syncMode"]}}},{default:(0,s.k6)((()=>[(0,s.bF)(m.A,{icon:"keyboard_arrow_down",position:"after",mode:"flex"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.value.listObj.name),1)])),_:1})])),_:1})]),(0,s.Lk)("div",null,(0,i.v_)((0,l.R1)(n).error),1)],64)):"auth"===a.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(c.A,null,{default:(0,s.k6)((()=>[(0,s.bF)(u.A,{href:(0,l.R1)(n).data?.href},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)((0,l.R1)(n).data.username),1)])),_:1},8,["href"])])),_:1}),(0,s.Lk)("div",h,[(0,s.bF)(f.A,{to:{name:"Settings",params:{path:["tracking","syncMode"]}}},{default:(0,s.k6)((()=>[(0,s.bF)(m.A,{icon:"keyboard_arrow_down",position:"after",mode:"flex"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_profile_logged_via",[e.value.listObj.name])),1)])),_:1})])),_:1})]),(0,s.Lk)("div",{class:"link-hover",onClick:o[0]||(o[0]=t=>{e.value.listObj.deauth().then((()=>{n.execute()})).catch((()=>{alert("Failed")}))})},[(0,s.bF)(m.A,{icon:"eject",position:"after",mode:"flex"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_profile_logout")),1)])),_:1})])],64)):"loading"===a.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[(0,s.bF)(c.A,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("Loading")),1)])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(f.A,{to:{name:"Settings",params:{path:["tracking","syncMode"]}}},{default:(0,s.k6)((()=>[(0,s.bF)(m.A,{icon:"keyboard_arrow_down",position:"after",mode:"flex"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.value.listObj.name),1)])),_:1})])),_:1})]),o[3]||(o[3]=(0,s.Lk)("div",null,"--",-1))],64)):"noAuth"===a.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:3},[(0,s.bF)(c.A,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_profile_no_login")),1)])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(f.A,{to:{name:"Settings",params:{path:["tracking","syncMode"]}}},{default:(0,s.k6)((()=>[(0,s.bF)(m.A,{icon:"keyboard_arrow_down",position:"after",mode:"flex"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.value.listObj.name),1)])),_:1})])),_:1})]),(0,s.Lk)("div",y,[(0,s.Lk)("div",{class:"link-hover",onClick:o[1]||(o[1]=t=>(0,l.R1)(n).execute())},[(0,s.bF)(m.A,{icon:"sync"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_profile_check")),1)])),_:1})]),(0,s.bF)(u.A,{href:e.value.listObj.authenticationUrl},{default:(0,s.k6)((()=>[(0,s.bF)(m.A,{icon:"login",class:"link-hover"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_Authenticate")),1)])),_:1})])),_:1},8,["href"])])],64)):(0,s.Q3)("v-if",!0)])),_:1},8,["image","href"])])),_:1}))}});var b=n(66262);const A=(0,b.A)(k,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-58323def {\nto {\n    transform: translateX(100%);\n}\n}\n.link-hover[data-v-58323def] {\n  cursor: pointer;\n  color: var(--cl-light-text);\n  width: fit-content;\n}\n.button-flex[data-v-58323def] {\n  display: flex;\n  gap: 15px;\n}\n"]],["__scopeId","data-v-58323def"],["__file","settings-profile.vue"]]);var w=n(95190),x=n(31481),S=n(71711),L=n(93215),F=n(97886),W=n(48374),T=n(61285),I=n(69555),C=n(7648),E=n(26542),D=n(91326),M=n(39678),X=n(26017),R=n(78584),K=n(13647);function P(t,e,n,s,i,a){N(t,i,!0);for(const t in e)N(e[t],i,!1);for(const t in i)Q(i[t]),O(i[t],a,s)}function V(t){if(X.isDomainMatching(t,"anilist.co"))return"ANILIST";if(X.isDomainMatching(t,"kitsu.app"))return"KITSU";if(X.isDomainMatching(t,"myanimelist.net"))return"MAL";if(X.isDomainMatching(t,"simkl.com"))return"SIMKL";if(X.isDomainMatching(t,"shikimori.one"))return"SHIKI";throw"Type not found"}function N(t,e,n=!1){for(let s=0;s<t.length;s++){const i=t[s];let a=e[i.malId];void 0===a&&(a={diff:!1,master:{},slaves:[]}),n?a.master=i:(i.diff={},a.slaves.push(i)),!Number.isNaN(i.malId)&&i.malId&&(e[i.malId]=a)}}function B(t){return["MAL","ANILIST","KITSU"].includes(V(t.url))}function $(t){return["MAL","ANILIST","KITSU","SHIKI"].includes(V(t.url))}function Q(t,e){if(t.master&&t.master.uid){const e=B(t.master),n=$(t.master);for(let s=0;s<t.slaves.length;s++){const i=t.slaves[s];i.score!==t.master.score&&(t.diff=!0,i.diff.score=t.master.score),i.watchedEp!==t.master.watchedEp&&(t.master.status===M.h.Completed?i.watchedEp!==i.totalEp&&(t.diff=!0,i.diff.watchedEp=i.totalEp):(t.diff=!0,i.diff.watchedEp=t.master.watchedEp)),"manga"===t.master.type&&i.readVol!==t.master.readVol&&(t.master.status===M.h.Completed?i.readVol!==i.totalVol&&(t.diff=!0,i.diff.readVol=i.totalVol):(t.diff=!0,i.diff.readVol=t.master.readVol)),i.status!==t.master.status&&(t.diff=!0,i.diff.status=t.master.status),e&&B(i)&&(i.startDate!==t.master.startDate&&(t.diff=!0,i.diff.startDate=t.master.startDate),i.finishDate!==t.master.finishDate&&(t.diff=!0,i.diff.finishDate=t.master.finishDate)),n&&$(i)&&(i.rewatchCount??0)!==(t.master.rewatchCount??0)&&(t.diff=!0,i.diff.rewatchCount=t.master.rewatchCount??0)}}}function O(t,e,n,s){if(t.master&&t.master.uid){const s=[];s.push(V(t.master.url));for(let e=0;e<t.slaves.length;e++){const n=t.slaves[e];s.push(V(n.url))}for(const i in n){const a=n[i];if(!s.includes(a)){const n={title:t.master.title,type:t.master.type,syncType:a,malId:t.master.malId,score:t.master.score,watchedEp:t.master.watchedEp,status:t.master.status,startDate:t.master.startDate,finishDate:t.master.finishDate,rewatchCount:t.master.rewatchCount,url:`https://myanimelist.net/${t.master.type}/${t.master.malId}`,error:null};"manga"===t.master.type&&(n.readVol=t.master.readVol),e.push(n)}}}}async function j(t,e){for(const e in t){const n=t[e];if(n.diff)try{await U(n),n.diff=!1}catch(t){R.error(t)}}const n=e.slice();for(const t in n){const s=n[t];R.log("Sync missing",s),await z(s).then((()=>{e.splice(e.indexOf(s),1)})).catch((t=>{R.error("Error",t),s.error=t}))}}async function U(t){for(let e=0;e<t.slaves.length;e++){const n=t.slaves[e];R.log("sync list item",n),await H(n,V(n.url))}}async function z(t){return t.diff={score:t.score,watchedEp:t.watchedEp,status:t.status,startDate:t.startDate,finishDate:t.finishDate,rewatchCount:t.rewatchCount},"manga"===t.type&&(t.diff.readVol=t.readVol),H(t,t.syncType)}function H(t,e){if(0!==Object.keys(t.diff).length){let n;if("MAL"===e)n=new w.v(t.url);else if("ANILIST"===e)n=new x.v(t.url);else if("KITSU"===e)n=new S.v(t.url);else if("SIMKL"===e)n=new L.v(t.url);else{if("SHIKI"!==e)throw"No sync type";n=new F.v(t.url)}return n.setSyncMethod("listSync"),n.update().then((()=>(void 0!==t.diff.score&&n.setScore(t.diff.score),void 0!==t.diff.watchedEp&&n.setEpisode(t.diff.watchedEp),void 0!==t.diff.readVol&&n.setVolume(t.diff.readVol),void 0!==t.diff.status&&n.setStatus(t.diff.status),void 0!==t.diff.startDate&&n.setStartDate(t.diff.startDate),void 0!==t.diff.finishDate&&n.setFinishDate(t.diff.finishDate),void 0!==t.diff.rewatchCount&&n.setRewatchCount(t.diff.rewatchCount),n.sync()))).then((()=>X.wait(3e3))).catch((async t=>{throw await X.wait(3e3),t}))}}async function q(t,e,n){const s=[],i=(0,D.$)(e),a="MALAPI"===i?"MAL":i,o=[];t.forEach((t=>{t.providerSettings.text=K.storage.lang("Loading"),o.push(n(t.listProvider,e).then((e=>{t.providerSettings.list=e,t.providerSettings.text=K.storage.lang("settings_listsync_provider_done"),a===t.providerType&&(t.providerSettings.master=!0),s.push(t.providerType)})).catch((e=>{t.providerSettings.text=e})))})),await Promise.all(o);let l=!1;const r=[];return t.forEach((function(t){t.providerSettings.master?l=t.providerSettings.list:null!==t.providerSettings.list&&r.push(t.providerSettings.list)})),{master:l,slaves:r,typeArray:s}}function J(t){return[{providerType:"MAL",providerSettings:t.mal,listProvider:W.w},{providerType:"ANILIST",providerSettings:t.anilist,listProvider:T.w},{providerType:"KITSU",providerSettings:t.kitsu,listProvider:I.w},{providerType:"SIMKL",providerSettings:t.simkl,listProvider:C.w},{providerType:"SHIKI",providerSettings:t.shiki,listProvider:E.w}]}function G(t,e){const n=new t(7,e);return n.getCompleteList().then((t=>t)).catch((t=>{throw R.m(n.name).error(t),n.errorMessage(t)}))}const Y={isEnabled:async()=>K.storage.get("backgroundListSync").then((async function(t){return R.info("background list sync state",t),!(!t||t.mode!==await K.settings.getAsync("syncMode"))||(Y.disable(),!1)})),enable:async()=>K.storage.set("backgroundListSync",{mode:await K.settings.getAsync("syncMode")}),disable:()=>K.storage.remove("backgroundListSync"),async sync(){return await Y.isEnabled()?(R.log("Start Background list Sync"),Z("♻"),t("anime").then((()=>t("manga"))).then((()=>{Z("")})).catch((t=>{R.error(t),Z("")}))):(R.error("Background list Sync not allowed"),[]);async function t(t){const e={},n=[],s=J({mal:{text:"Init",list:null,master:!1},anilist:{text:"Init",list:null,master:!1},kitsu:{text:"Init",list:null,master:!1},simkl:{text:"Init",list:null,master:!1},shiki:{text:"Init",list:null,master:!1}}),i=await q(s,t,G);P(i.master,i.slaves,0,i.typeArray,e,n),R.log("Start syncing",e,n),await j(e,n)}}};function Z(t){if("userscript"!==K.type)try{chrome.action.setBadgeText({text:t})}catch(t){R.error(t)}}var tt=n(26017),et=n(37256),nt=n(94096),st=n(11312),it=n(59805),at=n(5139),ot=n(95122),lt=n(84731),rt=n(41001),ct=n(76351),pt=n(35336),dt=n(13647);const gt={class:"list-sync"},ut={class:"provider-section"},mt={key:1,class:"provider-item-header"},vt={class:"listDiff-inner"},ft={key:0},_t={key:0},ht={class:"highlight"},yt={key:0},kt={class:"highlight"},bt={key:0},At={key:0},wt={class:"highlight"},xt={key:0},St={class:"highlight"},Lt={key:0},Ft={class:"highlight"},Wt={key:0},Tt={class:"highlight"},It={key:0},Ct={class:"highlight"},Et={class:"missing-item"},Dt={key:0},Mt=(0,s.pM)({__name:"settings-list-sync",props:{title:{type:String,required:!0}},setup(t){const e=(0,l.KR)(null),n=(0,l.KR)(!1),a=(0,l.KR)(0),o=(0,l.KR)({type:"anime"}),r=(0,p.W)(o,(async t=>{n.value=!1,a.value=0;const s=(0,l.Kh)({mal:{text:"Init",list:null,master:!1},anilist:{text:"Init",list:null,master:!1},kitsu:{text:"Init",list:null,master:!1},simkl:{text:"Init",list:null,master:!1},shiki:{text:"Init",list:null,master:!1}});e.value=J({mal:s.mal,anilist:s.anilist,kitsu:s.kitsu,simkl:s.simkl,shiki:s.shiki});const i=await q(e.value,t.value.type,G),o=[],r=[];return P(i.master,i.slaves,0,i.typeArray,o,r),{list:o,missing:r,missingGroupBy:Object.values(Object.groupBy(r,(({malId:t})=>t)))}})),d=(0,s.EW)((()=>{const t={};if(r.loading||!r.data)return t;for(const e in r.data.list)Object.prototype.hasOwnProperty.call(r.data.list,e)&&r.data.list[e].diff&&(t[e]=r.data.list[e]);return t})),g=(0,s.EW)((()=>d.value&&r.data?Object.keys(d.value).length+r.data.missing.filter((t=>!t.error)).length:0)),m=(0,l.KR)(!1);async function f(){m.value=await Y.isEnabled()}const _=(0,s.EW)({get:()=>m.value,set(t){t?Y.enable().finally(f):Y.disable().finally(f)}});return f(),(t,p)=>{const m=(0,s.gN)("dompurify-html");return(0,s.uX)(),(0,s.CE)("div",gt,["webextension"===dt.type?((0,s.uX)(),(0,s.Wv)(lt.A,{key:0,component:"checkbox",title:t.lang("settings_listsync_background")},{component:(0,s.k6)((()=>[(0,s.bF)(rt.A,{modelValue:_.value,"onUpdate:modelValue":p[0]||(p[0]=t=>_.value=t)},null,8,["modelValue"])])),_:1},8,["title"])):(0,s.Q3)("v-if",!0),(0,s.bF)(v.A,{spacer:"half",direction:"both"},{default:(0,s.k6)((()=>[(0,s.bF)(et.A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.bF)(u.A,{color:"secondary",href:"https://github.com/MALSync/MALSync/wiki/List-Sync"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_more_info")),1)])),_:1})])])),_:1})])),_:1}),(0,s.bF)(et.A,{class:"list-sync provider"},{default:(0,s.k6)((()=>[(0,s.bF)(v.A,null,{default:(0,s.k6)((()=>[(0,s.bF)(nt.A,{modelValue:o.value.type,"onUpdate:modelValue":p[1]||(p[1]=t=>o.value.type=t),options:[{value:"anime",title:t.lang("Anime")},{value:"manga",title:t.lang("Manga")}]},null,8,["modelValue","options"])])),_:1}),(0,s.Lk)("div",ut,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Object.values(e.value),(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.providerType,class:"provider-item"},[e.providerSettings.master?((0,s.uX)(),(0,s.Wv)(st.A,{key:0,animation:!1,color:"secondary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_master")),1)])),_:1})):"Done"===e.providerSettings.text?((0,s.uX)(),(0,s.CE)("div",mt,[(0,s.bF)(st.A,{animation:!1,color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_slave")),1)])),_:1}),"Done"!==e.providerSettings.text||e.providerSettings.master?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.Wv)(st.A,{key:0,animation:!1,color:"secondary",onClick:t=>{(new(0,e.listProvider)).deauth().then((()=>{r.execute()})).catch((()=>{alert("Failed")}))}},{default:(0,s.k6)((()=>p[3]||(p[3]=[(0,s.Lk)("b",null,"X",-1)]))),_:2},1032,["onClick"]))])):(0,s.Q3)("v-if",!0),(0,s.bF)(st.A,{animation:!1,class:"provider-item-content"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,i.v_)(e.providerType),1),(0,s.bo)((0,s.Lk)("div",null,null,512),[[m,e.providerSettings.text]]),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_list"))+" "+(0,i.v_)(e.providerSettings.list?e.providerSettings.list.length:"??"),1)])),_:2},1024)])))),128))])])),_:1}),(0,l.R1)(r).loading?((0,s.uX)(),(0,s.Wv)(et.A,{key:1,class:"spinner-wrap"},{default:(0,s.k6)((()=>[(0,s.bF)(it.A)])),_:1})):(0,s.Q3)("v-if",!0),!(0,l.R1)(r).loading&&(0,l.R1)(r).data?((0,s.uX)(),(0,s.Wv)(v.A,{key:2},{default:(0,s.k6)((()=>[(0,s.bF)(et.A,null,{default:(0,s.k6)((()=>[n.value?((0,s.uX)(),(0,s.Wv)(v.A,{key:1,spacer:"half"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_syncinprogress"))+" ",1),(0,s.bF)(ot.A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("strong",null,(0,i.v_)(a.value-g.value)+" / "+(0,i.v_)(a.value),1)])),_:1})])),_:1})):((0,s.uX)(),(0,s.Wv)(v.A,{key:0,spacer:"half"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_itemcount"))+" ",1),(0,s.bF)(ot.A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("strong",null,(0,i.v_)(g.value),1)])),_:1})])),_:1})),!(0,l.R1)(r).loading&&(0,l.R1)(r).data?((0,s.uX)(),(0,s.Wv)(st.A,{key:2,color:"primary",disabled:n.value,onClick:p[2]||(p[2]=t=>n.value?"":(n.value=!0,a.value=g.value,void j(r.data.list,r.data.missing)))},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_syncbutton")),1)])),_:1},8,["disabled"])):(0,s.Q3)("v-if",!0)])),_:1})])),_:1})):(0,s.Q3)("v-if",!0),!(0,l.R1)(r).loading&&d.value?((0,s.uX)(),(0,s.Wv)(v.A,{key:3},{default:(0,s.k6)((()=>[(0,s.bF)(c.A,{spacer:"half"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_updates")),1)])),_:1}),(0,s.bF)(at.A,{height:500},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,((e,n)=>((0,s.uX)(),(0,s.Wv)(v.A,{key:n,spacer:"half"},{default:(0,s.k6)((()=>[(0,s.bF)(et.A,{class:"listDiff"},{default:(0,s.k6)((()=>[(0,s.bF)(c.A,{spacer:"half"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.master.title),1)])),_:2},1024),(0,s.Lk)("div",vt,[(0,s.bF)(st.A,{animation:!1},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(n),1)])),_:2},1024),e.master&&e.master.uid?((0,s.uX)(),(0,s.Wv)(st.A,{key:0,animation:!1,color:"secondary",class:"master"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,i.v_)(V(e.master.url)),1),(0,s.Lk)("div",null,[p[4]||(p[4]=(0,s.eW)(" ID: ")),(0,s.bF)(u.A,{href:e.master.url},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.master.uid),1)])),_:2},1032,["href"])]),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_score"))+" "+(0,i.v_)(e.master.score),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang(`settings_listsync_progress_${e.master.type}`))+" "+(0,i.v_)(e.master.watchedEp),1),"manga"===e.master.type?((0,s.uX)(),(0,s.CE)("div",ft,(0,i.v_)(t.lang("settings_listsync_volume"))+" "+(0,i.v_)(e.master.readVol),1)):(0,s.Q3)("v-if",!0),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_status"))+" "+(0,i.v_)((0,l.R1)(tt.getStatusText)(e.master.type,e.master.status)),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_startdate"))+" "+(0,i.v_)(e.master.startDate?new((0,l.R1)(ct.zy))(e.master.startDate).getDateTimeText():t.lang("settings_listsync_unknowndate")),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_finishdate"))+" "+(0,i.v_)(e.master.finishDate?new((0,l.R1)(ct.zy))(e.master.finishDate).getDateTimeText():t.lang("settings_listsync_unknowndate")),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang(`settings_listsync_repeatcount_${e.master.type}`))+" "+(0,i.v_)(e.master.rewatchCount??0),1)])),_:2},1024)):(0,s.Q3)("v-if",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.slaves,(e=>((0,s.uX)(),(0,s.Wv)(st.A,{key:e.uid,animation:!1,class:"slave"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,i.v_)(V(e.url)),1),(0,s.Lk)("div",null,[p[5]||(p[5]=(0,s.eW)(" ID: ")),(0,s.bF)(u.A,{href:e.url,color:"secondary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.uid),1)])),_:2},1032,["href"])]),(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_score"))+" "+(0,i.v_)(e.score)+" ",1),e.diff&&void 0!==e.diff.score?((0,s.uX)(),(0,s.CE)("span",_t,[p[6]||(p[6]=(0,s.eW)(" → ")),(0,s.Lk)("text",ht,(0,i.v_)(e.diff.score),1)])):(0,s.Q3)("v-if",!0)]),(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.lang(`settings_listsync_progress_${e.type}`))+" "+(0,i.v_)(e.watchedEp)+" ",1),e.diff&&void 0!==e.diff.watchedEp?((0,s.uX)(),(0,s.CE)("span",yt,[p[7]||(p[7]=(0,s.eW)(" → ")),(0,s.Lk)("text",kt,(0,i.v_)(e.diff.watchedEp),1)])):(0,s.Q3)("v-if",!0)]),"manga"===e.type?((0,s.uX)(),(0,s.CE)("div",bt,[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_volume"))+" "+(0,i.v_)(e.readVol)+" ",1),e.diff&&void 0!==e.diff.readVol?((0,s.uX)(),(0,s.CE)("span",At,[p[8]||(p[8]=(0,s.eW)(" → ")),(0,s.Lk)("text",wt,(0,i.v_)(e.diff.readVol),1)])):(0,s.Q3)("v-if",!0)])):(0,s.Q3)("v-if",!0),(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_status"))+" "+(0,i.v_)((0,l.R1)(tt.getStatusText)(e.type,e.status))+" ",1),e.diff&&void 0!==e.diff.status?((0,s.uX)(),(0,s.CE)("span",xt,[p[9]||(p[9]=(0,s.eW)(" → ")),(0,s.Lk)("text",St,(0,i.v_)((0,l.R1)(tt.getStatusText)(e.type,e.diff.status)),1)])):(0,s.Q3)("v-if",!0)]),(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_startdate"))+" "+(0,i.v_)(e.startDate?new((0,l.R1)(ct.zy))(e.startDate).getDateTimeText():t.lang("settings_listsync_unknowndate"))+" ",1),e.diff&&void 0!==e.diff.startDate?((0,s.uX)(),(0,s.CE)("span",Lt,[p[10]||(p[10]=(0,s.eW)(" → ")),(0,s.Lk)("text",Ft,(0,i.v_)(e.diff.startDate?new((0,l.R1)(ct.zy))(e.diff.startDate).getDateTimeText():t.lang("settings_listsync_unknowndate")),1)])):(0,s.Q3)("v-if",!0)]),(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_finishdate"))+" "+(0,i.v_)(e.finishDate?new((0,l.R1)(ct.zy))(e.finishDate).getDateTimeText():t.lang("settings_listsync_unknowndate"))+" ",1),e.diff&&void 0!==e.diff.finishDate?((0,s.uX)(),(0,s.CE)("span",Wt,[p[11]||(p[11]=(0,s.eW)(" → ")),(0,s.Lk)("text",Tt,(0,i.v_)(e.diff.finishDate?new((0,l.R1)(ct.zy))(e.diff.finishDate).getDateTimeText():t.lang("settings_listsync_unknowndate")),1)])):(0,s.Q3)("v-if",!0)]),(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.lang(`settings_listsync_repeatcount_${e.type}`))+" "+(0,i.v_)(e.rewatchCount??0)+" ",1),e.diff&&void 0!==e.diff.rewatchCount?((0,s.uX)(),(0,s.CE)("span",It,[p[12]||(p[12]=(0,s.eW)(" → ")),(0,s.Lk)("text",Ct,(0,i.v_)(e.diff.rewatchCount),1)])):(0,s.Q3)("v-if",!0)])])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):(0,s.Q3)("v-if",!0),!(0,l.R1)(r).loading&&(0,l.R1)(r).data&&(0,l.R1)(r).data.missingGroupBy.length?((0,s.uX)(),(0,s.Wv)(v.A,{key:4},{default:(0,s.k6)((()=>[(0,s.bF)(c.A,{spacer:"half"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_listsync_missing")),1)])),_:1}),(0,s.bF)(at.A,{height:500},{default:(0,s.k6)((()=>[(0,s.bF)(pt.A,{"min-width":250},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,l.R1)(r).data.missingGroupBy,((e,n)=>((0,s.uX)(),(0,s.Wv)(v.A,{key:n,spacer:"half"},{default:(0,s.k6)((()=>[(0,s.bF)(et.A,{class:"missing"},{default:(0,s.k6)((()=>[(0,s.bF)(c.A,{spacer:"half"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e[0].title),1)])),_:2},1024),(0,s.Lk)("div",Et,[(0,s.bF)(st.A,{animation:!1},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[p[13]||(p[13]=(0,s.eW)(" ID: ")),(0,s.bF)(u.A,{href:e[0].url,color:"secondary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e[0].malId),1)])),_:2},1032,["href"])]),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_score"))+" "+(0,i.v_)(e[0].score),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang(`settings_listsync_progress_${e[0].type}`))+" "+(0,i.v_)(e[0].watchedEp),1),"manga"===e[0].type?((0,s.uX)(),(0,s.CE)("div",Dt,(0,i.v_)(t.lang("settings_listsync_volume"))+" "+(0,i.v_)(e[0].readVol),1)):(0,s.Q3)("v-if",!0),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_status"))+" "+(0,i.v_)((0,l.R1)(tt.getStatusText)(e[0].type,e[0].status)),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_startdate"))+" "+(0,i.v_)(e[0].startDate?new((0,l.R1)(ct.zy))(e[0].startDate).getDateTimeText():t.lang("settings_listsync_unknowndate")),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_listsync_finishdate"))+" "+(0,i.v_)(e[0].finishDate?new((0,l.R1)(ct.zy))(e[0].finishDate).getDateTimeText():t.lang("settings_listsync_unknowndate")),1),(0,s.Lk)("div",null,(0,i.v_)(t.lang(`settings_listsync_repeatcount_${e[0].type}`))+" "+(0,i.v_)(e[0].rewatchCount??0),1)])),_:2},1024),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(t=>((0,s.uX)(),(0,s.Wv)(st.A,{key:t.malId,animation:!1},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,i.v_)(t.syncType),1),t.error?((0,s.uX)(),(0,s.Wv)(st.A,{key:0,animation:!1,color:"secondary",padding:"mini"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.error),1)])),_:2},1024)):(0,s.Q3)("v-if",!0)])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,s.Q3)("v-if",!0)])}}}),Xt=(0,b.A)(Mt,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-322436ec {\nto {\n    transform: translateX(100%);\n}\n}\n.list-sync[data-v-322436ec] {\n  margin: var(--size-spacer-half) 0;\n}\n.provider-item[data-v-322436ec] {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n.provider-item-content[data-v-322436ec] {\n  display: flex !important;\n  flex-direction: column;\n  gap: 5px;\n}\n.provider-item-header[data-v-322436ec] {\n  gap: 3px;\n  display: flex;\n}\n.provider-section[data-v-322436ec] {\n  align-items: end;\n  display: flex;\n  flex-wrap: wrap;\n  grid-gap: 5px;\n}\n.provider-section[data-v-322436ec] a {\n  color: var(--cl-secondary);\n}\n.listDiff .listDiff-inner[data-v-322436ec] {\n  display: flex;\n  gap: 5px;\n}\n.listDiff .highlight[data-v-322436ec] {\n  background-color: var(--cl-primary);\n  padding-left: 5px;\n  padding-right: 5px;\n  border-radius: 5px;\n}\n.missing[data-v-322436ec] {\n  width: 100%;\n  height: 100%;\n}\n.missing[data-v-322436ec] > * {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: space-between;\n}\n.missing > * .missing-item[data-v-322436ec] {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n"]],["__scopeId","data-v-322436ec"],["__file","settings-list-sync.vue"]]);var Rt=n(83006),Kt=n(66550);const Pt={class:"color-preview"},Vt={class:"main-colors"},Nt=(0,s.pM)({__name:"color-preview",setup(t){const e=[{name:"background",colors:["text","light-text","primary","secondary","backdrop","border-hover"]},{name:"foreground",colors:["text","light-text","primary","border-hover"]},{name:"foreground-solid",colors:["text","light-text"]},{name:"backdrop",colors:["secondary"]},{name:"primary",colors:["white-text"]},{name:"primary-dark",colors:["white-text"]},{name:"secondary",colors:["white-text"]},{name:"dark-background",colors:["white-text"]}],n=["background","foreground","foreground-solid"],a=[0,1,2,3,4,6,23];return(t,o)=>((0,s.uX)(),(0,s.CE)("div",Pt,[(0,s.Lk)("div",Vt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(e,(t=>(0,s.Lk)("div",{key:t.name,class:"top-color",style:(0,i.Tr)(`background-color: var(--cl-${t.name})`)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.colors,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"sub-colors",style:(0,i.Tr)(`background-color: var(--cl-${t})`)},null,4)))),128))],4))),64)),((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(a,(t=>(0,s.Lk)("div",{key:t,class:"top-color",style:(0,i.Tr)(`background-color: var(--state-${t})`)},[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(n,(t=>(0,s.Lk)("div",{key:t,class:"sub-colors",style:(0,i.Tr)(`background-color: var(--cl-${t})`)},null,4))),64))],4))),64))])]))}}),Bt=(0,b.A)(Nt,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-ac3bc944 {\nto {\n    transform: translateX(100%);\n}\n}\n.color-preview[data-v-ac3bc944] {\n  border: 1px solid var(--cl-backdrop);\n  margin: var(--size-spacer-half) 0;\n}\n.color-preview .main-colors[data-v-ac3bc944],\n.color-preview .state-colors[data-v-ac3bc944] {\n  display: flex;\n}\n.color-preview .top-color[data-v-ac3bc944] {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 5px;\n  min-height: 95px;\n  padding: 5px;\n}\n.color-preview .sub-colors[data-v-ac3bc944] {\n  --cl-white-text: white;\n  width: 100%;\n  max-width: 20px;\n  height: 10px;\n  border-radius: 10px;\n}\n"]],["__scopeId","data-v-ac3bc944"],["__file","color-preview.vue"]]);var $t=n(76186),Qt=n(13647);const Ot=[{key:"theme",title:()=>Qt.storage.lang("settings_miniMAL_theme"),props:()=>({component:"dropdown",option:"theme",props:{options:[{title:Qt.storage.lang("settings_theming_theme_system"),value:"auto"},{title:Qt.storage.lang("settings_theming_theme_light"),value:"light"},{title:Qt.storage.lang("settings_theming_theme_dark"),value:"dark"},...$t.m0,{title:Qt.storage.lang("settings_theming_theme_custom"),value:"custom"}]}}),component:lt.A},{key:"sidebars",title:()=>Qt.storage.lang("settings_theming_sidebars"),props:{component:"checkbox",option:"themeSidebars"},component:lt.A},{key:"color",title:()=>Qt.storage.lang("settings_theming_color"),props:{component:"colorPicker",option:"themeColor"},condition:()=>"custom"===Qt.settings.get("theme"),component:lt.A},{key:"image",title:()=>Qt.storage.lang("settings_theming_background_image"),props:{component:"input",option:"themeImage",props:{clearIcon:!0,placeholder:"url",simplePlaceholder:!0}},condition:()=>"custom"===Qt.settings.get("theme"),component:lt.A},{key:"opacity",title:()=>Qt.storage.lang("settings_theming_background_opacity"),props:{component:"slider",option:"themeOpacity",props:{max:100}},condition:()=>"custom"===Qt.settings.get("theme")&&Qt.settings.get("themeImage"),component:lt.A},{key:"colorPreview",title:"Color Preview",condition:()=>"custom"===Qt.settings.get("theme"),component:Bt}];var jt=n(98359),Ut=n(56285),zt=n(18221),Ht=n(7916),qt=n(21809),Jt=n(13647);const Gt={key:0},Yt={key:1},Zt=(0,s.pM)({__name:"settings-custom-domains",props:{title:{type:String,required:!0}},setup(t){const e=(0,Ut.Yg)().map((t=>({title:t.title,value:t.key}))),n=(0,l.KR)([]),a=(0,s.EW)({get:()=>Jt.settings.get("customDomains"),set(t){Jt.settings.set("customDomains",t)}});function o(t){return(0,jt.Z_)(t)}(0,s.wB)(a,(t=>{n.value=JSON.parse(JSON.stringify(t))}),{immediate:!0});const r=(0,l.KR)(!1);async function c(){r.value=await(0,Ut.RS)(n.value)}(0,s.wB)(n,(()=>{c()}),{immediate:!0,deep:!0});const p=(0,s.EW)((()=>n.value.every((t=>o(t.domain)&&t.page))));return(t,d)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(v.A,{spacer:"half",direction:"both"},{default:(0,s.k6)((()=>[(0,s.bF)(et.A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,(0,i.v_)(t.lang("settings_custom_domains_disclaimer")),1),(0,s.Lk)("div",null,[(0,s.bF)(u.A,{color:"secondary",href:"https://github.com/MALSync/MALSync/wiki/Custom-Domains"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_more_info")),1)])),_:1})])])),_:1})])),_:1}),(0,s.bF)(et.A,{class:"custom"},{default:(0,s.k6)((()=>[n.value.length?((0,s.uX)(),(0,s.Wv)(v.A,{key:0,class:"grid",spacer:"half"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,((t,i)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:i},[(0,s.bF)(st.A,{class:"close-item",onClick:t=>(t=>{n.value.splice(t,1)})(i)},{default:(0,s.k6)((()=>d[2]||(d[2]=[(0,s.Lk)("div",{class:"material-icons"},"close",-1)]))),_:2},1032,["onClick"]),(0,s.bF)(zt.A,{modelValue:t.page,"onUpdate:modelValue":e=>t.page=e,options:(0,l.R1)(e),disabled:t.auto,"align-items":"left",placeholder:"Select Page",class:"page-select select-items"},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),(0,s.bF)(Ht.A,{modelValue:t.domain,"onUpdate:modelValue":e=>t.domain=e,validation:o,disabled:t.auto,placeholder:"Domain",class:"select-items"},null,8,["modelValue","onUpdate:modelValue","disabled"])],64)))),128))])),_:1})):(0,s.Q3)("v-if",!0),(0,s.bF)(v.A,null,{default:(0,s.k6)((()=>[(0,s.bF)(st.A,{onClick:d[0]||(d[0]=t=>{n.value.push({domain:"",page:""})})},{default:(0,s.k6)((()=>d[3]||(d[3]=[(0,s.Lk)("div",{class:"material-icons"},"add",-1)]))),_:1})])),_:1}),(0,s.bF)(qt.A,null,{default:(0,s.k6)((()=>[p.value?r.value&&JSON.stringify(a.value)===JSON.stringify(n.value)?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("div",Yt,[(0,s.bF)(st.A,{color:"primary",onClick:d[1]||(d[1]=t=>(async()=>{a.value=JSON.parse(JSON.stringify(n.value)),await(0,Ut.uJ)(a.value),c()})())},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("Update")),1)])),_:1})])):((0,s.uX)(),(0,s.CE)("div",Gt,[(0,s.bF)(st.A,{color:"secondary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.lang("settings_custom_domains_wrong")),1)])),_:1})]))])),_:1})])),_:1})]))}}),te=(0,b.A)(Zt,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-5f9c0fa8 {\nto {\n    transform: translateX(100%);\n}\n}\n.custom[data-v-5f9c0fa8] {\n  margin: var(--size-spacer-half) 0;\n}\n.grid[data-v-5f9c0fa8] {\n  display: grid;\n  grid-template-columns: [col-start] auto [col-end] auto [col-end] auto;\n  justify-content: start;\n  gap: var(--size-spacer-half);\n  align-items: center;\n}\n@media screen and (max-width: 600px) {\n.select-items[data-v-5f9c0fa8] {\n    grid-column-start: col-end 1;\n    grid-column-end: col-end 3;\n}\n.close-item[data-v-5f9c0fa8] {\n    grid-row-start: span 2;\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n}\n.page-select[data-v-5f9c0fa8] {\n  min-width: 220px;\n}\n"]],["__scopeId","data-v-5f9c0fa8"],["__file","settings-custom-domains.vue"]]);var ee=n(16087),ne=n(13647);const se={key:"permissions",system:"webextension",title:()=>ne.storage.lang("settings_custom_domains_button"),component:ee.A},ie=[se,{key:"domains",title:()=>ne.storage.lang("settings_custom_domains_button"),component:te}];var ae=n(13647);const oe=[{key:"floatButtonStealth",title:()=>ae.storage.lang("settings_miniMAL_floatButtonStealth"),props:()=>({component:"checkbox",tooltip:ae.storage.lang("settings_miniMAL_floatButtonStealth_tooltip"),option:"floatButtonStealth"}),component:lt.A},{key:"minimizeBigPopup",title:()=>ae.storage.lang("settings_miniMAL_minimizeBigPopup"),props:()=>({component:"checkbox",tooltip:ae.storage.lang("settings_miniMAL_minimizeBigPopup_tooltip"),option:"minimizeBigPopup"}),component:lt.A},{key:"floatButtonHide",title:()=>ae.storage.lang("settings_miniMAL_floatButtonHide"),props:{component:"checkbox",option:"floatButtonHide"},component:lt.A},{key:"highlightAllEp",title:()=>ae.storage.lang("settings_highlightAllEp"),props:()=>({component:"checkbox",tooltip:ae.storage.lang("settings_highlightAllEp_Text"),option:"highlightAllEp"}),component:lt.A},{key:"checkForFiller",title:()=>ae.storage.lang("settings_filler"),system:"webextension",props:()=>({component:"checkbox",tooltip:ae.storage.lang("settings_filler_text"),option:"checkForFiller"}),component:lt.A},{key:"hr",title:"MyAnimeList",component:Rt.A},{key:"malThumbnail",title:()=>ae.storage.lang("settings_Thumbnails"),props:()=>({component:"dropdown",tooltip:ae.storage.lang("settings_Thumbnails_text"),option:"malThumbnail",props:{options:[{title:ae.storage.lang("settings_Thumbnails_Large"),value:"144"},{title:ae.storage.lang("settings_Thumbnails_Medium"),value:"100"},{title:ae.storage.lang("settings_Thumbnails_Small"),value:"60"},{title:ae.storage.lang("settings_Thumbnails_Default"),value:"0"}]}}),component:lt.A},{key:"friendScore",title:()=>ae.storage.lang("settings_FriendScore"),props:{component:"checkbox",option:"friendScore"},component:lt.A},{key:"hr",title:"Anilist",component:Rt.A},{key:"anilistUpdateUi",title:()=>ae.storage.lang("settings_anilist_update_ui"),props:()=>({component:"checkbox",tooltip:ae.storage.lang("settings_anilist_update_ui_tooltip"),option:"anilistUpdateUi"}),component:lt.A}];var le=n(13647);const re=[{key:"rpc",title:()=>le.storage.lang("settings_enabled"),props:{component:"checkbox",option:"rpc",infoLink:"https://github.com/MALSync/MALSync/wiki/Discord-Rich-Presence"},component:lt.A},{key:"presenceLargeImage",title:()=>le.storage.lang("settings_presence_largeimage"),props:()=>({component:"dropdown",option:"presenceLargeImage",props:{options:[{title:le.storage.lang("settings_presence_largeimage_cover"),value:"cover"},{title:le.storage.lang("settings_presence_largeimage_website"),value:"website"},{title:le.storage.lang("settings_presence_largeimage_malsync"),value:"malsync"}]}}),component:lt.A},{key:"presenceShowMalsync",title:()=>le.storage.lang("settings_presenceShowMalsync"),props:{component:"checkbox",option:"presenceShowMalsync"},component:lt.A},{key:"presenceShowButtons",title:()=>le.storage.lang("settings_presenceShowButtons"),props:{component:"checkbox",option:"presenceShowButtons"},component:lt.A}];var ce=n(59934),pe=n(78584),de=n(26017);const ge={key:1},ue={key:2},me=(0,s.pM)({__name:"settings-clear-tags",props:{title:{type:String,required:!0}},setup(t){const e=(0,l.KR)(!1),n=(0,l.KR)(!1),a=(0,l.KR)(0),o=(0,l.KR)(0),r=(0,l.KR)([]),p=(0,l.KR)([]);async function g(t){const e=(0,ce.f)(t);return e.update().then((()=>(e.cleanTags(),e.sync()))).catch((t=>{pe.error(t)}))}async function u(t,e,n){for(n.value=await function(t){const e=(0,d.V)(7,t);return e.getCompleteList().then((t=>t)).catch((t=>{throw pe.error(t),e.errorMessage(t)}))}(t),e.value=n.value.length;n.value.length;){const t=n.value.pop(),e=de.getUrlFromTags(t.tags);void 0!==e&&(console.log(e),await g(t.url))}}return(t,l)=>((0,s.uX)(),(0,s.Wv)(et.A,{class:"clear-tags"},{default:(0,s.k6)((()=>[(0,s.bF)(c.A,{spacer:!0},{default:(0,s.k6)((()=>l[1]||(l[1]=[(0,s.eW)("This script removes all malsync::xxxxx:: from your list.")]))),_:1}),e.value?n.value?((0,s.uX)(),(0,s.CE)("div",ue,[(0,s.bF)(st.A,{animation:!1,color:"secondary"},{default:(0,s.k6)((()=>l[3]||(l[3]=[(0,s.eW)(" Done ")]))),_:1})])):((0,s.uX)(),(0,s.CE)("div",ge,[(0,s.bF)(v.A,{spacer:"half"},{default:(0,s.k6)((()=>[(0,s.bF)(st.A,{animation:!1},{default:(0,s.k6)((()=>[(0,s.eW)(" Anime: "+(0,i.v_)(r.value.length?`${a.value-r.value.length}/${a.value}`:"loading"),1)])),_:1})])),_:1}),(0,s.bF)(st.A,{animation:!1},{default:(0,s.k6)((()=>[(0,s.eW)(" Manga: "+(0,i.v_)(p.value.length?`${o.value-p.value.length}/${o.value}`:"loading"),1)])),_:1})])):((0,s.uX)(),(0,s.Wv)(st.A,{key:0,color:"primary",onClick:l[0]||(l[0]=t=>async function(){e.value=!0,await u("anime",a,r),await u("manga",o,p),n.value=!0}())},{default:(0,s.k6)((()=>l[2]||(l[2]=[(0,s.eW)("Clean Up MAL-Sync Tags")]))),_:1}))])),_:1}))}}),ve=(0,b.A)(me,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-00695352 {\nto {\n    transform: translateX(100%);\n}\n}\n.clear-tags[data-v-00695352] {\n  margin: var(--size-spacer-half) 0;\n}\n"]],["__scopeId","data-v-00695352"],["__file","settings-clear-tags.vue"]]);var fe=n(97453),_e=n(13647),he=n(26017);const ye=[{key:"forceEn",title:"Force English",props:{component:"checkbox",option:"forceEn"},component:lt.A},{key:"cleanTagsUi",title:()=>_e.storage.lang("settings_clean_tags_button"),props:()=>({type:"button",icon:"",props:{color:"primary",title:_e.storage.lang("settings_clean_tags_button")}}),component:o.A,children:[{key:"cleanTags",title:()=>_e.storage.lang("settings_clean_tags_button"),component:ve}]},{key:"clearCache",title:()=>_e.storage.lang("settings_ClearCache"),props:()=>({component:"button",props:{color:"primary",title:_e.storage.lang("settings_ClearCache"),click:()=>{he.clearCache(),"webextension"===_e.type&&fe.x.clear()}}}),component:lt.A}];var ke=n(13647);const be=[{key:"autofull",title:()=>ke.storage.lang("settings_Video_Fullscreen"),props:{component:"checkbox",option:"autofull",infoLink:"https://github.com/MALSync/MALSync/wiki/Troubleshooting#auto-fullscreen-doesnt-work"},component:lt.A},{key:"autoresume",title:()=>ke.storage.lang("settings_Video_Resume"),props:{component:"checkbox",option:"autoresume"},component:lt.A},{key:"autoNextEp",title:()=>ke.storage.lang("settings_autoNextEp"),props:{component:"checkbox",option:"autoNextEp"},component:lt.A},{key:"nextEpShort",title:()=>ke.storage.lang("settings_Shortcuts_Next_Episode"),system:"webextension",props:{component:"shortcut",option:"nextEpShort"},component:lt.A},{key:"hr",title:"",component:Rt.A},{key:"introSkipFwd",title:()=>ke.storage.lang("settings_Shortcuts_Skip_Forward"),system:"webextension",props:{component:"shortcut",option:"introSkipFwd"},component:lt.A},{key:"introSkipBwd",title:()=>ke.storage.lang("settings_Shortcuts_Skip_Backward"),system:"webextension",props:{component:"shortcut",option:"introSkipBwd"},component:lt.A},{key:"introSkip",title:()=>ke.storage.lang("settings_introSkip",[ke.settings.get("introSkip")]),system:"webextension",props:{component:"input",option:"introSkip",props:{validation:t=>Boolean(Number(t)>0)}},component:lt.A}];var Ae=n(13647);const we=[{key:"minimalWindow",title:()=>Ae.storage.lang("settings_miniMAL_window"),system:"webextension",props:{component:"checkbox",option:"minimalWindow"},component:lt.A},{key:"autoCloseMinimal",title:()=>Ae.storage.lang("settings_miniMAL_autoCloseMinimal"),system:"userscript",props:{component:"checkbox",option:"autoCloseMinimal"},component:lt.A},{key:"posLeft",title:()=>Ae.storage.lang("settings_miniMAL_Display"),props:()=>({component:"dropdown",option:"posLeft",props:{options:[{title:Ae.storage.lang("settings_miniMAL_Display_Left"),value:"left"},{title:Ae.storage.lang("settings_miniMAL_Display_Center"),value:"center"},{title:Ae.storage.lang("settings_miniMAL_Display_Right"),value:"right"}].filter((t=>!("center"===t.value&&"webextension"!==Ae.type)))}}),component:lt.A},{key:"miniMalHeight",title:()=>Ae.storage.lang("settings_miniMAL_Height"),props:{component:"input",option:"miniMalHeight",props:{validation:t=>/^\d+(%|px)$/i.test(t)}},component:lt.A},{key:"miniMalWidth",title:()=>Ae.storage.lang("settings_miniMAL_Width"),props:{component:"input",option:"miniMalWidth",props:{validation:t=>/^\d+(%|px)$/i.test(t)}},component:lt.A},{key:"pwa",title:()=>Ae.storage.lang("settings_miniMAL_pwa"),props:()=>({component:"button",props:{color:"primary",title:Ae.storage.lang("Show"),link:"https://malsync.moe/pwa/"}}),component:lt.A}];var xe=n(71641);const Se=(0,s.pM)({__name:"settings-progress-dropdown",props:{title:{type:[String,Function],required:!0},option:{type:String,required:!1,default:null},type:{type:String,default:"anime"}},setup(t){const e=t,n=(0,l.KR)([]);return(0,xe.qu)(e.type).then((t=>{n.value=t.map((t=>({value:t.key,title:t.label})))})),(e,i)=>((0,s.uX)(),(0,s.Wv)(lt.A,{title:t.title,option:t.option,component:"dropdown",props:{options:n.value}},null,8,["title","option","props"]))}}),Le=(0,b.A)(Se,[["__file","settings-progress-dropdown.vue"]]);var Fe=n(13647),We=n(78584);const Te=new ct.IQ;function Ie(){if("webextension"===Fe.type){const t=parseInt(Fe.settings.get("progressInterval"));if(!t)return;We.log("Trigger Progress update"),chrome.alarms.create("progressSync",{periodInMinutes:t,when:Date.now()+1e3})}}const Ce=[{key:"progressNotificationsAnime",title:()=>`${Fe.storage.lang("settings_Notifications")} (${Fe.storage.lang("Anime")})`,condition:()=>Boolean(Number(Fe.settings.get("progressInterval"))),props:{component:"checkbox",option:"progressNotificationsAnime"},component:lt.A},{key:"progressNotificationsManga",title:()=>`${Fe.storage.lang("settings_Notifications")} (${Fe.storage.lang("Manga")})`,condition:()=>Boolean(Number(Fe.settings.get("progressInterval"))),props:{component:"checkbox",option:"progressNotificationsManga"},component:lt.A},{key:"notificationsSticky",title:()=>Fe.storage.lang("settings_Notifications_Sticky"),props:{component:"checkbox",option:"notificationsSticky"},component:lt.A}],Ee=[{key:"progressInterval",title:()=>Fe.storage.lang("settings_Interval"),change:()=>Ie(),props:()=>({component:"dropdown",option:"progressInterval",props:{options:[{title:Fe.storage.lang("settings_Interval_Off"),value:"0"},{title:`${Te.setDuration({minutes:30}).getRelativeText({style:"long"})}`,value:"30"},{title:`${Te.setDuration({hours:1}).getRelativeText({style:"long"})}`,value:"60"},{title:`${Te.setDuration({hours:2}).getRelativeText({style:"long"})}`,value:"120"},{title:`${Te.setDuration({hours:4}).getRelativeText({style:"long"})}`,value:"240"},{title:`${Te.setDuration({hours:12}).getRelativeText({style:"long"})}`,value:"720"},{title:`${Te.setDuration({hours:24}).getRelativeText({style:"long"})}`,value:"1440"}]}}),component:lt.A},{key:"progressIntervalDefaultAnime",title:()=>Fe.storage.lang("settings_Interval_Default_Anime"),change:()=>Ie(),condition:()=>Boolean(Number(Fe.settings.get("progressInterval"))),props:{component:"dropdown",option:"progressIntervalDefaultAnime",type:"anime"},component:Le},{key:"progressIntervalDefaultManga",title:()=>Fe.storage.lang("settings_Interval_Default_Manga"),change:()=>Ie(),condition:()=>Boolean(Number(Fe.settings.get("progressInterval"))),props:{component:"dropdown",option:"progressIntervalDefaultManga",type:"manga"},component:Le},...Ce,{key:"loadPTWForProgress",title:()=>Fe.storage.lang("settings_loadPTWForProgress"),condition:()=>Boolean(Number(Fe.settings.get("progressInterval"))),props:{component:"checkbox",option:"loadPTWForProgress"},component:lt.A}];var De=n(57427),Me=n(13647);const Xe=[{key:"usedPage",title:()=>Me.storage.lang("settings_usedPage"),props:{component:"checkbox",option:"usedPage"},component:lt.A},{key:"malContinue",title:()=>Me.storage.lang("settings_malContinue"),props:{component:"checkbox",option:"malContinue"},component:lt.A},{key:"malResume",title:()=>Me.storage.lang("settings_malResume"),props:{component:"checkbox",option:"malResume"},component:lt.A},{key:"epPredictions",title:()=>Me.storage.lang("settings_epPredictions"),props:{component:"checkbox",option:"epPredictions"},component:lt.A},{key:"hr",title:"",component:Rt.A},{key:"quicklinksPosition",title:()=>Me.storage.lang("settings_custom_domains_position"),condition:()=>"ANILIST"===Me.settings.get("syncMode")||"MAL"===Me.settings.get("syncMode"),props:()=>({component:"dropdown",option:"quicklinksPosition",props:{options:[{title:Me.storage.lang("settings_progress_default"),value:"default"},{title:Me.storage.lang("settings_custom_position_below"),value:"below"}]}}),component:lt.A},{key:"streamingSite",title:()=>Me.storage.lang("settings_StreamingSite"),component:De.A}];var Re=n(13647);const Ke=[{key:"hr",title:()=>Re.storage.lang("settings_progress"),component:Rt.A},...Ce];var Pe=n(93446),Ve=n(13647);const Ne=[{key:"permission-overview",system:"webextension",title:()=>Ve.storage.lang("settings_custom_domains_button"),component:Pe.A}],Be={key:"permission-overview",system:"webextension",title:()=>Ve.storage.lang("settings_custom_domains_button"),component:Pe.A,props:{requiredOnly:!0}};var $e=n(13647);const Qe=[{key:"profile",title:"Profile",component:A},se,Be,{key:"tracking",title:()=>$e.storage.lang("settings_tracking"),props:{icon:"visibility"},component:o.A,children:Kt.E5},{key:"theming",title:()=>$e.storage.lang("settings_theming"),props:{icon:"palette"},component:o.A,children:Ot},{key:"onsite",title:()=>$e.storage.lang("settings_onsite"),props:{icon:"view_quilt"},component:o.A,children:oe},{key:"streaming",title:()=>$e.storage.lang("settings_StreamingSite"),props:{icon:"rss_feed"},component:o.A,children:Xe},{key:"videoPlayerSection",title:()=>$e.storage.lang("settings_Video_Player"),props:{icon:"play_circle_filled"},component:o.A,children:be},{key:"minimalSection",title:()=>$e.storage.lang("settings_miniMAL_popup"),props:{icon:"picture_in_picture"},component:o.A,children:we},{key:"estimationSection",title:()=>$e.storage.lang("settings_progress"),props:{icon:"update"},component:o.A,children:Ee},{key:"notifiactionSection",title:()=>$e.storage.lang("settings_Notifications"),props:{icon:"notifications"},component:o.A,children:Ke},{key:"permissions-overview",title:()=>$e.storage.lang("settings_permissions_overview"),system:"webextension",props:{icon:"lock_open"},component:o.A,children:Ne},{key:"customDomains",title:()=>$e.storage.lang("settings_custom_domains_button"),system:"webextension",props:{icon:"web"},component:o.A,children:ie},{key:"listSyncSection",title:()=>$e.storage.lang("settings_listsync"),props:{icon:"sync_alt"},component:o.A,children:[{key:"listSync",title:()=>$e.storage.lang("settings_listsync"),component:Xt}]},{key:"DiscordSection",title:"Discord Rich Presence",system:"webextension",props:{icon:"discord"},component:o.A,children:re},{key:"miscellaneous",title:()=>$e.storage.lang("settings_miscellaneous"),props:{icon:"code"},component:o.A,children:ye},{key:"hr",title:"",component:Rt.A},{key:"support",title:()=>$e.storage.lang("settings_help"),props:{icon:"help",href:"https://github.com/MALSync/MALSync/wiki/Support"},component:o.A},{key:"joinDiscord",title:()=>$e.storage.lang("settings_discord_join"),props:{icon:"forum",href:"https://discord.com/invite/cTH4yaw",special:"discord"},component:o.A},{key:"donate",title:()=>$e.storage.lang("settings_donate"),props:{icon:"favorite",href:"https://malsync.moe/donate"},component:o.A}],Oe=(0,s.pM)({__name:"transition-slide",setup(t){const e=(0,l.KR)(null);function n(){const{width:t}=getComputedStyle(e.value);e.value.style.width=t,e.value.style.position="absolute",e.value.style.visibility="hidden",e.value.style.height="auto",e.value.style.overflow="hidden";const{height:n}=getComputedStyle(e.value);e.value.style.width="",e.value.style.position="",e.value.style.visibility="",e.value.style.height="0",(0,s.dY)().then((()=>{e.value.style.height=n}))}function i(){e.value.style.overflow="",e.value.style.height=""}function o(){const{height:t}=getComputedStyle(e.value);e.value.style.height=t,e.value.style.overflow="hidden",(0,s.dY)().then((()=>{e.value.style.height="0"}))}return(t,l)=>((0,s.uX)(),(0,s.CE)("div",{ref_key:"wrapper",ref:e,class:"transition-wrapper"},[(0,s.bF)(a.Transition,{name:"slide",duration:1e3,onEnter:n,onAfterEnter:i,onLeave:o},{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3})],512))}}),je=(0,b.A)(Oe,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-12a42b42 {\nto {\n    transform: translateX(100%);\n}\n}\n.transition-wrapper[data-v-12a42b42] {\n  transition: height 0.25s ease-in-out;\n  position: relative;\n}\n"]],["__scopeId","data-v-12a42b42"],["__file","transition-slide.vue"]]),Ue={class:"designed-wrapper"},ze={class:"designed"},He=(0,s.pM)({__name:"settings-designed",props:{title:{type:String,default:""}},setup:t=>(t,e)=>((0,s.uX)(),(0,s.CE)("div",Ue,[(0,s.Lk)("div",ze,[(0,s.bF)(u.A,{href:"https://geor.gy/"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)(" Designed by "),(0,s.Lk)("div",{class:"logotype"},[(0,s.eW)("geor"),(0,s.Lk)("span",{class:"logotype_dot"},"."),(0,s.eW)("gy")],-1)]))),_:1})])]))}),qe=(0,b.A)(He,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-746f05c1 {\nto {\n    transform: translateX(100%);\n}\n}\n.logotype[data-v-746f05c1] {\n  color: var(--cl-text);\n  display: inline-block;\n  font-family: Montserrat, sans-serif;\n  font-size: 1.46em;\n  line-height: 1.2;\n  font-weight: 700;\n}\n.logotype_dot[data-v-746f05c1] {\n  color: #e71d36;\n}\n.designed-wrapper[data-v-746f05c1] {\n  position: absolute;\n  inset-inline-end: 0;\n  bottom: 0;\n}\n.designed[data-v-746f05c1] {\n  padding: 5px;\n}\n"]],["__scopeId","data-v-746f05c1"],["__file","settings-designed.vue"]]);var Je=n(10248);const Ge={class:"back-button"},Ye=(0,s.pM)({__name:"settings",props:{path:{type:[Array,String],default:()=>[]}},setup(t){const e=(0,s.WQ)("rootWindow"),n=(0,s.WQ)("rootDocument"),o=t,l=(t,e,n=[],s=null)=>{if(!t)return{structure:e,path:n,parent:s};const i=t.shift();if(!i)return{structure:e,path:n,parent:s};const a=e.find((t=>t.key===i));return a&&a.children?(n.push(i),l(t,a.children,n,a)):{structure:e,path:n,parent:s,highlight:i}},r=(0,s.EW)((()=>l(o.path,Qe)));return(0,s.wB)((()=>r.value.highlight),(t=>{t&&setTimeout((()=>{const s=n.getElementById(`id-${t}`);if(s){const t=s.offsetTop-90;e.scroll({top:t,behavior:"smooth"})}}),100)}),{immediate:!0}),(t,e)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["settings-block",{designed:!r.value.path.length}])},[(0,s.bF)(a.Transition,{name:r.value.path.length?"slide-in":"slide-out"},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.CE)("div",{key:r.value.path.join("/")},[r.value.path.length?((0,s.uX)(),(0,s.Wv)(f.A,{key:0,to:{name:"Settings",params:{path:[r.value.path.slice(0,-1).join("/")]}}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ge,[(0,s.bF)(c.A,{weight:"normal"},{default:(0,s.k6)((()=>[(0,s.bF)(m.A,{icon:"arrow_back",mode:"flex",background:"round",spacer:"big"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(r.value.parent?"function"==typeof r.value.parent.title?r.value.parent.title():r.value.parent.title:"Back"),1)])),_:1})])),_:1})])])),_:1},8,["to"])):(0,s.Q3)("v-if",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value.structure,(t=>((0,s.uX)(),(0,s.Wv)(je,{key:t.key},{default:(0,s.k6)((()=>[(0,s.bF)(Je.A,{comp:t,highlight:r.value.highlight,"current-path":r.value.path},null,8,["comp","highlight","current-path"])])),_:2},1024)))),128))]))])),_:1},8,["name"]),r.value.path.length?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.Wv)(qe,{key:0}))],2))}}),Ze=(0,b.A)(Ye,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-3bab3246 {\nto {\n    transform: translateX(100%);\n}\n}\n.settings-block[data-v-3bab3246] {\n  position: relative;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n@media screen and (max-width: 600px) {\n.settings-block.designed[data-v-3bab3246] {\n    padding-bottom: 30px;\n}\n}\n.back-button[data-v-3bab3246] {\n  transition: transform 0.25s ease;\n  padding: 0 0 var(--size-spacer-half);\n}\n.back-button[data-v-3bab3246]:active {\n  transition-delay: 0s !important;\n  transform: translateY(3px);\n}\n.highlight[data-v-3bab3246] {\n  position: relative;\n}\n.highlight[data-v-3bab3246]::after {\n  content: '';\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: -20px;\n  right: -20px;\n  bottom: 0;\n  border: 2px solid var(--cl-secondary);\n  border-radius: 10px;\n}\n"]],["__scopeId","data-v-3bab3246"],["__file","settings.vue"]])}}]);
//# sourceMappingURL=4112.js.map