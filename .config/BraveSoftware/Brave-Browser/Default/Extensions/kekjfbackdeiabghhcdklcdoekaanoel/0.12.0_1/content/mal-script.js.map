{"version":3,"file":"content/mal-script.js","mappings":"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","sources":["webpack://MALSync/./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","webpack://MALSync/./node_modules/@vue/shared/dist/shared.esm-bundler.js","webpack://MALSync/./node_modules/eventemitter2/lib/eventemitter2.js","webpack://MALSync/./node_modules/semver/classes/semver.js","webpack://MALSync/./node_modules/semver/functions/compare.js","webpack://MALSync/./node_modules/semver/functions/gt.js","webpack://MALSync/./node_modules/semver/functions/gte.js","webpack://MALSync/./node_modules/semver/internal/constants.js","webpack://MALSync/./node_modules/semver/internal/debug.js","webpack://MALSync/./node_modules/semver/internal/identifiers.js","webpack://MALSync/./node_modules/semver/internal/parse-options.js","webpack://MALSync/./node_modules/semver/internal/re.js","webpack://MALSync/./src/api/storage/webextension.ts","webpack://MALSync/./src/api/request/requestWebextension.ts","webpack://MALSync/./src/api/settings.ts","webpack://MALSync/./src/api/webextension.ts","webpack://MALSync/./src/pages-chibi/loader/ChibiListRepository.ts","webpack://MALSync/./src/utils/console.ts","webpack://MALSync/./src/utils/general.ts","webpack://MALSync/./src/utils/j.ts","webpack://MALSync/./src/utils/version.ts","webpack://MALSync/./node_modules/dompurify/dist/purify.es.mjs","webpack://MALSync/webpack/bootstrap","webpack://MALSync/webpack/runtime/compat get default export","webpack://MALSync/webpack/runtime/define property getters","webpack://MALSync/webpack/runtime/global","webpack://MALSync/webpack/runtime/hasOwnProperty shorthand","webpack://MALSync/webpack/runtime/make namespace object","webpack://MALSync/./src/_provider/definitions.ts","webpack://MALSync/./src/utils/localStore.ts","webpack://MALSync/./src/utils/Cache.ts","webpack://MALSync/./src/background/releaseProgressUtils.ts","webpack://MALSync/./src/utils/IntlWrapper.ts","webpack://MALSync/./src/utils/progress.ts","webpack://MALSync/./src/utils/emitter.ts","webpack://MALSync/./src/utils/errors.ts","webpack://MALSync/./src/_provider/Errors.ts","webpack://MALSync/./src/_provider/ScoreMode/point10.ts","webpack://MALSync/./src/_provider/singleAbstract.ts","webpack://MALSync/./src/_provider/MyAnimeList_api/helper.ts","webpack://MALSync/./src/_provider/AniList/helper.ts","webpack://MALSync/./src/_provider/MyAnimeList_hybrid/single.ts","webpack://MALSync/./src/_provider/MyAnimeList_api/single.ts","webpack://MALSync/./src/_provider/listAbstract.ts","webpack://MALSync/./src/_provider/MyAnimeList_legacy/list.ts","webpack://MALSync/./src/_provider/MyAnimeList_hybrid/list.ts","webpack://MALSync/./src/_provider/MyAnimeList_api/list.ts","webpack://MALSync/./src/utils/quicklinksBuilder.ts","webpack://MALSync/./src/myanimelist/myanimelistClass.ts","webpack://MALSync/./src/utils/firebaseNotification.ts","webpack://MALSync/./src/index-webextension/myanimelist.ts"],"sourcesContent":["/**\n* @vue/reactivity v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { hasChanged, extend, isArray, isIntegerKey, isSymbol, isMap, hasOwn, isObject, makeMap, toRawType, capitalize, def, isFunction, EMPTY_OBJ, isSet, isPlainObject, NOOP, remove } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this._isPaused = false;\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  pause() {\n    if (this._active) {\n      this._isPaused = true;\n      let i, l;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].pause();\n        }\n      }\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].pause();\n      }\n    }\n  }\n  /**\n   * Resumes the effect scope, including all child scopes and effects.\n   */\n  resume() {\n    if (this._active) {\n      if (this._isPaused) {\n        this._isPaused = false;\n        let i, l;\n        if (this.scopes) {\n          for (i = 0, l = this.scopes.length; i < l; i++) {\n            this.scopes[i].resume();\n          }\n        }\n        for (i = 0, l = this.effects.length; i < l; i++) {\n          this.effects[i].resume();\n        }\n      }\n    }\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    activeEffectScope = this;\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    activeEffectScope = this.parent;\n  }\n  stop(fromParent) {\n    if (this._active) {\n      this._active = false;\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      this.effects.length = 0;\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      this.cleanups.length = 0;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n        this.scopes.length = 0;\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn, failSilently = false) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeSub;\nconst EffectFlags = {\n  \"ACTIVE\": 1,\n  \"1\": \"ACTIVE\",\n  \"RUNNING\": 2,\n  \"2\": \"RUNNING\",\n  \"TRACKING\": 4,\n  \"4\": \"TRACKING\",\n  \"NOTIFIED\": 8,\n  \"8\": \"NOTIFIED\",\n  \"DIRTY\": 16,\n  \"16\": \"DIRTY\",\n  \"ALLOW_RECURSE\": 32,\n  \"32\": \"ALLOW_RECURSE\",\n  \"PAUSED\": 64,\n  \"64\": \"PAUSED\"\n};\nconst pausedQueueEffects = /* @__PURE__ */ new WeakSet();\nclass ReactiveEffect {\n  constructor(fn) {\n    this.fn = fn;\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 1 | 4;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    /**\n     * @internal\n     */\n    this.cleanup = void 0;\n    this.scheduler = void 0;\n    if (activeEffectScope && activeEffectScope.active) {\n      activeEffectScope.effects.push(this);\n    }\n  }\n  pause() {\n    this.flags |= 64;\n  }\n  resume() {\n    if (this.flags & 64) {\n      this.flags &= ~64;\n      if (pausedQueueEffects.has(this)) {\n        pausedQueueEffects.delete(this);\n        this.trigger();\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    if (this.flags & 2 && !(this.flags & 32)) {\n      return;\n    }\n    if (!(this.flags & 8)) {\n      batch(this);\n    }\n  }\n  run() {\n    if (!(this.flags & 1)) {\n      return this.fn();\n    }\n    this.flags |= 2;\n    cleanupEffect(this);\n    prepareDeps(this);\n    const prevEffect = activeSub;\n    const prevShouldTrack = shouldTrack;\n    activeSub = this;\n    shouldTrack = true;\n    try {\n      return this.fn();\n    } finally {\n      if (!!(process.env.NODE_ENV !== \"production\") && activeSub !== this) {\n        warn(\n          \"Active effect was not restored correctly - this is likely a Vue internal bug.\"\n        );\n      }\n      cleanupDeps(this);\n      activeSub = prevEffect;\n      shouldTrack = prevShouldTrack;\n      this.flags &= ~2;\n    }\n  }\n  stop() {\n    if (this.flags & 1) {\n      for (let link = this.deps; link; link = link.nextDep) {\n        removeSub(link);\n      }\n      this.deps = this.depsTail = void 0;\n      cleanupEffect(this);\n      this.onStop && this.onStop();\n      this.flags &= ~1;\n    }\n  }\n  trigger() {\n    if (this.flags & 64) {\n      pausedQueueEffects.add(this);\n    } else if (this.scheduler) {\n      this.scheduler();\n    } else {\n      this.runIfDirty();\n    }\n  }\n  /**\n   * @internal\n   */\n  runIfDirty() {\n    if (isDirty(this)) {\n      this.run();\n    }\n  }\n  get dirty() {\n    return isDirty(this);\n  }\n}\nlet batchDepth = 0;\nlet batchedSub;\nlet batchedComputed;\nfunction batch(sub, isComputed = false) {\n  sub.flags |= 8;\n  if (isComputed) {\n    sub.next = batchedComputed;\n    batchedComputed = sub;\n    return;\n  }\n  sub.next = batchedSub;\n  batchedSub = sub;\n}\nfunction startBatch() {\n  batchDepth++;\n}\nfunction endBatch() {\n  if (--batchDepth > 0) {\n    return;\n  }\n  if (batchedComputed) {\n    let e = batchedComputed;\n    batchedComputed = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      e = next;\n    }\n  }\n  let error;\n  while (batchedSub) {\n    let e = batchedSub;\n    batchedSub = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      if (e.flags & 1) {\n        try {\n          ;\n          e.trigger();\n        } catch (err) {\n          if (!error) error = err;\n        }\n      }\n      e = next;\n    }\n  }\n  if (error) throw error;\n}\nfunction prepareDeps(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    link.version = -1;\n    link.prevActiveLink = link.dep.activeLink;\n    link.dep.activeLink = link;\n  }\n}\nfunction cleanupDeps(sub) {\n  let head;\n  let tail = sub.depsTail;\n  let link = tail;\n  while (link) {\n    const prev = link.prevDep;\n    if (link.version === -1) {\n      if (link === tail) tail = prev;\n      removeSub(link);\n      removeDep(link);\n    } else {\n      head = link;\n    }\n    link.dep.activeLink = link.prevActiveLink;\n    link.prevActiveLink = void 0;\n    link = prev;\n  }\n  sub.deps = head;\n  sub.depsTail = tail;\n}\nfunction isDirty(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {\n      return true;\n    }\n  }\n  if (sub._dirty) {\n    return true;\n  }\n  return false;\n}\nfunction refreshComputed(computed) {\n  if (computed.flags & 4 && !(computed.flags & 16)) {\n    return;\n  }\n  computed.flags &= ~16;\n  if (computed.globalVersion === globalVersion) {\n    return;\n  }\n  computed.globalVersion = globalVersion;\n  const dep = computed.dep;\n  computed.flags |= 2;\n  if (dep.version > 0 && !computed.isSSR && computed.deps && !isDirty(computed)) {\n    computed.flags &= ~2;\n    return;\n  }\n  const prevSub = activeSub;\n  const prevShouldTrack = shouldTrack;\n  activeSub = computed;\n  shouldTrack = true;\n  try {\n    prepareDeps(computed);\n    const value = computed.fn(computed._value);\n    if (dep.version === 0 || hasChanged(value, computed._value)) {\n      computed._value = value;\n      dep.version++;\n    }\n  } catch (err) {\n    dep.version++;\n    throw err;\n  } finally {\n    activeSub = prevSub;\n    shouldTrack = prevShouldTrack;\n    cleanupDeps(computed);\n    computed.flags &= ~2;\n  }\n}\nfunction removeSub(link, soft = false) {\n  const { dep, prevSub, nextSub } = link;\n  if (prevSub) {\n    prevSub.nextSub = nextSub;\n    link.prevSub = void 0;\n  }\n  if (nextSub) {\n    nextSub.prevSub = prevSub;\n    link.nextSub = void 0;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && dep.subsHead === link) {\n    dep.subsHead = nextSub;\n  }\n  if (dep.subs === link) {\n    dep.subs = prevSub;\n    if (!prevSub && dep.computed) {\n      dep.computed.flags &= ~4;\n      for (let l = dep.computed.deps; l; l = l.nextDep) {\n        removeSub(l, true);\n      }\n    }\n  }\n  if (!soft && !--dep.sc && dep.map) {\n    dep.map.delete(dep.key);\n  }\n}\nfunction removeDep(link) {\n  const { prevDep, nextDep } = link;\n  if (prevDep) {\n    prevDep.nextDep = nextDep;\n    link.prevDep = void 0;\n  }\n  if (nextDep) {\n    nextDep.prevDep = prevDep;\n    link.nextDep = void 0;\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const e = new ReactiveEffect(fn);\n  if (options) {\n    extend(e, options);\n  }\n  try {\n    e.run();\n  } catch (err) {\n    e.stop();\n    throw err;\n  }\n  const runner = e.run.bind(e);\n  runner.effect = e;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction onEffectCleanup(fn, failSilently = false) {\n  if (activeSub instanceof ReactiveEffect) {\n    activeSub.cleanup = fn;\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onEffectCleanup() was called when there was no active effect to associate with.`\n    );\n  }\n}\nfunction cleanupEffect(e) {\n  const { cleanup } = e;\n  e.cleanup = void 0;\n  if (cleanup) {\n    const prevSub = activeSub;\n    activeSub = void 0;\n    try {\n      cleanup();\n    } finally {\n      activeSub = prevSub;\n    }\n  }\n}\n\nlet globalVersion = 0;\nclass Link {\n  constructor(sub, dep) {\n    this.sub = sub;\n    this.dep = dep;\n    this.version = dep.version;\n    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;\n  }\n}\nclass Dep {\n  constructor(computed) {\n    this.computed = computed;\n    this.version = 0;\n    /**\n     * Link between this dep and the current active effect\n     */\n    this.activeLink = void 0;\n    /**\n     * Doubly linked list representing the subscribing effects (tail)\n     */\n    this.subs = void 0;\n    /**\n     * For object property deps cleanup\n     */\n    this.map = void 0;\n    this.key = void 0;\n    /**\n     * Subscriber counter\n     */\n    this.sc = 0;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.subsHead = void 0;\n    }\n  }\n  track(debugInfo) {\n    if (!activeSub || !shouldTrack || activeSub === this.computed) {\n      return;\n    }\n    let link = this.activeLink;\n    if (link === void 0 || link.sub !== activeSub) {\n      link = this.activeLink = new Link(activeSub, this);\n      if (!activeSub.deps) {\n        activeSub.deps = activeSub.depsTail = link;\n      } else {\n        link.prevDep = activeSub.depsTail;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n      }\n      addSub(link);\n    } else if (link.version === -1) {\n      link.version = this.version;\n      if (link.nextDep) {\n        const next = link.nextDep;\n        next.prevDep = link.prevDep;\n        if (link.prevDep) {\n          link.prevDep.nextDep = next;\n        }\n        link.prevDep = activeSub.depsTail;\n        link.nextDep = void 0;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n        if (activeSub.deps === link) {\n          activeSub.deps = next;\n        }\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && activeSub.onTrack) {\n      activeSub.onTrack(\n        extend(\n          {\n            effect: activeSub\n          },\n          debugInfo\n        )\n      );\n    }\n    return link;\n  }\n  trigger(debugInfo) {\n    this.version++;\n    globalVersion++;\n    this.notify(debugInfo);\n  }\n  notify(debugInfo) {\n    startBatch();\n    try {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (let head = this.subsHead; head; head = head.nextSub) {\n          if (head.sub.onTrigger && !(head.sub.flags & 8)) {\n            head.sub.onTrigger(\n              extend(\n                {\n                  effect: head.sub\n                },\n                debugInfo\n              )\n            );\n          }\n        }\n      }\n      for (let link = this.subs; link; link = link.prevSub) {\n        if (link.sub.notify()) {\n          ;\n          link.sub.dep.notify();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n  }\n}\nfunction addSub(link) {\n  link.dep.sc++;\n  if (link.sub.flags & 4) {\n    const computed = link.dep.computed;\n    if (computed && !link.dep.subs) {\n      computed.flags |= 4 | 16;\n      for (let l = computed.deps; l; l = l.nextDep) {\n        addSub(l);\n      }\n    }\n    const currentTail = link.dep.subs;\n    if (currentTail !== link) {\n      link.prevSub = currentTail;\n      if (currentTail) currentTail.nextSub = link;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && link.dep.subsHead === void 0) {\n      link.dep.subsHead = link;\n    }\n    link.dep.subs = link;\n  }\n}\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Object iterate\" : \"\"\n);\nconst MAP_KEY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Map keys iterate\" : \"\"\n);\nconst ARRAY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Array iterate\" : \"\"\n);\nfunction track(target, type, key) {\n  if (shouldTrack && activeSub) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = new Dep());\n      dep.map = depsMap;\n      dep.key = key;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      dep.track({\n        target,\n        type,\n        key\n      });\n    } else {\n      dep.track();\n    }\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    globalVersion++;\n    return;\n  }\n  const run = (dep) => {\n    if (dep) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        dep.trigger({\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        });\n      } else {\n        dep.trigger();\n      }\n    }\n  };\n  startBatch();\n  if (type === \"clear\") {\n    depsMap.forEach(run);\n  } else {\n    const targetIsArray = isArray(target);\n    const isArrayIndex = targetIsArray && isIntegerKey(key);\n    if (targetIsArray && key === \"length\") {\n      const newLength = Number(newValue);\n      depsMap.forEach((dep, key2) => {\n        if (key2 === \"length\" || key2 === ARRAY_ITERATE_KEY || !isSymbol(key2) && key2 >= newLength) {\n          run(dep);\n        }\n      });\n    } else {\n      if (key !== void 0 || depsMap.has(void 0)) {\n        run(depsMap.get(key));\n      }\n      if (isArrayIndex) {\n        run(depsMap.get(ARRAY_ITERATE_KEY));\n      }\n      switch (type) {\n        case \"add\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          } else if (isArrayIndex) {\n            run(depsMap.get(\"length\"));\n          }\n          break;\n        case \"delete\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          }\n          break;\n        case \"set\":\n          if (isMap(target)) {\n            run(depsMap.get(ITERATE_KEY));\n          }\n          break;\n      }\n    }\n  }\n  endBatch();\n}\nfunction getDepFromReactive(object, key) {\n  const depMap = targetMap.get(object);\n  return depMap && depMap.get(key);\n}\n\nfunction reactiveReadArray(array) {\n  const raw = toRaw(array);\n  if (raw === array) return raw;\n  track(raw, \"iterate\", ARRAY_ITERATE_KEY);\n  return isShallow(array) ? raw : raw.map(toReactive);\n}\nfunction shallowReadArray(arr) {\n  track(arr = toRaw(arr), \"iterate\", ARRAY_ITERATE_KEY);\n  return arr;\n}\nconst arrayInstrumentations = {\n  __proto__: null,\n  [Symbol.iterator]() {\n    return iterator(this, Symbol.iterator, toReactive);\n  },\n  concat(...args) {\n    return reactiveReadArray(this).concat(\n      ...args.map((x) => isArray(x) ? reactiveReadArray(x) : x)\n    );\n  },\n  entries() {\n    return iterator(this, \"entries\", (value) => {\n      value[1] = toReactive(value[1]);\n      return value;\n    });\n  },\n  every(fn, thisArg) {\n    return apply(this, \"every\", fn, thisArg, void 0, arguments);\n  },\n  filter(fn, thisArg) {\n    return apply(this, \"filter\", fn, thisArg, (v) => v.map(toReactive), arguments);\n  },\n  find(fn, thisArg) {\n    return apply(this, \"find\", fn, thisArg, toReactive, arguments);\n  },\n  findIndex(fn, thisArg) {\n    return apply(this, \"findIndex\", fn, thisArg, void 0, arguments);\n  },\n  findLast(fn, thisArg) {\n    return apply(this, \"findLast\", fn, thisArg, toReactive, arguments);\n  },\n  findLastIndex(fn, thisArg) {\n    return apply(this, \"findLastIndex\", fn, thisArg, void 0, arguments);\n  },\n  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement\n  forEach(fn, thisArg) {\n    return apply(this, \"forEach\", fn, thisArg, void 0, arguments);\n  },\n  includes(...args) {\n    return searchProxy(this, \"includes\", args);\n  },\n  indexOf(...args) {\n    return searchProxy(this, \"indexOf\", args);\n  },\n  join(separator) {\n    return reactiveReadArray(this).join(separator);\n  },\n  // keys() iterator only reads `length`, no optimisation required\n  lastIndexOf(...args) {\n    return searchProxy(this, \"lastIndexOf\", args);\n  },\n  map(fn, thisArg) {\n    return apply(this, \"map\", fn, thisArg, void 0, arguments);\n  },\n  pop() {\n    return noTracking(this, \"pop\");\n  },\n  push(...args) {\n    return noTracking(this, \"push\", args);\n  },\n  reduce(fn, ...args) {\n    return reduce(this, \"reduce\", fn, args);\n  },\n  reduceRight(fn, ...args) {\n    return reduce(this, \"reduceRight\", fn, args);\n  },\n  shift() {\n    return noTracking(this, \"shift\");\n  },\n  // slice could use ARRAY_ITERATE but also seems to beg for range tracking\n  some(fn, thisArg) {\n    return apply(this, \"some\", fn, thisArg, void 0, arguments);\n  },\n  splice(...args) {\n    return noTracking(this, \"splice\", args);\n  },\n  toReversed() {\n    return reactiveReadArray(this).toReversed();\n  },\n  toSorted(comparer) {\n    return reactiveReadArray(this).toSorted(comparer);\n  },\n  toSpliced(...args) {\n    return reactiveReadArray(this).toSpliced(...args);\n  },\n  unshift(...args) {\n    return noTracking(this, \"unshift\", args);\n  },\n  values() {\n    return iterator(this, \"values\", toReactive);\n  }\n};\nfunction iterator(self, method, wrapValue) {\n  const arr = shallowReadArray(self);\n  const iter = arr[method]();\n  if (arr !== self && !isShallow(self)) {\n    iter._next = iter.next;\n    iter.next = () => {\n      const result = iter._next();\n      if (result.value) {\n        result.value = wrapValue(result.value);\n      }\n      return result;\n    };\n  }\n  return iter;\n}\nconst arrayProto = Array.prototype;\nfunction apply(self, method, fn, thisArg, wrappedRetFn, args) {\n  const arr = shallowReadArray(self);\n  const needsWrap = arr !== self && !isShallow(self);\n  const methodFn = arr[method];\n  if (methodFn !== arrayProto[method]) {\n    const result2 = methodFn.apply(self, args);\n    return needsWrap ? toReactive(result2) : result2;\n  }\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (needsWrap) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, toReactive(item), index, self);\n      };\n    } else if (fn.length > 2) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, item, index, self);\n      };\n    }\n  }\n  const result = methodFn.call(arr, wrappedFn, thisArg);\n  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;\n}\nfunction reduce(self, method, fn, args) {\n  const arr = shallowReadArray(self);\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (!isShallow(self)) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, toReactive(item), index, self);\n      };\n    } else if (fn.length > 3) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, item, index, self);\n      };\n    }\n  }\n  return arr[method](wrappedFn, ...args);\n}\nfunction searchProxy(self, method, args) {\n  const arr = toRaw(self);\n  track(arr, \"iterate\", ARRAY_ITERATE_KEY);\n  const res = arr[method](...args);\n  if ((res === -1 || res === false) && isProxy(args[0])) {\n    args[0] = toRaw(args[0]);\n    return arr[method](...args);\n  }\n  return res;\n}\nfunction noTracking(self, method, args = []) {\n  pauseTracking();\n  startBatch();\n  const res = toRaw(self)[method].apply(self, args);\n  endBatch();\n  resetTracking();\n  return res;\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    if (key === \"__v_skip\") return target[\"__v_skip\"];\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the receiver is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      let fn;\n      if (targetIsArray && (fn = arrayInstrumentations[key])) {\n        return fn;\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(\n      target,\n      key,\n      // if this is a proxy wrapping a ref, return methods using the raw ref\n      // as receiver so that we don't have to call `toRaw` on the ref in all\n      // its class methods\n      isRef(target) ? target : receiver\n    );\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(\n      target,\n      key,\n      value,\n      isRef(target) ? target : receiver\n    );\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction createIterableMethod(method, isReadonly2, isShallow2) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;\n    !isReadonly2 && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations(readonly, shallow) {\n  const instrumentations = {\n    get(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"get\", key);\n        }\n        track(rawTarget, \"get\", rawKey);\n      }\n      const { has } = getProto(rawTarget);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n      } else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n      } else if (target !== rawTarget) {\n        target.get(key);\n      }\n    },\n    get size() {\n      const target = this[\"__v_raw\"];\n      !readonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n      return Reflect.get(target, \"size\", target);\n    },\n    has(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"has\", key);\n        }\n        track(rawTarget, \"has\", rawKey);\n      }\n      return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n    },\n    forEach(callback, thisArg) {\n      const observed = this;\n      const target = observed[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      !readonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n      return target.forEach((value, key) => {\n        return callback.call(thisArg, wrap(value), wrap(key), observed);\n      });\n    }\n  };\n  extend(\n    instrumentations,\n    readonly ? {\n      add: createReadonlyMethod(\"add\"),\n      set: createReadonlyMethod(\"set\"),\n      delete: createReadonlyMethod(\"delete\"),\n      clear: createReadonlyMethod(\"clear\")\n    } : {\n      add(value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const proto = getProto(target);\n        const hadKey = proto.has.call(target, value);\n        if (!hadKey) {\n          target.add(value);\n          trigger(target, \"add\", value, value);\n        }\n        return this;\n      },\n      set(key, value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get.call(target, key);\n        target.set(key, value);\n        if (!hadKey) {\n          trigger(target, \"add\", key, value);\n        } else if (hasChanged(value, oldValue)) {\n          trigger(target, \"set\", key, value, oldValue);\n        }\n        return this;\n      },\n      delete(key) {\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get ? get.call(target, key) : void 0;\n        const result = target.delete(key);\n        if (hadKey) {\n          trigger(target, \"delete\", key, void 0, oldValue);\n        }\n        return result;\n      },\n      clear() {\n        const target = toRaw(this);\n        const hadItems = target.size !== 0;\n        const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n        const result = target.clear();\n        if (hadItems) {\n          trigger(\n            target,\n            \"clear\",\n            void 0,\n            void 0,\n            oldTarget\n          );\n        }\n        return result;\n      }\n    }\n  );\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    instrumentations[method] = createIterableMethod(method, readonly, shallow);\n  });\n  return instrumentations;\n}\nfunction createInstrumentationGetter(isReadonly2, shallow) {\n  const instrumentations = createInstrumentations(isReadonly2, shallow);\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (!hasOwn(value, \"__v_skip\") && Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction isRef(r) {\n  return r ? r[\"__v_isRef\"] === true : false;\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, isShallow2) {\n    this.dep = new Dep();\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isShallow\"] = false;\n    this._rawValue = isShallow2 ? value : toRaw(value);\n    this._value = isShallow2 ? value : toReactive(value);\n    this[\"__v_isShallow\"] = isShallow2;\n  }\n  get value() {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.dep.track({\n        target: this,\n        type: \"get\",\n        key: \"value\"\n      });\n    } else {\n      this.dep.track();\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    const oldValue = this._rawValue;\n    const useDirectValue = this[\"__v_isShallow\"] || isShallow(newValue) || isReadonly(newValue);\n    newValue = useDirectValue ? newValue : toRaw(newValue);\n    if (hasChanged(newValue, oldValue)) {\n      this._rawValue = newValue;\n      this._value = useDirectValue ? newValue : toReactive(newValue);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        this.dep.trigger({\n          target: this,\n          type: \"set\",\n          key: \"value\",\n          newValue,\n          oldValue\n        });\n      } else {\n        this.dep.trigger();\n      }\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  if (ref2.dep) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      ref2.dep.trigger({\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: ref2._value\n      });\n    } else {\n      ref2.dep.trigger();\n    }\n  }\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => key === \"__v_raw\" ? target : unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    const dep = this.dep = new Dep();\n    const { get, set } = factory(dep.track.bind(dep), dep.trigger.bind(dep));\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._value = this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return this._value = val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isReadonly\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    return this._value = this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nclass ComputedRefImpl {\n  constructor(fn, setter, isSSR) {\n    this.fn = fn;\n    this.setter = setter;\n    /**\n     * @internal\n     */\n    this._value = void 0;\n    /**\n     * @internal\n     */\n    this.dep = new Dep(this);\n    /**\n     * @internal\n     */\n    this.__v_isRef = true;\n    // TODO isolatedDeclarations \"__v_isReadonly\"\n    // A computed is also a subscriber that tracks other deps\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 16;\n    /**\n     * @internal\n     */\n    this.globalVersion = globalVersion - 1;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    // for backwards compat\n    this.effect = this;\n    this[\"__v_isReadonly\"] = !setter;\n    this.isSSR = isSSR;\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    this.flags |= 16;\n    if (!(this.flags & 8) && // avoid infinite self recursion\n    activeSub !== this) {\n      batch(this, true);\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) ;\n  }\n  get value() {\n    const link = !!(process.env.NODE_ENV !== \"production\") ? this.dep.track({\n      target: this,\n      type: \"get\",\n      key: \"value\"\n    }) : this.dep.track();\n    refreshComputed(this);\n    if (link) {\n      link.version = this.dep.version;\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.setter) {\n      this.setter(newValue);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\"Write operation failed: computed value is readonly\");\n    }\n  }\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.onTrack = debugOptions.onTrack;\n    cRef.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\",\n  \"IS_REF\": \"__v_isRef\"\n};\n\nconst WatchErrorCodes = {\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\"\n};\nconst INITIAL_WATCHER_VALUE = {};\nconst cleanupMap = /* @__PURE__ */ new WeakMap();\nlet activeWatcher = void 0;\nfunction getCurrentWatcher() {\n  return activeWatcher;\n}\nfunction onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {\n  if (owner) {\n    let cleanups = cleanupMap.get(owner);\n    if (!cleanups) cleanupMap.set(owner, cleanups = []);\n    cleanups.push(cleanupFn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onWatcherCleanup() was called when there was no active watcher to associate with.`\n    );\n  }\n}\nfunction watch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, once, scheduler, augmentJob, call } = options;\n  const warnInvalidSource = (s) => {\n    (options.onWarn || warn)(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const reactiveGetter = (source2) => {\n    if (deep) return source2;\n    if (isShallow(source2) || deep === false || deep === 0)\n      return traverse(source2, 1);\n    return traverse(source2);\n  };\n  let effect;\n  let getter;\n  let cleanup;\n  let boundCleanup;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return call ? call(s, 2) : s();\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = call ? () => call(source, 2) : source;\n    } else {\n      getter = () => {\n        if (cleanup) {\n          pauseTracking();\n          try {\n            cleanup();\n          } finally {\n            resetTracking();\n          }\n        }\n        const currentEffect = activeWatcher;\n        activeWatcher = effect;\n        try {\n          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);\n        } finally {\n          activeWatcher = currentEffect;\n        }\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    const depth = deep === true ? Infinity : deep;\n    getter = () => traverse(baseGetter(), depth);\n  }\n  const scope = getCurrentScope();\n  const watchHandle = () => {\n    effect.stop();\n    if (scope && scope.active) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (once && cb) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      watchHandle();\n    };\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = (immediateFirstRun) => {\n    if (!(effect.flags & 1) || !effect.dirty && !immediateFirstRun) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup) {\n          cleanup();\n        }\n        const currentWatcher = activeWatcher;\n        activeWatcher = effect;\n        try {\n          const args = [\n            newValue,\n            // pass undefined as the old value when it's changed for the first time\n            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n            boundCleanup\n          ];\n          call ? call(cb, 3, args) : (\n            // @ts-expect-error\n            cb(...args)\n          );\n          oldValue = newValue;\n        } finally {\n          activeWatcher = currentWatcher;\n        }\n      }\n    } else {\n      effect.run();\n    }\n  };\n  if (augmentJob) {\n    augmentJob(job);\n  }\n  effect = new ReactiveEffect(getter);\n  effect.scheduler = scheduler ? () => scheduler(job, false) : job;\n  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect);\n  cleanup = effect.onStop = () => {\n    const cleanups = cleanupMap.get(effect);\n    if (cleanups) {\n      if (call) {\n        call(cleanups, 4);\n      } else {\n        for (const cleanup2 of cleanups) cleanup2();\n      }\n      cleanupMap.delete(effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = options.onTrack;\n    effect.onTrigger = options.onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job(true);\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (scheduler) {\n    scheduler(job.bind(null, true), true);\n  } else {\n    effect.run();\n  }\n  watchHandle.pause = effect.pause.bind(effect);\n  watchHandle.resume = effect.resume.bind(effect);\n  watchHandle.stop = watchHandle;\n  return watchHandle;\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Set();\n  if (seen.has(value)) {\n    return value;\n  }\n  seen.add(value);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n    for (const key of Object.getOwnPropertySymbols(value)) {\n      if (Object.prototype.propertyIsEnumerable.call(value, key)) {\n        traverse(value[key], depth, seen);\n      }\n    }\n  }\n  return value;\n}\n\nexport { ARRAY_ITERATE_KEY, EffectFlags, EffectScope, ITERATE_KEY, MAP_KEY_ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, WatchErrorCodes, computed, customRef, effect, effectScope, enableTracking, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onEffectCleanup, onScopeDispose, onWatcherCleanup, pauseTracking, proxyRefs, reactive, reactiveReadArray, readonly, ref, resetTracking, shallowReactive, shallowReadArray, shallowReadonly, shallowRef, stop, toRaw, toReactive, toReadonly, toRef, toRefs, toValue, track, traverse, trigger, triggerRef, unref, watch };\n","/**\n* @vue/shared v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str) {\n  const map = /* @__PURE__ */ Object.create(null);\n  for (const key of str.split(\",\")) map[key] = 1;\n  return (val) => val in map;\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction(\n  (str) => {\n    return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n  }\n);\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction(\n  (str) => {\n    const s = str ? `on${capitalize(str)}` : ``;\n    return s;\n  }\n);\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\nfunction genCacheKey(source, options) {\n  return source + JSON.stringify(\n    options,\n    (_, val) => typeof val === \"function\" ? val.toString() : val\n  );\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"CACHED\": -1,\n  \"-1\": \"CACHED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  if (!styles) return \"\";\n  if (isString(styles)) return styles;\n  let ret = \"\";\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nconst isKnownMathMLAttr = /* @__PURE__ */ makeMap(\n  `accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\nconst cssVarNameEscapeSymbolsRE = /[ !\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]/g;\nfunction getEscapedCssVarName(key, doubleEscape) {\n  return key.replace(\n    cssVarNameEscapeSymbolsRE,\n    (s) => doubleEscape ? s === '\"' ? '\\\\\\\\\\\\\"' : `\\\\\\\\${s}` : `\\\\${s}`\n  );\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst isRef = (val) => {\n  return !!(val && val[\"__v_isRef\"] === true);\n};\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (isRef(val)) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, cssVarNameEscapeSymbolsRE, def, escapeHtml, escapeHtmlComment, extend, genCacheKey, genPropsAccessExp, generateCodeFrame, getEscapedCssVarName, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownMathMLAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? value.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, safeSrc: src, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const r = new RegExp(`^${this.options.loose ? src[t.PRERELEASELOOSE] : src[t.PRERELEASE]}$`)\n        const match = `-${identifier}`.match(r)\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","import { storageInterface } from './storageInterface';\n\ndeclare let i18n: string[];\n\nexport const webextension: storageInterface = {\n  async set(key: string, value: string): Promise<void> {\n    const obj = {} as any;\n    obj[key] = value;\n    return new Promise((resolve, reject) => {\n      getStorage(key).set(obj, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async get(key: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).get(key, function (results) {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve(results[key]);\n      });\n    });\n  },\n\n  async remove(key: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).remove(key, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async list(type = 'local'): Promise<{ [key: string]: any }> {\n    return new Promise((resolve, reject) => {\n      if (type === 'local') {\n        chrome.storage.local.get(null, function (results) {\n          resolve(results);\n        });\n      } else {\n        chrome.storage.sync.get(null, function (results) {\n          resolve(results);\n        });\n      }\n    });\n  },\n\n  async addStyle(css) {\n    try {\n      const style = document.createElement('style');\n      style.textContent = css;\n      (document.head || document.body || document.documentElement || document).appendChild(style);\n    } catch (e) {\n      console.log(`Could not add css:${e}`);\n    }\n  },\n\n  version() {\n    return chrome.runtime.getManifest().version;\n  },\n\n  lang(selector, args) {\n    if (api.settings.get('forceEn') && typeof i18n !== 'undefined') {\n      let message = i18n[selector];\n      if (typeof args !== 'undefined') {\n        for (let argIndex = 0; argIndex < args.length; argIndex++) {\n          message = message.replace(`$${argIndex + 1}`, args[argIndex]);\n        }\n      }\n      return message;\n    }\n    // @ts-ignore\n    return chrome.i18n.getMessage(selector, args);\n  },\n\n  langDirection() {\n    try {\n      const lang = chrome.i18n.getUILanguage();\n      if (/^(ar)(-|$)/i.test(lang) && !api.settings.get('forceEn')) {\n        return 'rtl';\n      }\n    } catch (error) {\n      con.error(error);\n    }\n    return 'ltr';\n  },\n\n  assetUrl(filename) {\n    return chrome.runtime.getURL(`assets/${filename}`);\n  },\n\n  injectCssResource(res, head) {\n    alert('injectCssResource not supported in webextension');\n  },\n\n  injectjsResource(res, head) {\n    const s = document.createElement('script');\n    s.src = chrome.runtime.getURL(`vendor/${res}`);\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  addProxyScriptToTag(tag, name) {\n    tag.src = chrome.runtime.getURL(`/content/proxy/proxy_${name}.js`);\n    return tag;\n  },\n\n  updateDom(head) {\n    const s = document.createElement('script');\n    s.text = `\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }`;\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  storageOnChanged(cb) {\n    chrome.storage.onChanged.addListener(cb);\n  },\n};\n\nfunction getStorage(key: string) {\n  if (utils.syncRegex.test(key)) {\n    return chrome.storage.sync;\n  }\n  return chrome.storage.local;\n}\n","import { sendMessageI, responseMessageI } from '../messageInterface';\nimport { requestInterface } from './requestInterface';\n\nexport const requestApi: requestInterface = {\n  async xhr(method, url) {\n    if (typeof requestApi.sendMessage !== 'undefined') {\n      return requestApi.sendMessage({ name: 'xhr', method, url }).then(xhr => {\n        if (xhr.status === 429) throw 'Rate limit Timeout';\n        if (xhr.status === 0) throw xhr.responseText;\n        return xhr;\n      });\n    }\n    throw 'Could not send xhr';\n  },\n\n  async sendMessage(message: sendMessageI): Promise<any> {\n    return new Promise((resolve, reject) => {\n      chrome.runtime.sendMessage(message, function (response: responseMessageI) {\n        resolve(response);\n      });\n    });\n  },\n\n  notification(options) {\n    this.sendMessage({\n      name: 'notification',\n      options,\n    });\n  },\n  database(call, param) {\n    return this.sendMessage({\n      name: 'database',\n      options: {\n        call,\n        param,\n      },\n    });\n  },\n};\n","import { reactive, ref } from 'vue';\nimport { ChibiListRepository } from '../pages-chibi/loader/ChibiListRepository';\nimport type { PageListJsonInterface } from '../pages-chibi/pageInterface';\n\nexport const settingsObj = {\n  options: reactive({\n    autoTrackingModeanime: 'video',\n    readerTracking: true,\n    askBefore: true,\n    autoTrackingModemanga: 'instant',\n    enablePages: {},\n    forceEn: false,\n    forceEnglishTitles: false,\n    rpc: true,\n    presenceLargeImage: 'cover',\n    presenceShowButtons: true,\n    presenceShowMalsync: false,\n    userscriptModeButton: false,\n    syncMode: 'MAL',\n    syncModeSimkl: 'MAL',\n    localSync: true,\n    delay: 0,\n    videoDuration: 85,\n    malTags: false,\n    malContinue: true,\n    malResume: true,\n    usedPage: true,\n    epPredictions: true,\n    mangaCompletionPercentage: 90,\n\n    theme: 'auto',\n    themeSidebars: true,\n    themeColor: '#000000',\n    themeOpacity: 100,\n    themeImage: '',\n\n    minimalWindow: false,\n    posLeft: 'left',\n    miniMALonMal: false,\n    floatButtonStealth: false,\n    minimizeBigPopup: false,\n    floatButtonCorrection: true,\n    floatButtonHide: false,\n    autoCloseMinimal: false,\n    outWay: true,\n    miniMalWidth: '550px',\n    miniMalHeight: '90%',\n    malThumbnail: 100,\n    friendScore: true,\n    loadPTWForProgress: false,\n\n    quicklinks: [\n      'Crunchyroll',\n      'Gogoanime',\n      'Mangadex',\n      'MangaNato',\n      'MangaFox',\n      'MangaSee',\n      'MangaFire',\n      'HiAnime',\n      'Hulu',\n      'Netflix',\n      'Hidive',\n      'VIZ',\n      'MangaPlus',\n      'MangaReader',\n      'ComicK',\n      'WeebCentral',\n      'KickAssAnime',\n      'animepahe',\n    ],\n    quicklinksPosition: 'default',\n\n    autofull: false,\n    autoresume: false,\n    autoNextEp: false,\n    highlightAllEp: false,\n    checkForFiller: true,\n    crashReport: true,\n\n    introSkip: 85,\n    introSkipFwd: [17, 39],\n    introSkipBwd: [17, 37],\n    nextEpShort: [],\n    correctionShort: [67],\n    syncShort: [],\n\n    progressInterval: 120,\n    progressIntervalDefaultAnime: 'en/sub',\n    progressIntervalDefaultManga: 'en/sub',\n    progressNotificationsAnime: true,\n    progressNotificationsManga: true,\n    notificationsSticky: true,\n\n    bookMarksList: false,\n    bookMarksListManga: false,\n\n    customDomains: [],\n\n    anilistUpdateUi: true,\n\n    anilistToken: '',\n    anilistOptions: {\n      displayAdultContent: true,\n      scoreFormat: 'POINT_10',\n    },\n    kitsuToken: '',\n    kitsuOptions: {\n      titleLanguagePreference: 'canonical',\n      sfwFilter: false,\n      ratingSystem: 'regular',\n    },\n    simklToken: '',\n\n    malToken: '',\n    malRefresh: '',\n\n    shikiToken: '',\n    shikiOptions: {\n      locale: 'ru',\n    },\n  }),\n\n  debounceArray: {},\n\n  chibiList: {} as PageListJsonInterface['pages'],\n\n  isInit: ref(false),\n\n  async init() {\n    const tempSettings = [];\n    for (const key in this.options) {\n      const store = await api.storage.get(`settings/${key}`);\n      if (typeof store !== 'undefined') {\n        this.options[key] = store;\n        tempSettings[key] = /(token|refresh)/i.test(key) && store ? '********' : store;\n      }\n    }\n\n    try {\n      const chibiRepo = await ChibiListRepository.getInstance(true).init();\n      this.chibiList = chibiRepo.getList();\n    } catch (e) {\n      con.error('Error loading chibi repo', e);\n    }\n\n    con.log('Settings', tempSettings);\n\n    let rateDebounce;\n\n    api.storage.storageOnChanged((changes, namespace) => {\n      if (namespace === 'sync') {\n        for (const key in changes) {\n          const storageChange = changes[key];\n          if (/^settings\\//i.test(key)) {\n            this.options[key.replace('settings/', '')] = storageChange.newValue;\n            con.info(`Update ${key} option to ${JSON.stringify(storageChange.newValue, null, 2)}`);\n          }\n        }\n      }\n      if (namespace === 'local' && changes.rateLimit) {\n        try {\n          clearTimeout(rateDebounce);\n          if (changes.rateLimit.newValue) {\n            con.log('Rate limited');\n            if (!$('.type-rate').length) {\n              utils.flashm('Rate limited. Retrying in a moment', {\n                error: true,\n                type: 'rate',\n                permanent: true,\n              });\n            }\n          } else {\n            rateDebounce = setTimeout(() => {\n              con.log('No Rate limited');\n              $('.type-rate').remove();\n            }, 5000);\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      }\n    });\n\n    this.isInit.value = true;\n\n    return this;\n  },\n\n  get(name: string) {\n    if (!this.isInit.value) throw 'Settings not initialized';\n    return this.options[name];\n  },\n\n  set(name: string, value: any) {\n    if (!Object.prototype.hasOwnProperty.call(this.options, name)) {\n      const err = Error(`${name} is not a defined option`);\n      con.error(err);\n      throw err;\n    }\n\n    this.options[name] = value;\n    return api.storage.set(`settings/${name}`, value);\n  },\n\n  setDebounce(name: string, value: any) {\n    this.options[name] = value;\n    clearTimeout(this.debounceArray[name]);\n    this.debounceArray[name] = setTimeout(() => {\n      this.set(name, value);\n      delete this.debounceArray[name];\n    }, 1000);\n  },\n\n  async getAsync(name: string) {\n    const value = await api.storage.get(`settings/${name}`);\n    if (typeof value === 'undefined' && typeof this.options[name] !== 'undefined')\n      return this.options[name];\n    return value;\n  },\n\n  getStaticChibi(): PageListJsonInterface['pages'] {\n    if (!this.isInit.value) throw 'Settings not initialized';\n    return this.chibiList;\n  },\n};\n","import { webextension } from './storage/webextension';\nimport { requestApi } from './request/requestWebextension';\nimport { settingsObj } from './settings';\n\nexport const storage = webextension;\n\nexport const request = requestApi;\n\nexport const settings = settingsObj;\n\nexport const type = 'webextension';\n","import type { domainType } from 'src/background/customDomain';\nimport { PageJsonInterface, PageListJsonInterface } from '../pageInterface';\nimport { greaterCurrentVersion } from '../../utils/version';\n\ntype StorageInterface = {\n  chibiPages: PageListJsonInterface['pages'];\n  errors: Record<string, unknown>;\n};\n\nexport class ChibiListRepository {\n  private collections: string[];\n\n  private pages: PageListJsonInterface['pages'] | null = null;\n\n  private useCache: boolean;\n\n  static getInstance(useCache = false) {\n    let repos;\n    if ((api.type as any) === 'userscript') {\n      repos = ['https://chibi.malsync.moe/config'];\n    } else {\n      repos = [chrome.runtime.getURL('chibi'), 'https://chibi.malsync.moe/config'];\n    }\n    return new ChibiListRepository(repos, useCache);\n  }\n\n  constructor(collections: string[], useCache = false) {\n    this.collections = collections;\n    this.useCache = useCache;\n  }\n\n  async init() {\n    const storageKey = `chibiPages-${api.storage.version()}`;\n    const data: StorageInterface = ((await api.storage.get(\n      storageKey,\n    )) as StorageInterface | null) || { chibiPages: {}, errors: {} };\n\n    if (this.useCache && data.chibiPages && Object.keys(data.chibiPages).length > 0) {\n      this.pages = data.chibiPages;\n      return this;\n    }\n\n    const errors = {};\n    const collectionsData = (\n      await Promise.all(\n        this.collections.map(c =>\n          this.retrieveCollection(c).catch(e => {\n            errors[c] = e;\n            return null as unknown as PageListJsonInterface;\n          }),\n        ),\n      )\n    ).filter(c => c);\n    data.errors = errors;\n\n    collectionsData.forEach(col => {\n      Object.keys(col.pages).forEach(key => {\n        // Skip pages that require a higher version than current\n        if (col.pages[key].minimumVersion && greaterCurrentVersion(col.pages[key].minimumVersion)) {\n          return;\n        }\n\n        const newer =\n          data.chibiPages[key] &&\n          data.chibiPages[key].version.hash !== col.pages[key].version.hash &&\n          Number(data.chibiPages[key].version.timestamp) < Number(col.pages[key].version.timestamp);\n\n        if (!data.chibiPages[key] || newer) {\n          data.chibiPages[key] = col.pages[key];\n        }\n      });\n    });\n\n    await api.storage.set(storageKey, data);\n    this.pages = data.chibiPages;\n\n    return this;\n  }\n\n  async retrieveCollection(root: string) {\n    const response = await api.request.xhr('GET', `${root}/list.json`);\n    const res: PageListJsonInterface = JSON.parse(response.responseText);\n\n    Object.keys(res.pages).forEach(key => {\n      res.pages[key].root = root;\n    });\n    return res;\n  }\n\n  public getList() {\n    if (!this.pages) {\n      throw new Error('Pages not loaded');\n    }\n    return this.pages;\n  }\n\n  public async getPage(key: string) {\n    if (!this.pages) {\n      throw new Error('Pages not loaded');\n    }\n    const page = this.pages[key];\n    if (!page) {\n      throw new Error(`Page ${key} not found`);\n    }\n\n    const response = await api.request.xhr(\n      'GET',\n      `${page.root}/pages/${key}.json?version=${page.version.hash}`,\n    );\n    const res: PageJsonInterface = JSON.parse(response.responseText);\n\n    return res;\n  }\n\n  public getPermissions(): domainType[] {\n    const pages = this.getList();\n    const permissions = Object.values(pages).map(page => {\n      return page.urls.match.map(url => {\n        return {\n          page: `${page.name} (chibi)`,\n          domain: url,\n          auto: true,\n          chibi: true,\n        };\n      });\n    });\n    return permissions.flat();\n  }\n\n  public getPermissionsElements() {\n    const pages = this.getList();\n    return Object.values(pages).map(page => {\n      return {\n        name: `${page.name} (chibi)`,\n        match: page.urls.match,\n      };\n    });\n  }\n}\n","/* eslint-disable no-bitwise */\n\nexport const log = (function () {\n  return Function.prototype.bind.call(\n    console.log,\n    console,\n    '%cMAL-Sync',\n    'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const error = (function () {\n  return Function.prototype.bind.call(\n    console.error,\n    console,\n    '%cMAL-Sync',\n    'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const info = (function () {\n  return Function.prototype.bind.call(\n    console.info,\n    console,\n    '%cMAL-Sync',\n    'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const debug = (function () {\n  return Function.prototype.bind.call(\n    console.debug,\n    console,\n    '%cMAL-Sync',\n    'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const m = (name, color = '', blocks: { name: string; style: string }[] = []) => {\n  let fontColor = 'white';\n  if (!color) color = stringToColour(name);\n  if (color[0] === '#') fontColor = getColorByBgColor(color);\n  const style = `background-color: ${color}; color: ${fontColor}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;\n  blocks.push({\n    name,\n    style,\n  });\n\n  const temp: any = {};\n\n  temp.m = (name2, color2 = '') => {\n    return m(name2, color2, [...blocks]);\n  };\n\n  const moduleText = blocks.reduce((sum, el) => `${sum}%c${el.name}`, '');\n  const moduleStyle = blocks.map(el => el.style);\n\n  temp.log = (function () {\n    return Function.prototype.bind.call(\n      console.log,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.error = (function () {\n    return Function.prototype.bind.call(\n      console.error,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.info = (function () {\n    return Function.prototype.bind.call(\n      console.info,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.debug = (function () {\n    return Function.prototype.bind.call(\n      console.debug,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  return temp;\n};\n\nfunction stringToColour(str) {\n  if (!str) return '#ffffff';\n  str = String(str);\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let colour = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    colour += `00${value.toString(16)}`.substr(-2);\n  }\n  return colour;\n}\n\nfunction getColorByBgColor(bgColor) {\n  return parseInt(bgColor.replace('#', ''), 16) > 0xffffff / 2 ? '#000' : '#fff';\n}\n","declare let browser: any;\n\nexport function urlPart(url: string, part: number) {\n  if (!url) return '';\n\n  const urlParts = url.split('/');\n\n  if (!urlParts[part]) return '';\n\n  return urlParts[part].replace(/[#?].*/, '');\n}\n\nexport function urlStrip(url: string) {\n  return url.replace(/[#?].*/, '');\n}\n\nexport function urlParam(url, name) {\n  const results = new RegExp(`[?&]${name}=([^&#]*)`).exec(url);\n  if (results === null) {\n    return null;\n  }\n  return decodeURI(results[1]) || 0;\n}\n\nexport function getBaseText(element) {\n  let text = element.text();\n  element.children().each(function () {\n    // @ts-ignore\n    text = text.replace(j.$(this).text(), '');\n  });\n  return text;\n}\n\nexport function favicon(domain) {\n  if (!domain) return '';\n  const res = domain.match(/^(https?:\\/\\/)?[^/]+/);\n\n  if (res) domain = res[0];\n\n  return `https://favicon.malsync.moe/?domain=${domain}`;\n}\n\nexport function watching(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Reading';\n  return 'Watching';\n}\n\nexport function planTo(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Plan to Read';\n  return 'Plan to Watch';\n}\n\nexport function episode(type: 'anime' | 'manga') {\n  if (type === 'manga') return api.storage.lang('UI_Chapter');\n  return api.storage.lang('UI_Episode');\n}\n\nexport const syncRegex =\n  /(^settings\\/.*|^updateCheckTime$|^tempVersion$|^local:\\/\\/|^list-tagSettings$)/;\n\nexport const rateLimitExclude = /^https:\\/\\/api.malsync.moe\\/(shark|mal\\/|nc\\/mal\\/.*\\/progress$)/i;\n\n// eslint-disable-next-line no-shadow\nexport enum status {\n  // eslint-disable-next-line no-shadow\n  watching = 1,\n  completed = 2,\n  onhold = 3,\n  dropped = 4,\n  planToWatch = 6,\n}\n\nexport function getselect(data, name) {\n  let temp = data.split(`name=\"${name}\"`)[1].split('</select>')[0];\n  if (temp.indexOf('selected=\"selected\"') > -1) {\n    temp = temp.split('<option');\n    for (let i = 0; i < temp.length; ++i) {\n      if (temp[i].indexOf('selected=\"selected\"') > -1) {\n        return temp[i].split('value=\"')[1].split('\"')[0];\n      }\n    }\n  }\n  return '';\n}\n\nexport function absoluteLink(url, domain) {\n  if (typeof url === 'undefined') {\n    return url;\n  }\n  if (!url.startsWith('http')) {\n    if (url.charAt(0) !== '/') url = `/${url}`;\n    url = domain + url;\n  }\n  return url;\n}\n\nexport function parseHtml(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(`<!doctype html><body>${text}`, 'text/html');\n  return dom.body.textContent;\n}\n\nexport function urlChangeDetect(callback) {\n  let currentPage = window.location.href;\n  return setInterval(function () {\n    if (currentPage !== window.location.href) {\n      currentPage = window.location.href;\n      callback();\n    }\n  }, 100);\n}\n\nexport function fullUrlChangeDetect(callback, strip = false) {\n  let currentPage = '';\n  const intervalId = setInterval(function () {\n    const url = strip ? urlStrip(window.location.href) : window.location.href;\n    if (currentPage !== url) {\n      currentPage = url;\n      callback();\n    }\n  }, 100);\n\n  return Number(intervalId);\n}\n\nexport function changeDetect(callback, func, immediate = false) {\n  let currentPage = func();\n  const intervalId = setInterval(function () {\n    const temp = func();\n    if (typeof temp !== 'undefined' && currentPage !== temp) {\n      currentPage = func();\n      callback();\n    }\n  }, 500);\n\n  if (immediate) callback();\n\n  return Number(intervalId);\n}\n\nexport function waitUntilTrue(condition: Function, callback: Function, interval = 100) {\n  let counter = 0;\n\n  const intervalId = setInterval(function () {\n    counter++;\n    let state = false;\n    try {\n      state = condition();\n    } catch (e) {\n      con.info('Error in waitUntilTrue', e);\n    }\n    if (state) {\n      clearInterval(intervalId);\n      callback();\n    }\n    if (counter > 10) {\n      clearInterval(intervalId);\n      const newIntervalTime = Math.max(Math.min(interval * 2, 15000), 500);\n      waitUntilTrue(condition, callback, newIntervalTime);\n    }\n  }, interval);\n\n  return intervalId;\n}\n\nexport function getAsyncWaitUntilTrue(condition: Function, interval = 100) {\n  let intervalId;\n  let rejectThis;\n  const reset = () => {\n    clearTimeout(intervalId);\n    if (rejectThis) rejectThis('AsyncWait stopped');\n  };\n\n  return {\n    asyncWaitUntilTrue: () => {\n      reset();\n      return new Promise<void>((resolve, reject) => {\n        rejectThis = reject;\n        intervalId = waitUntilTrue(condition, () => resolve(), interval);\n      });\n    },\n    reset,\n  };\n}\n\nconst doubleId = Math.random();\nexport function checkDoubleExecution() {\n  if ($('.mal-sync-double-detect').length) {\n    $('.mal-sync-double-detect').each(function (index) {\n      if ($(this).text() !== doubleId.toString()) {\n        alert('Double execution detected! Please run MAL-Sync once only.');\n      }\n    });\n  }\n  $('body').after(\n    j.html(\n      `<div class=\"mal-sync-double-detect\" style=\"display: none;\">${doubleId.toString()}</div>`,\n    ),\n  );\n}\n\nexport function getUrlFromTags(tags: string) {\n  if (/malSync::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('malSync::')[1].split('::')[0]);\n  }\n  if (/last::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('last::')[1].split('::')[0]);\n  }\n  return undefined;\n\n  function atobURL(encoded) {\n    try {\n      return atob(encoded);\n    } catch (e) {\n      return encoded;\n    }\n  }\n}\n\nexport function setUrlInTags(url: string, tags: string) {\n  if (url === '') {\n    tags = tags.replace(/,?(malSync|last)::[^ \\n]+?::/, '');\n    return tags;\n  }\n  if (!api.settings.get('malTags')) return tags;\n  const addition = `malSync::${btoa(url)}::`;\n  if (/(last|malSync)::[\\d\\D]+::/.test(tags)) {\n    tags = tags.replace(/(last|malSync)::[^^]*?::/, addition);\n  } else {\n    tags = `${tags},${addition}`;\n  }\n  return tags;\n}\n\nexport async function setResumeWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`resume/${type}/${id}`, { url, ep });\n}\n\nexport async function getResumeWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malResume')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`resume/${type}/${id}`);\n}\n\nexport async function setContinueWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`continue/${type}/${id}`, { url, ep });\n}\n\nexport async function getContinueWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malContinue')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`continue/${type}/${id}`);\n}\n\nexport async function setEntrySettings(type, id, options, tags = '') {\n  const tempOptions = {};\n  if (options) {\n    for (const key in options) {\n      switch (key) {\n        case 'u':\n        case 'p':\n          tempOptions[key] = options[key];\n          break;\n        default:\n      }\n    }\n\n    if (api.settings.get('malTags')) {\n      // TAG mode\n      tags = setUrlInTags(JSON.stringify(tempOptions), tags);\n    } else {\n      // No TAG mode\n      await api.storage.set(`tagSettings/${type}/${id}`, JSON.stringify(tempOptions));\n    }\n  }\n\n  if (!Object.values(tempOptions).find(el => Boolean(el))) {\n    tags = setUrlInTags('', tags);\n    if (!api.settings.get('malTags')) {\n      await api.storage.remove(`tagSettings/${type}/${id}`);\n    }\n  }\n\n  return tags;\n}\n\nexport async function getEntrySettings(type, id, tags = '') {\n  const tempOptions: any = {\n    u: null, // url\n    c: null, // Continue Url\n    r: null, // Resume Url\n    p: '', // Progress Mode\n  };\n\n  if (api.settings.get('malTags')) {\n    // TAG mode\n    const tagString = getUrlFromTags(tags);\n    if (tagString) {\n      if (tagString[0] === '{') {\n        try {\n          const temp = JSON.parse(tagString);\n          for (const key in tempOptions) {\n            if (temp[key]) tempOptions[key] = temp[key];\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      } else {\n        tempOptions.u = tagString;\n      }\n    }\n  } else {\n    // No TAG mode\n    let temp: any = await api.storage.get(`tagSettings/${type}/${id}`);\n\n    if (temp) {\n      temp = JSON.parse(temp);\n\n      for (const key in tempOptions) {\n        if (temp[key]) tempOptions[key] = temp[key];\n      }\n    }\n  }\n\n  const continueUrlObj = await getContinueWaching(type, id);\n  if (continueUrlObj) tempOptions.c = continueUrlObj;\n  const resumeUrlObj = await getResumeWaching(type, id);\n  if (resumeUrlObj) tempOptions.r = resumeUrlObj;\n\n  if (!api.settings.get('usedPage')) tempOptions.u = null;\n\n  return tempOptions;\n}\n\nexport function handleMalImages(url) {\n  if (url.indexOf('questionmark') !== -1) return api.storage.assetUrl('questionmark.gif');\n  return url;\n}\n\nexport function getTooltip(text, style = '', direction = 'top') {\n  const rNumber = Math.floor(Math.random() * 1000 + 1);\n  return `<div id=\"tt${rNumber}\" class=\"icon material-icons\" style=\"font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${style}\">contact_support</div>\\\n  <div class=\"mdl-tooltip mdl-tooltip--${direction} mdl-tooltip--large\" for=\"tt${rNumber}\">${text}</div>`;\n}\n\nexport function timeDiffToText(delta) {\n  let text = '';\n\n  delta /= 1000;\n\n  const diffYears = Math.floor(delta / 31536000);\n  delta -= diffYears * 31536000;\n  if (diffYears) {\n    text += `${diffYears}y `;\n  }\n\n  const diffDays = Math.floor(delta / 86400);\n  delta -= diffDays * 86400;\n  if (diffDays) {\n    text += `${diffDays}d `;\n  }\n\n  const diffHours = Math.floor(delta / 3600) % 24;\n  delta -= diffHours * 3600;\n  if (diffHours && diffDays < 2) {\n    text += `${diffHours}h `;\n  }\n\n  const diffMinutes = Math.floor(delta / 60) % 60;\n  delta -= diffMinutes * 60;\n  if (diffMinutes && !diffDays && diffHours < 3) {\n    text += `${diffMinutes}min `;\n  }\n\n  return text;\n}\n\nexport function canHideTabs() {\n  if (typeof browser !== 'undefined' && typeof browser.tabs.hide !== 'undefined') {\n    return true;\n  }\n  return false;\n}\n\n// eslint-disable-next-line no-shadow\nexport function statusTag(status, type, id) {\n  const info = {\n    anime: {\n      1: {\n        class: 'watching',\n        text: 'CW',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantowatch',\n        text: 'PTW',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n    manga: {\n      1: {\n        class: 'reading',\n        text: 'CR',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantoread',\n        text: 'PTR',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n  };\n\n  $.each([1, 2, 3, 4, 6, 23], function (i, el) {\n    info.anime[info.anime[el].title] = info.anime[el];\n    info.manga[info.manga[el].title] = info.manga[el];\n  });\n\n  if (status && info[type][status]) {\n    const tempInfo = info[type][status];\n    return ` <a href=\"https://myanimelist.net/ownlist/${type}/${id}/edit?hideLayout=1\" title=\"${tempInfo.title}\" class=\"Lightbox_AddEdit button_edit ${tempInfo.class}\">${tempInfo.text}</a>`;\n  }\n  return false;\n}\n\nexport function getStatusText(type: 'anime' | 'manga', state) {\n  switch (state) {\n    case 1:\n      return api.storage.lang(`UI_Status_watching_${type}`);\n    case 2:\n      return api.storage.lang('UI_Status_Completed');\n    case 3:\n      return api.storage.lang('UI_Status_OnHold');\n    case 4:\n      return api.storage.lang('UI_Status_Dropped');\n    case 6:\n      return api.storage.lang(`UI_Status_planTo_${type}`);\n    case 7:\n      return api.storage.lang('UI_Status_All');\n    case 23:\n      return api.storage.lang(`UI_Status_Rewatching_${type}`);\n    default:\n      return '';\n  }\n}\n\n// eslint-disable-next-line consistent-return\nexport function notifications(url: string, title: string, message: string, iconUrl = '') {\n  const messageObj: chrome.notifications.NotificationOptions<true> = {\n    type: 'basic',\n    title,\n    message,\n    iconUrl,\n  };\n\n  con.log('Notification', url, messageObj);\n\n  api.storage.get('notificationHistory').then(history => {\n    if (history === undefined) {\n      history = [];\n    }\n\n    if (typeof history !== 'object') return;\n\n    if (history.length >= 10) {\n      history.shift();\n    }\n    history.push({\n      url,\n      title: messageObj.title,\n      message: messageObj.message,\n      iconUrl: messageObj.iconUrl,\n      timestamp: Date.now(),\n    });\n    api.storage.set('notificationHistory', history);\n  });\n\n  try {\n    return chrome.notifications.create(url, messageObj);\n  } catch (e) {\n    con.error(e);\n  }\n}\n\nexport async function timeCache(key, dataFunction, ttl) {\n  const value = await api.storage.get(key);\n  if (typeof value === 'object' && new Date().getTime() < value.timestamp) {\n    return value.data;\n  }\n  const result = await dataFunction();\n  return api.storage.set(key, { data: result, timestamp: new Date().getTime() + ttl }).then(() => {\n    return result;\n  });\n}\n\n// flashm\nexport function flashm(\n  text,\n  options?: {\n    error?: boolean;\n    type?: string;\n    permanent?: boolean;\n    hoverInfo?: boolean;\n    position?: 'top' | 'bottom';\n    minimized?: boolean;\n  },\n) {\n  if (!j.$('#flash-div-top').length) {\n    initflashm();\n  }\n  con.log('[Flash] Message:', text);\n\n  let colorF = '#323232';\n  if (typeof options !== 'undefined' && typeof options.error !== 'undefined' && options.error) {\n    colorF = '#3e0808';\n  }\n\n  let flashdiv = '#flash-div-bottom';\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.position !== 'undefined' &&\n    options.position\n  ) {\n    flashdiv = `#flash-div-${options.position}`;\n  }\n\n  let messClass = 'flash';\n  if (typeof options !== 'undefined' && typeof options.type !== 'undefined' && options.type) {\n    const tempClass = `type-${options.type}`;\n    j.$(`${flashdiv} .${tempClass}, #flashinfo-div .${tempClass}`)\n      .removeClass(tempClass)\n      .fadeOut({\n        duration: 1000,\n        queue: false,\n        complete() {\n          j.$(this).remove();\n        },\n      });\n\n    messClass += ` ${tempClass}`;\n  }\n\n  let mess = `<div class=\"${messClass}\" style=\"display:none;\">\\\n        <div style=\"display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; \">\\\n          ${text}\\\n        </div>\\\n      </div>`;\n\n  let flashmEl;\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    messClass += ' flashinfo';\n    mess = `<div class=\"${messClass}\" style=\"display:none; max-height: 5000px; overflow: hidden;\"><div style=\"display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; position: relative;\"><div style=\"max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;\">${text}</div></div></div>`;\n    j.$('#flashinfo-div').addClass('hover');\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo('#flashinfo-div');\n    if (\n      typeof options !== 'undefined' &&\n      typeof options.minimized !== 'undefined' &&\n      options.minimized\n    )\n      flashmEl.css('max-height', '8px');\n  } else {\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo(flashdiv);\n  }\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.permanent !== 'undefined' &&\n    options.permanent\n  ) {\n    flashmEl.slideDown(800);\n  } else if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .queue(function () {\n        j.$('#flashinfo-div').removeClass('hover');\n        flashmEl.css('max-height', '8px');\n      });\n  } else {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .slideUp(800, () => {\n        // @ts-ignore\n        j.$(this).remove();\n      });\n  }\n  return flashmEl;\n}\n\nexport async function flashConfirm(\n  message,\n  type,\n  yesCall = () => {\n    /* Placeholder */\n  },\n  cancelCall = () => {\n    /* Placeholder */\n  },\n  yesNo = false,\n): Promise<boolean> {\n  return new Promise(function (resolve, reject) {\n    let yesText = api.storage.lang('Ok');\n    let noText = api.storage.lang('Cancel');\n    if (yesNo) {\n      yesText = api.storage.lang('Yes');\n      noText = api.storage.lang('No');\n    }\n    message = `<div style=\"text-align: center;\">${message}</div><div style=\"display: flex; justify-content: space-around;\"><button class=\"Yes\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${yesText}</button><button class=\"Cancel\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${noText}</button></div>`;\n    const flasmessage = flashm(message, {\n      permanent: true,\n      position: 'top',\n      type,\n    });\n    flasmessage.find('.Yes').click(function (evt) {\n      resolve(true);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      yesCall();\n    });\n    flasmessage.find('.Cancel').click(function (evt) {\n      resolve(false);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      cancelCall();\n    });\n  });\n}\n\nfunction initflashm() {\n  api.storage.addStyle(\n    `.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }`,\n  );\n\n  let extraClass = '';\n  if (api.settings.get('floatButtonStealth')) extraClass = 'mini-stealth';\n\n  j.$('body').after(\n    j.html(\n      `<div id=\"flash-div-top\" dir=\"${api.storage.langDirection()}\" style=\"text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;\"></div>\\\n        <div id=\"flash-div-bottom\" dir=\"${api.storage.langDirection()}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;\"><div id=\"flash\" style=\"display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);\"></div></div>\\\n        <div id=\"flashinfo-div\" dir=\"${api.storage.langDirection()}\" class=\"${extraClass}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;\">`,\n    ),\n  );\n}\n\nlet lazyloaded = false;\nlet lazyimages: any[] = [];\n\nexport function lazyload(doc, scrollElement = '.mdl-layout__content') {\n  /* lazyload.js (c) Lorenzo Giuliani\n   * MIT License (http://www.opensource.org/licenses/mit-license.html)\n   *\n   * expects a list of:\n   * `<img src=\"blank.gif\" data-src=\"my_image.png\" width=\"600\" height=\"400\" class=\"lazy\">`\n   */\n  // eslint-disable-next-line\n  function loadImage(el, fn) {\n    if (!j.$(el).is(':visible')) return false;\n    if (j.$(el).hasClass('lazyBack')) {\n      j.$(el)\n        .css('background-image', `url(${el.getAttribute('data-src')})`)\n        .removeClass('lazyBack');\n    } else {\n      const img = new Image();\n      const src = el.getAttribute('data-src');\n      img.onload = function () {\n        if (el.parent) el.parent.replaceChild(img, el);\n        else el.src = src;\n        // eslint-disable-next-line\n        fn ? fn() : null;\n      };\n      img.src = src;\n    }\n  }\n\n  for (let i = 0; i < lazyimages.length; i++) {\n    $(lazyimages[i]).addClass('init');\n  }\n\n  lazyimages = [];\n  const query = doc.find('img.lazy.init, .lazyBack.init');\n  const processScroll = function () {\n    for (let i = 0; i < lazyimages.length; i++) {\n      if (utils.elementInViewport(lazyimages[i], 600)) {\n        // eslint-disable-next-line\n        loadImage(lazyimages[i], function() {\n          lazyimages.splice(i, i);\n        });\n      }\n      if (!$(lazyimages[i]).length) {\n        lazyimages.splice(i, i);\n      }\n    }\n  };\n  // Array.prototype.slice.call is not callable under our lovely IE8\n  for (let i = 0; i < query.length; i++) {\n    lazyimages.push(query[i]);\n    $(query[i]).removeClass('init');\n  }\n\n  processScroll();\n\n  if (!lazyloaded) {\n    lazyloaded = true;\n    doc.find(scrollElement).scroll(function () {\n      processScroll();\n    });\n  }\n}\n\nexport function elementInViewport(el, horizontalOffset = 0) {\n  const rect = el.getBoundingClientRect();\n\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    // @ts-ignore\n    rect.top - horizontalOffset <= (window.innerHeight || document.documentElement.clientHeight)\n  );\n}\n\nexport function wait(ms: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport function pageUrl(\n  page: 'mal' | 'anilist' | 'kitsu' | 'simkl',\n  type: 'anime' | 'manga',\n  id: string | number,\n) {\n  switch (page) {\n    case 'mal':\n      return `https://myanimelist.net/${type}/${id}`;\n    case 'anilist':\n      return `https://anilist.co/${type}/${id}`;\n    case 'kitsu':\n      return `https://kitsu.app/${type}/${id}`;\n    case 'simkl':\n      return `https://simkl.com/${type}/${id}`;\n    default:\n      throw `${page} not a valid page`;\n  }\n}\n\nexport function returnYYYYMMDD(numFromToday = 0) {\n  const d = new Date();\n  d.setDate(d.getDate() + numFromToday);\n  const month = (d.getMonth() + 1).toString().padStart(2, '0');\n  const day = d.getDate().toString().padStart(2, '0');\n  return `${d.getFullYear()}-${month}-${day}`;\n}\n\nexport function htmlDecode(text) {\n  return $('<textarea/>').html(j.html(text)).text();\n}\n\nexport function isFirefox(): boolean {\n  return Boolean(typeof browser !== 'undefined' && typeof chrome !== 'undefined');\n}\n\nexport function waitForPageToBeVisible() {\n  const condition = () =>\n    Boolean(!document.visibilityState || document.visibilityState === 'visible');\n\n  if (condition()) return Promise.resolve();\n\n  con.log('Page in background');\n\n  const { asyncWaitUntilTrue: awaitUi } = getAsyncWaitUntilTrue(() => condition());\n\n  return awaitUi().then(() => {\n    con.log('Page is visible');\n  });\n}\n\nexport async function clearCache() {\n  const cacheObj = await api.storage.list();\n  let deleted = 0;\n\n  for (const key in cacheObj) {\n    if (!utils.syncRegex.test(key) && !/(^tagSettings\\/.*)/.test(key)) {\n      api.storage.remove(key);\n      deleted++;\n    }\n  }\n\n  utils.flashm(`Cache Cleared [${deleted}]`);\n}\n\nexport function sortAlphabetically(a, b) {\n  if (a.toLowerCase() < b.toLowerCase()) return -1;\n  if (a.toLowerCase() > b.toLowerCase()) return 1;\n  return 0;\n}\n\nexport function isDomainMatching(url, domain) {\n  const urlObj = new URL(url);\n  const { host } = urlObj;\n  return host === domain || host.endsWith(`.${domain}`);\n}\n\nexport function upperCaseFirstLetter(string) {\n  if (!string || string.length < 2) return string;\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import DOMPurify from 'dompurify';\n\nexport const $ = jQuery;\n\nexport function html(htmlContent) {\n  return DOMPurify.sanitize(htmlContent, {\n    ALLOW_UNKNOWN_PROTOCOLS: true,\n    ADD_ATTR: ['target'],\n  });\n}\n","import semverGte from 'semver/functions/gte';\nimport semverGt from 'semver/functions/gt';\n\nexport function getCurrentVersion(): string {\n  return api.storage.version();\n}\n\nexport function greaterOrEqualCurrentVersion(version: string): boolean {\n  return semverGte(version, getCurrentVersion());\n}\n\nexport function greaterCurrentVersion(version: string): boolean {\n  return semverGt(version, getCurrentVersion()) && version !== getCurrentVersion();\n}\n","/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.2.5';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      let value = name === 'value' ? attrValue : stringTrim(attrValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n        } else {\n          arrayPop(DOMPurify.removed);\n        }\n      } catch (_) {}\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable no-shadow */\n/* export enum type {\n  Anime = \"anime\",\n  Manga = \"manga\"\n} */\n\nimport { Component } from 'vue';\n\nexport type contentType = 'anime' | 'manga';\n\nexport type syncMethod = 'normal' | 'listSync';\n\nexport enum status {\n  NoState = 0,\n  Watching = 1,\n  Completed = 2,\n  Onhold = 3,\n  Dropped = 4,\n  PlanToWatch = 6,\n  All = 7,\n  Rewatching = 23,\n}\n\nexport enum score {\n  NoScore = 0,\n  R1 = 1,\n  R2 = 2,\n  R3 = 3,\n  R4 = 4,\n  R5 = 5,\n  R6 = 6,\n  R7 = 7,\n  R8 = 8,\n  R9 = 9,\n  R10 = 10,\n}\n\n// score range 0 - 100\nexport type score100 = number;\n\n// YYYY-MM-DD format\nexport type startFinishDate = string | null;\n\nexport type fuzzyDate = {\n  year: number | null;\n  month: number | null;\n  day: number | null;\n};\n\nexport type rewatchCount = number;\n\nexport type searchResult = {\n  id: number;\n  name: string;\n  altNames: string[];\n  url: string;\n  malUrl: () => Promise<string | null>;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  media_type: string;\n  isNovel: boolean;\n  score: string;\n  year: string;\n  totalEp?: number;\n  list?: {\n    status: status;\n    score: score;\n    episode: number;\n  };\n};\n\nexport type searchInterface = (\n  keyword: string,\n  type: 'anime' | 'manga',\n  options?: {},\n  sync?: boolean,\n) => Promise<searchResult[]>;\n\nexport interface ConfObj {\n  key: string;\n  title: string | (() => string);\n  system?: 'userscript' | 'webextension';\n  component: Component;\n  condition?: () => boolean;\n  change?: () => void;\n  props?: { [key: string]: any };\n  children?: ConfObj[];\n}\n","let store: Pick<Storage, 'getItem' | 'setItem' | 'clear' | 'removeItem'>;\n\nif (checkLocalStorageIsAvailable()) {\n  store = localStorage;\n} else {\n  let storage = {};\n  store = {\n    getItem(key) {\n      return key in storage ? storage[key] : null;\n    },\n    setItem(key, value) {\n      storage[key] = value;\n    },\n    removeItem(key) {\n      if (key in storage) delete storage[key];\n    },\n    clear() {\n      storage = {};\n    },\n  };\n}\n\nexport const localStore = store;\n\nfunction checkLocalStorageIsAvailable() {\n  try {\n    localStorage.getItem('x');\n    return true;\n  } catch (e) {\n    con.info('Local storage is not available', e);\n    return false;\n  }\n}\n","import { localStore } from './localStore';\n\nexport class Cache {\n  constructor(\n    protected key: string,\n    protected ttl: number,\n    protected localStorage: boolean = true,\n    protected refetchTtl: number = 0,\n  ) {\n    return this;\n  }\n\n  protected containsValue(value) {\n    return typeof value !== 'undefined' && value !== null;\n  }\n\n  protected valueValid(value, ttl) {\n    if (!value || !value.timestamp) return false;\n    return new Date().getTime() < value.timestamp + ttl;\n  }\n\n  protected ttlValid(value) {\n    return this.valueValid(value, this.ttl);\n  }\n\n  protected refetchTtlValid(value) {\n    return this.valueValid(value, this.refetchTtl);\n  }\n\n  async hasValue() {\n    const value = await this.getStorage();\n    if (this.containsValue(value) && this.ttlValid(value)) {\n      return true;\n    }\n    return false;\n  }\n\n  async hasValueAndIsNotEmpty() {\n    const value = await this.getStorage();\n    if (\n      this.containsValue(value) &&\n      typeof value.data !== 'undefined' &&\n      value.data !== null &&\n      Object.keys(value.data).length &&\n      this.ttlValid(value)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  async fullState() {\n    const value = await this.getStorage();\n    const hasValue = this.containsValue(value) && this.refetchTtlValid(value);\n    const isValid = this.ttlValid(value);\n    return {\n      value,\n      hasValue,\n      isValid,\n      refetch: hasValue && !isValid,\n    };\n  }\n\n  async getValue() {\n    const value = await this.getStorage();\n    return value.data;\n  }\n\n  async setValue(result) {\n    const save = { data: result, timestamp: new Date().getTime() };\n    if (this.localStorage) {\n      return localStore.setItem(this.key, JSON.stringify(save));\n    }\n    return api.storage.set(this.key, save);\n  }\n\n  async clearValue() {\n    if (this.localStorage) {\n      return localStore.removeItem(this.key);\n    }\n    return api.storage.remove(this.key);\n  }\n\n  protected async getStorage() {\n    if (this.localStorage) {\n      return JSON.parse(localStore.getItem(this.key)!);\n    }\n    return api.storage.get(this.key);\n  }\n}\n","import { Cache } from '../utils/Cache';\nimport type { listElement } from '../_provider/listAbstract';\nimport { xhrResponseI } from '../api/messageInterface';\n\nexport interface releaseItemInterface {\n  timestamp: number;\n  value: any;\n  finished: boolean;\n  mode: string;\n}\n\nexport async function predictionXhrGET(type: string, apiCacheKey: number | string | null) {\n  if (!apiCacheKey) return {};\n  const response = await api.request.xhr(\n    'GET',\n    `https://api.malsync.moe/nc/mal/${type}/${apiCacheKey}/pr`,\n  );\n  return JSON.parse(response.responseText);\n}\n\nexport async function predictionXhrPOST(type: string, malDATA: listElement[] | null) {\n  if (malDATA === null) return [];\n  if (malDATA.length <= 0) return [];\n  const malDATAID = malDATA.map(el => el.apiCacheKey);\n  const returnArray: xhrResponseI[] = [];\n  for (let i = 0; i <= malDATAID.length; ) {\n    const tempArray = malDATAID.slice(i, i + 49);\n    const Request = {\n      url: `https://api.malsync.moe/nc/mal/${type}/POST/pr`,\n      data: JSON.stringify({ malids: tempArray }),\n      headers: { 'Content-Type': 'application/json' },\n    };\n    await utils.wait(5000);\n    const response = await api.request.xhr('POST', Request);\n    returnArray.push(JSON.parse(response.responseText));\n    i += 50;\n  }\n\n  return returnArray.reduce((acc: xhrResponseI[], val) => acc.concat(val), []);\n}\n\nexport async function single(\n  el: {\n    uid: number;\n    apiCacheKey: number | string | null;\n    title: string;\n    cacheKey: string;\n    watchedEp: number;\n    single: any;\n    xhr?: object;\n  },\n  type,\n  mode = 'default',\n  logger = con.m('release'),\n) {\n  if (!mode) mode = 'default';\n  logger = logger.m(el.uid.toString());\n  logger.log(el.title, el.cacheKey, el.apiCacheKey, `Mode: ${mode}`);\n  if (!el.apiCacheKey) {\n    logger.log('No Api Cache Id');\n    return;\n  }\n  if (!api.settings.get('epPredictions')) {\n    logger.log('epPredictions disabled');\n    return;\n  }\n  const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n    `release/${type}/${el.cacheKey}`,\n  );\n\n  logger.m('Load').log(releaseItem);\n\n  let force = false;\n\n  if (releaseItem && releaseItem.mode && releaseItem.mode !== mode) force = true;\n\n  if (\n    releaseItem &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 2 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Up to date');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    releaseItem.finished &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 7 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Finished');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    !releaseItem.value &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 1 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Nulled');\n    return;\n  }\n\n  if (force) logger.log('Update forced');\n\n  if (mode === 'off') {\n    logger.log('Disabled');\n    el.xhr = [];\n  }\n\n  let xhr;\n  if (typeof el.xhr !== 'undefined') {\n    xhr = el.xhr;\n  } else {\n    xhr = await predictionXhrGET(type, el.apiCacheKey);\n    await utils.wait(500);\n  }\n  logger.log(xhr);\n\n  const progressValue = getProgress(xhr, mode, type);\n\n  if (!progressValue) {\n    logger.log('No value for the selected mode');\n  }\n\n  let finished = false;\n\n  if (progressValue && progressValue.state && progressValue.state === 'complete') finished = true;\n\n  logger.m('Save').log(progressValue);\n  if (releaseItem && releaseItem.value) {\n    notificationCheck(el, releaseItem.value, progressValue, type);\n  }\n\n  await api.storage.set(`release/${type}/${el.cacheKey}`, {\n    timestamp: Date.now(),\n    value: progressValue,\n    mode,\n    finished,\n  } as releaseItemInterface);\n}\n\nexport function progressIsOld(releaseItem: releaseItemInterface) {\n  if (releaseItem && releaseItem.timestamp) {\n    const diff = new Date().getTime() - releaseItem.timestamp;\n\n    if (releaseItem.finished && diff < 7 * 24 * 60 * 60 * 1000) {\n      // logger.log('Finished');\n      return false;\n    }\n\n    if (!releaseItem.value && diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('Nulled');\n      return false;\n    }\n\n    if (diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('not old');\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getProgress(res, mode, type) {\n  const config: {\n    mainId?: string;\n    fallbackPrediction?: string;\n    fallback?: string;\n  } = {};\n\n  if (!res.length) return null;\n\n  if (mode === 'default') {\n    if (type === 'anime') {\n      config.mainId = api.settings.get('progressIntervalDefaultAnime');\n    } else {\n      config.mainId = api.settings.get('progressIntervalDefaultManga');\n    }\n    config.fallback = 'en/sub';\n  } else {\n    config.mainId = mode;\n  }\n\n  config.fallbackPrediction = 'jp/dub';\n\n  let top;\n\n  if (config.mainId) {\n    const mainTemp = res.find(el => el.id === config.mainId);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallback && !top) {\n    const mainTemp = res.find(el => el.id === config.fallback);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallbackPrediction && top && !top.predicition && top.lastEp && top.lastEp.timestamp) {\n    const predTemp = res.find(el => el.id === config.fallbackPrediction);\n    const predTime = top.lastEp.timestamp + 7 * 24 * 60 * 60 * 1000;\n    if (predTime && predTemp && predTemp.predicition) {\n      if (top.lastEp.total === predTemp.lastEp.total) {\n        if (Math.abs(predTime - predTemp.predicition.timestamp) < 30 * 60 * 60 * 1000) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      } else if (predTemp.lastEp.total && top.lastEp.total === predTemp.lastEp.total - 1) {\n        if (\n          Math.abs(predTime - (predTemp.predicition.timestamp - 7 * 24 * 60 * 60 * 1000)) <\n          30 * 60 * 60 * 1000\n        ) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      }\n    }\n  }\n\n  // Fallback to jp if no other language found and episode 0 -> Before release\n  if (config.fallbackPrediction && !top) {\n    const predSoon = res.find(el => el.id === config.fallbackPrediction);\n    if (predSoon && predSoon.lastEp && predSoon.predicition && predSoon.lastEp.total === 0) {\n      top = predSoon;\n      top.predicition.probability = 'medium';\n    }\n  }\n\n  if (!top) return null;\n\n  return top;\n}\n\nexport async function getProgressTypeList(\n  type: 'anime' | 'manga',\n): Promise<{ key: string; label: string }[]> {\n  const cacheObj = new Cache(`ProgressTypeList${type}`, 24 * 60 * 60 * 1000, false);\n  if (!(await cacheObj.hasValueAndIsNotEmpty())) {\n    con.log('Getting new ProgressTypeList Cache');\n    const url = `https://api.malsync.moe/general/progress/${type}`;\n    const request = await api.request.xhr('GET', url).then(async response => {\n      if (response.status === 200 && response.responseText) {\n        return JSON.parse(response.responseText);\n      }\n      return [];\n    });\n    await cacheObj.setValue(request);\n    return request;\n  }\n  con.log('PageSearch Cached');\n  return cacheObj.getValue();\n}\n\nexport async function notificationCheck(el, cProgress, nProgress, type) {\n  try {\n    if (\n      (type === 'anime' && !api.settings.get('progressNotificationsAnime')) ||\n      (type === 'manga' && !api.settings.get('progressNotificationsManga'))\n    ) {\n      return;\n    }\n    if (el && nProgress && nProgress) {\n      if (\n        cProgress.lastEp &&\n        typeof cProgress.lastEp.total !== 'undefined' &&\n        nProgress.lastEp &&\n        nProgress.lastEp.total &&\n        cProgress.lang === nProgress.lang &&\n        cProgress.type === nProgress.type\n      ) {\n        if (cProgress.lastEp.total < nProgress.lastEp.total) {\n          // Check if new ep is one higher than the watched one\n          if (el.watchedEp + 1 === nProgress.lastEp.total) {\n            let noti;\n            if (el.single) {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: api.settings.get('notificationsSticky'),\n                image: await el.single.getImage(),\n                url: el.single.getStreamingUrl() ? el.single.getStreamingUrl() : el.single.getUrl(),\n              };\n            } else {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: api.settings.get('notificationsSticky'),\n                image: el.image,\n                url: el.options && el.options.u ? el.options.u : el.url,\n              };\n            }\n            api.request.notification(noti);\n          }\n        }\n      }\n    }\n  } catch (e) {\n    con.error('Could not check notification Progress', e);\n  }\n}\n","/* eslint-disable no-case-declarations */\n/* eslint-disable max-classes-per-file */\n// TODO: Delete @ts-expect-error comments after TS will add support for Intl.DurationFormat\n\nexport type DurationStyle = 'Duration' | 'Progress' | 'M/H/D/Y';\n\nexport interface DurationFormatOptions {\n  style?: 'long' | 'short' | 'narrow' | 'digital' | 'significantLongNarrow' | undefined;\n  years?: 'long' | 'short' | 'narrow' | undefined;\n  yearsDisplay?: 'auto' | 'always' | undefined;\n  months?: 'long' | 'short' | 'narrow' | undefined;\n  monthsDisplay?: 'auto' | 'always' | undefined;\n  weeks?: 'long' | 'short' | 'narrow' | undefined;\n  weeksDisplay?: 'auto' | 'always' | undefined;\n  days?: 'long' | 'short' | 'narrow' | undefined;\n  daysDisplay?: 'auto' | 'always' | undefined;\n  hours?: 'long' | 'short' | 'narrow' | 'numeric' | '2-digit' | undefined;\n  hoursDisplay?: 'auto' | 'always' | undefined;\n  minutes?: 'long' | 'short' | 'narrow' | 'numeric' | '2-digit' | undefined;\n  minutesDisplay?: 'auto' | 'always' | undefined;\n  seconds?: 'long' | 'short' | 'narrow' | 'numeric' | '2-digit' | undefined;\n  secondsDisplay?: 'auto' | 'always' | undefined;\n  milliseconds?: 'long' | 'short' | 'narrow' | 'numeric' | undefined;\n  millisecondsDisplay?: 'auto' | 'always' | undefined;\n  microseconds?: 'long' | 'short' | 'narrow' | 'numeric' | undefined;\n  microsecondsDisplay?: 'auto' | 'always' | undefined;\n  nanoseconds?: 'long' | 'short' | 'narrow' | 'numeric' | undefined;\n  nanosecondsDisplay?: 'auto' | 'always' | undefined;\n  fractionalDigits?: number | undefined;\n}\n\nexport interface DurationFormat {\n  years?: number;\n  months?: number;\n  weeks?: number;\n  days?: number;\n  hours?: number;\n  minutes?: number;\n  seconds?: number;\n  milliseconds?: number;\n  microseconds?: number;\n  nanoseconds?: number;\n}\n\nexport const dateUnitToMs = {\n  years: 365 * 24 * 60 * 60 * 1000,\n  months: 30 * 24 * 60 * 60 * 1000,\n  weeks: 7 * 24 * 60 * 60 * 1000,\n  days: 24 * 60 * 60 * 1000,\n  hours: 60 * 60 * 1000,\n  minutes: 60 * 1000,\n  seconds: 1000,\n  milliseconds: 1,\n} as const;\n\nexport class IntlDuration {\n  protected duration?: DurationFormat;\n\n  protected locale: Intl.LocalesArgument;\n\n  // @ts-expect-error surely it works\n  protected isFallback = !Intl.DurationFormat;\n\n  constructor(locale: Intl.LocalesArgument = api.storage.lang('locale')) {\n    this.locale = locale;\n    return this;\n  }\n\n  setLocale(locale: Intl.LocalesArgument) {\n    this.locale = locale;\n    return this;\n  }\n\n  // For {hours: 2, minutes: 15}\n  setDuration(duration: DurationFormat) {\n    this.duration = duration;\n    return this;\n  }\n\n  // For {minutes: 155}\n  setDurationFormatted(duration: DurationFormat, style: DurationStyle = 'Duration') {\n    const ms = IntlDuration.durationToMs(duration);\n    this.setRelativeTime(ms, 'milliseconds', style);\n    return this;\n  }\n\n  // For 9000 (seconds)\n  setRelativeTime(\n    relativeTime: number,\n    convertFrom: keyof typeof dateUnitToMs,\n    style: DurationStyle = 'Duration',\n  ) {\n    const ms = relativeTime * dateUnitToMs[convertFrom];\n    this.duration = this.process(ms, style);\n    return this;\n  }\n\n  // For 1733320467580 (timestamp)\n  setTimestamp(\n    timestamp: number,\n    style: DurationStyle = 'Duration',\n    relativeTo: Date | number = Date.now(),\n  ) {\n    const ms = timestamp - new Date(relativeTo).getTime();\n    this.setRelativeTime(ms, 'milliseconds', style);\n    return this;\n  }\n\n  protected process(relativeTime: number, style: DurationStyle) {\n    switch (style) {\n      case 'Duration':\n        return relativeToDuration(relativeTime, ['seconds', 'minutes', 'hours', 'days']).duration;\n      case 'Progress':\n        if (!relativeTime) break;\n        const time = relativeToDuration(relativeTime, [\n          'seconds',\n          'minutes',\n          'hours',\n          'days',\n          'years',\n        ]);\n        return shortTime(time.duration);\n      case 'M/H/D/Y':\n        if (!relativeTime) break;\n        return relativeToDuration(relativeTime, ['minutes', 'hours', 'days', 'years']).duration;\n      default:\n        return {};\n    }\n    return {};\n  }\n\n  static durationToMs(input: DurationFormat): number {\n    const keys = Object.keys(input);\n    let timestamp = 0;\n    if (keys.length <= 0) return timestamp;\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const value = input[key];\n      timestamp += dateUnitToMs[key] * value;\n    }\n    return timestamp || 0;\n  }\n\n  getRelativeText(options: DurationFormatOptions = { style: 'narrow' }): string {\n    if (!this.duration) return '';\n    if (this.isFallback) return timeToString(this.duration);\n    const newOptions: DurationFormatOptions = options;\n    if (options.style === 'significantLongNarrow') {\n      const keys = Object.keys(dateUnitToMs);\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (this.duration[key]) {\n          newOptions[key] = 'long';\n          newOptions.style = 'narrow';\n          break;\n        }\n      }\n    }\n    // @ts-expect-error surely it works\n    return new Intl.DurationFormat(this.locale, newOptions).format(this.duration);\n  }\n\n  getDuration() {\n    return this.duration;\n  }\n\n  getLocale() {\n    return this.locale;\n  }\n}\n\nexport class IntlRange {\n  protected from: IntlDateTime;\n\n  protected to: IntlDateTime;\n\n  protected locale: Intl.LocalesArgument;\n\n  constructor(\n    from: Date | number | string,\n    to: Date | number | string,\n    locale: Intl.LocalesArgument = api.storage.lang('locale'),\n  ) {\n    this.from = new IntlDateTime(from);\n    this.to = new IntlDateTime(to);\n    this.locale = locale;\n    return this;\n  }\n\n  getDateTimeRangeText(style: Intl.DateTimeFormatOptions = { dateStyle: 'medium' }) {\n    const validFrom = this.from.isValidDate();\n    const validTo = this.to.isValidDate();\n    if (!validFrom || !validTo) {\n      const from = validFrom ? this.from.getDateTimeText(style) : '?';\n      const to = validTo ? this.to.getDateTimeText(style) : '?';\n      return `${from} - ${to}`;\n    }\n    return new Intl.DateTimeFormat(this.locale, style).formatRange(\n      this.from.getDate(),\n      this.to.getDate(),\n    );\n  }\n}\n\nexport class IntlDateTime {\n  protected date: Date;\n\n  protected locale: Intl.LocalesArgument;\n\n  constructor(\n    date: Date | number | string,\n    locale: Intl.LocalesArgument = api.storage.lang('locale'),\n  ) {\n    this.locale = locale;\n    if (typeof date === 'string') {\n      const number = Number(date);\n      if (!Number.isNaN(number)) {\n        this.date = new Date(number);\n        return this;\n      }\n    }\n    this.date = new Date(date);\n    return this;\n  }\n\n  // Setters\n  setDate(date: Date | number | string) {\n    this.date = new Date(date);\n    return this;\n  }\n\n  setLocale(locale: Intl.LocalesArgument) {\n    this.locale = locale;\n    return this;\n  }\n\n  // Utility\n  isValidDate() {\n    return isValidDate(this.date);\n  }\n\n  isNow() {\n    return checkForNow(this.date.getTime());\n  }\n\n  isFuture() {\n    return this.date.getTime() > Date.now();\n  }\n\n  // Getters\n  getDate() {\n    return this.date;\n  }\n\n  getLocale() {\n    return this.locale;\n  }\n\n  getDateTimeText(options: Intl.DateTimeFormatOptions = { dateStyle: 'medium' }) {\n    if (!isValidDate(this.date)) return '';\n    return new Intl.DateTimeFormat(this.locale, options).format(this.date);\n  }\n\n  getRelativeNowText(style: DurationStyle = 'Duration', options?: DurationFormatOptions) {\n    if (!this.isValidDate()) return '';\n    const relative = new IntlDuration(this.locale);\n    relative.setTimestamp(this.date.getTime(), style);\n    return relative.getRelativeText(options);\n  }\n\n  getRelativeNowFriendlyText(style: DurationStyle = 'Duration', options?: DurationFormatOptions) {\n    if (!this.isValidDate()) return '';\n    if (this.isNow()) return api.storage.lang('bookmarksItem_now');\n    const timeString = this.getRelativeNowText(style, options);\n    return this.isFuture() ? timeString : api.storage.lang('bookmarksItem_ago', [timeString]);\n  }\n}\n\n// Utility for exporting\nexport function shortTime(time: DurationFormat): DurationFormat {\n  let totalDays = time.days || 0;\n  if (time.years) {\n    if (time.years > 1) {\n      if (time.days && time.days > 182) {\n        return {\n          years: time.years + 1,\n        };\n      }\n      return {\n        years: time.years,\n      };\n    }\n    return {\n      years: time.years,\n      days: time.days,\n    };\n  }\n  if (time.months || time.weeks) {\n    totalDays += time.months ? time.months * 30 : 0;\n    totalDays += time.weeks ? time.weeks * 7 : 0;\n  }\n  if (totalDays) {\n    if (totalDays > 3) {\n      if (time.hours && time.hours > 11) {\n        return {\n          days: totalDays + 1,\n        };\n      }\n      return {\n        days: totalDays,\n      };\n    }\n    return {\n      days: totalDays,\n      hours: time.hours,\n    };\n  }\n  if (time.hours) {\n    if (time.hours > 5) {\n      if (time.minutes && time.minutes > 29) {\n        return {\n          hours: time.hours + 1,\n        };\n      }\n      return {\n        hours: time.hours,\n      };\n    }\n    return {\n      hours: time.hours,\n      minutes: time.minutes,\n    };\n  }\n  if (time.minutes && time.minutes > 14) {\n    return {\n      minutes: time.minutes,\n    };\n  }\n  return {\n    minutes: time.minutes || 0,\n    seconds: time.seconds || 0,\n  };\n}\n\nexport function relativeToDuration(\n  input: number,\n  units: (keyof typeof dateUnitToMs)[] = ['minutes', 'hours', 'days', 'years'],\n  relativeTo: Date | number = 0,\n): { duration: DurationFormat; isFuture: boolean } {\n  const duration: DurationFormat = {};\n  const relative = new Date(relativeTo).getTime();\n  let time = Math.abs(relative - input);\n  const isFuture = input > relative;\n\n  for (const key in dateUnitToMs) {\n    if (!units.includes(key as keyof typeof dateUnitToMs)) continue;\n    const value = Math.floor(time / dateUnitToMs[key]);\n    duration[key] = value;\n  }\n  const mapKeys = Object.keys(duration);\n  for (let i = 1; i < mapKeys.length; i++) {\n    const keyPrev = mapKeys[i - 1];\n    const valuePrev = duration[keyPrev];\n    const keyCurr = mapKeys[i];\n\n    time -= dateUnitToMs[keyPrev] * valuePrev;\n    const valueCurr = Math.floor(time / dateUnitToMs[keyCurr]);\n    duration[keyCurr] = valueCurr;\n  }\n  return { duration, isFuture };\n}\n\nexport function timeToString(time: DurationFormat): string {\n  let output = '';\n\n  if (time.years) {\n    if (time.years === 1) output += ` ${time.years} ${api.storage.lang('bookmarksItem_Year')}`;\n    else output += ` ${time.years} ${api.storage.lang('bookmarksItem_Years')}`;\n  }\n  if (time.days) {\n    if (time.days === 1) output += ` ${time.days} ${api.storage.lang('bookmarksItem_Day')}`;\n    else output += ` ${time.days} ${api.storage.lang('bookmarksItem_Days')}`;\n  }\n  if (time.hours) {\n    if (time.hours === 1) output += ` ${time.hours} ${api.storage.lang('bookmarksItem_Hour')}`;\n    else output += ` ${time.hours} ${api.storage.lang('bookmarksItem_Hours')}`;\n  }\n  if (time.minutes) {\n    if (time.minutes === 1) output += ` ${time.minutes} ${api.storage.lang('bookmarksItem_min')}`;\n    else output += ` ${time.minutes} ${api.storage.lang('bookmarksItem_mins')}`;\n  }\n  if (time.seconds) {\n    if (time.seconds === 1) output += ` ${time.seconds} ${api.storage.lang('bookmarksItem_sec')}`;\n    else output += ` ${time.seconds} ${api.storage.lang('bookmarksItem_secs')}`;\n  }\n\n  return output.trim();\n}\n\nexport function isValidDate(date: Date | string | number | null | undefined): boolean {\n  if (!date) return false;\n  if (typeof date === 'number') return true;\n  const str = typeof date === 'string' ? new Date(date) : date;\n  return str instanceof Date && !Number.isNaN(str.getTime());\n}\n\nexport function checkForNow(\n  input: number,\n  relativeTo: Date | number = Date.now(),\n  threshold: DurationFormat = { seconds: 30 },\n): boolean {\n  if (Number.isNaN(input)) return false;\n  const relativeToTs = new Date(relativeTo).getTime();\n  const thresholdTs = IntlDuration.durationToMs(threshold);\n  const diff = Math.abs(input - relativeToTs);\n\n  if (diff > thresholdTs) return false;\n  return true;\n}\n","import {\n  releaseItemInterface,\n  progressIsOld,\n  single as updateProgress,\n} from '../background/releaseProgressUtils';\nimport { IntlDateTime } from './IntlWrapper';\n\nexport class Progress {\n  protected logger;\n\n  protected releaseItem: undefined | releaseItemInterface = undefined;\n\n  constructor(\n    protected cacheKey: string,\n    protected type: 'anime' | 'manga',\n  ) {\n    this.logger = con.m('progress').m(cacheKey.toString());\n    return this;\n  }\n\n  // Progress\n  protected async initReleaseProgress(liveData) {\n    if (liveData) await updateProgress(liveData, this.type, liveData.progressMode);\n\n    const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n      `release/${this.type}/${this.cacheKey}`,\n    );\n\n    this.logger.m('Init Release').log(releaseItem);\n    if (!releaseItem) return;\n    if (progressIsOld(releaseItem)) {\n      this.logger.log('Too old');\n      return;\n    }\n\n    this.releaseItem = releaseItem;\n  }\n\n  protected getProgressCurrentEpisode() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.total) return re.value.lastEp.total;\n    return null;\n  }\n\n  protected isProgressFinished() {\n    const re = this.releaseItem;\n    if (re && re.finished) return true;\n    return false;\n  }\n\n  protected getProgressPrediction() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.predicition && re.value.predicition.timestamp)\n      return re.value.predicition.timestamp;\n    return null;\n  }\n\n  protected getProgressLastTimestamp() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.timestamp)\n      return re.value.lastEp.timestamp;\n    return null;\n  }\n\n  // General\n  async init(\n    live:\n      | {\n          uid: number;\n          apiCacheKey: number | string | null;\n          title: string;\n          cacheKey: string;\n          progressMode: string;\n          watchedEp: number;\n          single: any;\n          xhr?: object;\n        }\n      | false = false,\n  ) {\n    await Promise.all([this.initReleaseProgress(live)]);\n\n    return this;\n  }\n\n  getCurrentEpisode(): number {\n    // @ts-ignore\n    if (!api.settings.get('epPredictions')) return null;\n    return this.getProgressCurrentEpisode();\n  }\n\n  isFinished(): boolean {\n    return this.isProgressFinished();\n  }\n\n  isAiring(): boolean {\n    return !this.isFinished();\n  }\n\n  getPredictionTimestamp(): number {\n    if (!this.getProgressPrediction() || new Date().getTime() > this.getProgressPrediction())\n      return NaN;\n    return this.getProgressPrediction();\n  }\n\n  getPrediction(): string {\n    const timestamp = Number(this.getPredictionTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const progress = new IntlDateTime(timestamp).getRelativeNowFriendlyText('Progress', {\n      style: 'significantLongNarrow',\n    });\n    return progress;\n  }\n\n  getPredictionText(): string {\n    const timestamp = Number(this.getPredictionTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const dt = new IntlDateTime(Number(timestamp));\n    const time = dt.getRelativeNowText('Progress', { style: 'long' });\n    if (!dt.isValidDate()) return '';\n    if (dt.isNow()) return api.storage.lang('bookmarksItem_now');\n    return api.storage.lang(`prediction_Episode_${this.type}`, [time]);\n  }\n\n  getLastTimestamp(): number {\n    if (!this.getProgressLastTimestamp()) return NaN;\n    return this.getProgressLastTimestamp();\n  }\n\n  getLast(): string {\n    const timestamp = Number(this.getLastTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const last = new IntlDateTime(timestamp).getRelativeNowFriendlyText('Progress', {\n      style: 'significantLongNarrow',\n    });\n    return last;\n  }\n\n  getLastText(): string {\n    const timestamp = Number(this.getLastTimestamp());\n    if (Number.isNaN(timestamp)) return '';\n    const dt = new IntlDateTime(Number(timestamp));\n    const time = dt.getRelativeNowText('Progress', { style: 'long' });\n    if (!dt.isValidDate()) return '';\n    if (dt.isNow()) return api.storage.lang('bookmarksItem_now');\n    return api.storage.lang(`prediction_Last_${this.type}`, [time]);\n  }\n\n  getAuto(): string {\n    const preT = this.getPrediction();\n    if (preT) return preT;\n    const lastT = this.getLast();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getAutoText(): string {\n    const preT = this.getPredictionText();\n    if (preT) return preT;\n    const lastT = this.getLastText();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getColor(): string {\n    return '#f57c00';\n  }\n\n  getBars(curEp, totalEp): { totalWidth: number; epWidth: number; predWidth: number } {\n    const predEp = this.getCurrentEpisode();\n    const res = {\n      totalWidth: 100,\n      epWidth: 0,\n      predWidth: 0,\n    };\n    if (!totalEp) {\n      res.totalWidth = 0;\n      if (curEp && (!predEp || curEp >= predEp)) {\n        totalEp = Math.ceil(curEp * 1.2);\n      } else if (predEp && (!curEp || curEp < predEp)) {\n        totalEp = Math.ceil(predEp * 1.2);\n      } else {\n        return res;\n      }\n    }\n    if (curEp) {\n      res.epWidth = (curEp / totalEp) * 100;\n      if (res.epWidth > 100) res.epWidth = 100;\n    }\n    if (predEp) {\n      res.predWidth = (predEp / totalEp) * 100;\n      if (res.predWidth > 100) res.predWidth = 100;\n    }\n    return res;\n  }\n}\n","import { EventEmitter2 } from 'eventemitter2';\n\nconst scriptId = Math.floor(Math.random() * 1000000000);\n\nexport const emitter = new EventEmitter2({\n  wildcard: true,\n});\n\nexport function globalEmit(eventName: string, ...params) {\n  con\n    .m('Global')\n    .m('Emit')\n    .debug(eventName, ...params);\n\n  emitter.emit(`${eventName}`, ...params);\n\n  if (typeof api !== 'undefined' && api && api.type === 'webextension') {\n    chrome.runtime.sendMessage({\n      name: 'emitter',\n      item: { event: eventName, params, id: scriptId },\n    });\n  }\n}\n\nif (typeof api !== 'undefined' && api && api.type === 'webextension') {\n  chrome.runtime.sendMessage({\n    name: 'registerEmitter',\n  });\n\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.name && message.name === 'emitter') {\n      con.m('Global').m('Event').debug(message.item.id, message.item.event, message.item.params);\n\n      if (message.item.id !== scriptId) {\n        emitter.emit(message.item.event, ...message.item.params);\n      }\n    }\n  });\n}\n","/* eslint-disable max-classes-per-file */\nexport class MissingPlayerError extends Error {\n  public url;\n\n  constructor(url: string) {\n    const parts = url.split('/');\n    let domain = url;\n    if (parts.length > 2) domain = parts[2];\n    super(domain);\n    this.url = url;\n    this.name = 'MissingPlayerError';\n  }\n}\n\nexport class SafeError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'SafeError';\n  }\n}\n\nexport class MissingDataError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'MissingDataError';\n  }\n}\n\nexport class CustomDomainError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'CustomDomainError';\n  }\n}\n","/* eslint-disable max-classes-per-file */\nexport class NotAutenticatedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotAutenticatedError';\n  }\n}\n\nexport class UrlNotSupportedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UrlNotSupportedError';\n  }\n}\n\nexport class ServerOfflineError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'ServerOfflineError';\n  }\n}\n\nexport class NotFoundError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class UnexpectedResponseError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UnexpectedResponseError';\n  }\n}\n\nexport function parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    throw new UnexpectedResponseError(e.message);\n  }\n}\n\nexport function errorMessage(error, authenticationUrl: string) {\n  if (error instanceof NotAutenticatedError) {\n    return api.storage.lang('Error_Authenticate', [authenticationUrl]);\n  }\n  if (error instanceof ServerOfflineError) {\n    return 'Server Offline';\n  }\n  if (error instanceof UrlNotSupportedError) {\n    return `Incorrect url provided [${error.message}]`;\n  }\n  if (error instanceof NotFoundError) {\n    return 'Could not find this entry';\n  }\n  return error.message;\n}\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point10: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    return [\n      { value: 0, label: api.storage.lang('UI_Score_Not_Rated') },\n      { value: 100, label: api.storage.lang('UI_Score_Masterpiece') },\n      { value: 90, label: api.storage.lang('UI_Score_Great') },\n      { value: 80, label: api.storage.lang('UI_Score_VeryGood') },\n      { value: 70, label: api.storage.lang('UI_Score_Good') },\n      { value: 60, label: api.storage.lang('UI_Score_Fine') },\n      { value: 50, label: api.storage.lang('UI_Score_Average') },\n      { value: 40, label: api.storage.lang('UI_Score_Bad') },\n      { value: 30, label: api.storage.lang('UI_Score_VeryBad') },\n      { value: 20, label: api.storage.lang('UI_Score_Horrible') },\n      { value: 10, label: api.storage.lang('UI_Score_Appalling') },\n    ];\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(value / 10) * 10;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import * as definitions from './definitions';\n\nimport { Progress } from '../utils/progress';\nimport { predictionXhrGET } from '../background/releaseProgressUtils';\n\nimport { emitter, globalEmit } from '../utils/emitter';\nimport { SafeError } from '../utils/errors';\nimport { returnYYYYMMDD } from '../utils/general';\nimport { errorMessage as _errorMessage } from './Errors';\nimport { point10 } from './ScoreMode/point10';\nimport { SyncTypes } from './helper';\n\nObject.seal(emitter);\n\nexport abstract class SingleAbstract {\n  constructor(protected url: string) {\n    this.handleUrl(url);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  protected logger;\n\n  protected type: definitions.contentType | null = null;\n\n  protected syncMethod: definitions.syncMethod = 'normal';\n\n  protected persistanceState;\n\n  protected undoState;\n\n  protected lastError;\n\n  protected askCompleted = false;\n\n  public abstract shortName: string;\n\n  protected abstract authenticationUrl: string;\n\n  protected rewatchingSupport = true;\n\n  protected datesSupport = true;\n\n  protected ids = {\n    mal: NaN,\n    ani: NaN,\n    kitsu: {\n      id: NaN,\n      slug: '',\n    },\n    simkl: NaN,\n  };\n\n  protected options: {\n    u: string;\n    c: any;\n    r: any;\n    p: any;\n  } | null = null;\n\n  protected abstract handleUrl(url: string);\n\n  public getType() {\n    return this.type;\n  }\n\n  public getUrl() {\n    return this.url;\n  }\n\n  public supportsRewatching() {\n    return this.rewatchingSupport;\n  }\n\n  public supportsDates() {\n    return this.datesSupport;\n  }\n\n  public abstract getCacheKey();\n\n  public abstract getPageId();\n\n  public getApiCacheKey(): string | number {\n    return this.getKey(['ANILIST']);\n  }\n\n  public getRulesCacheKey(): string | number {\n    return this.getKey(['ANILIST', 'KITSU'], false);\n  }\n\n  abstract _setStatus(status: definitions.status): void;\n\n  public setStatus(status: definitions.status): SingleAbstract {\n    status = Number(status);\n    this._setStatus(status);\n    return this;\n  }\n\n  abstract _getStatus(): definitions.status | number;\n\n  public getStatus(): definitions.status {\n    if (!this.isOnList()) return definitions.status.NoState;\n    return this._getStatus();\n  }\n\n  abstract _setStartDate(startDate: definitions.startFinishDate): void;\n\n  public setStartDate(startDate: definitions.startFinishDate): SingleAbstract {\n    if (this.supportsDates()) {\n      this._setStartDate(startDate);\n    }\n    return this;\n  }\n\n  abstract _getStartDate(): definitions.startFinishDate;\n\n  public getStartDate(): definitions.startFinishDate {\n    if (this.supportsDates()) {\n      return this._getStartDate();\n    }\n    return null;\n  }\n\n  abstract _setFinishDate(finishDate: definitions.startFinishDate): void;\n\n  public setFinishDate(finishDate: definitions.startFinishDate): SingleAbstract {\n    if (this.supportsDates()) {\n      this._setFinishDate(finishDate);\n    }\n    return this;\n  }\n\n  abstract _getFinishDate(): definitions.startFinishDate;\n\n  public getFinishDate(): definitions.startFinishDate {\n    if (this.supportsDates()) {\n      return this._getFinishDate();\n    }\n    return null;\n  }\n\n  abstract _setRewatchCount(rewatchCount: definitions.rewatchCount): void;\n\n  public setRewatchCount(rewatchCount: definitions.rewatchCount): SingleAbstract {\n    if (this.supportsRewatching()) {\n      this._setRewatchCount(rewatchCount);\n    }\n    return this;\n  }\n\n  abstract _getRewatchCount(): definitions.rewatchCount | null;\n\n  public getRewatchCount(): definitions.rewatchCount | null {\n    if (this.supportsRewatching()) {\n      return this._getRewatchCount();\n    }\n    return null;\n  }\n\n  public getScoreMode() {\n    return point10;\n  }\n\n  abstract _setScore(score: definitions.score): void;\n\n  /**\n   * @deprecated Use setAbsoluteScore instead\n   */\n  public setScore(score: definitions.score): SingleAbstract {\n    score = parseInt(`${score}`);\n    if (!score) score = 0;\n    this._setScore(score);\n    return this;\n  }\n\n  abstract _getScore(): definitions.score;\n\n  /**\n   * @deprecated Use getAbsoluteScore instead\n   */\n  public getScore(): definitions.score {\n    const score = this._getScore();\n    if (!score) return 0;\n    return score;\n  }\n\n  abstract _setAbsoluteScore(score: definitions.score100): void;\n\n  public setAbsoluteScore(score: definitions.score100): SingleAbstract {\n    score = parseInt(`${score}`);\n    this._setAbsoluteScore(score);\n    return this;\n  }\n\n  abstract _getAbsoluteScore(): definitions.score100;\n\n  public getAbsoluteScore(): definitions.score100 {\n    const score = this._getAbsoluteScore();\n    if (!score) return 0;\n    return score;\n  }\n\n  abstract _setEpisode(episode: number): void;\n\n  public setEpisode(episode: number): SingleAbstract {\n    episode = parseInt(`${episode}`);\n    if (this.getTotalEpisodes() && episode > this.getTotalEpisodes())\n      episode = this.getTotalEpisodes();\n    this._setEpisode(episode);\n    return this;\n  }\n\n  abstract _getEpisode(): number;\n\n  public getEpisode(): number {\n    return this._getEpisode();\n  }\n\n  abstract _setVolume(volume: number): void;\n\n  public setVolume(volume: number): SingleAbstract {\n    this._setVolume(volume);\n    return this;\n  }\n\n  abstract _getVolume(): number;\n\n  public getVolume(): number {\n    return this._getVolume();\n  }\n\n  abstract _setTags(tags: string): void;\n\n  abstract _getTags(): string;\n\n  public setStreamingUrl(streamingUrl: string): SingleAbstract {\n    if (this.options) {\n      this.options.u = streamingUrl;\n    }\n    return this;\n  }\n\n  public getStreamingUrl(): string | undefined {\n    if (this.options && this.options.u) {\n      return this.options.u;\n    }\n\n    return undefined;\n  }\n\n  public cleanTags() {\n    this.options = null;\n  }\n\n  protected progress: false | Progress = false;\n\n  protected progressXhr;\n\n  public async initProgress() {\n    const xhr = await predictionXhrGET(this.getType()!, this.getApiCacheKey());\n    return new Progress(this.getCacheKey(), this.getType()!)\n      .init({\n        uid: this.getCacheKey(),\n        apiCacheKey: this.getApiCacheKey(),\n        title: this.getTitle(),\n        cacheKey: this.getCacheKey(),\n        progressMode: this.getProgressMode(),\n        watchedEp: this.getEpisode(),\n        single: this,\n        xhr,\n      })\n      .then(progress => {\n        this.updateProgress = false;\n        this.progress = progress;\n        this.progressXhr = xhr;\n      });\n  }\n\n  public getProgress() {\n    if (!this.progress) return false;\n    return this.progress;\n  }\n\n  public getProgressFormated() {\n    const op: {\n      label: string;\n      key: string;\n      state: 'complete' | 'ongoing' | 'dropped' | 'discontinued';\n      type: 'dub' | 'sub';\n      dropped: boolean;\n      episode: number;\n      lastEp?: {\n        total: number;\n        timestamp?: number;\n      };\n      predicition?: {\n        timestamp: number;\n        probability: 'low' | 'medium' | 'high';\n      };\n    }[] = [];\n    const languageNames = new Intl.DisplayNames('en', { type: 'language' });\n    con.log(this.progressXhr);\n    if (this.progressXhr && Object.keys(this.progressXhr).length) {\n      this.progressXhr.forEach(el => {\n        op.push({\n          type: el.type,\n          key: el.id,\n          state: el.state,\n          label: languageNames.of(el.lang.replace(/^jp$/, 'ja')) || el.lang,\n          dropped: el.state === 'dropped' || el.state === 'discontinued',\n          episode: el.lastEp && el.lastEp.total ? el.lastEp.total : 0,\n          lastEp: el.lastEp,\n          predicition: el.prediction,\n        });\n      });\n    }\n    return op;\n  }\n\n  public getProgressOptions() {\n    return this.getProgressFormated().filter(el => el.state !== 'complete');\n  }\n\n  public getProgressCompleted() {\n    return this.getProgressFormated().filter(el => el.state === 'complete');\n  }\n\n  private updateProgress = false;\n\n  public getProgressMode(): string {\n    if (this.options && this.options.p) {\n      return this.options.p;\n    }\n\n    return '';\n  }\n\n  public setProgressMode(mode: string): void {\n    if (this.options) {\n      this.options.p = mode;\n      this.updateProgress = true;\n    }\n    if (!api.settings.get('malTags')) {\n      utils\n        .setEntrySettings(this.type, this.getCacheKey(), this.options, this._getTags())\n        .then(() => this.initProgress());\n    }\n  }\n\n  public getProgressKey() {\n    let mode = this.getProgressMode();\n\n    if (!mode) {\n      if (this.getType() === 'anime') {\n        mode = api.settings.get('progressIntervalDefaultAnime');\n      } else {\n        mode = api.settings.get('progressIntervalDefaultManga');\n      }\n    }\n\n    if (!mode) return null;\n\n    const res = /^([^/]*)\\/(.*)$/.exec(mode);\n\n    if (!res) return null;\n\n    return {\n      key: mode,\n      lang: res[1],\n      type: res[2],\n    };\n  }\n\n  public getPageRelations(): { name: string; icon: string; link: string }[] {\n    const name = this.shortName;\n    const res: { name: string; icon: string; link: string }[] = [];\n\n    if (this.ids.mal && name !== 'MAL') {\n      res.push({\n        name: 'MAL',\n        icon: 'https://cdn.myanimelist.net/images/favicon.ico',\n        link: `https://myanimelist.net/${this.type}/${this.ids.mal}`,\n      });\n    }\n\n    if (this.ids.ani && name !== 'AniList') {\n      res.push({\n        name: 'AniList',\n        icon: 'https://anilist.co/img/icons/favicon-32x32.png',\n        link: `https://anilist.co/${this.type}/${this.ids.ani}`,\n      });\n    }\n\n    if (this.ids.kitsu.id && name !== 'Kitsu') {\n      res.push({\n        name: 'Kitsu',\n        icon: 'https://kitsu.app/favicon-32x32-3e0ecb6fc5a6ae681e65dcbc2bdf1f17.png',\n        link: `https://kitsu.app/${this.type}/${this.ids.kitsu.id}`,\n      });\n    }\n\n    if (this.ids.simkl && name !== 'Simkl') {\n      res.push({\n        name: 'Simkl',\n        icon: 'https://eu.simkl.in/img_favicon/v2/favicon-32x32.png',\n        link: `https://simkl.com/${this.type}/${this.ids.simkl}`,\n      });\n    }\n\n    return res;\n  }\n\n  public fillRelations(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  abstract _update(): Promise<void>;\n\n  public update(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Update info', this.ids);\n    this.lastError = null;\n    return this._update()\n      .catch(e => {\n        this.lastError = e;\n        throw e;\n      })\n      .then(() => {\n        this.persistanceState = this.getStateEl();\n\n        return utils.getEntrySettings(this.type, this.getCacheKey(), this._getTags());\n      })\n      .then(options => {\n        this.options = options;\n        this.registerEvent();\n        this.emitUpdate('state');\n      });\n  }\n\n  abstract _sync(): Promise<void>;\n\n  public async sync(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Sync', this.ids);\n    this.lastError = null;\n    this._setTags(\n      await utils.setEntrySettings(this.type, this.getCacheKey(), this.options, this._getTags()),\n    );\n    this.fixDates();\n    return this._sync()\n      .catch(e => {\n        this.lastError = e;\n        throw e;\n      })\n      .then(() => {\n        this.undoState = this.persistanceState;\n        if (this.updateProgress) this.initProgress();\n        this._onList = true;\n        this.emitUpdate();\n      });\n  }\n\n  public emitUpdate(action: 'update' | 'state' = 'update') {\n    globalEmit(`${action}.${this.getCacheKey()}`, {\n      id: this.getPageId(),\n      type: this.getType(),\n      cacheKey: this.getCacheKey(),\n      state: this.getStateEl(),\n      meta: {\n        title: this.getTitle(),\n        image: this.getImage(),\n        malId: this.getMalId(),\n        totalEp: this.getTotalEpisodes(),\n        url: this.getUrl(),\n      },\n    });\n  }\n\n  abstract _delete(): Promise<void>;\n\n  public async delete(): Promise<void> {\n    return this._delete().then(() => {\n      this._onList = false;\n      globalEmit(`delete.${this.getCacheKey()}`, {\n        id: this.getPageId(),\n        type: this.getType(),\n        cacheKey: this.getCacheKey(),\n      });\n    });\n  }\n\n  protected globalUpdateEvent;\n\n  protected registerEvent() {\n    if (!this.globalUpdateEvent) {\n      this.globalUpdateEvent = emitter.on(`update.${this.getCacheKey()}`, data =>\n        this.updateEvent(data),\n      );\n    }\n  }\n\n  protected updateEvent(data) {\n    if (this.isDirty()) {\n      this.logger.log('Ignore event');\n      return;\n    }\n\n    if (data && data.state) {\n      this.setStateEl(data.state);\n      this.persistanceState = this.getStateEl();\n      emitter.emit('syncPage_fillUi');\n    }\n  }\n\n  public isDirty(): boolean {\n    return (\n      JSON.stringify(this.persistanceState) !== JSON.stringify(this.getStateEl()) ||\n      this.updateProgress\n    );\n  }\n\n  public undo(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Undo', this.undoState);\n    if (!this.undoState) throw new SafeError('No undo state found');\n    if (!this.undoState.onList) {\n      // @ts-ignore\n      if (typeof this.delete === 'undefined') throw new Error('Deleting an entry is not supported');\n      // @ts-ignore\n      return this.delete().then(() => {\n        this.setStateEl(this.undoState);\n        this.undoState = null;\n      });\n    }\n    this.setStateEl(this.undoState);\n    return this.sync().then(() => {\n      this.undoState = null;\n    });\n  }\n\n  abstract _getTitle(raw: boolean): string;\n\n  public getTitle(raw = false) {\n    return this._getTitle(raw);\n  }\n\n  abstract _getTotalEpisodes(): number;\n\n  public getTotalEpisodes() {\n    let eps = this._getTotalEpisodes();\n    if (!eps) eps = 0;\n    return eps;\n  }\n\n  abstract _getTotalVolumes(): number;\n\n  public getTotalVolumes() {\n    return this._getTotalVolumes();\n  }\n\n  protected _onList = false;\n\n  public isOnList() {\n    return this._onList;\n  }\n\n  protected _authenticated = false;\n\n  public isAuthenticated() {\n    return this._authenticated;\n  }\n\n  abstract _getDisplayUrl(): string;\n\n  public getDisplayUrl(): string {\n    return this._getDisplayUrl();\n  }\n\n  public getMalUrl(): string | null {\n    if (!Number.isNaN(this.ids.mal)) {\n      return `https://myanimelist.net/${this.getType()}/${this.ids.mal}`;\n    }\n    return null;\n  }\n\n  public getMalId(): number | null {\n    if (!Number.isNaN(this.ids.mal)) {\n      return this.ids.mal;\n    }\n    return null;\n  }\n\n  public getIds() {\n    return this.ids;\n  }\n\n  abstract _getImage(): string;\n\n  public getImage(): string {\n    return this._getImage();\n  }\n\n  public setImage?(url: string): void;\n\n  abstract _getRating(): Promise<string>;\n\n  public getRating(): Promise<string> {\n    return this._getRating().then(rating => {\n      if (!rating) return 'N/A';\n      return rating;\n    });\n  }\n\n  public setResumeWatching(url: string, ep: number) {\n    return utils.setResumeWaching(url, ep, this.type, this.getCacheKey());\n  }\n\n  public getResumeWatching(): { url: string; ep: number } | null {\n    if (this.options && this.options.r) return this.options.r;\n    return null;\n  }\n\n  public setContinueWatching(url: string, ep: number) {\n    return utils.setContinueWaching(url, ep, this.type, this.getCacheKey());\n  }\n\n  public getContinueWatching(): { url: string; ep: number } | null {\n    if (this.options && this.options.c) return this.options.c;\n    return null;\n  }\n\n  public increaseRewatchCount(): void {\n    //  do nothing\n  }\n\n  getStateEl() {\n    return {\n      onList: this.isOnList(),\n      episode: this.getEpisode(),\n      volume: this.getVolume(),\n      status: this.getStatus(),\n      startDate: this.getStartDate(),\n      finishDate: this.getFinishDate(),\n      rewatchCount: this.getRewatchCount(),\n      score: this.getScore(),\n      absoluteScore: this.getAbsoluteScore(),\n    };\n  }\n\n  setStateEl(state) {\n    this._onList = state.onList;\n    this.setEpisode(state.episode);\n    this.setVolume(state.volume);\n    this.setStatus(state.status);\n    this.setStartDate(state.startDate);\n    this.setFinishDate(state.finishDate);\n    this.setRewatchCount(state.rewatchCount);\n    this.setScore(state.score);\n    if (state.absoluteScore) this.setAbsoluteScore(state.absoluteScore);\n  }\n\n  getStateDiff() {\n    const persistance = this.getStateEl();\n    if (persistance && this.undoState) {\n      const diff: any = {};\n      for (const key in persistance) {\n        if (persistance[key] !== this.undoState[key]) {\n          diff[key] = persistance[key];\n        }\n      }\n      return diff;\n    }\n    return undefined;\n  }\n\n  public getSyncMethod(): definitions.syncMethod {\n    return this.syncMethod;\n  }\n\n  public setSyncMethod(method: definitions.syncMethod) {\n    this.syncMethod = method;\n  }\n\n  private fixDates() {\n    if (!this.supportsDates() || this.getSyncMethod() === 'listSync') {\n      return;\n    }\n\n    const today = returnYYYYMMDD();\n    if (\n      this.getStartDate() === null &&\n      this._getStatus() === definitions.status.Watching &&\n      this._getEpisode() > 0\n    ) {\n      this.setStartDate(today);\n    }\n\n    if (this.getFinishDate() === null && this._getStatus() === definitions.status.Completed) {\n      this.setFinishDate(today);\n\n      if (this.getStartDate() === null) {\n        this.setStartDate(today);\n      }\n    }\n  }\n\n  public async lifeCycleHook(state: 'afterCheckSync' | 'beforeSync') {\n    if (this.askCompleted) {\n      if (\n        (state === 'afterCheckSync' && api.settings.get('askBefore')) ||\n        (state === 'beforeSync' && !api.settings.get('askBefore'))\n      ) {\n        this.askCompleted = false;\n        if (this.getStatus() === definitions.status.Rewatching) {\n          await this.finishRewatchingMessage();\n        } else {\n          await this.finishWatchingMessage();\n        }\n      }\n    }\n  }\n\n  public async checkSync(episode: number, volume?: number): Promise<boolean> {\n    const curEpisode = this.getEpisode();\n    const curStatus = this.getStatus();\n    const curVolume = this.getVolume();\n\n    if (curStatus === definitions.status.Completed) {\n      if (episode === 1) {\n        return this.startRewatchingMessage();\n      }\n      return false;\n    }\n\n    if (\n      curEpisode >= episode &&\n      // Novel Volume\n      !(\n        typeof volume !== 'undefined' &&\n        (curVolume || volume > 1 || !episode) &&\n        volume > curVolume\n      )\n    ) {\n      return false;\n    }\n\n    if (episode && episode === this.getTotalEpisodes()) {\n      this.askCompleted = true;\n      return true;\n    }\n\n    if (curStatus !== definitions.status.Watching && curStatus !== definitions.status.Rewatching) {\n      return this.startWatchingMessage();\n    }\n\n    return true;\n  }\n\n  public async startWatchingMessage() {\n    return utils\n      .flashConfirm(api.storage.lang(`syncPage_flashConfirm_start_${this.getType()}`), 'add')\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Watching);\n          this.setStartDate(returnYYYYMMDD());\n        }\n        return res;\n      });\n  }\n\n  public async finishWatchingMessage(): Promise<boolean> {\n    const currentScore = this.getScoreCheckboxValue();\n\n    let checkHtml =\n      '<div><select id=\"finish_score\" style=\"margin-top:5px; color:white; background-color:#4e4e4e; border: none;\">';\n    this.getScoreCheckbox().forEach(el => {\n      checkHtml += `<option value=\"${el.value}\" ${currentScore === el.value ? 'selected' : ''}>${\n        el.label\n      }</option>`;\n    });\n    checkHtml += '</select></div>';\n\n    return utils\n      .flashConfirm(api.storage.lang('syncPage_flashConfirm_complete') + checkHtml, 'complete')\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Completed);\n          this.setFinishDate(returnYYYYMMDD());\n          if (!this.getStartDate()) {\n            this.setStartDate(returnYYYYMMDD());\n          }\n          const finishScore = Number(j.$('#finish_score').val());\n          if (finishScore > 0) {\n            this.logger.log(`finish_score: ${j.$('#finish_score :selected').val()}`);\n            this.handleScoreCheckbox(j.$('#finish_score :selected').val());\n          }\n        }\n\n        return res;\n      });\n  }\n\n  public async startRewatchingMessage(): Promise<boolean> {\n    return utils\n      .flashConfirm(\n        api.storage.lang(`syncPage_flashConfirm_rewatch_start_${this.getType()}`),\n        'add',\n      )\n      .then(res => {\n        if (res) this.setStatus(definitions.status.Rewatching);\n        return res;\n      });\n  }\n\n  public async finishRewatchingMessage(): Promise<boolean> {\n    return utils\n      .flashConfirm(\n        api.storage.lang(`syncPage_flashConfirm_rewatch_finish_${this.getType()}`),\n        'complete',\n      )\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Completed);\n          this.increaseRewatchCount();\n        }\n        return res;\n      });\n  }\n\n  public getScoreCheckbox() {\n    return this.getScoreMode().getOptions();\n  }\n\n  public getScoreCheckboxValue() {\n    return this.getScoreMode().valueToOptionValue(this.getAbsoluteScore());\n  }\n\n  public handleScoreCheckbox(value) {\n    this.setAbsoluteScore(this.getScoreMode().optionValueToValue(value));\n  }\n\n  public getDisplayScoreCheckbox() {\n    const curScore = this.getScoreCheckboxValue();\n    const labelEl = this.getScoreCheckbox().filter(el => el.value === curScore);\n    if (labelEl.length) return labelEl[0].label;\n    return '';\n  }\n\n  public getStatusCheckbox() {\n    const statusEs = [\n      {\n        value: definitions.status.Watching.toString(),\n        label: api.storage.lang(`UI_Status_watching_${this.getType()}`),\n      },\n      {\n        value: definitions.status.Completed.toString(),\n        label: api.storage.lang('UI_Status_Completed'),\n      },\n      { value: definitions.status.Onhold.toString(), label: api.storage.lang('UI_Status_OnHold') },\n      {\n        value: definitions.status.Dropped.toString(),\n        label: api.storage.lang('UI_Status_Dropped'),\n      },\n      {\n        value: definitions.status.PlanToWatch.toString(),\n        label: api.storage.lang(`UI_Status_planTo_${this.getType()}`),\n      },\n    ];\n\n    if (this.supportsRewatching()) {\n      statusEs.push({\n        value: definitions.status.Rewatching.toString(),\n        label: api.storage.lang(`UI_Status_Rewatching_${this.getType()}`),\n      });\n    }\n\n    return statusEs;\n  }\n\n  public handleStatusCheckbox(value) {\n    this.setStatus(value);\n  }\n\n  public getStatusCheckboxValue() {\n    return this.getStatus();\n  }\n\n  public getKey(allowed: SyncTypes[], forceMal = true) {\n    if (forceMal && this.ids.mal) return this.ids.mal;\n    if (this.ids.ani && allowed.includes('ANILIST')) return `anilist:${this.ids.ani}`;\n    if (this.ids.kitsu.id && allowed.includes('KITSU')) return `kitsu:${this.ids.kitsu.id}`;\n    if (this.ids.simkl && allowed.includes('SIMKL')) return `simkl:${this.ids.simkl}`;\n    return this.ids.mal;\n  }\n\n  public getLastError() {\n    return this.lastError;\n  }\n\n  public getLastErrorMessage() {\n    return this.errorMessage(this.getLastError());\n  }\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n}\n","/* eslint-disable no-shadow */\nimport { startFinishDate, status } from '../definitions';\nimport { clientId } from '../../utils/oauth';\nimport { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nexport const apiDomain = 'https://api.myanimelist.net/v2/';\n\nexport const authenticationUrl = 'https://malsync.moe/mal/oauth';\n\nexport async function apiCall(options: {\n  type: 'GET' | 'PUT' | 'DELETE' | 'POST';\n  path: string;\n  fields?: string[];\n  dataObj?: { [key: string]: string };\n}) {\n  let url = apiDomain + options.path;\n  if (options.fields && options.fields.length) {\n    url += url.includes('?') ? '&' : '?';\n    url += `fields=${options.fields.join(',')}`;\n  }\n  const headers: any = {\n    Authorization: `Bearer ${api.settings.get('malToken')}`,\n    'Content-Type': 'application/x-www-form-urlencoded',\n  };\n  let data = '';\n  if (options.dataObj) {\n    const formBody: string[] = [];\n    for (const property in options.dataObj) {\n      const encodedKey = encodeURIComponent(property);\n      const encodedValue = encodeURIComponent(options.dataObj[property]);\n      formBody.push(`${encodedKey}=${encodedValue}`);\n    }\n    data = formBody.join('&');\n  }\n  return api.request\n    .xhr(options.type, {\n      url,\n      headers,\n      data,\n    })\n    .then(async response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      let res;\n      try {\n        res = JSON.parse(response.responseText);\n      } catch (e) {\n        if (checkIfBanned(response.responseText)) {\n          throw new Error(api.storage.lang('Error_Blocked', ['MyAnimeList']));\n        }\n        throw e;\n      }\n\n      if (res && res.error) {\n        switch (res.error) {\n          case 'forbidden':\n          case 'invalid_token':\n            if (await refreshToken(this.logger)) {\n              return this.apiCall(options);\n            }\n            throw new NotAutenticatedError(res.message ?? res.error);\n          case 'not_found':\n            throw new NotFoundError(res.message ?? res.error);\n          case 'invalid_content':\n            throw new Error(\n              'This Entry is currently pending approval. It can´t be saved to mal for now',\n            );\n          default:\n            throw new Error(res.message ?? res.error);\n        }\n      }\n\n      switch (response.status) {\n        case 400:\n          throw new Error('Invalid Parameters');\n        case 403:\n        default:\n      }\n\n      return res;\n    });\n}\n\nasync function refreshToken(logger) {\n  const l = logger.m('Refresh');\n  l.log('Refresh Access Token');\n  const rToken = api.settings.get('malRefresh');\n  if (!rToken) return false;\n  return api.request\n    .xhr('POST', {\n      url: 'https://myanimelist.net/v1/oauth2/token',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      data: `client_id=${clientId}&grant_type=refresh_token&refresh_token=${rToken}`,\n    })\n    .then(res => {\n      try {\n        return parseJson(res.responseText);\n      } catch (e) {\n        if (checkIfBanned(res.responseText)) {\n          throw new Error(api.storage.lang('Error_Blocked', ['MyAnimeList']));\n        }\n        throw e;\n      }\n    })\n    .then(json => {\n      if (json && json.refresh_token && json.access_token) {\n        api.settings.set('malToken', json.access_token);\n        api.settings.set('malRefresh', json.refresh_token);\n        return true;\n      }\n      if (json && json.error) {\n        l.error(json.error, '|', json.message);\n        api.settings.set('malRefresh', '');\n        return false;\n      }\n      l.error('Something went wrong');\n      return false;\n    });\n}\n\nfunction checkIfBanned(text: string) {\n  return Boolean(text.includes('Request blocked') || text.includes('your IP has been banned'));\n}\n\nexport enum animeStatus {\n  watching = status.Watching,\n  completed = status.Completed,\n  on_hold = status.Onhold,\n  dropped = status.Dropped,\n  plan_to_watch = status.PlanToWatch,\n}\n\nexport enum mangaStatus {\n  reading = status.Watching,\n  completed = status.Completed,\n  on_hold = status.Onhold,\n  dropped = status.Dropped,\n  plan_to_read = status.PlanToWatch,\n}\n\nexport function getRoundedDate(date?: string): startFinishDate {\n  if (!date || !/^\\d{4}(?:-\\d\\d){0,2}$/.test(date)) {\n    return null;\n  }\n\n  const year = date.substring(0, 4);\n\n  let month = date.substring(5, 7);\n  if (month.length !== 2) {\n    month = '01';\n  }\n\n  let day = date.substring(8, 10);\n  if (day.length !== 2) {\n    day = '01';\n  }\n\n  return `${year}-${month}-${day}`;\n}\n","/* eslint-disable no-shadow */\nimport { status, fuzzyDate, startFinishDate } from '../definitions';\nimport {\n  NotAutenticatedError,\n  NotFoundError,\n  parseJson,\n  ServerOfflineError,\n  UnexpectedResponseError,\n} from '../Errors';\n\nconst logger = con.m('anilist', '#3db4f2');\n\nexport function translateList(aniStatus, malStatus: null | number = null) {\n  const list = {\n    CURRENT: status.Watching,\n    PLANNING: status.PlanToWatch,\n    COMPLETED: status.Completed,\n    DROPPED: status.Dropped,\n    PAUSED: status.Onhold,\n    REPEATING: status.Watching,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[aniStatus];\n}\n\nexport enum statusTranslate {\n  CURRENT = status.Watching,\n  PLANNING = status.PlanToWatch,\n  COMPLETED = status.Completed,\n  DROPPED = status.Dropped,\n  PAUSED = status.Onhold,\n  REPEATING = status.Rewatching,\n}\n\nexport function parseFuzzyDate(date?: fuzzyDate): startFinishDate {\n  if (!date?.year || !date?.month || !date?.day) {\n    return null;\n  }\n\n  const year = String(date.year).padStart(4, '0');\n  const month = String(date.month).padStart(2, '0');\n  const day = String(date.day).padStart(2, '0');\n\n  return `${year}-${month}-${day}`;\n}\n\nexport function getFuzzyDate(date?: startFinishDate): fuzzyDate {\n  const fuzzyDate: fuzzyDate = {\n    year: null,\n    month: null,\n    day: null,\n  };\n  // ES6 doesn't support named capture groups\n  const regexMatch = date?.match(/^(\\d{4})-(\\d{2})-(\\d{2})$/);\n  if (regexMatch?.[1] && regexMatch?.[2] && regexMatch?.[3]) {\n    fuzzyDate.year = parseInt(regexMatch[1]);\n    fuzzyDate.month = parseInt(regexMatch[2]);\n    fuzzyDate.day = parseInt(regexMatch[3]);\n  }\n\n  return fuzzyDate;\n}\n\nexport function aniListToMal(anilistId: number, type: 'anime' | 'manga') {\n  const query = `\n  query ($id: Int, $type: MediaType) {\n    Media (id: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  `;\n\n  const variables = {\n    id: anilistId,\n    type: type.toUpperCase(),\n  };\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      const res = parseJson(response.responseText);\n      con.log(res);\n      return res.data.Media.idMal;\n    });\n}\n\nexport function malToAnilist(malId: number, type: 'anime' | 'manga') {\n  const query = `\n  query ($id: Int, $type: MediaType) {\n    Media (idMal: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  `;\n\n  const variables = {\n    id: malId,\n    type: type.toUpperCase(),\n  };\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      if (response.status === 404) return NaN;\n      const res = parseJson(response.responseText);\n      con.log(res);\n      return res.data.Media.id;\n    });\n}\n\nexport function getCacheKey(id, kitsuId) {\n  if (Number.isNaN(id) || !id) {\n    return `anilist:${kitsuId}`;\n  }\n  return id;\n}\n\nexport async function apiCall(query, variables, requiresAuthentication = true) {\n  if (requiresAuthentication && !api.settings.get('anilistToken')) {\n    throw new NotAutenticatedError('No token found');\n  }\n\n  const headers: any = {\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n  };\n\n  if (api.settings.get('anilistToken'))\n    headers.Authorization = `Bearer ${api.settings.get('anilistToken')}`;\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers,\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      try {\n        const res = parseJson(response.responseText);\n\n        if (typeof res.errors !== 'undefined' && res.errors.length) {\n          logger.error('[SINGLE]', 'Error', res.errors);\n          const error = res.errors[0];\n          switch (error.status) {\n            case 400:\n              if (error.message === 'Invalid token' && !requiresAuthentication) {\n                api.settings.set('anilistToken', null);\n                return apiCall(query, variables, requiresAuthentication);\n              }\n              if (error.message === 'validation') throw new Error('Wrong request format');\n              if (error.message.includes('invalid')) throw new Error('Wrong request format');\n              throw new NotAutenticatedError(error.message);\n            case 404:\n              throw new NotFoundError(error.message);\n            default:\n              throw new Error(error.message);\n          }\n        }\n\n        return res;\n      } catch (err) {\n        if (err instanceof UnexpectedResponseError) {\n          if ((response.status > 499 && response.status < 600) || response.status === 0) {\n            throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n          }\n          if (response.status === 403) {\n            throw new Error(api.storage.lang('Error_Blocked', ['AniList']));\n          }\n        }\n        throw err;\n      }\n    });\n}\n\nexport function imgCheck(url: string) {\n  if (!url || url.endsWith('/default.jpg')) return '';\n  return url;\n}\n","import { Single as temp } from '../MyAnimeList_api/single';\n\nexport const Single = temp;\n","import { SingleAbstract } from '../singleAbstract';\nimport { NotAutenticatedError, UrlNotSupportedError } from '../Errors';\nimport * as helper from './helper';\nimport * as definitions from '../definitions';\nimport { malToAnilist } from '../AniList/helper';\nimport { Cache } from '../../utils/Cache';\n\nexport class Single extends SingleAbstract {\n  constructor(protected url: string) {\n    super(url);\n    this.logger = con.m(this.shortName, '#2e51a2');\n    return this;\n  }\n\n  private animeInfo: any;\n\n  private displayUrl = '';\n\n  private pending = false;\n\n  shortName = 'MAL';\n\n  authenticationUrl = helper.authenticationUrl;\n\n  protected handleUrl(url) {\n    if (url.match(/myanimelist\\.net\\/(anime|manga)\\/\\d*/i)) {\n      this.type = utils.urlPart(url, 3) === 'anime' ? 'anime' : 'manga';\n      this.ids.mal = Number(utils.urlPart(url, 4));\n      return;\n    }\n    throw new UrlNotSupportedError(url);\n  }\n\n  getCacheKey() {\n    return this.ids.mal;\n  }\n\n  getPageId() {\n    return this.ids.mal;\n  }\n\n  _getStatus() {\n    let curSt;\n    if (this.type === 'manga') {\n      curSt = parseInt(helper.mangaStatus[this.animeInfo.my_list_status.status]);\n    } else {\n      curSt = parseInt(helper.animeStatus[this.animeInfo.my_list_status.status]);\n    }\n    if (this.getRewatching() && curSt === definitions.status.Completed) {\n      return definitions.status.Rewatching;\n    }\n    return curSt;\n  }\n\n  _setStatus(status) {\n    if (status === definitions.status.Rewatching) {\n      status = definitions.status.Completed;\n      this.setRewatching(true);\n    } else {\n      this.setRewatching(false);\n    }\n    if (this.type === 'manga') {\n      this.animeInfo.my_list_status.status = helper.mangaStatus[status];\n      return;\n    }\n    this.animeInfo.my_list_status.status = helper.animeStatus[status];\n  }\n\n  increaseRewatchCount(): void {\n    if (this.type === 'manga') {\n      this.animeInfo.my_list_status.num_times_reread++;\n    } else {\n      this.animeInfo.my_list_status.num_times_rewatched++;\n    }\n  }\n\n  _getStartDate() {\n    return helper.getRoundedDate(this.animeInfo.my_list_status.start_date);\n  }\n\n  _setStartDate(startDate) {\n    this.animeInfo.my_list_status.start_date = startDate;\n  }\n\n  _getFinishDate() {\n    return helper.getRoundedDate(this.animeInfo.my_list_status.finish_date);\n  }\n\n  _setFinishDate(finishDate) {\n    this.animeInfo.my_list_status.finish_date = finishDate;\n  }\n\n  _getRewatchCount() {\n    if (this.type === 'manga') {\n      return this.animeInfo.my_list_status.num_times_reread;\n    }\n    return this.animeInfo.my_list_status.num_times_rewatched;\n  }\n\n  _setRewatchCount(rewatchCount) {\n    if (this.type === 'manga') {\n      this.animeInfo.my_list_status.num_times_reread = rewatchCount;\n    } else {\n      this.animeInfo.my_list_status.num_times_rewatched = rewatchCount;\n    }\n  }\n\n  _getScore() {\n    return this.animeInfo.my_list_status.score;\n  }\n\n  _setScore(score) {\n    this.animeInfo.my_list_status.score = score;\n  }\n\n  _getAbsoluteScore() {\n    return this.getScore() * 10;\n  }\n\n  _setAbsoluteScore(score) {\n    if (!score) {\n      this.setScore(0);\n      return;\n    }\n    if (score < 10) {\n      this.setScore(1);\n      return;\n    }\n\n    this.setScore(Math.round(score / 10));\n  }\n\n  _getEpisode() {\n    if (this.type === 'manga') {\n      return this.animeInfo.my_list_status.num_chapters_read;\n    }\n    return this.animeInfo.my_list_status.num_watched_episodes;\n  }\n\n  _setEpisode(episode) {\n    if (!episode) episode = 0;\n    if (this.type === 'manga') {\n      this.animeInfo.my_list_status.num_chapters_read = episode;\n      return;\n    }\n    this.animeInfo.my_list_status.num_watched_episodes = episode;\n  }\n\n  _getVolume() {\n    if (this.type === 'manga') {\n      return this.animeInfo.my_list_status.num_volumes_read;\n    }\n    return 0;\n  }\n\n  _setVolume(volume) {\n    if (this.type === 'manga') {\n      this.animeInfo.my_list_status.num_volumes_read = volume;\n    }\n  }\n\n  _getTags() {\n    if (!this.animeInfo.my_list_status.tags.length) {\n      return '';\n    }\n    return this.animeInfo.my_list_status.tags.join(',');\n  }\n\n  _setTags(tags) {\n    if (!tags || tags.trim() === ',') {\n      this.animeInfo.my_list_status.tags = [];\n      return;\n    }\n    this.animeInfo.my_list_status.tags = tags.split(',');\n  }\n\n  private getRewatching(): boolean {\n    if (this.type === 'manga') {\n      return this.animeInfo.my_list_status.is_rereading;\n    }\n    return this.animeInfo.my_list_status.is_rewatching;\n  }\n\n  private setRewatching(state: boolean) {\n    if (this.type === 'manga') {\n      this.animeInfo.my_list_status.is_rereading = state;\n      return;\n    }\n    this.animeInfo.my_list_status.is_rewatching = state;\n  }\n\n  _getTitle() {\n    return this.animeInfo.title;\n  }\n\n  _getTotalEpisodes() {\n    if (this.type === 'manga') {\n      return this.animeInfo.num_chapters;\n    }\n    return this.animeInfo.num_episodes;\n  }\n\n  _getTotalVolumes() {\n    if (this.type === 'manga') {\n      return this.animeInfo.num_volumes;\n    }\n    return 0;\n  }\n\n  _getDisplayUrl() {\n    return this.url;\n  }\n\n  _getImage() {\n    return this.animeInfo.main_picture?.medium ?? '';\n  }\n\n  _getRating() {\n    return Promise.resolve(this.animeInfo.mean);\n  }\n\n  async _update() {\n    return this.apiCall({\n      type: 'GET',\n      path: `${this.type}/${this.ids.mal}`,\n      fields: [\n        'my_list_status{tags,is_rewatching,is_rereading,num_times_rewatched,num_times_reread,start_date,finish_date}',\n        'num_episodes',\n        'mean',\n        // Manga\n        'num_chapters',\n        'num_volumes',\n      ],\n    })\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n        }\n        throw e;\n      })\n      .then(res => {\n        this.logger.m('Api').log(res);\n        this._authenticated = true;\n        this.animeInfo = res;\n        this._onList = true;\n        if (!this.animeInfo.my_list_status) {\n          this._onList = false;\n          if (this.type === 'manga') {\n            this.animeInfo.my_list_status = {\n              is_rereading: false,\n              num_chapters_read: 0,\n              num_volumes_read: 0,\n              num_times_reread: 0,\n              score: 0,\n              status: 'plan_to_read',\n              tags: [],\n            };\n          } else {\n            this.animeInfo.my_list_status = {\n              is_rewatching: false,\n              num_watched_episodes: 0,\n              num_times_rewatched: 0,\n              score: 0,\n              status: 'plan_to_watch',\n              tags: [],\n            };\n          }\n        }\n\n        // Handle api bug\n        if (\n          this.animeInfo.my_list_status &&\n          typeof this.animeInfo.my_list_status.num_episodes_watched !== 'undefined'\n        ) {\n          this.animeInfo.my_list_status.num_watched_episodes =\n            this.animeInfo.my_list_status.num_episodes_watched;\n          delete this.animeInfo.my_list_status.num_episodes_watched;\n        }\n      });\n  }\n\n  async _sync() {\n    const sentData = {};\n    for (const property in this.animeInfo.my_list_status) {\n      switch (property) {\n        case 'priority':\n        case 'num_watched_episodes':\n        case 'num_volumes_read':\n        case 'num_chapters_read':\n        case 'score':\n        case 'is_rewatching':\n        case 'is_rereading':\n        case 'num_times_rewatched':\n        case 'num_times_reread':\n        case 'rewatch_value':\n        case 'reread_value':\n        case 'tags':\n        case 'comments':\n        case 'status':\n          sentData[property] = this.animeInfo.my_list_status[property];\n          break;\n        case 'start_date':\n        case 'finish_date':\n          sentData[property] = this.animeInfo.my_list_status[property] ?? '';\n          break;\n        default:\n      }\n    }\n    this.logger.m('Sync').log(this.ids.mal, sentData);\n    return this.apiCall({\n      type: 'PUT',\n      path: `${this.type}/${this.ids.mal}/my_list_status`,\n      dataObj: sentData,\n    }).then(res => {\n      this.logger.m('Sync').log('res', res);\n    });\n  }\n\n  _delete() {\n    return this.apiCall({\n      type: 'DELETE',\n      path: `${this.type}/${this.ids.mal}/my_list_status`,\n    });\n  }\n\n  public async fillRelations(): Promise<void> {\n    const cacheObj = new Cache(\n      `fillRelations/${this.ids.mal}/${this.getType()}`,\n      7 * 24 * 60 * 60 * 1000,\n    );\n\n    return cacheObj.hasValueAndIsNotEmpty().then(exists => {\n      if (!exists) {\n        return malToAnilist(this.ids.mal, this.getType()!).then(el => {\n          if (el && parseInt(el)) {\n            this.ids.ani = parseInt(el);\n          }\n          return cacheObj.setValue({ da: el });\n        });\n      }\n      return cacheObj.getValue().then(res => {\n        if (res && res.da && parseInt(res.da)) {\n          this.ids.ani = parseInt(res.da);\n        }\n      });\n    });\n  }\n\n  apiCall = helper.apiCall;\n}\n","import { Cache } from '../utils/Cache';\nimport { Progress } from '../utils/progress';\nimport { emitter } from '../utils/emitter';\nimport { errorMessage as _errorMessage } from './Errors';\n\nObject.seal(emitter);\n\nexport interface listElement {\n  uid: number;\n  malId: number;\n  apiCacheKey: number | string;\n  cacheKey: any;\n  type: 'anime' | 'manga';\n  title: string;\n  url: string;\n  score: number;\n  watchedEp: number;\n  readVol?: number;\n  totalEp: number;\n  totalVol?: number;\n  status: number;\n  startDate: string | null;\n  finishDate: string | null;\n  rewatchCount: number;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  tags: string;\n  airingState: number;\n  fn: {\n    continueUrl: () => string;\n    initProgress: () => void;\n    progress: false | Progress;\n  };\n  options?: {\n    u: string;\n    r: any;\n    c: any;\n    p: any;\n  };\n}\n\nexport abstract class ListAbstract {\n  protected done = false;\n\n  protected loading = false;\n\n  protected firstLoaded = false;\n\n  protected abstract authenticationUrl: string;\n\n  abstract readonly name;\n\n  protected logger;\n\n  public seperateRewatching = false;\n\n  // Modes\n  modes = {\n    frontend: false,\n    sortAiring: false,\n    initProgress: false,\n    cached: false,\n  };\n\n  protected username = '';\n\n  protected offset = 0;\n\n  protected templist: listElement[] = [];\n\n  constructor(\n    protected status: number = 1,\n    protected listType: 'anime' | 'manga' = 'anime',\n    protected sort: string = 'default',\n  ) {\n    this.status = Number(this.status);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  public api = api;\n\n  public setTemplist(list) {\n    this.templist = list;\n    return this;\n  }\n\n  public getTemplist() {\n    return this.templist;\n  }\n\n  public setSort(sort) {\n    if (this.firstLoaded || this.loading) throw 'To late to change sort';\n    this.sort = sort;\n  }\n\n  isDone() {\n    return this.done;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isFirstLoaded() {\n    return this.firstLoaded;\n  }\n\n  async getCompleteList(): Promise<listElement[]> {\n    do {\n      // eslint-disable-next-line no-await-in-loop\n      await this.getNext();\n    } while (!this.done);\n\n    if (this.modes.sortAiring) await this.sortAiringList();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 18));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  async getNextPage(): Promise<listElement[]> {\n    if (this.done) return this.templist;\n\n    if (\n      this.modes.frontend &&\n      this.status === 1 &&\n      (this.sort === 'default' || this.sort === 'unread')\n    ) {\n      this.modes.sortAiring = true;\n      return this.getCompleteList();\n    }\n\n    await this.getNext();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 24));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  private async getNext() {\n    this.loading = true;\n    const retList = await this.getPart();\n    this.templist = this.templist.concat(retList);\n    this.loading = false;\n  }\n\n  async getCached(): Promise<listElement[]> {\n    if (await this.getCache().hasValue()) {\n      const cachelist = await this.getCache().getValue();\n      cachelist.forEach(item => {\n        item = this.fn(item);\n        item.watchedEp = '';\n        item.score = '';\n      });\n      return cachelist;\n    }\n    return [];\n  }\n\n  protected updateListener;\n\n  public initFrontendMode() {\n    this.modes.frontend = true;\n    this.updateListener = emitter.on(\n      'update.*',\n      data => {\n        con.log('update', data);\n        if (data.cacheKey) {\n          const item = this.templist.find(el => el.cacheKey === data.cacheKey);\n          con.log(item);\n          if (item && data.state) {\n            item.watchedEp = data.state.episode;\n            item.score = data.state.score;\n            item.status = data.state.status;\n          }\n        }\n      },\n      { objectify: true },\n    );\n  }\n\n  public destroy() {\n    if (this.updateListener) {\n      this.updateListener.off();\n    }\n  }\n\n  public getUsername() {\n    return this.getUserObject().then(user => user.username);\n  }\n\n  abstract getUserObject(): Promise<{ username: string; picture: string; href: string }>;\n\n  abstract _getSortingOptions(): { icon: string; title: string; value: string; asc?: boolean }[];\n\n  getSortingOptions(\n    simple = false,\n  ): { icon: string; title: string; value: string; asc?: boolean }[] {\n    const res = [\n      {\n        icon: 'filter_list',\n        title: api.storage.lang('settings_progress_default'),\n        value: 'default',\n      },\n    ];\n\n    if (this.status === 1 && this.listType === 'manga') {\n      res.push({\n        icon: 'adjust',\n        title: api.storage.lang('list_sorting_unread'),\n        value: 'unread',\n      });\n    }\n\n    const options = this._getSortingOptions();\n    options.forEach(el => {\n      if (!simple) {\n        if (el.asc) {\n          const asc = { ...el };\n          delete asc.asc;\n          asc.value += '_asc';\n          asc.title += ' Ascending';\n          res.push(asc);\n        }\n        delete el.asc;\n      }\n      res.push(el);\n    });\n    return res;\n  }\n\n  abstract getPart(): Promise<listElement[]>;\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n\n  // itemFunctions;\n  async fn(item, streamurl = '') {\n    let continueUrlTemp: any = null;\n    item.fn = {\n      continueUrl: () => {\n        if (continueUrlTemp !== null) return continueUrlTemp;\n        return utils.getContinueWaching(item.type, item.cacheKey).then(obj => {\n          const curEp = parseInt(item.watchedEp.toString());\n\n          if (obj === undefined || obj.ep !== curEp + 1) return '';\n\n          continueUrlTemp = obj.url;\n\n          return continueUrlTemp;\n        });\n      },\n      initProgress: () => {\n        return new Progress(item.cacheKey, item.type).init().then(progress => {\n          item.fn.progress = progress;\n        });\n      },\n      progress: false,\n    };\n    item.options = await utils.getEntrySettings(item.type, item.cacheKey, item.tags);\n    if (streamurl) item.options.u = streamurl;\n    if (this.modes.sortAiring || this.modes.initProgress) await item.fn.initProgress();\n\n    return item;\n  }\n\n  // Modes\n  async initProgress() {\n    const listP: any = [];\n    this.templist.forEach(item => {\n      listP.push(item.fn.initProgress());\n    });\n\n    await Promise.all(listP);\n  }\n\n  async sortAiringList() {\n    if (this.sort === 'unread') {\n      this.sortUnread();\n      return;\n    }\n\n    const normalItems: listElement[] = [];\n    let preItems: listElement[] = [];\n    let watchedItems: listElement[] = [];\n    this.templist.forEach(item => {\n      const prediction = item.fn.progress;\n      if (this.listType === 'anime') {\n        if (prediction && prediction.isAiring() && prediction.getPredictionTimestamp()) {\n          if (item.watchedEp < prediction.getCurrentEpisode()) {\n            preItems.push(item);\n          } else {\n            watchedItems.push(item);\n          }\n        } else {\n          normalItems.push(item);\n        }\n      } else if (\n        // Manga only if less than 5 chapters to read\n        prediction &&\n        prediction.isAiring() &&\n        prediction.getCurrentEpisode() &&\n        item.watchedEp &&\n        item.watchedEp < prediction.getCurrentEpisode() &&\n        item.watchedEp + 6 > prediction.getCurrentEpisode()\n      ) {\n        preItems.push(item);\n      } else {\n        normalItems.push(item);\n      }\n    });\n\n    preItems = preItems.sort(sortItems).reverse();\n    watchedItems = watchedItems.sort(sortItems);\n\n    this.templist = preItems.concat(watchedItems, normalItems);\n\n    function sortItems(a, b) {\n      let valA = a.fn.progress.getPredictionTimestamp();\n      let valB = b.fn.progress.getPredictionTimestamp();\n\n      if (!valA) valA = 999999999999;\n      if (!valB) valB = valA;\n\n      return valA - valB;\n    }\n  }\n\n  sortUnread() {\n    this.templist = this.templist.sort(function (a, b) {\n      let valA = 10000;\n      let valB = 10000;\n\n      if (a.fn.progress && a.fn.progress.getCurrentEpisode()) {\n        const tempA = a.fn.progress.getCurrentEpisode() - a.watchedEp;\n        if (tempA > 0) valA = tempA;\n      }\n      if (b.fn.progress && b.fn.progress.getCurrentEpisode()) {\n        const tempB = b.fn.progress.getCurrentEpisode() - b.watchedEp;\n        if (tempB > 0) valB = tempB;\n      }\n\n      return valA - valB;\n    });\n  }\n\n  cacheObj: any = undefined;\n\n  getCache() {\n    if (this.cacheObj) return this.cacheObj;\n    this.cacheObj = new Cache(\n      `list/${this.name}/${this.listType}/${this.status}/${this.sort}`,\n      48 * 60 * 60 * 1000,\n    );\n    return this.cacheObj;\n  }\n}\n","import { ListAbstract, listElement } from '../listAbstract';\n\nexport class UserList extends ListAbstract {\n  name = 'MyAnimeList';\n\n  authenticationUrl = 'https://myanimelist.net/login.php';\n\n  async getUserObject() {\n    throw 'no';\n    return Promise.resolve({ username: '', picture: '', href: '' });\n    /*\n    const url = 'https://myanimelist.net/panel.php?go=export&hideLayout';\n    const response = await api.request.xhr('GET', url);\n    const usernameMatches = response.responseText.match(/USER_NAME = \"(.*?)\"/);\n    if (!usernameMatches || usernameMatches.length < 2 || !usernameMatches[1])\n      throw {\n        code: 400,\n        message: 'Not Authenticated',\n      };\n\n    return usernameMatches[1];\n    */\n  }\n\n  _getSortingOptions() {\n    return [\n      {\n        icon: 'sort_by_alpha',\n        title: 'Alphabetic',\n        value: api.storage.lang('list_sorting_alpha'),\n        asc: true,\n      },\n      {\n        icon: 'history',\n        title: api.storage.lang('list_sorting_history'),\n        value: 'updated',\n        asc: true,\n      },\n      {\n        icon: 'score',\n        title: api.storage.lang('list_sorting_score'),\n        value: 'score',\n        asc: true,\n      },\n    ];\n  }\n\n  getOrder(sort) {\n    let pre = '';\n\n    if (sort.endsWith('_asc')) pre = '-';\n\n    const sortString = sort.replace('_asc', '');\n    switch (sortString) {\n      case 'alpha':\n        return pre + 1;\n      case 'updated':\n        return pre + 5;\n      case 'score':\n        return pre + 4;\n      default:\n        if (this.status === 1) return this.getOrder('updated');\n        if (this.status === 6) return this.getOrder('updated');\n        return this.getOrder('alpha');\n    }\n  }\n\n  async getPart() {\n    throw 'no';\n    return [];\n    /*\n    if (!this.username) {\n      this.username = await this.getUsername();\n    }\n\n    const order = this.getOrder(this.sort);\n    let sorting = '';\n    if (order) {\n      sorting = `&order=${order}`;\n    }\n    con.log(\n      '[UserList][MAL]',\n      `username: ${this.username}`,\n      `status: ${this.status}`,\n      `offset: ${this.offset}`,\n      `sorting: ${sorting}`,\n    );\n    const url = `https://myanimelist.net/${this.listType}list/${this.username}/load.json?offset=${this.offset}&status=${this.status}${sorting}`;\n    return api.request.xhr('GET', url).then(async response => {\n      const res = this.jsonParse(response);\n      const data = await this.prepareData(res);\n      if (data.length > 299) {\n        this.offset += 300;\n      } else {\n        this.done = true;\n      }\n      return data;\n    });\n    */\n  }\n\n  public async prepareData(data): Promise<listElement[]> {\n    const newData = [] as listElement[];\n    for (let i = 0; i < data.length; i++) {\n      const el = data[i];\n      if (this.listType === 'anime') {\n        newData.push(\n          await this.fn({\n            uid: el.anime_id,\n            malId: el.anime_id,\n            apiCacheKey: el.anime_id,\n            cacheKey: el.anime_id,\n            type: this.listType,\n            title: el.anime_title,\n            url: `https://myanimelist.net${el.anime_url}`,\n            watchedEp: el.num_watched_episodes,\n            totalEp: el.anime_num_episodes,\n            status: el.status,\n            score: el.score,\n            image: el.anime_image_path,\n            tags: el.tags,\n            airingState: el.anime_airing_status,\n          }),\n        );\n      } else {\n        newData.push(\n          await this.fn({\n            uid: el.manga_id,\n            malId: el.manga_id,\n            apiCacheKey: el.manga_id,\n            cacheKey: el.manga_id,\n            type: this.listType,\n            title: el.manga_title,\n            url: `https://myanimelist.net${el.manga_url}`,\n            watchedEp: el.num_read_chapters,\n            totalEp: el.manga_num_chapters,\n            status: el.status,\n            score: el.score,\n            image: el.manga_image_path,\n            tags: el.tags,\n            airingState: el.anime_airing_status,\n          }),\n        );\n      }\n    }\n    return newData;\n  }\n}\n","import { UserList as temp } from '../MyAnimeList_api/list';\n\nexport const UserList = temp;\n","import { ListAbstract, listElement } from '../listAbstract';\nimport * as helper from './helper';\nimport * as definitions from '../definitions';\n\nexport class UserList extends ListAbstract {\n  name = 'MyAnimeList';\n\n  authenticationUrl = helper.authenticationUrl;\n\n  async getUserObject() {\n    return this.apiCall({\n      type: 'GET',\n      path: 'users/@me',\n    }).then(json => {\n      return {\n        username: json.name,\n        picture: json.picture,\n        href: `https://myanimelist.net/profile/${json.name}`,\n      };\n    });\n  }\n\n  deauth() {\n    return api.settings.set('malToken', '').then(() => api.settings.set('malRefresh', ''));\n  }\n\n  _getSortingOptions() {\n    return [\n      {\n        icon: 'sort_by_alpha',\n        title: api.storage.lang('list_sorting_alpha'),\n        value: 'alpha',\n      },\n      {\n        icon: 'history',\n        title: api.storage.lang('list_sorting_history'),\n        value: 'updated',\n      },\n      {\n        icon: 'score',\n        title: api.storage.lang('list_sorting_score'),\n        value: 'score',\n      },\n      {\n        icon: 'calendar_month',\n        title: api.storage.lang('list_sorting_airing_date'),\n        value: 'airing_date',\n      },\n    ];\n  }\n\n  getOrder(sort) {\n    switch (sort) {\n      case 'alpha':\n        return `${this.listType}_title`;\n      case 'updated':\n        return 'list_updated_at';\n      case 'score':\n        return 'list_score';\n      case 'airing_date':\n        return `${this.listType}_start_date`;\n      default:\n        if (this.status === definitions.status.Watching) return this.getOrder('updated');\n        if (this.status === definitions.status.PlanToWatch) return this.getOrder('updated');\n        return this.getOrder('alpha');\n    }\n  }\n\n  private limit = 100;\n\n  async getPart() {\n    this.limit = 100;\n    if (this.modes.frontend) {\n      this.limit = 24;\n    }\n\n    const order = this.getOrder(this.sort);\n    let sorting = '';\n    if (order) {\n      sorting = `&sort=${order}`;\n    }\n\n    con.log(\n      '[UserList][MAL]',\n      `username: ${this.username}`,\n      `status: ${this.status}`,\n      `offset: ${this.offset}`,\n      `sorting: ${sorting}`,\n    );\n\n    let curSt = '';\n    if (this.status !== definitions.status.All) {\n      if (this.listType === 'manga') {\n        curSt = `&status=${helper.mangaStatus[this.status]}`;\n      } else {\n        curSt = `&status=${helper.animeStatus[this.status]}`;\n      }\n    }\n\n    const useAltTitle = api.settings.get('forceEnglishTitles');\n\n    return this.apiCall({\n      type: 'GET',\n      path: `users/@me/${this.listType}list?nsfw=true&limit=${this.limit}&offset=${this.offset}${curSt}${sorting}`,\n      fields: [\n        'list_status{tags,is_rewatching,is_rereading,start_date,finish_date,num_times_rewatched,num_times_reread}',\n        'num_episodes',\n        'num_chapters',\n        'num_volumes',\n        useAltTitle ? 'alternative_titles' : '',\n      ],\n    }).then(json => {\n      if (json.paging && json.paging.next) {\n        this.offset += this.limit;\n      } else {\n        this.done = true;\n      }\n\n      return this.prepareData(json.data);\n    });\n  }\n\n  public async prepareData(data): Promise<listElement[]> {\n    const newData = [] as listElement[];\n    const useAltTitle = api.settings.get('forceEnglishTitles');\n    for (let i = 0; i < data.length; i++) {\n      const el = data[i];\n      if (this.listType === 'anime') {\n        newData.push(\n          await this.fn({\n            uid: el.node.id,\n            malId: el.node.id,\n            apiCacheKey: el.node.id,\n            cacheKey: el.node.id,\n            type: this.listType,\n            title: useAltTitle ? el.node.alternative_titles.en || el.node.title : el.node.title,\n            url: `https://myanimelist.net/${this.listType}/${el.node.id}`,\n            score: el.list_status.score,\n            watchedEp: el.list_status.num_episodes_watched,\n            totalEp: el.node.num_episodes,\n            status: parseInt(helper.animeStatus[el.list_status.status]),\n            startDate: helper.getRoundedDate(el.list_status.start_date),\n            finishDate: helper.getRoundedDate(el.list_status.finish_date),\n            rewatchCount: el.list_status.num_times_rewatched,\n            image: el.node.main_picture?.medium ?? '',\n            imageLarge: el.node.main_picture?.large || el.node.main_picture?.medium || '',\n            tags: el.list_status.tags.length ? el.list_status.tags.join(',') : '',\n            airingState: el.anime_airing_status,\n          }),\n        );\n      } else {\n        newData.push(\n          await this.fn({\n            uid: el.node.id,\n            malId: el.node.id,\n            apiCacheKey: el.node.id,\n            cacheKey: el.node.id,\n            type: this.listType,\n            title: useAltTitle ? el.node.alternative_titles.en || el.node.title : el.node.title,\n            url: `https://myanimelist.net/${this.listType}/${el.node.id}`,\n            score: el.list_status.score,\n            watchedEp: el.list_status.num_chapters_read,\n            readVol: el.list_status.num_volumes_read,\n            totalEp: el.node.num_chapters,\n            totalVol: el.node.num_volumes,\n            status: parseInt(helper.mangaStatus[el.list_status.status]),\n            startDate: helper.getRoundedDate(el.list_status.start_date),\n            finishDate: helper.getRoundedDate(el.list_status.finish_date),\n            rewatchCount: el.list_status.num_times_reread,\n            image: el.node.main_picture?.medium ?? '',\n            imageLarge: el.node.main_picture?.large || el.node.main_picture?.medium || '',\n            tags: el.list_status.tags.length ? el.list_status.tags.join(',') : '',\n            airingState: el.anime_airing_status,\n          }),\n        );\n      }\n    }\n    return newData;\n  }\n\n  apiCall = helper.apiCall;\n}\n","// eslint-disable-next-line import/no-unresolved\nconst quicklinkPages = require('./quicklinks.json') as QuicklinkObject[];\n\ntype QuicklinkGroup = 'home' | 'search' | 'link';\n\nexport interface QuicklinkObjectSearch {\n  anime: string | null;\n  manga: string | null;\n}\n\ninterface QuicklinkObject {\n  key: string;\n  name: string;\n  domain: string;\n  database: string | null;\n  search: QuicklinkObjectSearch;\n}\n\ninterface Links {\n  name: string;\n  url: string;\n  fn?: (searchTerm: string) => string;\n}\n\nexport interface Quicklink {\n  name: string;\n  domain: string;\n  group: QuicklinkGroup;\n  links: Links[];\n}\n\nexport function titleSearch(url, title, id) {\n  return searchSyntax(\n    url\n      .replace('{searchtermPlus}', '{searchterm(+)}')\n      .replace('{searchtermMinus}', '{searchterm(-)}')\n      .replace('{searchtermUnderscore}', '{searchterm(_)}')\n      .replace('{searchtermRaw}', '{searchterm[noEncode,noLowercase]}')\n      .replace('{cacheId}', id),\n    title,\n  );\n}\n\ntype option = 'noEncode' | 'noSpecial' | 'noLowercase' | 'specialReplace';\n\n/**\n * @example\n * Simple usage:\n *  {searchterm} => 'no%20game%20no%20life'\n *  {searchtermPlus} => 'no+game+no+life'\n *  {searchtermMinus} => 'no-game-no-life'\n *  {searchtermUnderscore} => 'no_game_no_life'\n *  {searchtermRaw} => 'no game no life'\n *  {cacheId} => '143'\n *\n * Advanced usage:\n *  {searchterm(<whitespaceReplacement>)[<options>]}\n *  Options:\n *    noEncode -> Dont encode characters\n *    noSpecial -> Remove special characters\n *    specialReplace -> Replace special characters with a <whitespaceReplacement>\n *    noLowercase -> Dont lowercase everything\n */\nexport function searchSyntax(url, title) {\n  let resTitle = title.replace(/^\\[l\\]/i, '').trim();\n  let options: option[] = [];\n\n  const found = url.match(/{searchterm(\\(.\\))?(\\[[^[\\]]*\\])?}/);\n\n  if (!found) return url;\n\n  const [res, space, tempOptions] = found;\n\n  if (tempOptions) {\n    options = tempOptions.substring(1, tempOptions.length - 1).split(',');\n  }\n\n  if (!options.includes('noLowercase')) {\n    resTitle = resTitle.toLowerCase();\n  }\n\n  if (options.includes('noSpecial')) {\n    resTitle = resTitle\n      .replace(/[^a-zA-Z\\d ]/g, '')\n      .replace(/ +/g, ' ')\n      .trim();\n  } else if (options.includes('specialReplace')) {\n    resTitle = resTitle\n      .replace(/[^a-zA-Z\\d ]/g, ' ')\n      .replace(/ +/g, ' ')\n      .trim();\n  }\n\n  if (!options.includes('noEncode')) {\n    resTitle = encodeURIComponent(resTitle);\n  } else {\n    resTitle = resTitle.replace(/\\//g, ' ');\n  }\n\n  if (space) {\n    resTitle = resTitle.replace(/(%20| )/g, space[1]);\n  }\n\n  return url.replace(res, resTitle);\n}\n\nasync function fillFromApi(combined, type, id) {\n  const mal = await getMalToKissApi(type, id);\n\n  return combined.map(el => {\n    if (el.database && mal[el.database]) {\n      el.databaseLinks = mal[el.database];\n    }\n    return el;\n  });\n}\n\nfunction simplifyObject(combined, type, title, id): Quicklink[] {\n  return combined\n    .filter(el => el.search && el.search[type])\n    .map(el => {\n      const links: Links[] = [];\n      let quickGroup: QuicklinkGroup;\n\n      if (el.databaseLinks) {\n        quickGroup = 'link';\n        Object.values(el.databaseLinks).forEach((db: any) => {\n          links.push({\n            name: db.title,\n            url: db.url,\n          });\n        });\n      } else if (el.search[type] === 'home') {\n        quickGroup = 'home';\n        links.push({\n          name: 'Homepage',\n          url: el.domain,\n        });\n      } else {\n        quickGroup = 'search';\n        links.push({\n          name: 'Quicksearch',\n          url: titleSearch(el.search[type], title, id),\n          fn: searchTerm => titleSearch(el.search[type], searchTerm, id),\n        });\n      }\n\n      return {\n        name: el.name,\n        domain: el.domain,\n        group: quickGroup,\n        links,\n      };\n    });\n}\n\nexport async function getMalToKissApi(type, id) {\n  const url = `https://api.malsync.moe/mal/${type}/${id}`;\n  return api.request.xhr('GET', url).then(async response => {\n    con.log('malSync response', response);\n    if (response.status === 400) {\n      return {};\n    }\n    if (response.status === 200) {\n      const data = JSON.parse(response.responseText);\n      if (data && data.Sites) return data.Sites;\n      return {};\n    }\n    throw new Error('malsync offline');\n  });\n}\n\nlet tempQuicklinks = null as QuicklinkObject[] | null;\nexport function getQuicklinks(): QuicklinkObject[] {\n  if (tempQuicklinks) return tempQuicklinks;\n\n  const quicklinkChibi: QuicklinkObject[] = Object.values(api.settings.getStaticChibi()).map(el => {\n    return {\n      key: el.key,\n      name: el.name,\n      domain: typeof el.domain === 'string' ? el.domain : el.domain[0],\n      database: el.database || null,\n      search:\n        typeof el.search === 'object'\n          ? el.search\n          : {\n              anime: el.type === 'anime' ? el.search || null : null,\n              manga: el.type === 'manga' ? el.search || null : null,\n            },\n    };\n  });\n\n  tempQuicklinks = [...quicklinkPages, ...quicklinkChibi];\n  return tempQuicklinks;\n}\n\nexport function combinedLinks() {\n  const links = api.settings.get('quicklinks');\n  const comb = links.map(el => optionToCombined(el)).filter(el => el);\n  return JSON.parse(JSON.stringify(comb));\n}\n\nexport function optionToCombined(link) {\n  if (!link) return null;\n  if (link.custom) return link;\n  return getQuicklinks().find(el => el.name === link);\n}\n\nexport async function activeLinks(\n  type: 'anime' | 'manga',\n  id: any,\n  searchterm: string,\n): Promise<Quicklink[]> {\n  let combined = combinedLinks();\n\n  if (id) {\n    try {\n      combined = await fillFromApi(combined, type, id);\n    } catch (e) {\n      con.m('API Problem').error(e);\n    }\n  }\n\n  return simplifyObject(combined, type, searchterm, id);\n}\n\nexport function removeOptionKey(options, key) {\n  if (!key) return options;\n  return options.filter(el => {\n    if (!el || el === key || (typeof el === 'object' && el.name === key)) return false;\n    return true;\n  });\n}\n\nexport function removeFromOptions(key) {\n  const options = api.settings.get('quicklinks');\n  api.settings.set('quicklinks', removeOptionKey(options, key));\n}\n\nexport function getPages() {\n  return quicklinkPages;\n}\n\nexport function getAllPages() {\n  return getQuicklinks();\n}\n","import { Single as ApiSingle } from '../_provider/MyAnimeList_hybrid/single';\nimport { UserList as LegacyList } from '../_provider/MyAnimeList_legacy/list';\n\nimport { UserList as ApiList } from '../_provider/MyAnimeList_hybrid/list';\nimport { activeLinks, removeFromOptions } from '../utils/quicklinksBuilder';\nimport { waitForPageToBeVisible } from '../utils/general';\n\nexport class MyAnimeListClass {\n  page: 'detail' | 'bookmarks' | 'modern' | 'classic' | 'character' | 'people' | 'search' | null =\n    null;\n\n  // detail\n  readonly id: number | null = null;\n\n  readonly type: 'anime' | 'manga' | null = null;\n\n  // bookmarks\n  readonly username: any = null;\n\n  constructor(public url: string) {\n    let urlTemp;\n    if (url.indexOf('myanimelist.net/anime.php') > -1) {\n      urlTemp = `/anime/${utils.urlParam(this.url, 'id')}`;\n      // @ts-ignore\n      window.history.replaceState(null, null, urlTemp);\n      this.url = utils.absoluteLink(urlTemp, 'https://myanimelist.net');\n    }\n    if (url.indexOf('myanimelist.net/manga.php') > -1) {\n      urlTemp = `/manga/${utils.urlParam(this.url, 'id')}`;\n      // @ts-ignore\n      window.history.replaceState(null, null, urlTemp);\n      this.url = utils.absoluteLink(urlTemp, 'https://myanimelist.net');\n    }\n\n    const urlpart = utils.urlPart(this.url, 3);\n    if (urlpart === 'anime' || urlpart === 'manga') {\n      this.page = 'detail';\n      this.id = Number(utils.urlPart(this.url, 4));\n      this.type = urlpart;\n    }\n    if (urlpart === 'animelist' || urlpart === 'mangalist') {\n      this.page = 'bookmarks';\n      this.username = utils.urlPart(this.url, 4);\n      this.type = urlpart === 'animelist' ? 'anime' : 'manga';\n    }\n    if (urlpart === 'character') {\n      this.page = 'character';\n    }\n    if (urlpart === 'people') {\n      this.page = 'people';\n    }\n    if (urlpart === 'search') {\n      this.page = 'search';\n    }\n  }\n\n  async init() {\n    await waitForPageToBeVisible();\n\n    con.log(this);\n    switch (this.page) {\n      case 'detail':\n        this.thumbnails();\n        this.streamingUI();\n        this.malToKiss();\n        this.related();\n        this.friendScore();\n        this.relatedTag();\n        break;\n      case 'bookmarks':\n        $(document).ready(() => {\n          if ($('#mal_cs_powered').length) {\n            this.page = 'classic';\n          } else {\n            this.page = 'modern';\n          }\n          this.init();\n        });\n        break;\n      case 'modern':\n        this.bookmarks();\n        break;\n      case 'classic':\n        this.bookmarks();\n        break;\n      case 'character':\n        this.relatedTag();\n      case 'people':\n      case 'search':\n        this.thumbnails();\n        break;\n      default:\n        con.log('This page has no scipt');\n    }\n  }\n\n  thumbnails() {\n    con.log('Lazyloaded Images');\n    if (this.url.indexOf('/pics') > -1) {\n      return;\n    }\n    if (this.url.indexOf('/pictures') > -1) {\n      return;\n    }\n    if (api.settings.get('malThumbnail') === '0') {\n      return;\n    }\n    const height = parseInt(api.settings.get('malThumbnail'));\n    const width = Math.floor((height / 144) * 100);\n\n    const surHeight = height + 4;\n    const surWidth = width + 4;\n    api.storage.addStyle(\n      `.picSurround img:not(.noKal){height: ${height}px !important; width: ${width}px !important;}`,\n    );\n    api.storage.addStyle('.picSurround img.lazyloaded.kal{width: auto !important;}');\n    api.storage.addStyle(\n      `.picSurround:not(.noKal) a{height: ${surHeight}px; width: ${surWidth}px; overflow: hidden; display: flex; justify-content: center;}`,\n    );\n    api.storage.addStyle(`.picSurround img[src*=\"userimages\"]{max-width: ${width}px !important}`);\n\n    let loaded = 0;\n    try {\n      // @ts-ignore\n      $(window).load(function () {\n        overrideLazyload();\n      });\n    } catch (e) {\n      con.info(e);\n    }\n    try {\n      window.onload = function () {\n        overrideLazyload();\n      };\n    } catch (e) {\n      con.info(e);\n    }\n    try {\n      document.onload = function () {\n        overrideLazyload();\n      };\n    } catch (e) {\n      con.info(e);\n    }\n    try {\n      $(document).ready(function () {\n        overrideLazyload();\n      });\n    } catch (e) {\n      con.info(e);\n    }\n\n    function overrideLazyload() {\n      if (loaded) return;\n      loaded = 1;\n      const tags = document.querySelectorAll('.picSurround img:not(.kal)');\n      let url = '';\n      for (let i = 0; i < tags.length; i++) {\n        const regexDimensions = /\\/r\\/\\d*x\\d*/g;\n        if (tags[i].hasAttribute('data-src')) {\n          url = tags[i].getAttribute('data-src')!;\n        } else {\n          url = tags[i].getAttribute('src')!;\n        }\n\n        if (\n          regexDimensions.test(url) ||\n          /voiceactors.*v.jpg$/g.test(url) ||\n          url.indexOf('questionmark') !== -1\n        ) {\n          url = utils.handleMalImages(url);\n          if (!(url.indexOf('100x140') > -1)) {\n            tags[i].setAttribute('data-src', url);\n            url = url.replace(/v.jpg$/g, '.jpg');\n            tags[i].setAttribute('data-srcset', url.replace(regexDimensions, ''));\n            tags[i].classList.add('lazyload');\n          }\n          tags[i].classList.add('kal');\n        } else {\n          tags[i].closest('.picSurround')!.classList.add('noKal');\n          tags[i].classList.add('kal');\n          tags[i].classList.add('noKal');\n        }\n      }\n    }\n  }\n\n  bookmarksHDimages() {\n    const tags = document.querySelectorAll('img[src*=\"/96x136/\"]');\n    for (let i = 0; i < tags.length; i++) {\n      const regexDimensions = /\\/r\\/\\d*x\\d*/g;\n      const url = tags[i].getAttribute('src')!;\n      tags[i].setAttribute('src', url.replace(regexDimensions, ''));\n    }\n  }\n\n  setEpPrediction(progress) {\n    if (progress && progress.isAiring() && progress.getCurrentEpisode()) {\n      $('.mal-sync-pre-remove, .mal-sync-ep-pre').remove();\n      $('#addtolist')\n        .prev()\n        .before(j.html(`<div class=\"mal-sync-pre-remove\">${progress.getAutoText()}</div>`));\n      $('[id=\"curEps\"], [id=\"totalChaps\"]').before(\n        j.html(\n          `<span class=\"mal-sync-ep-pre\" title=\"${progress.getAutoText()}\">[<span style=\"border-bottom: 1px dotted ${progress.getColor()};\">${progress.getCurrentEpisode()}</span>]</span> `,\n        ),\n      );\n    }\n  }\n\n  getImage() {\n    return $('.leftside img').first().attr('src') || '';\n  }\n\n  getTitle() {\n    const title = $('meta[property=\"og:title\"]').first().attr('content')!.trim() || '';\n    return title.replace(/(^watch|episode \\d*$)/gi, '').trim();\n  }\n\n  async malToKiss() {\n    $(document).ready(() => {\n      con.log('malToKiss');\n\n      const title = this.getTitle();\n\n      activeLinks(this.type!, this.id, title).then(links => {\n        let html = '';\n\n        links.forEach(page => {\n          let tempHtml = '';\n\n          page.links.forEach(stream => {\n            tempHtml += `<div class=\"mal_links\" style=\"word-break: break-all;\"><a target=\"_blank\" href=\"${stream.url}\">${stream.name}</a></div>`;\n          });\n\n          html += `<h2 id=\"${page.name}Links\" class=\"mal_links\"><img src=\"${utils.favicon(\n            page.domain,\n          )}\"> ${page.name}<span title=\"${\n            page.name\n          }\" class=\"remove-mal-sync\" style=\"float: right; font-weight: 100; line-height: 2; cursor: pointer; color: grey;\">x</span></h2>`;\n          html += tempHtml;\n          html += '<br class=\"mal_links\" />';\n        });\n        if (api.settings.get('quicklinksPosition') === 'below') {\n          if ($('h2:contains(\"External Links\")').length) {\n            $('h2:contains(\"External Links\")').before(j.html(html));\n          } else {\n            $('h2:contains(\"Information\")').parent().find('div.mt16').last().before(j.html(html));\n          }\n        } else {\n          $('h2:contains(\"Information\")').before(j.html(html));\n        }\n        $('.remove-mal-sync').click(function () {\n          const key = $(this).attr('title');\n          removeFromOptions(String(key));\n          window.location.reload();\n        });\n      });\n    });\n  }\n\n  async streamingUI() {\n    con.log('Streaming UI');\n    const malObj = new ApiSingle(this.url);\n\n    try {\n      await malObj.update();\n    } catch (e) {\n      con.error('Could not get Single', e);\n      return;\n    }\n\n    this.pageRelation(malObj);\n\n    const streamUrl = malObj.getStreamingUrl();\n    if (streamUrl) {\n      $(document).ready(async function () {\n        $('.breadcrumb')\n          .first()\n          .append(\n            j.html(`\n        <div class=\"data title progress\" id=\"mal-sync-stream-div\" style=\"padding-left: 5px; display: inline-block; position: relative; top: -12px; height: 0px;\">\n          <a class=\"mal-sync-stream\" title=\"${\n            streamUrl ? streamUrl.split('/')[2] : ''\n          }\" target=\"_blank\" style=\"margin: 0 0; display: inline-block; height: 0;\" href=\"${streamUrl}\">\n            <img style=\"display: block;\" src=\"${utils.favicon(\n              streamUrl ? streamUrl.split('/')[2] : '',\n            )}\">\n          </a>\n        </div>`),\n          );\n\n        const resumeUrlObj = malObj.getResumeWatching();\n        const continueUrlObj = malObj.getContinueWatching();\n        con.log('Resume', resumeUrlObj, 'Continue', continueUrlObj);\n        if (continueUrlObj && continueUrlObj.ep === malObj.getEpisode() + 1) {\n          $('#mal-sync-stream-div').append(\n            j.html(\n              `<a class=\"nextStream\" title=\"${api.storage.lang(\n                `overview_Continue_${malObj.getType()}`,\n              )}\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA; display: inline-block; height: 0;\" href=\"${\n                continueUrlObj.url\n              }\">\n              <img style=\"display: block;\" src=\"${api.storage.assetUrl(\n                'double-arrow-16px.png',\n              )}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        } else if (resumeUrlObj && resumeUrlObj.ep === malObj.getEpisode()) {\n          $('#mal-sync-stream-div').append(\n            j.html(\n              `<a class=\"resumeStream\" title=\"${api.storage.lang(\n                `overview_Resume_Episode_${malObj.getType()}`,\n              )}\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA; display: inline-block; height: 0;\" href=\"${\n                resumeUrlObj.url\n              }\">\n              <img style=\"display: block;\" src=\"${api.storage.assetUrl(\n                'arrow-16px.png',\n              )}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        }\n      });\n    }\n\n    await malObj.initProgress();\n\n    this.setEpPrediction(malObj.getProgress());\n\n    setInterval(() => {\n      this.setEpPrediction(malObj.getProgress());\n    }, 1000 * 60);\n  }\n\n  async pageRelation(malObj) {\n    await malObj.fillRelations();\n\n    malObj.getPageRelations().forEach(page => {\n      $('#horiznav_nav > ul').append(\n        j.html(`\n          <li style=\"position: relative; height: 12px; display: inline-block;\">\n            <a href=\"${page.link}\" target=\"_blank\" title=\"${page.name}\" class=\"link\" style=\"position: absolute; bottom: -5px; width: 16px; text-align: center;\">\n              <img src=\"${page.icon}\" width=\"16\" width=\"16\">\n            </a>\n          </li>\n        `),\n      );\n    });\n  }\n\n  bookmarks() {\n    con.log(`Bookmarks [${this.username}][${this.page}]`);\n    const This = this;\n\n    const listProvider = new ApiList(7, this.type!);\n    const dataProvider = new LegacyList(7, this.type!);\n\n    let book;\n    if (this.page === 'modern') {\n      book = {\n        bookReady(callback) {\n          utils.waitUntilTrue(\n            function () {\n              return $('#loading-spinner').css('display') === 'none';\n            },\n            async function () {\n              callback(\n                await dataProvider.prepareData($.parseJSON($('.list-table').attr('data-items')!)),\n              );\n\n              utils.changeDetect(\n                () => {\n                  $('.tags span a').each(function (index) {\n                    if (typeof utils.getUrlFromTags($(this).text()) !== 'undefined') {\n                      const par = $(this).parent().parent().parent().parent();\n                      $(this).parent().remove();\n                      streamUI(\n                        This.type,\n                        par.find('.title .link').first().attr('href'),\n                        $(this).text(),\n                        parseInt(par.find('.progress .link').first().text()),\n                        par.find('.title .link').first().attr('href')!.split('/')[1],\n                      );\n                    }\n                  });\n                },\n                () => {\n                  return $('.list-table > *').length;\n                },\n              );\n            },\n          );\n        },\n        getElement(malUrl) {\n          return $(`.list-item a[href^=\"${malUrl}\"]`).parent().parent('.list-table-data');\n        },\n        streamingSelector: '.data.title .link',\n        cleanTags() {\n          $('.tags span a').each(function (index) {\n            if (typeof utils.getUrlFromTags($(this).text()) !== 'undefined') {\n              $(this).parent().remove();\n            }\n          });\n        },\n        predictionPos(element, tag) {\n          element.find('.data.progress span, .data.chapter span').first().after(j.html(tag));\n        },\n      };\n    } else if (this.page === 'classic') {\n      book = {\n        bookReady(callback) {\n          listProvider\n            .getCompleteList()\n            .then(list => {\n              callback(list);\n            })\n            .catch(e => {\n              con.error(e);\n              listProvider.flashmError(e);\n            });\n        },\n        getElement(malUrl) {\n          return $(`a[href^=\"${malUrl}\"]`);\n        },\n        streamingSelector: 'span',\n        cleanTags() {\n          $('span[id^=\"tagLinks\"] a').each(function (index) {\n            if (typeof utils.getUrlFromTags($(this).text()) !== 'undefined') {\n              $(this).remove();\n            }\n          });\n        },\n        predictionPos(element, tag) {\n          element\n            .parent()\n            .parent()\n            .find('span[id^=\"epText\"] a span, span[id^=\"chap\"]')\n            .first()\n            .after(j.html(tag));\n        },\n      };\n    } else {\n      con.error('Bookmark type unknown');\n      return;\n    }\n\n    book.bookReady(function (data) {\n      This.bookmarksHDimages();\n      $.each(data, async function (index, el) {\n        const malUrl = el.url.replace('https://myanimelist.net', '');\n        const { type } = el;\n\n        streamUI(type, malUrl, el.tags, parseInt(el.watchedEp), el.cacheKey);\n\n        await el.fn.initProgress();\n\n        if (el.fn.progress && el.fn.progress.isAiring() && el.fn.progress.getCurrentEpisode()) {\n          const element = book.getElement(malUrl);\n          book.predictionPos(\n            element,\n            `<span class=\"mal-sync-ep-pre\" title=\"${el.fn.progress.getAutoText()}\">[<span style=\"border-bottom: 1px dotted ${el.fn.progress.getColor()};\">${el.fn.progress.getCurrentEpisode()}</span>]</span>`,\n          );\n        }\n      });\n      book.cleanTags();\n    });\n\n    async function streamUI(type, malUrl, tags, curEp, cacheKey) {\n      const options = await utils.getEntrySettings(type, cacheKey, tags);\n      if (options && options.u) {\n        const element = book.getElement(malUrl);\n        element.find(book.streamingSelector).after(\n          j.html(`\n          <a class=\"mal-sync-stream\" title=\"${\n            options.u.split('/')[2]\n          }\" target=\"_blank\" style=\"margin: 0 0;\" href=\"${options.u}\">\n            <img src=\"${utils.favicon(options.u.split('/')[2])}\">\n          </a>`),\n        );\n\n        const resumeUrlObj = options.r;\n        const continueUrlObj = options.c;\n\n        con.log('Resume', resumeUrlObj, 'Continue', continueUrlObj);\n        if (continueUrlObj && continueUrlObj.ep === curEp + 1) {\n          element.find('.mal-sync-stream').after(\n            j.html(\n              `<a class=\"nextStream\" title=\"Continue watching\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA;\" href=\"${\n                continueUrlObj.url\n              }\">\n              <img src=\"${api.storage.assetUrl('double-arrow-16px.png')}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        } else if (resumeUrlObj && resumeUrlObj.ep === curEp) {\n          element.find('.mal-sync-stream').after(\n            j.html(\n              `<a class=\"resumeStream\" title=\"Resume watching\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA;\" href=\"${\n                resumeUrlObj.url\n              }\">\n              <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        }\n      }\n    }\n  }\n\n  related() {\n    $(document).ready(function () {\n      $('.related-entries .title a, .related-entries .entries a').each(function () {\n        const el = $(this);\n        const url = utils.absoluteLink(el.attr('href'), 'https://myanimelist.net');\n        if (typeof url !== 'undefined') {\n          api.request\n            .database('entry', { id: Number(utils.urlPart(url, 4)), type: utils.urlPart(url, 3) })\n            .then(dbEntry => {\n              if (dbEntry) {\n                const tag = utils.statusTag(dbEntry.status, dbEntry.type, dbEntry.uid);\n                if (tag) el.append(j.html(tag));\n              }\n            });\n        }\n      });\n    });\n  }\n\n  relatedTag() {\n    const This = this;\n    $(document).ready(function () {\n      $('a.button_edit').each(function () {\n        const el = $(this);\n        const href = $(this).attr('href') || '';\n        const type = utils.urlPart(href, 4);\n        const id = utils.urlPart(href, 5);\n        const state = el.attr('title');\n        if (typeof state !== 'undefined' && state) {\n          const tag = String(utils.statusTag(state, type, id));\n          if (This.page === 'detail') {\n            el.parent().find('> a').first().after(j.html(tag));\n          } else {\n            el.parent().parent().find('> a').after(j.html(tag));\n          }\n          el.remove();\n        }\n      });\n    });\n  }\n\n  friendScore() {\n    if (!api.settings.get('friendScore')) return;\n    $(document).ready(function () {\n      const position = $('h2:contains(Reviews)').prev();\n      if (!position.length) return;\n\n      const overview = $('#horiznav_nav li a').first();\n      if (!overview.is('#horiznav_nav li a.horiznav_active')) return;\n\n      let url = overview.attr('href');\n      if (typeof url === 'undefined' || !url) return;\n      url = utils.absoluteLink(url, 'https://myanimelist.net');\n\n      api.request.xhr('GET', `${url}/stats`).then(response => {\n        const friendHead = $('a[name=members]', $(response.responseText).children());\n        if (!friendHead) return;\n        const friendBody = friendHead.nextAll();\n\n        let bodyHtml = '';\n\n        friendBody.each((i, val) => {\n          bodyHtml += val.outerHTML;\n        });\n        if (friendBody.length > 1 && friendBody.find('a:contains(\"All Members\")').length) {\n          position\n            .before(j.html(friendHead.html()))\n            .before(j.html(bodyHtml))\n            .before(j.html('<br>'));\n\n          $('a:contains(\"All Members\")').after(\n            j.html(\n              ' | <span id=\"mal-sync-removeFriends\" title=\"remove\" style=\"cursor: pointer; color: #1d439b;\">X</span>',\n            ),\n          );\n          $('#mal-sync-removeFriends').click(function () {\n            api.settings.set('friendScore', false);\n            window.location.reload();\n          });\n        }\n      });\n    });\n  }\n}\n","export async function firebaseNotification() {\n  const schedule = await api.storage.get('timestampUpdate/firebaseNotification');\n  if (typeof schedule === 'undefined' || j.$.now() - schedule > 10 * 60 * 1000) {\n    await checkNotifications();\n    api.storage.set('timestampUpdate/firebaseNotification', j.$.now());\n  }\n}\n\nasync function checkNotifications() {\n  con.log('checkNotifications');\n  const url = 'https://kissanimelist.firebaseio.com/Data2/Notification/Current.json';\n  const response = await api.request.xhr('GET', url);\n  const current = parseInt(JSON.parse(response.responseText));\n  if (Number.isNaN(current)) con.error('Could not read current Notification number');\n\n  con.log('Current Notification', current);\n  const last = parseInt(await api.storage.get('firebaseNotification'));\n  const next = last + 1;\n\n  if (typeof last === 'undefined' || Number.isNaN(last)) {\n    api.storage.set('firebaseNotification', current);\n    return;\n  }\n\n  if (current < next) {\n    con.log('No new notifications');\n\n    return;\n  }\n\n  const notificationUrl = `https://kissanimelist.firebaseio.com/Data2/Notification/list/N${next}.json`;\n  const resNotification = await api.request.xhr('GET', notificationUrl);\n\n  if (!resNotification) return;\n\n  const message = JSON.parse(resNotification.responseText);\n  if (!message) {\n    con.info('Notification empty', resNotification.responseText);\n    api.storage.set('firebaseNotification', next).then(function () {\n      checkNotifications();\n    });\n\n    return;\n  }\n\n  j.$(document).ready(function () {\n    const flashm = utils.flashm(\n      `<div style=\"text-align: left;\">${message}</div><button class=\"okChangelog\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px;cursor: pointer;\">Close</button>`,\n      { permanent: true, position: 'top' },\n    );\n    flashm.find('.okChangelog').click(function () {\n      flashm.remove();\n      api.storage.set('firebaseNotification', next).then(function () {\n        checkNotifications();\n      });\n    });\n  });\n}\n","import { MyAnimeListClass } from '../myanimelist/myanimelistClass';\nimport { firebaseNotification } from '../utils/firebaseNotification';\n\nlet lastFocus;\n\nfunction main() {\n  if (api.settings.get('userscriptModeButton')) throw 'Userscript mode';\n  const mal = new MyAnimeListClass(window.location.href);\n  messageMalListener(mal);\n  mal.init();\n  firebaseNotification();\n\n  $(window).blur(function () {\n    lastFocus = Date.now();\n  });\n}\n\nconst css =\n  'font-size: 40px; padding-bottom: 3px; color: white; text-shadow: -1px -1px #2e51a2, 1px -1px #2e51a2, -1px 1px #2e51a2, 1px 1px #2e51a2, 2px 2px #2e51a2, 3px 3px #2e51a2;';\nconsole.log('%cMAL-Sync', css, `Version: ${api.storage.version()}`);\n\napi.settings.init().then(() => {\n  main();\n});\n\nfunction messageMalListener(mal: MyAnimeListClass) {\n  const logger = con.m('TabMalUrl');\n  // @ts-ignore\n  chrome.runtime.onMessage.addListener(function (msg, sender, sendResponse) {\n    if (Date.now() - lastFocus < 3 * 1000) {\n      if (msg.action === 'TabMalUrl') {\n        logger.log('Response', mal.url);\n        sendResponse({\n          url: mal.url,\n          title: mal.getTitle(),\n          image: mal.getImage(),\n        });\n      }\n      return;\n    }\n    logger.log('Focus timeout');\n  });\n}\n"],"names":["batchedSub","batchedComputed","batchDepth","startBatch","endBatch","e","next","flags","error","trigger","err","shouldTrack","trackStack","Dep","constructor","computed","this","version","activeLink","subs","map","key","sc","track","debugInfo","notify","link","prevSub","sub","dep","targetMap","WeakMap","ITERATE_KEY","Symbol","MAP_KEY_ITERATE_KEY","ARRAY_ITERATE_KEY","target","type","newValue","oldValue","oldTarget","depsMap","get","run","forEach","targetIsArray","isArrayIndex","newLength","Number","key2","has","reactiveReadArray","array","raw","toRaw","isShallow","toReactive","shallowReadArray","arr","arrayInstrumentations","__proto__","iterator","concat","args","x","entries","value","every","fn","thisArg","apply","arguments","filter","v","find","findIndex","findLast","findLastIndex","includes","searchProxy","indexOf","join","separator","lastIndexOf","pop","noTracking","push","reduce","reduceRight","shift","some","splice","toReversed","toSorted","comparer","toSpliced","unshift","values","self","method","wrapValue","iter","_next","result","arrayProto","Array","prototype","wrappedRetFn","needsWrap","methodFn","result2","wrappedFn","item","index","call","length","acc","res","isProxy","last","resetTracking","isNonTrackableKeys","builtInSymbols","Set","Object","getOwnPropertyNames","hasOwnProperty","String","obj","BaseReactiveHandler","_isReadonly","_isShallow","receiver","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","getPrototypeOf","Reflect","isRef","readonly","reactive","MutableReactiveHandler","super","set","isOldValueReadonly","isReadonly","hadKey","deleteProperty","ownKeys","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","toShallow","getProto","createReadonlyMethod","createInstrumentationGetter","shallow","instrumentations","rawTarget","rawKey","wrap","toReadonly","size","callback","observed","add","delete","clear","hadItems","targetIsMap","isPair","innerIterator","done","createIterableMethod","createInstrumentations","mutableCollectionHandlers","readonlyCollectionHandlers","createReactiveObject","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","isExtensible","rawType","targetTypeMap","getTargetType","proxy","Proxy","r","ref","rawValue","RefImpl","_rawValue","_value","useDirectValue","makeMap","str","create","split","val","extend","assign","hasOwn","isArray","isMap","toTypeString","isSymbol","isObject","objectToString","toString","toRawType","slice","isIntegerKey","parseInt","cacheStringFunction","cache","camelizeRE","hyphenateRE","replace","_","c","toUpperCase","capitalize","toLowerCase","charAt","hasChanged","is","undefined","nextTickSupported","process","nextTick","symbolsSupported","reflectSupported","_setImmediate","setImmediate","setTimeout","getOwnPropertySymbols","keys","init","_events","_conf","configure","conf","delimiter","maxListeners","_maxListeners","wildcard","newListener","_newListener","removeListener","_removeListener","verboseMemoryLeak","ignoreErrors","listenerTree","logPossibleMemoryLeak","count","eventName","errorMsg","emitWarning","Error","name","emitter","console","trace","toArray","a","b","n","toObject","len","valuesCount","i","TargetObserver","options","on","off","_emitter","_target","_listeners","_listenersCount","addEventListener","removeEventListener","addListener","TypeError","_on","_off","_observers","resolveOptions","schema","reducers","allowUnknown","computedOptions","option","reducer","reject","reason","constructorReducer","makeTypeReducer","types","message","firstType","secondType","kind","subscribe","event","localEvent","observer","listeners","handler","eventObj","data","original","emit","_onNewListener","_event","_onRemoveListener","hasListeners","unsubscribe","events","clearRefs","findTargetIndex","functionReducer","objectFunctionReducer","makeCancelablePromise","Promise","executor","isCancelable","callbacks","subscriptionClosed","timer","promise","resolve","onCancel","cleanup","clearTimeout","timeout","overload","isFinite","cancel","_resolve","_reject","cb","code","observers","searchListenerTree","handlers","tree","typeLength","ns","l","j","dl","branch","xTree","xxTree","isolatedBranch","endReached","branches","currentType","nextType","growListenerTree","listener","prepend","warned","collectTreeEvents","root","asArray","branchName","path","isArrayPath","recursivelyGarbageCollect","flag","Listener","setupListener","promisify","async","objectify","_listener","_origin","context","then","_async","EventEmitter","EventEmitter2","listenTo","listen","isSingleReducer","stopListeningTo","matched","setMaxListeners","getMaxListeners","once","_once","prependOnceListener","_many","many","ttl","prependMany","_all","containsSymbol","al","emitAsync","promises","all","prependListener","onAny","_onAny","prependAny","temp","returnValue","leafs","iLeaf","leaf","position","offAny","fns","removeAllListeners","allListeners","eventNames","nsAsArray","listenerCount","listenersAny","waitFor","handleError","defineProperties","defaultMaxListeners","isNaN","enumerable","errorListener","eventListener","writable","configurable","debug","MAX_LENGTH","MAX_SAFE_INTEGER","safeRe","re","safeSrc","src","t","parseOptions","compareIdentifiers","SemVer","loose","includePrerelease","m","trim","match","LOOSE","FULL","major","minor","patch","prerelease","id","test","num","build","format","compare","other","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","startsWith","RegExp","PRERELEASELOOSE","PRERELEASE","base","module","exports","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","RELEASE_TYPES","SEMVER_SPEC_VERSION","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","env","NODE_DEBUG","numeric","anum","bnum","rcompareIdentifiers","looseOption","freeze","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","safe","token","max","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","BUILD","FULLPLAIN","MAINVERSIONLOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","COERCE","COERCEFULL","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","webextension","getStorage","chrome","runtime","lastError","results","remove","storage","local","sync","addStyle","css","style","document","createElement","textContent","head","body","documentElement","appendChild","log","getManifest","lang","selector","api","settings","i18n","argIndex","getMessage","langDirection","getUILanguage","con","assetUrl","filename","getURL","injectCssResource","alert","injectjsResource","s","onload","addProxyScriptToTag","tag","updateDom","text","storageOnChanged","onChanged","utils","syncRegex","requestApi","xhr","url","sendMessage","status","responseText","response","notification","database","param","settingsObj","autoTrackingModeanime","readerTracking","askBefore","autoTrackingModemanga","enablePages","forceEn","forceEnglishTitles","rpc","presenceLargeImage","presenceShowButtons","presenceShowMalsync","userscriptModeButton","syncMode","syncModeSimkl","localSync","delay","videoDuration","malTags","malContinue","malResume","usedPage","epPredictions","mangaCompletionPercentage","theme","themeSidebars","themeColor","themeOpacity","themeImage","minimalWindow","posLeft","miniMALonMal","floatButtonStealth","minimizeBigPopup","floatButtonCorrection","floatButtonHide","autoCloseMinimal","outWay","miniMalWidth","miniMalHeight","malThumbnail","friendScore","loadPTWForProgress","quicklinks","quicklinksPosition","autofull","autoresume","autoNextEp","highlightAllEp","checkForFiller","crashReport","introSkip","introSkipFwd","introSkipBwd","nextEpShort","correctionShort","syncShort","progressInterval","progressIntervalDefaultAnime","progressIntervalDefaultManga","progressNotificationsAnime","progressNotificationsManga","notificationsSticky","bookMarksList","bookMarksListManga","customDomains","anilistUpdateUi","anilistToken","anilistOptions","displayAdultContent","scoreFormat","kitsuToken","kitsuOptions","titleLanguagePreference","sfwFilter","ratingSystem","simklToken","malToken","malRefresh","shikiToken","shikiOptions","locale","debounceArray","chibiList","isInit","tempSettings","store","chibiRepo","ChibiListRepository","getInstance","getList","rateDebounce","changes","namespace","storageChange","info","JSON","stringify","rateLimit","$","flashm","permanent","setDebounce","getAsync","getStaticChibi","request","useCache","repos","collections","pages","storageKey","chibiPages","errors","collectionsData","retrieveCollection","catch","col","minimumVersion","newer","hash","timestamp","parse","getPage","page","getPermissions","urls","domain","auto","chibi","flat","getPermissionsElements","Function","bind","color","blocks","fontColor","charCodeAt","colour","substr","stringToColour","name2","color2","moduleText","sum","el","moduleStyle","urlPart","part","urlParts","urlStrip","urlParam","exec","decodeURI","getBaseText","element","children","each","favicon","watching","planTo","episode","rateLimitExclude","getselect","absoluteLink","parseHtml","DOMParser","parseFromString","urlChangeDetect","currentPage","window","location","href","setInterval","fullUrlChangeDetect","strip","intervalId","changeDetect","func","immediate","waitUntilTrue","condition","interval","counter","state","clearInterval","newIntervalTime","Math","min","getAsyncWaitUntilTrue","rejectThis","reset","asyncWaitUntilTrue","doubleId","random","checkDoubleExecution","after","html","getUrlFromTags","tags","atobURL","encoded","atob","setUrlInTags","addition","btoa","setResumeWaching","ep","getResumeWaching","setContinueWaching","getContinueWaching","setEntrySettings","tempOptions","Boolean","getEntrySettings","u","p","tagString","continueUrlObj","resumeUrlObj","handleMalImages","getTooltip","direction","rNumber","floor","timeDiffToText","delta","diffYears","diffDays","diffHours","diffMinutes","canHideTabs","browser","tabs","hide","statusTag","anime","class","title","manga","tempInfo","getStatusText","notifications","iconUrl","messageObj","history","Date","now","timeCache","dataFunction","getTime","extraClass","initflashm","colorF","flashdiv","messClass","tempClass","removeClass","fadeOut","duration","queue","complete","flashmEl","mess","hoverInfo","addClass","appendTo","minimized","slideDown","slideUp","flashConfirm","yesCall","cancelCall","yesNo","yesText","noText","flasmessage","click","evt","parentsUntil","lazyloaded","lazyimages","lazyload","doc","scrollElement","loadImage","hasClass","getAttribute","img","Image","parent","replaceChild","query","processScroll","elementInViewport","scroll","horizontalOffset","rect","getBoundingClientRect","top","left","innerHeight","clientHeight","wait","ms","pageUrl","returnYYYYMMDD","numFromToday","d","setDate","getDate","month","getMonth","padStart","day","getFullYear","htmlDecode","isFirefox","waitForPageToBeVisible","visibilityState","awaitUi","clearCache","cacheObj","list","deleted","sortAlphabetically","isDomainMatching","urlObj","URL","host","endsWith","upperCaseFirstLetter","string","jQuery","htmlContent","sanitize","ALLOW_UNKNOWN_PROTOCOLS","ADD_ATTR","getCurrentVersion","greaterCurrentVersion","setPrototypeOf","isFrozen","getOwnPropertyDescriptor","seal","construct","fun","thisValue","Func","arrayForEach","unapply","arrayLastIndexOf","arrayPop","arrayPush","arraySplice","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","_len2","_key2","lastIndex","_len","_key","addToSet","transformCaseFunc","lcElement","cleanArray","clone","object","newObject","property","lookupGetter","prop","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","getGlobal","purify","createDOMPurify","DOMPurify","removed","nodeType","Element","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","trustedTypes","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","content","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","afterSanitizeAttributes","afterSanitizeElements","afterSanitizeShadowDOM","beforeSanitizeAttributes","beforeSanitizeElements","beforeSanitizeShadowDOM","uponSanitizeAttribute","uponSanitizeElement","uponSanitizeShadowNode","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","table","tbody","TRUSTED_TYPES_POLICY","createHTML","createScriptURL","purifyHostElement","createPolicy","suffix","ATTR_NAME","hasAttribute","policyName","scriptUrl","warn","_createTrustedTypesPolicy","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","node","removeChild","_removeAttribute","attribute","getAttributeNode","from","removeAttribute","setAttribute","_initDocument","dirty","leadingWhitespace","matches","dirtyPayload","createDocument","innerHTML","insertBefore","createTextNode","childNodes","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","nodeName","attributes","namespaceURI","hasChildNodes","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","tagName","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","childClone","__removalCount","parentTagName","_checkValidNamespace","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","forceKeepAttr","attr","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","importedNode","returnNode","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","entryPoint","hookFunction","removeHook","removeHooks","removeAllHooks","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","o","defineProperty","g","globalThis","toStringTag","score","localStorage","getItem","checkLocalStorageIsAvailable","setItem","removeItem","localStore","refetchTtl","containsValue","valueValid","ttlValid","refetchTtlValid","hasValue","hasValueAndIsNotEmpty","fullState","isValid","refetch","getValue","setValue","save","clearValue","predictionXhrGET","apiCacheKey","dateUnitToMs","years","months","weeks","days","hours","minutes","seconds","milliseconds","IntlDuration","isFallback","Intl","DurationFormat","setLocale","setDuration","setDurationFormatted","durationToMs","setRelativeTime","relativeTime","convertFrom","setTimestamp","relativeTo","relativeToDuration","time","totalDays","shortTime","input","getRelativeText","output","timeToString","newOptions","getDuration","getLocale","IntlDateTime","date","number","isValidDate","isNow","threshold","relativeToTs","thresholdTs","abs","checkForNow","isFuture","getDateTimeText","dateStyle","DateTimeFormat","getRelativeNowText","relative","getRelativeNowFriendlyText","timeString","units","mapKeys","keyPrev","valuePrev","keyCurr","valueCurr","Progress","cacheKey","releaseItem","logger","initReleaseProgress","liveData","mode","uid","force","finished","progressValue","config","mainId","fallback","fallbackPrediction","mainTemp","predicition","lastEp","predTemp","predTime","total","probability","predSoon","getProgress","cProgress","nProgress","watchedEp","noti","single","sticky","image","getImage","getStreamingUrl","getUrl","notificationCheck","progressMode","diff","progressIsOld","getProgressCurrentEpisode","isProgressFinished","getProgressPrediction","getProgressLastTimestamp","live","getCurrentEpisode","isFinished","isAiring","getPredictionTimestamp","NaN","getPrediction","getPredictionText","dt","getLastTimestamp","getLast","getLastText","getAuto","preT","getAutoText","getColor","getBars","curEp","totalEp","predEp","totalWidth","epWidth","predWidth","ceil","scriptId","globalEmit","params","onMessage","sender","sendResponse","SafeError","UrlNotSupportedError","json","errorMessage","authenticationUrl","point10","ui","getOptions","label","valueToOptionValue","round","optionValueToValue","optionValue","SingleAbstract","syncMethod","askCompleted","rewatchingSupport","datesSupport","ids","mal","ani","kitsu","slug","simkl","progress","updateProgress","_onList","_authenticated","handleUrl","getType","supportsRewatching","supportsDates","getApiCacheKey","getKey","getRulesCacheKey","setStatus","_setStatus","getStatus","isOnList","_getStatus","NoState","setStartDate","startDate","_setStartDate","getStartDate","_getStartDate","setFinishDate","finishDate","_setFinishDate","getFinishDate","_getFinishDate","setRewatchCount","rewatchCount","_setRewatchCount","getRewatchCount","_getRewatchCount","getScoreMode","setScore","_setScore","getScore","_getScore","setAbsoluteScore","_setAbsoluteScore","getAbsoluteScore","_getAbsoluteScore","setEpisode","getTotalEpisodes","_setEpisode","getEpisode","_getEpisode","setVolume","volume","_setVolume","getVolume","_getVolume","setStreamingUrl","streamingUrl","cleanTags","initProgress","getCacheKey","getTitle","getProgressMode","progressXhr","getProgressFormated","op","languageNames","DisplayNames","of","dropped","prediction","getProgressOptions","getProgressCompleted","setProgressMode","_getTags","getProgressKey","getPageRelations","shortName","icon","fillRelations","update","_update","persistanceState","getStateEl","registerEvent","emitUpdate","_setTags","fixDates","_sync","undoState","action","getPageId","meta","malId","getMalId","_delete","globalUpdateEvent","updateEvent","isDirty","setStateEl","undo","onList","_getTitle","eps","_getTotalEpisodes","getTotalVolumes","_getTotalVolumes","isAuthenticated","getDisplayUrl","_getDisplayUrl","getMalUrl","getIds","_getImage","getRating","_getRating","rating","setResumeWatching","getResumeWatching","setContinueWatching","getContinueWatching","increaseRewatchCount","absoluteScore","getStateDiff","persistance","getSyncMethod","setSyncMethod","today","Watching","Completed","lifeCycleHook","Rewatching","finishRewatchingMessage","finishWatchingMessage","checkSync","curEpisode","curStatus","curVolume","startRewatchingMessage","startWatchingMessage","currentScore","getScoreCheckboxValue","checkHtml","getScoreCheckbox","handleScoreCheckbox","getDisplayScoreCheckbox","curScore","labelEl","getStatusCheckbox","statusEs","Onhold","Dropped","PlanToWatch","handleStatusCheckbox","getStatusCheckboxValue","allowed","forceMal","getLastError","getLastErrorMessage","flashmError","apiCall","fields","headers","Authorization","dataObj","formBody","encodedKey","encodeURIComponent","encodedValue","checkIfBanned","rToken","refresh_token","access_token","refreshToken","animeStatus","mangaStatus","getRoundedDate","year","substring","statusTranslate","displayUrl","pending","curSt","animeInfo","my_list_status","getRewatching","setRewatching","num_times_reread","num_times_rewatched","start_date","finish_date","num_chapters_read","num_watched_episodes","num_volumes_read","is_rereading","is_rewatching","num_chapters","num_episodes","num_volumes","main_picture","medium","mean","num_episodes_watched","sentData","exists","da","variables","Accept","Media","malToAnilist","ListAbstract","listType","sort","loading","firstLoaded","seperateRewatching","modes","frontend","sortAiring","cached","username","offset","templist","setTemplist","getTemplist","setSort","isDone","isLoading","isFirstLoaded","getCompleteList","getNext","sortAiringList","getCache","getNextPage","retList","getPart","getCached","cachelist","initFrontendMode","updateListener","destroy","getUsername","getUserObject","user","getSortingOptions","simple","_getSortingOptions","asc","streamurl","continueUrlTemp","continueUrl","listP","sortUnread","normalItems","preItems","watchedItems","sortItems","valA","valB","reverse","tempA","tempB","UserList","getOrder","pre","prepareData","newData","anime_id","anime_title","anime_url","anime_num_episodes","anime_image_path","airingState","anime_airing_status","manga_id","manga_title","manga_url","num_read_chapters","manga_num_chapters","manga_image_path","limit","picture","deauth","order","sorting","All","useAltTitle","paging","alternative_titles","en","list_status","imageLarge","large","readVol","totalVol","quicklinkPages","titleSearch","resTitle","found","space","searchSyntax","tempQuicklinks","combinedLinks","comb","optionToCombined","custom","quicklinkChibi","search","getQuicklinks","activeLinks","searchterm","combined","Sites","getMalToKissApi","databaseLinks","fillFromApi","links","quickGroup","db","searchTerm","group","simplifyObject","MyAnimeListClass","urlTemp","replaceState","urlpart","thumbnails","streamingUI","malToKiss","related","relatedTag","ready","bookmarks","height","width","surHeight","surWidth","loaded","load","overrideLazyload","querySelectorAll","regexDimensions","classList","closest","bookmarksHDimages","setEpPrediction","prev","before","first","tempHtml","stream","removeOptionKey","removeFromOptions","reload","malObj","pageRelation","streamUrl","append","This","listProvider","dataProvider","book","bookReady","parseJSON","par","streamUI","getElement","malUrl","streamingSelector","predictionPos","dbEntry","overview","friendHead","friendBody","nextAll","bodyHtml","firebaseNotification","schedule","checkNotifications","current","notificationUrl","resNotification","lastFocus","msg","messageMalListener","blur","main"],"sourceRoot":""}