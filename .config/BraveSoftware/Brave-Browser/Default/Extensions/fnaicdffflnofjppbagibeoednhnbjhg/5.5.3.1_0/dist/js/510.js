!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="e839638b-764a-4202-9689-2d68ecba5cf2",t._sentryDebugIdIdentifier="sentry-dbid-e839638b-764a-4202-9689-2d68ecba5cf2")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.4.5"},(globalThis.webpackChunkfloccus=globalThis.webpackChunkfloccus||[]).push([[510],{953:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(19276),s=n(33457),i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-h6"},[t._v("\n    "+t._s(t.t("LabelStrategy"))+"\n  ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n    "+t._s(t.t("DescriptionStrategy"))+"\n  ")]),t._v(" "),e(s.A,{attrs:{value:t.value},on:{change:function(e){return t.$emit("input",e)}}},[e(r.A,{attrs:{label:t.t("LabelStrategydefault"),value:"default"}}),t._v(" "),e(r.A,{attrs:{label:t.t("LabelStrategyslave"),value:"slave"}}),t._v(" "),e(r.A,{attrs:{label:t.t("LabelStrategyoverwrite"),value:"overwrite"}})],1)],1)};i._withStripped=!0;const a={name:"OptionSyncStrategy",props:{value:{type:String,default:"default"}}},o=(0,n(14486).A)(a,i,[],!1,null,"6dd7b4f4",null).exports},1356:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(71354),s=n.n(r),i=n(76314),a=n.n(i)()(s());a.push([t.id,"\n.options[data-v-49374c54] {\n    max-width: 600px;\n    margin: 0 auto;\n}\n","",{version:3,sources:["webpack://./src/ui/views/NewAccount.vue"],names:[],mappings:";AAonBA;IACA,gBAAA;IACA,cAAA;AACA",sourcesContent:['<template>\n  <v-container>\n    <v-card\n      class="options mt-3">\n      <v-stepper v-model="currentStep">\n        <v-stepper-header>\n          <v-stepper-step\n            :complete="currentStep > 0"\n            step="0" />\n          <v-divider />\n          <v-stepper-step\n            :complete="currentStep > 1"\n            step="1" />\n          <v-divider />\n          <v-stepper-step\n            :complete="currentStep > 2"\n            step="2" />\n          <v-divider />\n          <v-stepper-step\n            step="3"\n            :complete="currentStep > 3" />\n          <v-divider />\n          <v-stepper-step\n            step="4"\n            :complete="currentStep > 4" />\n        </v-stepper-header>\n\n        <v-stepper-items>\n          <v-stepper-content step="0">\n            <div class="headline">\n              {{ t(\'LabelChooseadapter\') }}\n            </div>\n            <v-form>\n              <v-radio-group v-model="adapter">\n                <div\n                  v-for="a in adapters"\n                  :key="a.type">\n                  <v-radio\n                    :value="a.type">\n                    <template #label>\n                      <div class="heading">\n                        {{ a.label }}\n                      </div>\n                    </template>\n                  </v-radio>\n                  <div class="caption pl-8 mb-5">\n                    {{ a.description }}\n                  </div>\n                </div>\n              </v-radio-group>\n            </v-form>\n            <div class="d-flex flex-row-reverse">\n              <v-btn\n                class="primary"\n                @click="currentStep++">\n                {{ t(\'LabelContinue\') }}\n              </v-btn>\n              <v-btn\n                :to="{ name: \'IMPORTEXPORT\' }"\n                class="mr-2">\n                <v-icon>mdi-export</v-icon>\n                <template v-if="isBrowser && true">\n                  {{ t(\'LabelImportExport\') }}\n                </template>\n              </v-btn>\n            </div>\n          </v-stepper-content>\n\n          <v-stepper-content step="1">\n            <div class="headline">\n              {{ t(\'LabelAccountlabel\') }}\n            </div>\n            <v-form>\n              <v-text-field\n                v-model="label"\n                append-icon="mdi-label"\n                class="mt-2 mb-4"\n                :label="t(\'LabelAccountlabel\')"\n                :hint="t(\'DescriptionAccountlabel\')"\n                :persistent-hint="true"\n                @keydown.enter.prevent="currentStep++" />\n            </v-form>\n            <div class="d-flex flex-row justify-space-between">\n              <v-btn @click="currentStep--">\n                {{ t(\'LabelBack\') }}\n              </v-btn>\n              <v-btn\n                class="primary"\n                @click="currentStep++">\n                {{ t(\'LabelContinue\') }}\n              </v-btn>\n            </div>\n          </v-stepper-content>\n\n          <v-stepper-content step="2">\n            <template v-if="adapter === \'nextcloud-bookmarks\'">\n              <div class="headline">\n                {{ t(\'LabelServersetup\') }}\n              </div>\n              <v-text-field\n                v-model="server"\n                :rules="[validateUrl]"\n                :label="t(\'LabelNextcloudurl\')"\n                :loading="isServerTestRunning || isLoginFlowRunning"\n                :error-messages="serverisNotHttps || serverTestError || loginFlowError"\n                @keydown.enter="testNextcloudServer">\n                <template\n                  slot="append-outer">\n                  <v-icon\n                    v-if="serverTestSuccessful"\n                    color="green"\n                    title="Server connection successful">\n                    mdi-check\n                  </v-icon>\n                </template>\n              </v-text-field>\n              <div class="d-flex flex-row justify-space-between">\n                <v-btn @click="currentStep--">\n                  {{ t(\'LabelBack\') }}\n                </v-btn>\n                <v-btn\n                  v-if="!serverTestSuccessful"\n                  class="primary"\n                  @click="testNextcloudServer">\n                  {{ t(\'LabelConnect\') }}\n                </v-btn>\n                <template v-if="serverTestSuccessful">\n                  <v-btn\n                    v-if="!isLoginFlowRunning"\n                    class="primary"\n                    @click="onFlowStart">\n                    {{ t(\'LabelLoginFlowStart\') }}\n                  </v-btn>\n                  <v-btn\n                    v-if="isLoginFlowRunning"\n                    @click="onFlowStop">\n                    {{ t(\'LabelLoginFlowStop\') }}\n                  </v-btn>\n                </template>\n              </div>\n            </template>\n\n            <template v-else-if="adapter === \'linkwarden\'">\n              <div class="headline">\n                {{ t(\'LabelServersetup\') }}\n              </div>\n              <v-text-field\n                v-model="server"\n                :rules="[validateUrl]"\n                :label="t(\'LabelLinkwardenurl\')"\n                :loading="isServerTestRunning"\n                :error-messages="serverTestError || serverisNotHttps" />\n              <v-text-field\n                v-model="username"\n                :label="t(\'LabelUsername\')" />\n              <v-text-field\n                v-model="password"\n                :label="t(\'LabelAccesstoken\')"\n                :append-icon="showPassword ? \'mdi-eye\' : \'mdi-eye-off\'"\n                :type="showPassword ? \'text\' : \'password\'"\n                @click:append="showPassword = !showPassword" />\n\n              <div class="d-flex flex-row justify-space-between">\n                <v-btn @click="currentStep--">\n                  {{ t(\'LabelBack\') }}\n                </v-btn>\n                <v-btn\n                  class="primary"\n                  @click="testLinkwardenServer">\n                  {{ t(\'LabelContinue\') }}\n                </v-btn>\n              </div>\n            </template>\n\n            <template v-else-if="adapter === \'webdav\'">\n              <div class="headline">\n                {{ t(\'LabelServersetup\') }}\n              </div>\n              <v-text-field\n                v-model="server"\n                :rules="[validateUrl]"\n                :label="t(\'LabelWebdavurl\')"\n                :loading="isServerTestRunning"\n                :error-messages="serverTestError || serverisNotHttps" />\n              <v-text-field\n                v-model="username"\n                :label="t(\'LabelUsername\')" />\n              <v-text-field\n                v-model="password"\n                :label="t(\'LabelPassword\')"\n                :append-icon="showPassword ? \'mdi-eye\' : \'mdi-eye-off\'"\n                :type="showPassword ? \'text\' : \'password\'"\n                @click:append="showPassword = !showPassword" />\n              <v-text-field\n                v-model="passphrase"\n                class="mt-2"\n                :label="t(\'LabelPassphrase\')"\n                :hint="t(\'DescriptionPassphrase\')"\n                :persistent-hint="true"\n                :append-icon="showPassphrase ? \'mdi-eye\' : \'mdi-eye-off\'"\n                :type="showPassphrase ? \'text\' : \'password\'"\n                @click:append="showPassphrase = !showPassphrase" />\n              <div class="d-flex flex-row justify-space-between">\n                <v-btn @click="currentStep--">\n                  {{ t(\'LabelBack\') }}\n                </v-btn>\n                <v-btn\n                  class="primary"\n                  @click="testWebdavServer">\n                  {{ t(\'LabelContinue\') }}\n                </v-btn>\n              </div>\n            </template>\n\n            <template v-else-if="adapter === \'git\'">\n              <div class="headline">\n                {{ t(\'LabelServersetup\') }}\n              </div>\n              <v-text-field\n                v-model="server"\n                :rules="[validateUrl]"\n                :label="t(\'LabelGiturl\')" />\n              <v-text-field\n                v-model="username"\n                :label="t(\'LabelUsername\')" />\n              <v-text-field\n                v-model="password"\n                :label="t(\'LabelPassword\')"\n                :append-icon="showPassword ? \'mdi-eye\' : \'mdi-eye-off\'"\n                :type="showPassword ? \'text\' : \'password\'"\n                @click:append="showPassword = !showPassword" />\n              <div class="d-flex flex-row justify-space-between">\n                <v-btn @click="currentStep--">\n                  {{ t(\'LabelBack\') }}\n                </v-btn>\n                <v-btn\n                  class="primary"\n                  @click="currentStep++">\n                  {{ t(\'LabelContinue\') }}\n                </v-btn>\n              </div>\n            </template>\n\n            <template v-else-if="adapter === \'google-drive\'">\n              <div class="headline">\n                {{ t(\'LabelGoogledrivesetup\') }}\n              </div>\n              <v-btn\n                color="primary"\n                @click="loginGoogleDrive">\n                {{ t(\'LabelLogingoogle\') }}\n              </v-btn>\n              <p class="mt-1">\n                {{ t(\'DescriptionLogingoogle\') }}\n              </p>\n              <v-btn @click="currentStep--">\n                {{ t(\'LabelBack\') }}\n              </v-btn>\n            </template>\n          </v-stepper-content>\n\n          <v-stepper-content step="3">\n            <div class="headline">\n              {{ t(\'LabelSyncfoldersetup\') }}\n            </div>\n\n            <template v-if="adapter === \'nextcloud-bookmarks\'">\n              <div class="text-h6">\n                {{ t(\'LabelServerfolder\') }}\n              </div>\n              <div class="caption">\n                {{ t(\'DescriptionServerfolder\') }}\n              </div>\n              <v-text-field\n                v-model="serverRoot"\n                :placeholder="\'/\'"\n                :rules="[validateServerRoot]"\n                :label="t(\'LabelServerfolder\')" />\n            </template>\n\n            <template v-if="adapter === \'linkwarden\'">\n              <div class="text-h6">\n                {{ t(\'LabelServerfolder\') }}\n              </div>\n              <div class="caption">\n                {{ t(\'DescriptionServerfolderlinkwarden\') }}\n              </div>\n              <v-text-field\n                v-model="serverFolder"\n                :label="t(\'LabelServerfolder\')" />\n            </template>\n\n            <template v-if="adapter === \'webdav\'">\n              <div class="text-h6">\n                {{ t(\'LabelBookmarksfile\') }}\n              </div>\n              <v-text-field\n                v-model="bookmark_file"\n                class="mb-2"\n                append-icon="mdi-file-document"\n                :rules="[validateBookmarksFile]"\n                :label="t(\'LabelBookmarksfile\')"\n                :hint="t(\'DescriptionBookmarksfile\')"\n                :persistent-hint="true" />\n              <OptionFileType\n                v-model="bookmark_file_type" />\n            </template>\n\n            <template v-if="adapter === \'git\'">\n              <div class="text-h6">\n                {{ t(\'LabelBookmarksfile\') }}\n              </div>\n              <v-text-field\n                v-model="bookmark_file"\n                class="mb-2"\n                append-icon="mdi-file-document"\n                :rules="[validateBookmarksFile]"\n                :label="t(\'LabelBookmarksfile\')"\n                :hint="t(\'DescriptionBookmarksfilegit\')"\n                :persistent-hint="true" />\n              <OptionFileType\n                v-model="bookmark_file_type" />\n              <v-text-field\n                v-model="branch"\n                class="mb-2"\n                :label="t(\'LabelGitbranch\')" />\n            </template>\n\n            <template v-if="adapter === \'google-drive\'">\n              <div class="text-h6">\n                {{ t(\'LabelBookmarksfile\') }}\n              </div>\n              <v-text-field\n                v-model="bookmark_file"\n                append-icon="mdi-file-document"\n                :rules="[validateBookmarksFileGoogle]"\n                :label="t(\'LabelBookmarksfile\')"\n                :hint="t(\'DescriptionBookmarksfilegoogle\')"\n                :persistent-hint="true" />\n              <v-text-field\n                v-model="passphrase"\n                :append-icon="showPassphrase ? \'mdi-eye\' : \'mdi-eye-off\'"\n                :type="showPassphrase ? \'text\' : \'password\'"\n                class="mt-2"\n                :label="t(\'LabelPassphrase\')"\n                :hint="t(\'DescriptionPassphrase\')"\n                :persistent-hint="true"\n                @click:append="showPassphrase = !showPassphrase" />\n            </template>\n\n            <OptionSyncFolder\n              v-if="isBrowser"\n              v-model="localRoot" />\n\n            <div class="d-flex flex-row justify-space-between">\n              <v-btn @click="currentStep--">\n                {{ t(\'LabelBack\') }}\n              </v-btn>\n              <v-btn\n                :disabled="isBrowser? !localRoot : false"\n                color="primary"\n                @click="currentStep++">\n                {{ t(\'LabelContinue\') }}\n              </v-btn>\n            </div>\n          </v-stepper-content>\n\n          <v-stepper-content step="4">\n            <div class="headline">\n              {{ t(\'LabelSyncbehaviorsetup\') }}\n            </div>\n            <v-switch\n              v-model="enabled"\n              :aria-label="t(\'LabelAutosync\')"\n              :label="t(\'LabelAutosync\')"\n              dense\n              class="mt-0 pt-0" />\n            <OptionSyncInterval\n              v-if="enabled"\n              v-model="syncInterval" />\n            <OptionSyncStrategy\n              v-model="strategy" />\n            <OptionNestedSync\n              v-if="isBrowser"\n              v-model="nestedSync" />\n            <v-switch\n              v-if="adapter === \'nextcloud-bookmarks\'"\n              v-model="clickCountEnabled"\n              :aria-label="t(\'LabelClickcount\')"\n              :label="t(\'LabelClickcount\')"\n              :hint="t(\'DescriptionClickcount\')"\n              :persistent-hint="true"\n              dense\n              class="mt-0 pt-0 mb-4" />\n\n            <div class="d-flex flex-row justify-space-between">\n              <v-btn @click="currentStep--">\n                {{ t(\'LabelBack\') }}\n              </v-btn>\n              <v-btn\n                color="primary"\n                @click="onCreate()">\n                {{ t(\'LabelContinue\') }}\n              </v-btn>\n            </div>\n          </v-stepper-content>\n          <v-stepper-content step="5">\n            <div class="headline">\n              {{ t(\'LabelAccountcreated\') }} <v-icon>mdi-check</v-icon>\n            </div>\n            <div v-if="isBrowser">\n              {{ t(\'DescriptionAccountcreated\') }}\n            </div>\n          </v-stepper-content>\n        </v-stepper-items>\n      </v-stepper>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport { actions } from \'../store/definitions\'\nimport OptionSyncFolder from \'../components/OptionSyncFolder\'\nimport OptionSyncInterval from \'../components/OptionSyncInterval\'\nimport OptionSyncStrategy from \'../components/OptionSyncStrategy\'\nimport OptionNestedSync from \'../components/OptionNestedSync\'\nimport OptionFileType from \'../components/OptionFileType\'\n\nexport default {\n  name: \'NewAccount\',\n  components: { OptionFileType, OptionNestedSync, OptionSyncStrategy, OptionSyncInterval, OptionSyncFolder },\n  data() {\n    return {\n      currentStep: 0,\n      isServerTestRunning: false,\n      serverTestError: \'\',\n      serverTestSuccessful: false,\n      loginFlowError: \'\',\n      server: \'https://\',\n      branch: \'main\',\n      username: \'\',\n      password: \'\',\n      passphrase: \'\',\n      refreshToken: \'\',\n      bookmark_file: \'bookmarks.xbel\',\n      bookmark_file_type: \'xbel\',\n      serverFolder: \'Floccus\',\n      serverRoot: \'\',\n      localRoot: null,\n      syncInterval: 15,\n      strategy: \'default\',\n      enabled: true,\n      nestedSync: true,\n      showPassword: false,\n      showPassphrase: false,\n      clickCountEnabled: false,\n      label: \'\',\n      adapter: \'nextcloud-bookmarks\',\n      adapters: [\n        {\n          type: \'nextcloud-bookmarks\',\n          label: this.t(\'LabelAdapternextcloudfolders\'),\n          description: this.t(\'DescriptionAdapternextcloudfolders\')\n        },\n        {\n          type: \'linkwarden\',\n          label: this.t(\'LabelAdapterlinkwarden\'),\n          description: this.t(\'DescriptionAdapterlinkwarden\')\n        },\n        {\n          type: \'webdav\',\n          label: this.t(\'LabelAdapterwebdav\'),\n          description: this.t(\'DescriptionAdapterwebdav\')\n        },\n        {\n          type: \'git\',\n          label: this.t(\'LabelAdaptergit\'),\n          description: this.t(\'DescriptionAdaptergit\')\n        },\n        {\n          type: \'google-drive\',\n          label: this.t(\'LabelAdaptergoogledrive\'),\n          description: this.t(\'DescriptionAdaptergoogledrive\')\n        }\n      ],\n    }\n  },\n  computed: {\n    isLoginFlowRunning() {\n      return this.$store.state.loginFlow.isRunning\n    },\n    serverisNotHttps() {\n      return !this.server.startsWith(\'https\') ? this.t(\'DescriptionNonhttps\') : \'\'\n    }\n  },\n  watch: {\n    clickCountEnabled() {\n      if (this.clickCountEnabled) {\n        this.requestHistoryPermissions()\n      }\n    }\n  },\n  backButton() {\n    this.$router.push({ name: \'HOME\' })\n  },\n  methods: {\n    async onCreate() {\n      const accountId = await this.$store.dispatch(\'CREATE_ACCOUNT\', {\n        type: this.adapter,\n        url: this.server,\n        username: this.username,\n        password: this.password,\n        enabled: this.enabled,\n        label: this.label,\n        ...(this.adapter === \'nextcloud-bookmarks\' && {serverRoot: this.serverRoot, clickCountEnabled: this.clickCountEnabled}),\n        ...(this.adapter === \'linkwarden\' && {serverFolder: this.serverFolder}),\n        ...(this.adapter === \'git\' && {branch: this.branch}),\n        ...((this.adapter === \'webdav\' || this.adapter === \'google-drive\' || this.adapter === \'git\') && {bookmark_file: this.bookmark_file}),\n        ...((this.adapter === \'webdav\' || this.adapter === \'google-drive\' || this.adapter === \'git\') && {bookmark_file_type: this.bookmark_file_type}),\n        ...(this.adapter === \'google-drive\' && {refreshToken: this.refreshToken}),\n        ...(this.passphrase && {passphrase: this.passphrase}),\n        ...(this.adapter === \'google-drive\' && this.passphrase && {password: this.passphrase}),\n        ...(this.isBrowser && {localRoot: this.localRoot}),\n        syncInterval: this.syncInterval,\n        strategy: this.strategy,\n        ...(this.isBrowser && {nestedSync: this.nestedSync}),\n      })\n      this.currentStep++\n      if (!this.isBrowser) {\n        setTimeout(() => {\n          this.$router.push({ name: \'TREE\', params: { accountId } })\n          this.$store.dispatch(actions.TRIGGER_SYNC, accountId)\n        }, 2000)\n      }\n    },\n    async testNextcloudServer() {\n      this.isServerTestRunning = true\n      this.serverTestError = \'\'\n      try {\n        await this.$store.dispatch(actions.TEST_NEXTCLOUD_SERVER, this.server)\n        this.serverTestSuccessful = true\n      } catch (e) {\n        this.serverTestError = e.message\n      }\n      this.isServerTestRunning = false\n    },\n    async testLinkwardenServer() {\n      this.isServerTestRunning = true\n      this.serverTestError = \'\'\n      try {\n        await this.$store.dispatch(actions.TEST_LINKWARDEN_SERVER, {rootUrl: this.server, username: this.username, token: this.password})\n        this.serverTestSuccessful = true\n        this.currentStep++\n      } catch (e) {\n        this.serverTestError = e.message\n      }\n      this.isServerTestRunning = false\n    },\n    async testWebdavServer() {\n      this.isServerTestRunning = true\n      this.serverTestError = \'\'\n      try {\n        await this.$store.dispatch(actions.TEST_WEBDAV_SERVER, {rootUrl: this.server, username: this.username, password: this.password})\n        this.serverTestSuccessful = true\n        this.currentStep++\n      } catch (e) {\n        this.serverTestError = e.message\n      }\n      this.isServerTestRunning = false\n    },\n    async loginGoogleDrive() {\n      if (this.isBrowser) {\n        await this.$store.dispatch(actions.REQUEST_NETWORK_PERMISSIONS)\n      }\n      const GoogleDriveAdapter = (await import(\'../../lib/adapters/GoogleDrive\')).default\n      const { refresh_token, username } = await GoogleDriveAdapter.authorize()\n      if (refresh_token) {\n        this.authorized = true\n        this.refreshToken = refresh_token\n        this.username = username\n        this.currentStep++\n      }\n    },\n    async onFlowStart() {\n      this.loginFlowError = null\n      try {\n        const credentials = await this.$store.dispatch(actions.START_LOGIN_FLOW, this.server)\n        this.username = credentials.username\n        this.password = credentials.password\n        this.currentStep++\n      } catch (e) {\n        this.loginFlowError = e.message\n      }\n    },\n    async onFlowStop() {\n      await this.$store.dispatch(\'STOP_LOGIN_FLOW\')\n    },\n    validateServerRoot(path) {\n      return !path || path === \'/\' || (path[0] === \'/\' && path[path.length - 1] !== \'/\')\n    },\n    validateUrl(str) {\n      try {\n        const u = new URL(str)\n        return Boolean(u) && u.protocol.startsWith(\'http\')\n      } catch (e) {\n        return false\n      }\n    },\n    validateBookmarksFile(path) {\n      return path[0] !== \'/\' && path[path.length - 1] !== \'/\'\n    },\n    validateBookmarksFileGoogle(path) {\n      return !path.includes(\'/\')\n    },\n    requestHistoryPermissions() {\n      this.$store.dispatch(actions.REQUEST_HISTORY_PERMISSIONS)\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n    .options {\n        max-width: 600px;\n        margin: 0 auto;\n    }\n</style>\n'],sourceRoot:""}]);const o=a},5225:(t,e,n)=>{var r=n(6688);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(70534).A)("490fb78e",r,!1,{})},6688:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(71354),s=n.n(r),i=n(76314),a=n.n(i)()(s());a.push([t.id,"\n.options[data-v-4ddcf34c] {\n    max-width: 600px;\n    margin: 0 auto;\n}\n","",{version:3,sources:["webpack://./src/ui/views/ImportExport.vue"],names:[],mappings:";AAuIA;IACA,gBAAA;IACA,cAAA;AACA",sourcesContent:['<template>\n  <v-container>\n    <v-card\n      class="options mt-3">\n      <v-container class="pa-5">\n        <v-card-title>\n          {{ t("LabelExport") }}\n        </v-card-title>\n        <v-card-text>\n          <p>{{ t("DescriptionExport") }}</p>\n          <div\n            v-for="(account, i) in accounts"\n            :key="i">\n            <v-row>\n              <v-col class="flex-grow-0">\n                <v-checkbox v-model="selected[i]" />\n              </v-col>\n              <v-col>\n                <div class="text-h6">\n                  <v-icon color="primary">\n                    {{ account.data.localRoot === \'tabs\'? \'mdi-tab\' : \'mdi-folder\' }}\n                  </v-icon> {{ getFolderName(account.fullPath) }}\n                </div>\n                <div class="caption">\n                  <span class="text-uppercase">{{ account.data.type }}</span>: {{ account.label }}\n                </div>\n              </v-col>\n            </v-row>\n          </div>\n          <v-btn\n            block\n            :disabled="!Object.values(selected).some(Boolean)"\n            @click="onTriggerExport">\n            <v-icon>mdi-export</v-icon>{{ t(\'LabelExport\') }}\n          </v-btn>\n        </v-card-text>\n      </v-container>\n    </v-card>\n    <v-card\n      class="options mt-3">\n      <v-container class="pa-5">\n        <v-card-title>\n          {{ t("LabelImport") }}\n        </v-card-title>\n        <v-card-text>\n          <p>{{ t("DescriptionImport") }}</p>\n          <input\n            ref="filePicker"\n            type="file"\n            class="d-none"\n            accept="application/json"\n            @change="onFileSelect">\n          <v-btn\n            block\n            @click="onTriggerFilePicker">\n            <v-icon>mdi-import</v-icon>{{ t(\'LabelImport\') }}\n          </v-btn>\n        </v-card-text>\n      </v-container>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport PathHelper from \'../../lib/PathHelper\'\nimport Vue from \'vue\'\n\nexport default {\n  name: \'ImportExport\',\n  components: {},\n  data() {\n    return {\n      selected: {}\n    }\n  },\n  computed: {\n    accounts() {\n      return this.$store.state.accounts\n    },\n  },\n  watch: {\n    accounts(newValue, old) {\n      if (!old || !Object.keys(old).length) {\n        // first time this is set\n        for (const id of Object.keys(this.accounts)) {\n          Vue.set(this.selected, id, true)\n        }\n      }\n    }\n  },\n  methods: {\n    getFolderName(rootPath) {\n      const pathArray = PathHelper.pathToArray(\n        rootPath || this.t(\'LabelRootfolder\')\n      )\n      return pathArray[pathArray.length - 1] || this.t(\'LabelUntitledfolder\')\n    },\n    async onTriggerExport() {\n      try {\n        const ids = Object.keys(this.selected).filter(id => Boolean(this.selected[id]))\n        if (!ids.length) {\n          return\n        }\n        await this.$store.dispatch(\'EXPORT_ACCOUNTS\', ids)\n      } catch (e) {\n        alert(e.message)\n      }\n    },\n    async onTriggerFilePicker() {\n      this.$refs.filePicker.click()\n      if (this.isBrowser) {\n        await this.$store.dispatch(\'REQUEST_NETWORK_PERMISSIONS\')\n      }\n    },\n    async onFileSelect() {\n      const file = this.$refs.filePicker.files[0]\n      try {\n        const accounts = JSON.parse(await file.text())\n        await this.$store.dispatch(\'IMPORT_ACCOUNTS\', accounts)\n        alert(this.t(\'LabelImportsuccessful\'))\n      } catch (e) {\n        alert(e.message)\n      }\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n    .options {\n        max-width: 600px;\n        margin: 0 auto;\n    }\n</style>\n'],sourceRoot:""}]);const o=a},7904:(t,e,n)=>{"use strict";n.d(e,{A:()=>m});var r=n(23037),s=n(30089),i=n(21253),a=n(16717),o=n(1231),l=n(5031),c=n(62029),d=n(22369),u=(n(98992),n(37550),function(){var t=this,e=t._self._c;return e(l.A,[e(s.A,{staticClass:"options mt-3"},[e(l.A,{staticClass:"pa-5"},[e(i.ri,[t._v("\n        "+t._s(t.t("LabelExport"))+"\n      ")]),t._v(" "),e(i.OQ,[e("p",[t._v(t._s(t.t("DescriptionExport")))]),t._v(" "),t._l(t.accounts,(function(n,r){return e("div",{key:r},[e(d.A,[e(o.A,{staticClass:"flex-grow-0"},[e(a.A,{model:{value:t.selected[r],callback:function(e){t.$set(t.selected,r,e)},expression:"selected[i]"}})],1),t._v(" "),e(o.A,[e("div",{staticClass:"text-h6"},[e(c.A,{attrs:{color:"primary"}},[t._v("\n                  "+t._s("tabs"===n.data.localRoot?"mdi-tab":"mdi-folder")+"\n                ")]),t._v(" "+t._s(t.getFolderName(n.fullPath))+"\n              ")],1),t._v(" "),e("div",{staticClass:"caption"},[e("span",{staticClass:"text-uppercase"},[t._v(t._s(n.data.type))]),t._v(": "+t._s(n.label)+"\n              ")])])],1)],1)})),t._v(" "),e(r.A,{attrs:{block:"",disabled:!Object.values(t.selected).some(Boolean)},on:{click:t.onTriggerExport}},[e(c.A,[t._v("mdi-export")]),t._v(t._s(t.t("LabelExport"))+"\n        ")],1)],2)],1)],1),t._v(" "),e(s.A,{staticClass:"options mt-3"},[e(l.A,{staticClass:"pa-5"},[e(i.ri,[t._v("\n        "+t._s(t.t("LabelImport"))+"\n      ")]),t._v(" "),e(i.OQ,[e("p",[t._v(t._s(t.t("DescriptionImport")))]),t._v(" "),e("input",{ref:"filePicker",staticClass:"d-none",attrs:{type:"file",accept:"application/json"},on:{change:t.onFileSelect}}),t._v(" "),e(r.A,{attrs:{block:""},on:{click:t.onTriggerFilePicker}},[e(c.A,[t._v("mdi-import")]),t._v(t._s(t.t("LabelImport"))+"\n        ")],1)],1)],1)],1)],1)});u._withStripped=!0,n(23792),n(3362),n(54520),n(62953);var p=n(67049),v=n(85471);const h={name:"ImportExport",components:{},data:()=>({selected:{}}),computed:{accounts(){return this.$store.state.accounts}},watch:{accounts(t,e){if(!e||!Object.keys(e).length)for(const t of Object.keys(this.accounts))v.Ay.set(this.selected,t,!0)}},methods:{getFolderName(t){const e=p.A.pathToArray(t||this.t("LabelRootfolder"));return e[e.length-1]||this.t("LabelUntitledfolder")},async onTriggerExport(){try{const t=Object.keys(this.selected).filter((t=>Boolean(this.selected[t])));if(!t.length)return;await this.$store.dispatch("EXPORT_ACCOUNTS",t)}catch(t){alert(t.message)}},async onTriggerFilePicker(){this.$refs.filePicker.click(),this.isBrowser&&await this.$store.dispatch("REQUEST_NETWORK_PERMISSIONS")},async onFileSelect(){const t=this.$refs.filePicker.files[0];try{const e=JSON.parse(await t.text());await this.$store.dispatch("IMPORT_ACCOUNTS",e),alert(this.t("LabelImportsuccessful"))}catch(t){alert(t.message)}}}};n(5225);const m=(0,n(14486).A)(h,u,[],!1,null,"4ddcf34c",null).exports},9767:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h}),n(33110),n(3362);var r=n(7737),s=n(3363),i=n.n(s),a=n(21406),o=n(49845),l=n.n(o),c=n(2142),d=n(18465),u=n.n(d),p=n(29242);const v=new(u());class h{constructor(t){this.accountId=t}static async changeEntry(t,e,n){await v.acquire(t,(async()=>{let s=await h.getEntry(t,n);s=e(s),await r.default.storage.local.set({[t]:JSON.stringify(s)})}))}static async getEntry(t,e){let n=await r.default.storage.local.get(t);try{if(n[t]){for(;"string"==typeof n[t];)n[t]=JSON.parse(n[t]);return n[t]}return e}catch(t){return p.default.log("Error while parsing BrowserAccountStorage entry value "+t.message),console.error(t),e}}static deleteEntry(t){return r.default.storage.local.remove(t)}static async getAllAccounts(){let t=await h.getEntry("accounts",{});return Object.keys(t)}async getAccountData(t){let e=(await h.getEntry("accounts",{}))[this.accountId];return t&&(e.iv?(e.password=await a.A.decryptAES(t,e.iv,e.password),delete e.iv):(e.password=await i().decryptAES(t,e.password,e.username),e.passphrase&&(e.passphrase=await i().decryptAES(t,e.passphrase,e.username)))),e}async setAccountData(t,e){let n=t;return e&&(t.iv&&delete t.iv,n={...t,password:await i().encryptAES(e,t.password,t.username),...t.passphrase&&{passphrase:await i().encryptAES(e,t.passphrase,t.username)}}),h.changeEntry("accounts",(t=>(t[this.accountId]=n,t)),{})}async deleteAccountData(){await h.changeEntry("accounts",(t=>(delete t[this.accountId],t))),await this.deleteCache(),await this.deleteMappings()}async initCache(){await h.changeEntry(`bookmarks[${this.accountId}].cache`,(()=>({})))}async getCache(){const t=await h.getEntry(`bookmarks[${this.accountId}].cache`);return c.Folder.hydrate(t&&Object.keys(t).length?t:{location:c.ItemLocation.LOCAL})}async setCache(t){await h.changeEntry(`bookmarks[${this.accountId}].cache`,(()=>t))}async deleteCache(){await h.deleteEntry(`bookmarks[${this.accountId}].cache`)}async initMappings(){await h.changeEntry(`bookmarks[${this.accountId}].mappings`,(()=>({})))}async getMappings(){const t=await h.getEntry(`bookmarks[${this.accountId}].mappings`);return new(l())(this,t&&Object.keys(t).length?t:{bookmarks:{ServerToLocal:{},LocalToServer:{}},folders:{ServerToLocal:{},LocalToServer:{}}})}async setMappings(t){await h.changeEntry(`bookmarks[${this.accountId}].mappings`,(()=>t))}async deleteMappings(){await h.deleteEntry(`bookmarks[${this.accountId}].mappings`)}async getCurrentContinuation(){return h.getEntry(`bookmarks[${this.accountId}].continuation`)}async setCurrentContinuation(t){await h.changeEntry(`bookmarks[${this.accountId}].continuation`,(e=>({...t,createdAt:Date.now()})),null)}}},15760:(t,e,n)=>{var r=n(70919);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(70534).A)("8c617072",r,!1,{})},18824:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGElEQVQYlWNgYGCQwoKxgqGgcJA5h3yFAAs8BRWVSwooAAAAAElFTkSuQmCC"},28216:(t,e,n)=>{"use strict";n.d(e,{A:()=>m});var r=n(23037),s=n(30089),i=n(21253),a=n(1231),o=n(47261),l=n(62029),c=n(22369),d=n(55305),u=function(){var t=this,e=t._self._c;return e(o.A,{style:{height:"500px !important"},attrs:{value:t.display,"max-width":"500"},on:{input:function(e){return t.$emit("update:display",e)}}},[e(s.A,[e(c.A,{attrs:{"no-gutters":""}},[e(a.A,{staticClass:"flex-grow-1"},[e(i.ri,{staticClass:"headline"},[t._v("\n          "+t._s(t.t("LabelChoosefolder"))+"\n        ")])],1),t._v(" "),e(a.A,{staticClass:"flex-grow-0"},[e(r.A,{staticClass:"primary ma-2",on:{click:t.onSave}},[t._v("\n          save\n        ")])],1)],1),t._v(" "),e(d.A,{staticClass:"pa-4",attrs:{activatable:"","item-text":"title","item-key":"id",active:[t.value],open:[t.tree.id],items:[t.privateTree],dense:""},on:{"update:active":t.onUpdateSelection},scopedSlots:t._u([{key:"prepend",fn:function(n){let{open:r}=n;return[e(l.A,[t._v("\n          "+t._s(r?"mdi-folder-open":"mdi-folder")+"\n        ")])]}},{key:"label",fn:function(e){let{item:n}=e;return[t._v("\n        "+t._s(n.title||t.t("LabelUntitledfolder"))+"\n      ")]}},{key:"append",fn:function(n){let{item:s}=n;return[e(r.A,{attrs:{small:"",rounded:""},on:{click:function(e){return t.onCreate(s.id)}}},[e(l.A,[t._v("\n            mdi-plus\n          ")])],1)]}}])})],1)],1)};u._withStripped=!0,n(26910),n(3362),n(98992),n(54520),n(81454);var p=n(95099),v=n(2142);const h={name:"DialogChooseFolder",components:{},props:{value:{type:Number,default:void 0},display:{type:Boolean,default:!1},tree:{type:Object,required:!0}},data(){return{selectedFolder:this.value,privateTree:[]}},computed:{accountId(){return this.$route.params.accountId},sortBy(){return this.accountId&&this.$store.state.accounts[this.accountId].data.sortBy}},watch:{async tree(t,e){await t.hash()!==await e.hash()&&(this.privateTree=this.filterOutBookmarks(t))}},mounted(){this.privateTree=this.filterOutBookmarks(this.tree)},methods:{filterOutBookmarks(t){let e=t.children.filter((t=>!t.url)).map((t=>this.filterOutBookmarks(t)));return"title"===this.sortBy&&(e=e.toSorted(((t,e)=>t.title<e.title?-1:t.title>e.title?1:0))),{...t,children:e}},onUpdateSelection(t){this.selectedFolder=t[0]},onCreate(t){const e=prompt(this.t("LabelAddfolder"));e&&this.$store.dispatch(p.o.CREATE_FOLDER,{accountId:this.accountId,folder:new v.Folder({title:e,id:null,parentId:t})})},onSave(){this.$store.commit(p.z.SET_LAST_FOLDER,{folderId:this.selectedFolder,accountId:this.$route.params.accountId}),this.$emit("update:display",!1),this.$emit("input",this.selectedFolder)}}},m=(0,n(14486).A)(h,u,[],!1,null,"74dd5ab9",null).exports},34626:t=>{t.exports={projectName:"floccus",projectOwner:"floccusaddon",repoType:"github",repoHost:"https://github.com",files:["README.md"],imageSize:70,commit:!0,contributors:[{login:"bernd-wechner",name:"Bernd Wechner",avatar_url:"https://avatars2.githubusercontent.com/u/7296506?v=4",profile:"https://github.com/bernd-wechner",contributions:["bug","ideas","test"]},{login:"jlbprof",name:"jlbprof",avatar_url:"https://avatars0.githubusercontent.com/u/9746421?v=4",profile:"https://github.com/jlbprof",contributions:["code","bug","test"]},{login:"TeutonJon78",name:"TeutonJon78",avatar_url:"https://avatars2.githubusercontent.com/u/1771400?v=4",profile:"https://github.com/TeutonJon78",contributions:["bug","ideas"]},{login:"skewty",name:"Scott P.",avatar_url:"https://avatars1.githubusercontent.com/u/9087223?v=4",profile:"https://github.com/skewty",contributions:["bug","ideas"]},{login:"Lantizia",name:"Lantizia",avatar_url:"https://avatars1.githubusercontent.com/u/10448369?v=4",profile:"https://github.com/Lantizia",contributions:["bug","ideas"]},{login:"TCB13",name:"TCB13",avatar_url:"https://avatars1.githubusercontent.com/u/6315832?v=4",profile:"https://iklive.eu",contributions:["code","ideas","plugin","translation"]},{login:"gohrner",name:"gohrner ",avatar_url:"https://avatars0.githubusercontent.com/u/26199042?v=4",profile:"https://github.com/gohrner",contributions:["bug"]},{login:"Tank-Missile",name:"Tank-Missile",avatar_url:"https://avatars0.githubusercontent.com/u/5893370?v=4",profile:"https://github.com/Tank-Missile",contributions:["bug"]},{login:"tkurbad",name:"Torsten Kurbad",avatar_url:"https://avatars1.githubusercontent.com/u/158030?v=4",profile:"https://github.com/tkurbad",contributions:["bug"]},{login:"gerroon",name:"gerroon",avatar_url:"https://avatars1.githubusercontent.com/u/8519469?v=4",profile:"https://github.com/gerroon",contributions:["bug"]},{login:"mnalis",name:"Matija Nalis",avatar_url:"https://avatars.githubusercontent.com/u/156656?v=4",profile:"http://biciklijade.com/",contributions:["ideas","question","bug"]},{login:"marcelklehr",name:"Marcel Klehr",avatar_url:"https://avatars.githubusercontent.com/u/986878?v=4",profile:"https://github.com/marcelklehr",contributions:["question","code","content","design","doc","infra","maintenance","projectManagement"]},{login:"binsee",name:"binsee",avatar_url:"https://avatars.githubusercontent.com/u/5285894?v=4",profile:"https://github.com/binsee",contributions:["code"]},{login:"mlshapiro",name:"Marc Shapiro",avatar_url:"https://avatars.githubusercontent.com/u/8190979?v=4",profile:"https://daitem.io/",contributions:["code"]},{login:"marlluslustosa",name:"Marllus Lustosa",avatar_url:"https://avatars.githubusercontent.com/u/29416568?v=4",profile:"https://marllus.com/",contributions:["code"]},{login:"IzzySoft",name:"Izzy",avatar_url:"https://avatars.githubusercontent.com/u/6781438?v=4",profile:"https://android.izzysoft.de/",contributions:["bug","ideas","infra"]},{login:"sunjam",name:"sunjam",avatar_url:"https://avatars.githubusercontent.com/u/1787238?v=4",profile:"https://github.com/sunjam",contributions:["ideas","test"]},{login:"dsiminiuk",name:"Danny Siminiuk",avatar_url:"https://avatars.githubusercontent.com/u/5713547?v=4",profile:"https://github.com/dsiminiuk",contributions:["test","ideas"]},{login:"Seirade",name:"Seirade",avatar_url:"https://avatars.githubusercontent.com/u/45798662?v=4",profile:"https://github.com/Seirade",contributions:["ideas","bug"]},{login:"pinpontitit",name:"pinpontitit",avatar_url:"https://avatars.githubusercontent.com/u/100489443?v=4",profile:"https://github.com/pinpontitit",contributions:["ideas","bug","code"]},{login:"dmotte",name:"Motte",avatar_url:"https://avatars.githubusercontent.com/u/37443982?v=4",profile:"https://dmotte.github.io/",contributions:["code","bug"]},{login:"macrogreg",name:"macrogreg",avatar_url:"https://avatars.githubusercontent.com/u/20691812?v=4",profile:"https://github.com/macrogreg",contributions:["code"]},{login:"andybalaam",name:"Andy Balaam",avatar_url:"https://avatars.githubusercontent.com/u/76812?v=4",profile:"http://www.artificialworlds.net",contributions:["code","bug"]}],skipCi:!0,contributorsPerLine:7,commitConvention:"none",commitType:"docs"}},37577:(t,e,n)=>{var r=n(64844);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(70534).A)("93d72b3a",r,!1,{})},41146:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(85471),s=n(8004);n(36498),r.Ay.use(s.A);const i={theme:{dark:Boolean(window.matchMedia("(prefers-color-scheme: dark)").matches)}},a=new s.A(i)},50305:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(70221),s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-h6"},[t._v("\n    "+t._s(t.t("LabelSyncinterval"))+"\n  ")]),t._v(" "),e(r.A,{staticClass:"mt-8 mb-5",attrs:{"aria-label":t.t("LabelSyncinterval"),hint:t.t("DescriptionSyncinterval"),min:0,max:t.syncIntervalSteps.length-1,step:1,"persistent-hint":!0,"thumb-label":"always",ticks:"always"},scopedSlots:t._u([{key:"thumb-label",fn:function(e){let{value:n}=e;return[t._v("\n      "+t._s(t.humanizeDuration(1e3*t.syncIntervalSteps[n]*60))+"\n    ")]}}]),model:{value:t.syncIntervalStep,callback:function(e){t.syncIntervalStep=e},expression:"syncIntervalStep"}})],1)};s._withStripped=!0,n(72712),n(98992),n(8872);var i=n(76123),a=n.n(i);const o={name:"OptionSyncInterval",props:{value:{type:Number,default:0}},data(){const t=[5,10,15,20,25,30,45,60,120,180,240,360,480,720,960,1440];return{syncIntervalSteps:t,syncIntervalStep:t.reduce(((e,n,r)=>Math.abs(t[e]-this.value)>Math.abs(n-this.value)?r:e),0)}},watch:{value(){this.syncIntervalStep=this.syncIntervalSteps.reduce(((t,e,n)=>Math.abs(this.syncIntervalSteps[t]-this.value)>Math.abs(e-this.value)?n:t),0)},syncIntervalStep(t){this.$emit("input",this.syncIntervalSteps[t])}},methods:{humanizeDuration:t=>a()(t,{language:"shortEn",largest:2,round:!0,languages:{shortEn:{y:()=>"y",mo:()=>"mo",w:()=>"w",d:()=>"d",h:()=>"h",m:()=>"m",s:()=>"s",ms:()=>"ms"}}})}},l=(0,n(14486).A)(o,s,[],!1,null,"7a00c3cc",null).exports},51410:(t,e,n)=>{"use strict";n.d(e,{A:()=>A});var r=n(90849),s=n(16562),i=n(71671),a=n(23037),o=n(30089),l=n(21253),c=n(62029),d=n(46381),u=n(88557),p=n(92528),v=n(40005),h=n(89857),m=function(){var t=this,e=t._self._c;return e("div",[e(s.A,{attrs:{absolute:"",app:""}},[e(i.A,[t._v("Add Bookmark")]),t._v(" "),e(v.A),t._v(" "),e(a.A,{attrs:{color:"blue darken-1",text:"",elevation:"1"},on:{click:t.onSave}},[t._v("\n      Save\n    ")])],1),t._v(" "),e(d.A,[t.loading?e(u.A,{staticClass:"loading",attrs:{indeterminate:"",color:"blue darken-1"}}):e(o.A,{staticStyle:{"min-height":"95vh"}},[e(l.OQ,[e(p.A,{attrs:{dense:"",value:t.id,"item-text":"label","item-value":"id",items:t.accounts},on:{change:function(e){return t.$router.push({name:t.routes.ADD_BOOKMARK,params:{url:t.url,accountId:e}})}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(c.A,[t._v(t._s(t._f("accountIcon")(t.account.data.type)))])]},proxy:!0},{key:"item",fn:function(n){let{item:r}=n;return[e(c.A,[t._v(t._s(t._f("accountIcon")(r.data.type)))]),t._v(" "+t._s(r.label)+"\n          ")]}}])}),t._v(" "),t.exists?e(r.A,{staticClass:"mb-2",attrs:{dense:"",outlined:"",text:"",type:"info"}},[t._v("\n          "+t._s(t.t("DescriptionBookmarkexists"))+"\n        ")]):t._e(),t._v(" "),e(h.A,{attrs:{label:"Title","hide-details":""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),e(h.A,{attrs:{error:Boolean(t.urlError),"error-messages":t.urlError,label:"Link"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),t._v(" "),e(h.A,{attrs:{readonly:"",label:"Parent folder"},on:{click:t.onTriggerFolderChooser},scopedSlots:t._u([{key:"append",fn:function(){return[e(c.A,{attrs:{color:"blue darken-1"},on:{click:t.onTriggerFolderChooser}},[t._v("\n              mdi-folder\n            ")])]},proxy:!0}]),model:{value:t.parentTitle,callback:function(e){t.parentTitle=e},expression:"parentTitle"}})],1)],1)],1),t._v(" "),t.tree?e("DialogChooseFolder",{attrs:{display:t.displayFolderChooser,tree:t.tree},on:{"update:display":function(e){t.displayFolderChooser=e}},model:{value:t.temporaryParent,callback:function(e){t.temporaryParent=e},expression:"temporaryParent"}}):t._e()],1)};m._withStripped=!0,n(23792),n(3362),n(62953),n(3296),n(27208),n(48408);var b=n(91149),f=n(95099),_=n(2142),k=n(28216),y=n(63513);const g={name:"AddBookmarkIntent",components:{DialogChooseFolder:k.A},filters:{accountIcon:t=>({"google-drive":"mdi-google-drive","nextcloud-bookmarks":"mdi-cloud",webdav:"mdi-folder-network",git:"mdi-source-repository"}[t])},data(){return{url:this.$route.params.url,urlError:this.checkUrl(this.$route.params.url),title:this.$route.params.title||"",temporaryParent:null,displayFolderChooser:!1}},computed:{id(){return this.$route.params.accountId},account(){return this.$store.state.accounts[this.id]},accounts(){return Object.values(this.$store.state.accounts)},originalUrl(){return this.$route.params.url},loading(){return!this.$store.state.accounts[this.id]||!this.$store.state.accounts[this.id].data||!Object.keys(this.$store.state.accounts[this.id].data).length},routes:()=>b.J,tree(){return this.$store.state.tree},parentTitle(){if(null===this.temporaryParent)return"";const t=this.tree.findFolder(this.temporaryParent);return t?t.title||this.t("LabelUntitledfolder"):""},exists(){return!this.loading&&this.tree&&this.tree.findItemFilter(_.ItemType.BOOKMARK,(t=>t.url===this.url))}},watch:{loading(){this.loading||(this.data=this.$store.state.accounts[this.id].data)},id(){this.$store.dispatch(f.o.LOAD_TREE,this.id)},url(){this.urlError=this.checkUrl(this.url)},tree(){const t=this.tree.findFolder(this.$store.state.lastFolders[this.id])||this.tree.findFolder(this.tree.id);this.temporaryParent=t.id}},created(){if(this.loading||(this.data=this.$store.state.accounts[this.id].data),this.tree){const t=this.tree.findFolder(this.$store.state.lastFolders[this.id])||this.tree.findFolder(this.tree.id);this.temporaryParent=t.id}else this.$store.dispatch(f.o.LOAD_TREE,this.id)},methods:{async onSave(){this.tree.findFolder(this.temporaryParent)&&!this.urlError&&(await this.$store.dispatch(f.o.CREATE_BOOKMARK,{accountId:this.id,bookmark:new _.Bookmark({id:null,parentId:this.temporaryParent,title:this.title,url:this.url})}),y.h.finish(),await this.$router.push({name:b.J.TREE,params:{accountId:this.id}}))},onTriggerFolderChooser(){this.displayFolderChooser=!0},checkUrl(t){try{return new URL(t),null}catch(t){return"Invalid URL"}}}};n(37577);const A=(0,n(14486).A)(g,m,[],!1,null,"e435e6de",null).exports},51765:(t,e,n)=>{var r=n(1356);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(70534).A)("cfdcaf4c",r,!1,{})},54321:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(19276),s=n(33457),i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-h6"},[t._v("\n    "+t._s(t.t("LabelNestedSync"))+"\n  ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n    "+t._s(t.t("DescriptionNestedSync"))+"\n  ")]),t._v(" "),e(s.A,{attrs:{value:t.value},on:{change:function(e){return t.$emit("input",e)}}},[e(r.A,{attrs:{label:t.t("LabelNestedSyncNo"),value:!1}}),t._v(" "),e(r.A,{attrs:{label:t.t("LabelNestedSyncYes"),value:!0}})],1)],1)};i._withStripped=!0;const a={name:"OptionNestedSync",props:{value:{type:Boolean,default:!1}}},o=(0,n(14486).A)(a,i,[],!1,null,"f8d92388",null).exports},56686:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(19276),s=n(33457),i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-h6"},[t._v("\n    "+t._s(t.t("LabelFiletype"))+"\n  ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n    "+t._s(t.t("DescriptionFiletype"))+"\n  ")]),t._v(" "),e(s.A,{attrs:{value:t.value},on:{change:function(e){return t.$emit("input",e)}}},[e(r.A,{attrs:{label:t.t("LabelFiletypexbel"),value:"xbel"}}),t._v(" "),e(r.A,{attrs:{label:t.t("LabelFiletypehtml"),value:"html"}})],1)],1)};i._withStripped=!0;const a={name:"OptionFileType",props:{value:{type:String,default:"xbel"}}},o=(0,n(14486).A)(a,i,[],!1,null,"29cd6cb8",null).exports},63262:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(16562),s=n(14569),i=n(71671),a=n(46381),o=function(){var t=this,e=t._self._c;return e("div",[e("Drawer",{attrs:{visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}}),t._v(" "),e(r.A,{attrs:{absolute:"",app:""}},[e(s.A,{staticClass:"mr-2 ml-n2",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),e(i.A,[t._v(t._s(t.t("LabelImportExport")))])],1),t._v(" "),e(a.A,[e("ImportExportContent")],1)],1)};o._withStripped=!0;var l=n(80214),c=n(7904);const d={name:"ImportExport",components:{Drawer:l.A,ImportExportContent:c.A},data:()=>({drawer:!1})},u=(0,n(14486).A)(d,o,[],!1,null,"7224d666",null).exports},64844:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(71354),s=n.n(r),i=n(76314),a=n.n(i)()(s());a.push([t.id,"\n.loading[data-v-e435e6de] {\n  margin: 40vh 40vw;\n}\n","",{version:3,sources:["webpack://./src/ui/views/native/AddBookmarkIntent.vue"],names:[],mappings:";AAwMA;EACA,iBAAA;AACA",sourcesContent:['<template>\n  <div>\n    <v-app-bar\n      absolute\n      app>\n      <v-app-bar-title>Add Bookmark</v-app-bar-title>\n      <v-spacer />\n      <v-btn\n        color="blue darken-1"\n        text\n        elevation="1"\n        @click="onSave">\n        Save\n      </v-btn>\n    </v-app-bar>\n    <v-main>\n      <v-progress-circular\n        v-if="loading"\n        indeterminate\n        color="blue darken-1"\n        class="loading" />\n      <v-card\n        v-else\n        style="min-height: 95vh">\n        <v-card-text>\n          <v-select\n            dense\n            :value="id"\n            item-text="label"\n            item-value="id"\n            :items="accounts"\n            @change="$router.push({name: routes.ADD_BOOKMARK, params: {url, accountId: $event}})">\n            <template #prepend-inner>\n              <v-icon>{{ account.data.type | accountIcon }}</v-icon>\n            </template>\n            <template #item="{item}">\n              <v-icon>{{ item.data.type | accountIcon }}</v-icon> {{ item.label }}\n            </template>\n          </v-select>\n          <v-alert\n            v-if="exists"\n            dense\n            outlined\n            text\n            type="info"\n            class="mb-2">\n            {{ t(\'DescriptionBookmarkexists\') }}\n          </v-alert>\n          <v-text-field\n            v-model="title"\n            label="Title"\n            hide-details />\n          <v-text-field\n            v-model="url"\n            :error="Boolean(urlError)"\n            :error-messages="urlError"\n            label="Link" />\n          <v-text-field\n            v-model="parentTitle"\n            readonly\n            label="Parent folder"\n            @click="onTriggerFolderChooser">\n            <template #append>\n              <v-icon\n                color="blue darken-1"\n                @click="onTriggerFolderChooser">\n                mdi-folder\n              </v-icon>\n            </template>\n          </v-text-field>\n        </v-card-text>\n      </v-card>\n    </v-main>\n    <DialogChooseFolder\n      v-if="tree"\n      v-model="temporaryParent"\n      :display.sync="displayFolderChooser"\n      :tree="tree" />\n  </div>\n</template>\n\n<script>\nimport { routes } from \'../../NativeRouter\'\nimport { actions } from \'../../store/definitions\'\nimport { Bookmark, ItemType } from \'../../../lib/Tree\'\nimport DialogChooseFolder from \'../../components/native/DialogChooseFolder\'\nimport { SendIntent } from \'send-intent\'\n\nexport default {\n  name: \'AddBookmarkIntent\',\n  components: { DialogChooseFolder },\n  filters: {\n    accountIcon(type) {\n      const icons = {\n        \'google-drive\': \'mdi-google-drive\',\n        \'nextcloud-bookmarks\': \'mdi-cloud\',\n        \'webdav\': \'mdi-folder-network\',\n        \'git\': \'mdi-source-repository\',\n      }\n      return icons[type]\n    },\n  },\n  data() {\n    return {\n      url: this.$route.params.url,\n      urlError: this.checkUrl(this.$route.params.url),\n      title: this.$route.params.title || \'\',\n      temporaryParent: null,\n      displayFolderChooser: false,\n    }\n  },\n  computed: {\n    id() {\n      return this.$route.params.accountId\n    },\n    account() {\n      return this.$store.state.accounts[this.id]\n    },\n    accounts() {\n      return Object.values(this.$store.state.accounts)\n    },\n    originalUrl() {\n      return this.$route.params.url\n    },\n    loading() {\n      return (!this.$store.state.accounts[this.id] || !this.$store.state.accounts[this.id].data || !Object.keys(this.$store.state.accounts[this.id].data).length)\n    },\n    routes() {\n      return routes\n    },\n    tree() {\n      return this.$store.state.tree\n    },\n    parentTitle() {\n      if (this.temporaryParent === null) {\n        return \'\'\n      }\n      const folder = this.tree.findFolder(this.temporaryParent)\n      return folder ? folder.title || this.t(\'LabelUntitledfolder\') : \'\'\n    },\n    exists() {\n      return !this.loading && this.tree && this.tree.findItemFilter(ItemType.BOOKMARK, (bm) => bm.url === this.url)\n    }\n  },\n  watch: {\n    loading() {\n      if (this.loading) return\n      this.data = this.$store.state.accounts[this.id].data\n    },\n    id() {\n      this.$store.dispatch(actions.LOAD_TREE, this.id)\n    },\n    url() {\n      this.urlError = this.checkUrl(this.url)\n    },\n    tree() {\n      const parentFolder = this.tree.findFolder(this.$store.state.lastFolders[this.id]) || this.tree.findFolder(this.tree.id)\n      this.temporaryParent = parentFolder.id\n    },\n  },\n  created() {\n    if (!this.loading) {\n      this.data = this.$store.state.accounts[this.id].data\n    }\n    if (this.tree) {\n      const parentFolder = this.tree.findFolder(this.$store.state.lastFolders[this.id]) || this.tree.findFolder(this.tree.id)\n      this.temporaryParent = parentFolder.id\n    } else {\n      this.$store.dispatch(actions.LOAD_TREE, this.id)\n    }\n  },\n  methods: {\n    async onSave() {\n      if (!this.tree.findFolder(this.temporaryParent) || this.urlError) {\n        return\n      }\n      await this.$store.dispatch(actions.CREATE_BOOKMARK, {\n        accountId: this.id,\n        bookmark: new Bookmark({ id: null, parentId: this.temporaryParent, title: this.title, url: this.url })\n      })\n      SendIntent.finish()\n      await this.$router.push({name: routes.TREE, params: {accountId: this.id}})\n    },\n    onTriggerFolderChooser() {\n      this.displayFolderChooser = true\n    },\n    checkUrl(url) {\n      try {\n        // eslint-disable-next-line\n        new URL(url)\n        return null\n      } catch (e) {\n        return \'Invalid URL\'\n      }\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n.loading {\n  margin: 40vh 40vw;\n}\n</style>\n'],sourceRoot:""}]);const o=a},67049:(t,e,n)=>{"use strict";n.d(e,{A:()=>r}),n(27495),n(25440),n(98992),n(81454);class r{static reverseStr(t){return t.split("").reverse().join("")}static pathToArray(t){return this.reverseStr(t).split(/[/](?![\\])|[/](?=\\\\)/).map((t=>this.reverseStr(t))).map((t=>t.replace(/\\[/]/g,"/"))).map((t=>t.replace(/\\\\/g,"\\"))).reverse()}static arrayToPath(t){return t.map((t=>t.replace(/\\/g,"\\\\"))).map((t=>t.replace(/[/]/g,"\\/"))).join("/")}}},67377:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var r=n(88557),s=function(){return(0,this._self._c)(r.A,{staticClass:"ma-auto",attrs:{indeterminate:"",color:"blue darken-1"}})};s._withStripped=!0,n(23792),n(3362),n(98992),n(3949),n(62953),n(3296),n(27208),n(48408);var i=n(95099),a=n(91149),o=n(83633),l=n(63513),c=n(8330),d=n(39529),u=n(16546),p=n(29242);const v={name:"Home",async created(){o.S.hide(),await this.$store.dispatch(i.o.LOAD_ACCOUNTS);const{value:t}=await d.Preferences.get({key:"currentVersion"});if(t&&c.rE!==t){await d.Preferences.set({key:"currentVersion",value:c.rE});const e=c.rE.split("."),n=t?t.split("."):[];e[0]===n[0]&&e[1]===n[1]||this.$route!==a.J.UPDATE&&this.$router.push({name:a.J.UPDATE})}else if(Object.keys(this.$store.state.accounts).length){if(!await this.checkForIntent()){const t=Object.keys(this.$store.state.accounts)[0];this.$router.push({name:a.J.TREE,params:{accountId:t}})}}else this.$router.push({name:a.J.NEW_ACCOUNT});window.addEventListener("sendIntentReceived",(()=>this.checkForIntent()))},methods:{async checkForIntent(){let t,e,n={};try{n=await l.h.checkSendIntentReceived()}catch(t){return console.log(t),!1}if(n.url)t=this.findUrl(n.url),e="";else{if(!n.additionalItems||!n.additionalItems.length)return!1;n.additionalItems.forEach((n=>{n.url&&(t=n.url,e="")}))}console.log(t);try{const n=await u.CapacitorHttp.get({url:t,headers:{"user-agent":"curl/8.6.0"}}),r=new DOMParser;console.log(n.data);const s=r.parseFromString(n.data,"text/html").getElementsByTagName("title")[0];s&&(e=s.textContent)}catch(t){p.default.log("Failed to fetch shared URL")}return this.$router.push({name:a.J.ADD_BOOKMARK,params:{accountId:Object.keys(this.$store.state.accounts)[0],url:t,title:e}}),!0},findUrl(t){try{return new URL(t),t}catch(e){const n=t.trim().split(" ").slice(-1)[0];try{return new URL(n),n}catch(e){return t}}}}},h=(0,n(14486).A)(v,s,[],!1,null,"38b7a89a",null).exports},67856:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(16546),s=n(26186);let i=null;const a={computed:{isBrowser:()=>"web"===r.Capacitor.getPlatform()||!r.Capacitor.getPlatform()},mounted(){this.$options.backButton&&(i&&i.remove(),i=s.q.addListener("backButton",(()=>this.$options.backButton.call(this))))}}},70919:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(71354),s=n.n(r),i=n(76314),a=n.n(i)()(s());a.push([t.id,"\n.loading[data-v-70344232] {\n  margin: 45vh 45vw;\n}\n.sync--active[data-v-70344232] {\n  animation: spin-70344232 2s infinite linear;\n}\n@keyframes spin-70344232 {\n0% {\n    transform: rotate(360deg);\n}\n99.9% {\n    transform: rotate(0deg);\n}\n}\n.sync-dropdown-hint[data-v-70344232]::after {\n  content: '';\n  position: absolute;\n  font-size: 0.45em;\n  top: 30px;\n  left: 30px;\n}\n.list-full-height[data-v-70344232] {\n  min-height: 95vh;\n}\n","",{version:3,sources:["webpack://./src/ui/views/native/Tree.vue"],names:[],mappings:";AAwuBA;EACA,iBAAA;AACA;AAEA;EACA,2CAAA;AACA;AAEA;AACA;IACA,yBAAA;AACA;AACA;IACA,uBAAA;AACA;AACA;AAEA;EACA,YAAA;EACA,kBAAA;EACA,iBAAA;EACA,SAAA;EACA,UAAA;AACA;AAEA;EACA,gBAAA;AACA",sourcesContent:['<template>\n  <div\n    style="height:100%">\n    <Drawer :visible.sync="drawer" />\n    <v-app-bar\n      absolute\n      app>\n      <v-app-bar-nav-icon\n        v-if="!tree || currentFolderId === tree.id"\n        class="mr-2 ml-n2"\n        @click="drawer = !drawer" />\n      <v-btn\n        v-else\n        icon\n        class="mr-2 ml-n2"\n        @click="goBack">\n        <v-icon>mdi-arrow-left</v-icon>\n      </v-btn>\n      <v-text-field\n        :value="searchQuery"\n        :label="!tree || currentFolderId === tree.id? t(\'LabelSearch\') : t(\'LabelSearchfolder\', [currentFolder.title])"\n        solo\n        flat\n        dense\n        clearable\n        hide-details\n        @input="onSearch" />\n      <v-spacer />\n      <v-menu\n        bottom\n        left\n        open-on-hover\n        :open-delay="450"\n        :disabled="Boolean(syncing) || Boolean(scheduled) || !currentAccount">\n        <template #activator="{ on, attrs }">\n          <v-btn\n            icon\n            :disabled="!currentAccount"\n            :color="syncing || scheduled? \'primary\' : \'\'"\n            v-bind="attrs"\n            :class="{\'sync-dropdown-hint\': !Boolean(syncing)}"\n            v-on="on"\n            @click="onTriggerSync">\n            <v-icon\n              :class="{\'sync--active\': Boolean(syncing)}">\n              {{ scheduled ? \'mdi-timer-sync-outline\' : \'mdi-sync\' }}\n            </v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item @click="onTriggerSync(\'up\')">\n            <v-list-item-avatar>\n              <v-icon>mdi-arrow-up-bold</v-icon>\n            </v-list-item-avatar>\n            <v-list-item-title>\n              {{ t(\'LabelSyncUpOnce\') }}\n            </v-list-item-title>\n          </v-list-item>\n          <v-list-item @click="onTriggerSync(\'down\')">\n            <v-list-item-avatar>\n              <v-icon>mdi-arrow-down-bold</v-icon>\n            </v-list-item-avatar>\n            <v-list-item-title>\n              {{ t(\'LabelSyncDownOnce\') }}\n            </v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n      <v-menu\n        bottom\n        left>\n        <template #activator="{ on, attrs }">\n          <v-btn\n            icon\n            v-bind="attrs"\n            v-on="on">\n            <v-icon>{{ sortIcons[sortBy] }}</v-icon>\n          </v-btn>\n        </template>\n\n        <v-list>\n          <v-list-item @click="sortBy = \'title\'">\n            <v-list-item-avatar>\n              <v-icon>{{ sortIcons[\'title\'] }}</v-icon>\n            </v-list-item-avatar>\n            <v-list-item-title>\n              {{ t(\'LabelSorttitle\') }}\n            </v-list-item-title>\n          </v-list-item>\n          <v-list-item @click="sortBy = \'url\'">\n            <v-list-item-avatar>\n              <v-icon>{{ sortIcons[\'url\'] }}</v-icon>\n            </v-list-item-avatar>\n            <v-list-item-title>\n              {{ t(\'LabelSorturl\') }}\n            </v-list-item-title>\n          </v-list-item>\n          <v-list-item @click="sortBy = \'index\'">\n            <v-list-item-avatar>\n              <v-icon>{{ sortIcons[\'index\'] }}</v-icon>\n            </v-list-item-avatar>\n            <v-list-item-title>\n              {{ t(\'LabelSortcustom\') }}\n            </v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n      <v-btn\n        v-if="currentAccount"\n        icon\n        :to="{name: routes.ACCOUNT_OPTIONS, params:{accountId: currentAccount? currentAccount.id : 0}}">\n        <v-icon>mdi-cog</v-icon>\n      </v-btn>\n    </v-app-bar>\n    <v-main>\n      <v-progress-linear\n        v-if="syncProgress"\n        :value="syncProgress * 100 || 0"\n        color="blue darken-1" />\n      <v-card>\n        <v-breadcrumbs\n          v-if="breadcrumbs.length > 1"\n          :items="breadcrumbs">\n          <template #item="{ item }">\n            <v-breadcrumbs-item @click="currentFolderId = item.id">\n              <template v-if="item.id === tree.id">\n                <v-icon>mdi-home</v-icon>\n              </template>\n              <template v-else>\n                {{ item.title }}\n              </template>\n            </v-breadcrumbs-item>\n          </template>\n        </v-breadcrumbs>\n      </v-card>\n      <v-alert\n        v-if="Boolean(syncError)"\n        dense\n        outlined\n        text\n        type="warning"\n        class="ma-1">\n        {{ syncError }}\n      </v-alert>\n      <v-alert\n        v-if="scheduled"\n        dense\n        outlined\n        text\n        type="info"\n        class="ma-1">\n        {{ t(\'DescriptionSyncscheduled\') }}\n        <v-btn\n          color="info"\n          class="float-right"\n          x-small\n          @click="onForceSync">\n          {{ t(\'LabelScheduledforcesync\') }}\n        </v-btn>\n      </v-alert>\n      <v-progress-circular\n        v-if="loading"\n        indeterminate\n        color="blue darken-1"\n        class="loading" />\n      <v-list\n        v-else-if="currentFolder && items && items.length"\n        two-line\n        :class="{\'pb-10\': true, \'list-full-height\': !(searchQuery && otherSearchItems && otherSearchItems.length)}">\n        <template v-for="item in items">\n          <v-list-item\n            :key="item.type+item.id"\n            class="pl-3"\n            dense\n            @click="clickItem(item)">\n            <v-list-item-avatar>\n              <v-icon\n                v-if="item.type === \'folder\'"\n                color="blue darken-1"\n                large>\n                mdi-folder\n              </v-icon>\n              <FaviconImage\n                v-else\n                :url="item.url"\n                :use-network="useNetwork" />\n            </v-list-item-avatar>\n\n            <v-list-item-content>\n              <v-list-item-title>{{ item.title }}</v-list-item-title>\n              <v-list-item-subtitle v-if="item.type === \'bookmark\'">\n                {{ item.url | hostname }}\n              </v-list-item-subtitle>\n            </v-list-item-content>\n\n            <v-list-item-action>\n              <v-menu\n                bottom\n                left>\n                <template #activator="{ on, attrs }">\n                  <v-btn\n                    icon\n                    v-bind="attrs"\n                    v-on="on">\n                    <v-icon>mdi-dots-vertical</v-icon>\n                  </v-btn>\n                </template>\n\n                <v-list>\n                  <v-list-item @click="editItem(item)">\n                    <v-list-item-avatar>\n                      <v-icon>mdi-pencil</v-icon>\n                    </v-list-item-avatar>\n                    <v-list-item-title>\n                      {{ t(\'LabelEdititem\') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                  <v-list-item\n                    v-if="item.type === \'bookmark\'"\n                    @click="shareBookmark(item)">\n                    <v-list-item-avatar>\n                      <v-icon>mdi-share</v-icon>\n                    </v-list-item-avatar>\n                    <v-list-item-title>\n                      {{ t(\'LabelShareitem\') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                  <v-list-item @click="deleteItem(item)">\n                    <v-list-item-avatar>\n                      <v-icon>mdi-delete</v-icon>\n                    </v-list-item-avatar>\n                    <v-list-item-title>\n                      {{ t(\'LabelDeleteitem\') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n            </v-list-item-action>\n          </v-list-item>\n          <v-divider\n            :key="String(item.id)+item.type+\'divider\'" />\n        </template>\n      </v-list>\n      <v-card\n        v-else\n        flat\n        tile\n        :style="{height: \'100vh\', width: \'100vw\', padding: \'10vh auto\'}">\n        <img\n          src="icons/tree-swing.svg"\n          :style="{width: \'95%\', maxHeight: \'40vh\'}">\n        <h3 class="text-center headline mt-5">\n          {{ t(\'LabelNobookmarks\') }}\n        </h3>\n      </v-card>\n      <v-card class="pt-5">\n        <v-list-item\n          v-if="searchQuery && otherSearchItems && otherSearchItems.length">\n          <v-list-item-avatar><v-icon>mdi-select-search</v-icon></v-list-item-avatar> {{ t(\'LabelSearchresultsotherfolders\') }}\n        </v-list-item>\n      </v-card>\n      <v-list\n        v-if="searchQuery && otherSearchItems && otherSearchItems.length"\n        two-line\n        class="list-full-height">\n        <template v-for="item in otherSearchItems">\n          <v-list-item\n            :key="item.type+item.id"\n            class="pl-3"\n            dense\n            @click="clickItem(item)">\n            <v-list-item-avatar>\n              <v-icon\n                v-if="item.type === \'folder\'"\n                color="blue darken-1"\n                large>\n                mdi-folder\n              </v-icon>\n              <FaviconImage\n                v-else\n                :url="item.url"\n                :use-network="useNetwork" />\n            </v-list-item-avatar>\n\n            <v-list-item-content>\n              <v-list-item-title>{{ item.title }}</v-list-item-title>\n              <v-list-item-subtitle v-if="item.type === \'bookmark\'">\n                {{ item.url | hostname }}\n              </v-list-item-subtitle>\n            </v-list-item-content>\n\n            <v-list-item-action>\n              <v-menu\n                bottom\n                left>\n                <template #activator="{ on, attrs }">\n                  <v-btn\n                    icon\n                    v-bind="attrs"\n                    v-on="on">\n                    <v-icon>mdi-dots-vertical</v-icon>\n                  </v-btn>\n                </template>\n\n                <v-list>\n                  <v-list-item @click="editItem(item)">\n                    <v-list-item-avatar>\n                      <v-icon>mdi-pencil</v-icon>\n                    </v-list-item-avatar>\n                    <v-list-item-title>\n                      {{ t(\'LabelEdititem\') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                  <v-list-item\n                    v-if="item.type === \'bookmark\'"\n                    @click="shareBookmark(item)">\n                    <v-list-item-avatar>\n                      <v-icon>mdi-share</v-icon>\n                    </v-list-item-avatar>\n                    <v-list-item-title>\n                      {{ t(\'LabelShareitem\') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                  <v-list-item @click="deleteItem(item)">\n                    <v-list-item-avatar>\n                      <v-icon>mdi-delete</v-icon>\n                    </v-list-item-avatar>\n                    <v-list-item-title>\n                      {{ t(\'LabelDeleteitem\') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n            </v-list-item-action>\n          </v-list-item>\n          <v-divider\n            :key="String(item.id)+item.type+\'divider\'" />\n        </template>\n      </v-list>\n      <v-speed-dial\n        v-model="fab"\n        fixed\n        bottom\n        right>\n        <template #activator>\n          <v-btn\n            v-model="fab"\n            color="blue darken-1"\n            dark\n            fab>\n            <v-icon v-if="fab">\n              mdi-close\n            </v-icon>\n            <v-icon v-else>\n              mdi-plus\n            </v-icon>\n          </v-btn>\n        </template>\n        <v-btn\n          color="blue darken-1"\n          dark\n          small\n          fab\n          @click="addFolder">\n          <v-icon>mdi-folder</v-icon>\n        </v-btn>\n        <v-btn\n          color="blue darken-1"\n          dark\n          small\n          fab\n          @click="addBookmark">\n          <v-icon>mdi-star</v-icon>\n        </v-btn>\n        <v-btn\n          color="blue darken-1"\n          dark\n          small\n          fab\n          @click="importBookmarks">\n          <v-icon>mdi-import</v-icon>\n        </v-btn>\n      </v-speed-dial>\n    </v-main>\n\n    <DialogEditBookmark\n      v-if="isAddingBookmark"\n      :is-new="true"\n      :display.sync="isAddingBookmark"\n      :tree="tree"\n      :parent-folder="currentFolderId"\n      @save="createBookmark($event)" />\n    <DialogEditFolder\n      v-if="isAddingFolder"\n      :is-new="true"\n      :display.sync="isAddingFolder"\n      :tree="tree"\n      :parent-folder="currentFolderId"\n      @save="createFolder($event)" />\n    <DialogEditBookmark\n      v-if="isEditingBookmark"\n      :is-new="false"\n      :bookmark="currentlyEditedBookmark"\n      :tree="tree"\n      :display.sync="isEditingBookmark"\n      @save="editBookmark($event)" />\n    <DialogEditFolder\n      v-if="isEditingFolder"\n      :is-new="false"\n      :folder="currentlyEditedFolder"\n      :display.sync="isEditingFolder"\n      :tree="tree"\n      @save="editFolder($event)" />\n    <DialogImportBookmarks\n      v-if="isImportingBookmarks"\n      :parent-folder="currentFolderId"\n      :display.sync="isImportingBookmarks"\n      :account-id="id" />\n  </div>\n</template>\n\n<script>\nimport Drawer from \'../../components/native/Drawer\'\nimport DialogEditFolder from \'../../components/native/DialogEditFolder\'\nimport DialogEditBookmark from \'../../components/native/DialogEditBookmark\'\nimport FaviconImage from \'../../components/native/FaviconImage\'\nimport { routes } from \'../../NativeRouter\'\nimport { Bookmark, Folder } from \'../../../lib/Tree\'\nimport { actions } from \'../../store/definitions\'\nimport { App } from \'@capacitor/app\'\nimport sortBy from \'lodash/sortBy\'\nimport DialogImportBookmarks from \'../../components/native/DialogImportBookmarks\'\n\nexport default {\n  name: \'Tree\',\n  components: { DialogImportBookmarks, FaviconImage, DialogEditBookmark, DialogEditFolder, Drawer },\n  filters: {\n    hostname(url) {\n      try {\n        return new URL(url).hostname\n      } catch (e) {\n        console.error(`${e}: ${url}`)\n        return \'(bad url)\'\n      }\n    }\n  },\n  data() {\n    return {\n      currentFolderId: 0,\n      drawer: false,\n      searchQuery: \'\',\n      isEditingFolder: false,\n      currentlyEditedFolder: null,\n      isEditingBookmark: false,\n      currentlyEditedBookmark: null,\n      isAddingBookmark: false,\n      isAddingFolder: false,\n      isImportingBookmarks: false,\n      fab: false,\n      searchDebounceTimer: null,\n      sortIcons: {\n        title: \'mdi-sort-alphabetical-ascending\',\n        url: \'mdi-sort-bool-ascending\',\n        index: \'mdi-sort-ascending\'\n      },\n      sortBy: \'index\',\n      syncProgress: 0,\n    }\n  },\n  computed: {\n    id() {\n      return this.$route.params.accountId\n    },\n    loading() {\n      return (!this.$store.state.accounts[this.id] || !this.$store.state.accounts[this.id].data || !Object.keys(this.$store.state.accounts[this.id].data).length || !this.tree)\n    },\n    tree() {\n      return this.$store.state.tree\n    },\n    syncing() {\n      if (this.loading) {\n        return false\n      }\n      return this.$store.state.accounts[this.id].data.syncing\n    },\n    scheduled() {\n      if (this.loading) {\n        return false\n      }\n      return this.$store.state.accounts[this.id].data.scheduled\n    },\n    syncError() {\n      if (this.loading) {\n        return false\n      }\n      return this.$store.state.accounts[this.id].data.error\n    },\n    useNetwork() {\n      if (this.loading) {\n        return false\n      }\n      return this.$store.state.accounts[this.id].data.allowNetwork\n    },\n    items() {\n      if (!this.currentFolder) {\n        return []\n      }\n      let items\n      if (this.searchQuery && this.searchQuery.trim().length >= 2) {\n        return this.search(this.searchQuery.toLowerCase().trim(), this.currentFolder)\n      } else {\n        items = this.currentFolder.children\n      }\n      if (this.sortBy !== \'index\') {\n        return sortBy(items, [(item) => {\n          if (this.sortBy === \'url\') {\n            if (item.url) {\n              try {\n                return new URL(item.url).hostname\n              } catch (e) {\n                return item.url.toLowerCase()\n              }\n            } else {\n              return \'0000000\' + item.title.toLowerCase() // folders to the top\n            }\n          }\n          return item.type === \'folder\' ? \'0000000\' + item.title.toLowerCase() : item[this.sortBy].toLowerCase()\n        }])\n      } else {\n        return items\n      }\n    },\n    otherSearchItems() {\n      if (!this.currentFolder && (!this.searchQuery || this.searchQuery.trim().length < 2)) {\n        return []\n      }\n      return this.search(this.searchQuery.toLowerCase().trim(), this.tree).filter(item => !this.items.includes(item))\n    },\n    routes() {\n      return routes\n    },\n    currentAccount() {\n      return this.$store.state.accounts[this.id]\n    },\n    currentFolder() {\n      return this.findItem(this.currentFolderId, this.tree)\n    },\n    breadcrumbs() {\n      const folders = [this.currentFolder]\n      while (this.tree && folders[folders.length - 1 ] && String(folders[folders.length - 1 ].id) !== String(this.tree.id)) {\n        folders.push(this.findItem(folders[folders.length - 1 ].parentId, this.tree))\n      }\n      return folders.reverse()\n    },\n  },\n  watch: {\n    async $route() {\n      await this.$store.dispatch(actions.LOAD_TREE, this.$route.params.accountId)\n      this.sortBy = this.$store.state.accounts[this.id].data.sortBy || \'index\'\n    },\n    async syncing(current, previous) {\n      if (!current && previous) {\n        this.syncProgress = 1\n        setTimeout(() => { this.syncProgress = 0 }, 1000)\n      } else {\n        this.syncProgress = current\n      }\n      if (!current) {\n        await this.$store.dispatch(actions.LOAD_TREE, this.$route.params.accountId)\n      }\n    },\n    async sortBy(current) {\n      await this.$store.dispatch(actions.SET_SORTBY, {accountId: this.$route.params.accountId, sortBy: current})\n    }\n  },\n  mounted() {\n    this.$store.dispatch(actions.LOAD_TREE, this.$route.params.accountId)\n    this.sortBy = this.$store.state.accounts[this.id].data.sortBy || \'index\'\n    App.addListener(\'resume\', () => this.$store.dispatch(actions.LOAD_TREE_FROM_DISK, this.$route.params.accountId))\n  },\n  backButton() {\n    this.goBack()\n  },\n  methods: {\n    clickItem(item) {\n      if (item.url) {\n        this.$store.dispatch(actions.COUNT_BOOKMARK_CLICK, {accountId: this.$route.params.accountId, bookmark: item})\n        window.location = item.url\n      } else {\n        this.searchQuery = \'\'\n        this.currentFolderId = item.id\n      }\n    },\n    findItem(id, tree) {\n      if (!tree) {\n        return null\n      }\n      if (tree.id === id) {\n        return tree\n      }\n      if (tree.url) {\n        return false\n      }\n      return tree.findFolder(id)\n    },\n    onSearch(query) {\n      clearTimeout(this.searchDebounceTimer)\n      this.searchDebounceTimer = setTimeout(() => {\n        this.searchQuery = query\n      }, 500)\n    },\n    search(query, tree) {\n      return Object.values(tree.index.bookmark)\n        .filter(item => {\n          const matchTitleFully = item.title ? query.split(\' \').every(term => item.title.toLowerCase().split(\' \').some(word => word === term)) : false\n          const matchTitlePartially = item.title ? query.split(\' \').every(term => item.title.toLowerCase().includes(term)) : false\n          const matchUrl = query.split(\' \').every(term => item.url.toLowerCase().includes(term))\n          return matchUrl || matchTitleFully || matchTitlePartially\n        })\n        .sort((a, b) => {\n          const matchTitlePartiallyA = a.title ? query.split(\' \').every(term => a.title.toLowerCase().includes(term)) : false\n          const matchTitlePartiallyB = b.title ? query.split(\' \').every(term => b.title.toLowerCase().includes(term)) : false\n          return matchTitlePartiallyA ? (matchTitlePartiallyB ? 0 : -1) : 1\n        })\n        .sort((a, b) => {\n          const matchTitleA = a.title ? query.split(\' \').every(term => a.title.toLowerCase().split(\' \').some(word => word === term)) : false\n          const matchTitleB = b.title ? query.split(\' \').every(term => b.title.toLowerCase().split(\' \').some(word => word === term)) : false\n          return matchTitleA ? (matchTitleB ? 0 : -1) : 1\n        })\n    },\n    goBack() {\n      if (this.isAddingBookmark) {\n        this.isAddingBookmark = false\n        return\n      }\n      if (this.isEditingBookmark) {\n        this.isEditingBookmark = false\n        return\n      }\n      if (this.isAddingFolder) {\n        this.isAddingFolder = false\n        return\n      }\n      if (this.isEditingFolder) {\n        this.isEditingFolder = false\n        return\n      }\n      if (this.searchQuery) {\n        this.searchQuery = \'\'\n        return\n      }\n      if (typeof this.currentFolder.parentId !== \'undefined\') {\n        this.currentFolderId = this.currentFolder.parentId\n        return\n      }\n      App.exitApp()\n    },\n    editItem(item) {\n      if (item.url) {\n        this.currentlyEditedBookmark = item\n        this.isEditingBookmark = true\n      } else {\n        this.currentlyEditedFolder = item\n        this.isEditingFolder = true\n      }\n    },\n    deleteItem(item) {\n      if (!confirm(this.t(\'DescriptionReallydeleteitem\'))) {\n        return\n      }\n      if (item.type === \'bookmark\') {\n        this.$store.dispatch(actions.DELETE_BOOKMARK, {\n          accountId: this.id,\n          bookmark: item\n        })\n      } else {\n        this.$store.dispatch(actions.DELETE_FOLDER, {\n          accountId: this.id,\n          folder: item\n        })\n      }\n    },\n    addBookmark() {\n      this.isAddingBookmark = true\n    },\n    importBookmarks() {\n      this.isImportingBookmarks = true\n    },\n    createBookmark(props) {\n      this.$store.dispatch(actions.CREATE_BOOKMARK, {\n        accountId: this.id,\n        bookmark: new Bookmark({ id: null, parentId: this.currentFolderId, ...props })\n      })\n    },\n    addFolder() {\n      this.isAddingFolder = true\n    },\n    createFolder(props) {\n      this.$store.dispatch(actions.CREATE_FOLDER, {\n        accountId: this.id,\n        folder: new Folder({...props, id: null, parentId: this.currentFolderId})\n      })\n    },\n    editFolder(props) {\n      this.$store.dispatch(actions.EDIT_FOLDER, {\n        accountId: this.id,\n        folder: new Folder({...this.currentlyEditedFolder, ...props})\n      })\n    },\n    editBookmark(props) {\n      this.$store.dispatch(actions.EDIT_BOOKMARK, {\n        accountId: this.id,\n        bookmark: new Bookmark({...this.currentlyEditedBookmark, ...props})\n      })\n    },\n    shareBookmark(item) {\n      this.$store.dispatch(actions.SHARE_BOOKMARK, new Bookmark(item))\n    },\n    onTriggerSync(direction) {\n      if (this.syncing || this.scheduled) {\n        return\n      }\n      this.currentAccount.data.syncing = 0.0001 // faaast\n      switch (direction) {\n        case \'down\':\n          this.$store.dispatch(actions.TRIGGER_SYNC_DOWN, this.id)\n          break\n        case \'up\':\n          this.$store.dispatch(actions.TRIGGER_SYNC_UP, this.id)\n          break\n        default:\n          this.$store.dispatch(actions.TRIGGER_SYNC, this.id)\n      }\n    },\n    onForceSync() {\n      if (confirm(this.t(\'DescriptionScheduledforcesync\'))) {\n        this.$store.dispatch(actions.FORCE_SYNC, this.id)\n      }\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n.loading {\n  margin: 45vh 45vw;\n}\n\n.sync--active {\n  animation: spin 2s infinite linear;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(360deg);\n  }\n  99.9% {\n    transform: rotate(0deg);\n  }\n}\n\n.sync-dropdown-hint::after {\n  content: \'\';\n  position: absolute;\n  font-size: 0.45em;\n  top: 30px;\n  left: 30px;\n}\n\n.list-full-height {\n  min-height: 95vh;\n}\n</style>\n'],sourceRoot:""}]);const o=a},71050:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r=n(16562),s=n(14569),i=n(71671),a=n(30089),o=n(21253),l=n(5031),c=n(46381),d=(n(89463),function(){var t=this,e=t._self._c;return e("div",[e("Drawer",{attrs:{visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}}),t._v(" "),e(r.A,{attrs:{absolute:"",app:""}},[e(s.A,{staticClass:"mr-2 ml-n2",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),e(i.A,[t._v(t._s(t.t("LabelAbout")))])],1),t._v(" "),e(c.A,[e(l.A,[e(a.A,[e(l.A,{staticClass:"pa-5"},[e(o.ri,[t._v("\n            "+t._s(t.t("LabelCurrentversion"))+"\n          ")]),t._v(" "),e(o.OQ,[e("p",[t._v(t._s(t.t("DescriptionCurrentversion")))]),t._v(" "),e("p",[t._v("v"+t._s(t.VERSION))])])],1)],1),t._v(" "),e(a.A,{staticClass:"mt-3"},[e(l.A,{staticClass:"pa-5"},[e(o.ri,[t._v("\n            "+t._s(t.t("LabelContributors"))+"\n          ")]),t._v(" "),e(o.OQ,[e("p",[t._v(t._s(t.t("DescriptionContributors")))]),t._v(" "),t._l(t.CONTRIBUTORS,(function(n){return e("div",{key:n.name},[e("h4",{staticClass:"mt-2"},[e("a",{staticClass:"name",attrs:{href:n.profile}},[t._v(t._s(n.name))])]),t._v(" "),t._l(n.contributions,(function(n){return e("span",{key:n,attrs:{title:t.CONTRIBUTION_TYPES[n].description}},[t._v(t._s(t.CONTRIBUTION_TYPES[n].symbol)+" "+t._s(t.CONTRIBUTION_TYPES[n].description)+"")])}))],2)}))],2)],1)],1)],1)],1)],1)});d._withStripped=!0,n(26910);var u=n(80214),p=n(8330),v=n(34626);const h={name:"About",components:{Drawer:u.A},data:()=>({drawer:!1,VERSION:p.rE,CONTRIBUTORS:v.contributors.sort(((t,e)=>e.contributions.length-t.contributions.length)),CONTRIBUTION_TYPES:m})},m={a11y:{symbol:"",description:"Accessibility"},audio:{symbol:"",description:"Audio"},blog:{symbol:"",description:"Blogposts"},bug:{symbol:"",description:"Bug reports"},business:{symbol:"",description:"Business development"},code:{symbol:"",description:"Code"},content:{symbol:"",description:"Content"},data:{symbol:"",description:"Data"},design:{symbol:"",description:"Design"},doc:{symbol:"",description:"Documentation"},eventOrganizing:{symbol:"",description:"Event Organizing"},example:{symbol:"",description:"Examples"},financial:{symbol:"",description:"Financial"},fundingFinding:{symbol:"",description:"Funding Finding"},ideas:{symbol:"",description:"Ideas, Planning, & Feedback"},infra:{symbol:"",description:"Infrastructure (Hosting, Build-Tools, etc)"},maintenance:{symbol:"",description:"Maintenance"},mentoring:{symbol:"",description:"Mentoring"},platform:{symbol:"",description:"Packaging/porting to new platform"},plugin:{symbol:"",description:"Plugin/utility libraries"},projectManagement:{symbol:"",description:"Project Management"},question:{symbol:"",description:"Answering Questions"},research:{symbol:"",description:"Research"},review:{symbol:"",description:"Reviewed Pull Requests"},security:{symbol:"",description:"Security"},talk:{symbol:"",description:"Talks"},test:{symbol:"",description:"Tests"},tool:{symbol:"",description:"Tools"},translation:{symbol:"",description:"Translation"},tutorial:{symbol:"",description:"Tutorials"},userTesting:{symbol:"",description:"User Testing"},video:{symbol:"",description:"Videos"}},b=h,f=(0,n(14486).A)(b,d,[],!1,null,"5f52f8b0",null).exports},78742:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(5e3);const s={methods:{t:(t,e)=>r.i18n.getMessage(t,e)}}},80214:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var r=n(39805),s=n(62029),i=n(74469),a=n(87450),o=n(479),l=n(5426),c=n(45475),d=n(72769),u=function(){var t=this,e=t._self._c;return e(d.A,{attrs:{value:t.visible,app:"",temporary:"",width:320},on:{input:function(e){return t.$emit("update:visible")}}},[e(a.A,{attrs:{"two-line":""}},[e(o.A,[e("img",{attrs:{src:"icons/logo.svg"}})]),t._v(" "),e(l.pr,[e(l.UZ,{staticClass:"text-h6"},[t._v("\n        Floccus\n      ")]),t._v(" "),e(l.w,[t._v("\n        "+t._s(t.t("LabelSlugline"))+"\n      ")])],1)],1),t._v(" "),e(r.A),t._v(" "),e(i.A,{attrs:{dense:"",nav:""}},[t._l(t.accounts,(function(n){return[e(a.A,{key:n.id,attrs:{link:"",to:{name:t.routes.TREE,params:{accountId:n.id}}}},[e(c.A,[e(s.A,[t._v(t._s(t._f("accountIcon")(n.data.type)))])],1),t._v(" "),e(l.UZ,[t._v(t._s(n.label))])],1)]})),t._v(" "),e(a.A,{key:"addaccount",attrs:{link:"",to:{name:t.routes.NEW_ACCOUNT}}},[e(c.A,[e(s.A,[t._v("mdi-plus")])],1),t._v(" "),e(l.pr,[e(l.UZ,[t._v(t._s(t.t("LabelNewAccount")))])],1)],1),t._v(" "),e(r.A),t._v(" "),e(a.A,{key:"export",attrs:{link:"",to:{name:t.routes.IMPORTEXPORT}}},[e(c.A,[e(s.A,[t._v("mdi-export")])],1),t._v(" "),e(l.pr,[e(l.UZ,[t._v(t._s(t.t("LabelImportExport")))])],1)],1),t._v(" "),e(a.A,{key:"bugs",attrs:{link:"",href:"https://github.com/floccusaddon/floccus/issues"}},[e(c.A,[e(s.A,[t._v("mdi-bug-outline")])],1),t._v(" "),e(l.pr,[e(l.UZ,[t._v(t._s(t.t("LabelReportproblem")))])],1)],1),t._v(" "),e(a.A,{key:"about",attrs:{link:"",to:{name:t.routes.ABOUT}}},[e(c.A,[e(s.A,[t._v("mdi-information-outline")])],1),t._v(" "),e(l.pr,[e(l.UZ,[t._v(t._s(t.t("LabelAbout")))])],1)],1)],2)],1)};u._withStripped=!0;var p=n(91149);const v={name:"Drawer",filters:{accountIcon:t=>({"nextcloud-bookmarks":"mdi-cloud",linkwarden:"mdi-link-box-variant-outline",webdav:"mdi-folder-network",git:"mdi-source-repository","google-drive":"mdi-google-drive"}[t])},props:{visible:{type:Boolean}},data:()=>({}),computed:{accounts(){return Object.values(this.$store.state.accounts)},routes:()=>p.J}},h=(0,n(14486).A)(v,u,[],!1,null,"0086ae49",null).exports},83833:(t,e,n)=>{"use strict";n.d(e,{A:()=>_});var r=n(23037),s=n(30089),i=n(21253),a=n(1231),o=n(47261),l=n(62029),c=n(88557),d=n(19276),u=n(33457),p=n(22369),v=n(89857),h=n(55305),m=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("div",{staticClass:"text-h6"},[t._v("\n      "+t._s(t.t("LabelLocaltarget"))+"\n    ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n      "+t._s(t.t("DescriptionLocaltarget"))+"\n    ")]),t._v(" "),e(u.A,{attrs:{column:""},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[e(d.A,{attrs:{value:"folder"},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n          "+t._s(t.t("LabelLocalfolder"))+"\n          "),e(v.A,{staticClass:"ml-2",attrs:{readonly:""},on:{click:t.onTriggerFinder},scopedSlots:t._u([{key:"append",fn:function(){return[e(l.A,{attrs:{color:"blue darken-1"},on:{click:t.onTriggerFinder}},[t._v("\n                mdi-folder\n              ")])]},proxy:!0}]),model:{value:t.path,callback:function(e){t.path=e},expression:"path"}})]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"caption ml-8 mb-6"},[t._v("\n        "+t._s(t.t("DescriptionLocalfolder"))+"\n      ")]),t._v(" "),e(d.A,{attrs:{label:t.t("LabelSyncTabs"),value:"tabs"}}),t._v(" "),e("div",{staticClass:"caption ml-8 mb-2"},[t._v("\n        "+t._s(t.t("DescriptionSyncTabs"))+"\n      ")])],1)],1),t._v(" "),e(o.A,{style:{height:"500px"},attrs:{"max-width":"600"},model:{value:t.finder,callback:function(e){t.finder=e},expression:"finder"}},[e(s.A,[e(p.A,{attrs:{"no-gutters":""}},[e(a.A,{staticClass:"flex-grow-1"},[e(i.ri,{staticClass:"headline"},[t._v("\n            "+t._s(t.t("LabelLocalfolder"))+"\n          ")])],1),t._v(" "),e(a.A,{staticClass:"flex-grow-0"},[e(r.A,{staticClass:"primary ma-2",on:{click:t.onSave}},[t._v("\n            save\n          ")])],1)],1),t._v(" "),t.folders.length?e(h.A,{staticClass:"pa-4",attrs:{activatable:"","item-text":"title","item-key":"id",active:[t.value],open:t.folders.length?[t.folders[0].id]:[],items:t.folders,dense:""},on:{"update:active":t.onUpdateSelection},scopedSlots:t._u([{key:"prepend",fn:function(n){let{open:r}=n;return[e(l.A,[t._v("\n            "+t._s(r?"mdi-folder-open":"mdi-folder")+"\n          ")])]}},{key:"label",fn:function(e){let{item:n}=e;return[t._v("\n          "+t._s(n.title||t.t("LabelUntitledfolder"))+"\n        ")]}}],null,!1,1204542040)}):e(c.A,{staticClass:"ma-8",attrs:{color:"primary",indeterminate:""}})],1)],1)],1)};m._withStripped=!0,n(23792),n(3362),n(98992),n(54520),n(62953);var b=n(30640);const f={name:"OptionSyncFolder",props:{value:{type:String,default:void 0}},data(){return{selectedLocalRoot:this.value,path:"",mode:"folder",finder:!1,folders:[]}},watch:{value(t){this.selectedLocalRoot=this.value,this.updatePath()},mode(){"tabs"===this.mode&&this.$emit("input","tabs"),"folder"===this.mode&&"tabs"===this.value&&this.$emit("input","")}},created(){this.updatePath()},methods:{async updatePath(){if("tabs"===this.mode||"tabs"===this.value)return void(this.mode="tabs");const t=(await Promise.resolve().then(n.t.bind(n,67083,23))).default;this.value?this.path=decodeURIComponent(await t.getPathFromLocalId(this.value))+"/":this.path=this.t("LabelNewfolder")},async onTriggerFinder(){const t=(await Promise.resolve().then(n.bind(n,7737))).default;this.selectedLocalRoot=this.value,this.finder=!0,this.folders=this.filterOutBookmarks(await(0,b.isVivaldi)()?await t.bookmarks.getSubTree("1"):await t.bookmarks.getTree())},filterOutBookmarks(t){return t.filter((t=>(t.children&&(t.children=this.filterOutBookmarks(t.children)),!t.url)))},onUpdateSelection(t){this.selectedLocalRoot=t[0]},onSave(){this.finder=!1,this.$emit("input",this.selectedLocalRoot)}}},_=(0,n(14486).A)(f,m,[],!1,null,"3d2a10bd",null).exports},84559:(t,e,n)=>{"use strict";n.d(e,{A:()=>S});var r=n(23037),s=n(30089),i=n(5031),a=n(39805),o=n(50877),l=n(62029),c=n(19276),d=n(33457),u=n(277),p=n(3016),v=n(1904),h=n(72031),m=n(81361),b=n(89857),f=(n(89463),function(){var t=this,e=t._self._c;return e(i.A,[e(s.A,{staticClass:"options mt-3"},[e(u.A,{model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}},[e(v.vY,[e(h.A,{attrs:{complete:t.currentStep>0,step:"0"}}),t._v(" "),e(a.A),t._v(" "),e(h.A,{attrs:{complete:t.currentStep>1,step:"1"}}),t._v(" "),e(a.A),t._v(" "),e(h.A,{attrs:{complete:t.currentStep>2,step:"2"}}),t._v(" "),e(a.A),t._v(" "),e(h.A,{attrs:{step:"3",complete:t.currentStep>3}}),t._v(" "),e(a.A),t._v(" "),e(h.A,{attrs:{step:"4",complete:t.currentStep>4}})],1),t._v(" "),e(v.WV,[e(p.A,{attrs:{step:"0"}},[e("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.t("LabelChooseadapter"))+"\n          ")]),t._v(" "),e(o.A,[e(d.A,{model:{value:t.adapter,callback:function(e){t.adapter=e},expression:"adapter"}},t._l(t.adapters,(function(n){return e("div",{key:n.type},[e(c.A,{attrs:{value:n.type},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"heading"},[t._v("\n                      "+t._s(n.label)+"\n                    ")])]},proxy:!0}],null,!0)}),t._v(" "),e("div",{staticClass:"caption pl-8 mb-5"},[t._v("\n                  "+t._s(n.description)+"\n                ")])],1)})),0)],1),t._v(" "),e("div",{staticClass:"d-flex flex-row-reverse"},[e(r.A,{staticClass:"primary",on:{click:function(e){t.currentStep++}}},[t._v("\n              "+t._s(t.t("LabelContinue"))+"\n            ")]),t._v(" "),e(r.A,{staticClass:"mr-2",attrs:{to:{name:"IMPORTEXPORT"}}},[e(l.A,[t._v("mdi-export")]),t._v(" "),t.isBrowser?[t._v("\n                "+t._s(t.t("LabelImportExport"))+"\n              ")]:t._e()],2)],1)],1),t._v(" "),e(p.A,{attrs:{step:"1"}},[e("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.t("LabelAccountlabel"))+"\n          ")]),t._v(" "),e(o.A,[e(b.A,{staticClass:"mt-2 mb-4",attrs:{"append-icon":"mdi-label",label:t.t("LabelAccountlabel"),hint:t.t("DescriptionAccountlabel"),"persistent-hint":!0},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.currentStep++}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n              "+t._s(t.t("LabelBack"))+"\n            ")]),t._v(" "),e(r.A,{staticClass:"primary",on:{click:function(e){t.currentStep++}}},[t._v("\n              "+t._s(t.t("LabelContinue"))+"\n            ")])],1)],1),t._v(" "),e(p.A,{attrs:{step:"2"}},["nextcloud-bookmarks"===t.adapter?[e("div",{staticClass:"headline"},[t._v("\n              "+t._s(t.t("LabelServersetup"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{rules:[t.validateUrl],label:t.t("LabelNextcloudurl"),loading:t.isServerTestRunning||t.isLoginFlowRunning,"error-messages":t.serverisNotHttps||t.serverTestError||t.loginFlowError},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.testNextcloudServer.apply(null,arguments)}},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},[e("template",{slot:"append-outer"},[t.serverTestSuccessful?e(l.A,{attrs:{color:"green",title:"Server connection successful"}},[t._v("\n                  mdi-check\n                ")]):t._e()],1)],2),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n                "+t._s(t.t("LabelBack"))+"\n              ")]),t._v(" "),t.serverTestSuccessful?t._e():e(r.A,{staticClass:"primary",on:{click:t.testNextcloudServer}},[t._v("\n                "+t._s(t.t("LabelConnect"))+"\n              ")]),t._v(" "),t.serverTestSuccessful?[t.isLoginFlowRunning?t._e():e(r.A,{staticClass:"primary",on:{click:t.onFlowStart}},[t._v("\n                  "+t._s(t.t("LabelLoginFlowStart"))+"\n                ")]),t._v(" "),t.isLoginFlowRunning?e(r.A,{on:{click:t.onFlowStop}},[t._v("\n                  "+t._s(t.t("LabelLoginFlowStop"))+"\n                ")]):t._e()]:t._e()],2)]:"linkwarden"===t.adapter?[e("div",{staticClass:"headline"},[t._v("\n              "+t._s(t.t("LabelServersetup"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{rules:[t.validateUrl],label:t.t("LabelLinkwardenurl"),loading:t.isServerTestRunning,"error-messages":t.serverTestError||t.serverisNotHttps},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}),t._v(" "),e(b.A,{attrs:{label:t.t("LabelUsername")},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),e(b.A,{attrs:{label:t.t("LabelAccesstoken"),"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n                "+t._s(t.t("LabelBack"))+"\n              ")]),t._v(" "),e(r.A,{staticClass:"primary",on:{click:t.testLinkwardenServer}},[t._v("\n                "+t._s(t.t("LabelContinue"))+"\n              ")])],1)]:"webdav"===t.adapter?[e("div",{staticClass:"headline"},[t._v("\n              "+t._s(t.t("LabelServersetup"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{rules:[t.validateUrl],label:t.t("LabelWebdavurl"),loading:t.isServerTestRunning,"error-messages":t.serverTestError||t.serverisNotHttps},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}),t._v(" "),e(b.A,{attrs:{label:t.t("LabelUsername")},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),e(b.A,{attrs:{label:t.t("LabelPassword"),"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),e(b.A,{staticClass:"mt-2",attrs:{label:t.t("LabelPassphrase"),hint:t.t("DescriptionPassphrase"),"persistent-hint":!0,"append-icon":t.showPassphrase?"mdi-eye":"mdi-eye-off",type:t.showPassphrase?"text":"password"},on:{"click:append":function(e){t.showPassphrase=!t.showPassphrase}},model:{value:t.passphrase,callback:function(e){t.passphrase=e},expression:"passphrase"}}),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n                "+t._s(t.t("LabelBack"))+"\n              ")]),t._v(" "),e(r.A,{staticClass:"primary",on:{click:t.testWebdavServer}},[t._v("\n                "+t._s(t.t("LabelContinue"))+"\n              ")])],1)]:"git"===t.adapter?[e("div",{staticClass:"headline"},[t._v("\n              "+t._s(t.t("LabelServersetup"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{rules:[t.validateUrl],label:t.t("LabelGiturl")},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}),t._v(" "),e(b.A,{attrs:{label:t.t("LabelUsername")},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),e(b.A,{attrs:{label:t.t("LabelPassword"),"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n                "+t._s(t.t("LabelBack"))+"\n              ")]),t._v(" "),e(r.A,{staticClass:"primary",on:{click:function(e){t.currentStep++}}},[t._v("\n                "+t._s(t.t("LabelContinue"))+"\n              ")])],1)]:"google-drive"===t.adapter?[e("div",{staticClass:"headline"},[t._v("\n              "+t._s(t.t("LabelGoogledrivesetup"))+"\n            ")]),t._v(" "),e(r.A,{attrs:{color:"primary"},on:{click:t.loginGoogleDrive}},[t._v("\n              "+t._s(t.t("LabelLogingoogle"))+"\n            ")]),t._v(" "),e("p",{staticClass:"mt-1"},[t._v("\n              "+t._s(t.t("DescriptionLogingoogle"))+"\n            ")]),t._v(" "),e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n              "+t._s(t.t("LabelBack"))+"\n            ")])]:t._e()],2),t._v(" "),e(p.A,{attrs:{step:"3"}},[e("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.t("LabelSyncfoldersetup"))+"\n          ")]),t._v(" "),"nextcloud-bookmarks"===t.adapter?[e("div",{staticClass:"text-h6"},[t._v("\n              "+t._s(t.t("LabelServerfolder"))+"\n            ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n              "+t._s(t.t("DescriptionServerfolder"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{placeholder:"/",rules:[t.validateServerRoot],label:t.t("LabelServerfolder")},model:{value:t.serverRoot,callback:function(e){t.serverRoot=e},expression:"serverRoot"}})]:t._e(),t._v(" "),"linkwarden"===t.adapter?[e("div",{staticClass:"text-h6"},[t._v("\n              "+t._s(t.t("LabelServerfolder"))+"\n            ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n              "+t._s(t.t("DescriptionServerfolderlinkwarden"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{label:t.t("LabelServerfolder")},model:{value:t.serverFolder,callback:function(e){t.serverFolder=e},expression:"serverFolder"}})]:t._e(),t._v(" "),"webdav"===t.adapter?[e("div",{staticClass:"text-h6"},[t._v("\n              "+t._s(t.t("LabelBookmarksfile"))+"\n            ")]),t._v(" "),e(b.A,{staticClass:"mb-2",attrs:{"append-icon":"mdi-file-document",rules:[t.validateBookmarksFile],label:t.t("LabelBookmarksfile"),hint:t.t("DescriptionBookmarksfile"),"persistent-hint":!0},model:{value:t.bookmark_file,callback:function(e){t.bookmark_file=e},expression:"bookmark_file"}}),t._v(" "),e("OptionFileType",{model:{value:t.bookmark_file_type,callback:function(e){t.bookmark_file_type=e},expression:"bookmark_file_type"}})]:t._e(),t._v(" "),"git"===t.adapter?[e("div",{staticClass:"text-h6"},[t._v("\n              "+t._s(t.t("LabelBookmarksfile"))+"\n            ")]),t._v(" "),e(b.A,{staticClass:"mb-2",attrs:{"append-icon":"mdi-file-document",rules:[t.validateBookmarksFile],label:t.t("LabelBookmarksfile"),hint:t.t("DescriptionBookmarksfilegit"),"persistent-hint":!0},model:{value:t.bookmark_file,callback:function(e){t.bookmark_file=e},expression:"bookmark_file"}}),t._v(" "),e("OptionFileType",{model:{value:t.bookmark_file_type,callback:function(e){t.bookmark_file_type=e},expression:"bookmark_file_type"}}),t._v(" "),e(b.A,{staticClass:"mb-2",attrs:{label:t.t("LabelGitbranch")},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})]:t._e(),t._v(" "),"google-drive"===t.adapter?[e("div",{staticClass:"text-h6"},[t._v("\n              "+t._s(t.t("LabelBookmarksfile"))+"\n            ")]),t._v(" "),e(b.A,{attrs:{"append-icon":"mdi-file-document",rules:[t.validateBookmarksFileGoogle],label:t.t("LabelBookmarksfile"),hint:t.t("DescriptionBookmarksfilegoogle"),"persistent-hint":!0},model:{value:t.bookmark_file,callback:function(e){t.bookmark_file=e},expression:"bookmark_file"}}),t._v(" "),e(b.A,{staticClass:"mt-2",attrs:{"append-icon":t.showPassphrase?"mdi-eye":"mdi-eye-off",type:t.showPassphrase?"text":"password",label:t.t("LabelPassphrase"),hint:t.t("DescriptionPassphrase"),"persistent-hint":!0},on:{"click:append":function(e){t.showPassphrase=!t.showPassphrase}},model:{value:t.passphrase,callback:function(e){t.passphrase=e},expression:"passphrase"}})]:t._e(),t._v(" "),t.isBrowser?e("OptionSyncFolder",{model:{value:t.localRoot,callback:function(e){t.localRoot=e},expression:"localRoot"}}):t._e(),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n              "+t._s(t.t("LabelBack"))+"\n            ")]),t._v(" "),e(r.A,{attrs:{disabled:!!t.isBrowser&&!t.localRoot,color:"primary"},on:{click:function(e){t.currentStep++}}},[t._v("\n              "+t._s(t.t("LabelContinue"))+"\n            ")])],1)],2),t._v(" "),e(p.A,{attrs:{step:"4"}},[e("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.t("LabelSyncbehaviorsetup"))+"\n          ")]),t._v(" "),e(m.A,{staticClass:"mt-0 pt-0",attrs:{"aria-label":t.t("LabelAutosync"),label:t.t("LabelAutosync"),dense:""},model:{value:t.enabled,callback:function(e){t.enabled=e},expression:"enabled"}}),t._v(" "),t.enabled?e("OptionSyncInterval",{model:{value:t.syncInterval,callback:function(e){t.syncInterval=e},expression:"syncInterval"}}):t._e(),t._v(" "),e("OptionSyncStrategy",{model:{value:t.strategy,callback:function(e){t.strategy=e},expression:"strategy"}}),t._v(" "),t.isBrowser?e("OptionNestedSync",{model:{value:t.nestedSync,callback:function(e){t.nestedSync=e},expression:"nestedSync"}}):t._e(),t._v(" "),"nextcloud-bookmarks"===t.adapter?e(m.A,{staticClass:"mt-0 pt-0 mb-4",attrs:{"aria-label":t.t("LabelClickcount"),label:t.t("LabelClickcount"),hint:t.t("DescriptionClickcount"),"persistent-hint":!0,dense:""},model:{value:t.clickCountEnabled,callback:function(e){t.clickCountEnabled=e},expression:"clickCountEnabled"}}):t._e(),t._v(" "),e("div",{staticClass:"d-flex flex-row justify-space-between"},[e(r.A,{on:{click:function(e){t.currentStep--}}},[t._v("\n              "+t._s(t.t("LabelBack"))+"\n            ")]),t._v(" "),e(r.A,{attrs:{color:"primary"},on:{click:function(e){return t.onCreate()}}},[t._v("\n              "+t._s(t.t("LabelContinue"))+"\n            ")])],1)],1),t._v(" "),e(p.A,{attrs:{step:"5"}},[e("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.t("LabelAccountcreated"))+" "),e(l.A,[t._v("mdi-check")])],1),t._v(" "),t.isBrowser?e("div",[t._v("\n            "+t._s(t.t("DescriptionAccountcreated"))+"\n          ")]):t._e()])],1)],1)],1)],1)});f._withStripped=!0,n(23792),n(3362),n(62953),n(3296),n(27208),n(48408);var _=n(95099),k=n(83833),y=n(50305),g=n(953),A=n(54321);const w={name:"NewAccount",components:{OptionFileType:n(56686).A,OptionNestedSync:A.A,OptionSyncStrategy:g.A,OptionSyncInterval:y.A,OptionSyncFolder:k.A},data(){return{currentStep:0,isServerTestRunning:!1,serverTestError:"",serverTestSuccessful:!1,loginFlowError:"",server:"https://",branch:"main",username:"",password:"",passphrase:"",refreshToken:"",bookmark_file:"bookmarks.xbel",bookmark_file_type:"xbel",serverFolder:"Floccus",serverRoot:"",localRoot:null,syncInterval:15,strategy:"default",enabled:!0,nestedSync:!0,showPassword:!1,showPassphrase:!1,clickCountEnabled:!1,label:"",adapter:"nextcloud-bookmarks",adapters:[{type:"nextcloud-bookmarks",label:this.t("LabelAdapternextcloudfolders"),description:this.t("DescriptionAdapternextcloudfolders")},{type:"linkwarden",label:this.t("LabelAdapterlinkwarden"),description:this.t("DescriptionAdapterlinkwarden")},{type:"webdav",label:this.t("LabelAdapterwebdav"),description:this.t("DescriptionAdapterwebdav")},{type:"git",label:this.t("LabelAdaptergit"),description:this.t("DescriptionAdaptergit")},{type:"google-drive",label:this.t("LabelAdaptergoogledrive"),description:this.t("DescriptionAdaptergoogledrive")}]}},computed:{isLoginFlowRunning(){return this.$store.state.loginFlow.isRunning},serverisNotHttps(){return this.server.startsWith("https")?"":this.t("DescriptionNonhttps")}},watch:{clickCountEnabled(){this.clickCountEnabled&&this.requestHistoryPermissions()}},backButton(){this.$router.push({name:"HOME"})},methods:{async onCreate(){const t=await this.$store.dispatch("CREATE_ACCOUNT",{type:this.adapter,url:this.server,username:this.username,password:this.password,enabled:this.enabled,label:this.label,..."nextcloud-bookmarks"===this.adapter&&{serverRoot:this.serverRoot,clickCountEnabled:this.clickCountEnabled},..."linkwarden"===this.adapter&&{serverFolder:this.serverFolder},..."git"===this.adapter&&{branch:this.branch},...("webdav"===this.adapter||"google-drive"===this.adapter||"git"===this.adapter)&&{bookmark_file:this.bookmark_file},...("webdav"===this.adapter||"google-drive"===this.adapter||"git"===this.adapter)&&{bookmark_file_type:this.bookmark_file_type},..."google-drive"===this.adapter&&{refreshToken:this.refreshToken},...this.passphrase&&{passphrase:this.passphrase},..."google-drive"===this.adapter&&this.passphrase&&{password:this.passphrase},...this.isBrowser&&{localRoot:this.localRoot},syncInterval:this.syncInterval,strategy:this.strategy,...this.isBrowser&&{nestedSync:this.nestedSync}});this.currentStep++,this.isBrowser||setTimeout((()=>{this.$router.push({name:"TREE",params:{accountId:t}}),this.$store.dispatch(_.o.TRIGGER_SYNC,t)}),2e3)},async testNextcloudServer(){this.isServerTestRunning=!0,this.serverTestError="";try{await this.$store.dispatch(_.o.TEST_NEXTCLOUD_SERVER,this.server),this.serverTestSuccessful=!0}catch(t){this.serverTestError=t.message}this.isServerTestRunning=!1},async testLinkwardenServer(){this.isServerTestRunning=!0,this.serverTestError="";try{await this.$store.dispatch(_.o.TEST_LINKWARDEN_SERVER,{rootUrl:this.server,username:this.username,token:this.password}),this.serverTestSuccessful=!0,this.currentStep++}catch(t){this.serverTestError=t.message}this.isServerTestRunning=!1},async testWebdavServer(){this.isServerTestRunning=!0,this.serverTestError="";try{await this.$store.dispatch(_.o.TEST_WEBDAV_SERVER,{rootUrl:this.server,username:this.username,password:this.password}),this.serverTestSuccessful=!0,this.currentStep++}catch(t){this.serverTestError=t.message}this.isServerTestRunning=!1},async loginGoogleDrive(){this.isBrowser&&await this.$store.dispatch(_.o.REQUEST_NETWORK_PERMISSIONS);const t=(await Promise.resolve().then(n.t.bind(n,42048,23))).default,{refresh_token:e,username:r}=await t.authorize();e&&(this.authorized=!0,this.refreshToken=e,this.username=r,this.currentStep++)},async onFlowStart(){this.loginFlowError=null;try{const t=await this.$store.dispatch(_.o.START_LOGIN_FLOW,this.server);this.username=t.username,this.password=t.password,this.currentStep++}catch(t){this.loginFlowError=t.message}},async onFlowStop(){await this.$store.dispatch("STOP_LOGIN_FLOW")},validateServerRoot:t=>!t||"/"===t||"/"===t[0]&&"/"!==t[t.length-1],validateUrl(t){try{const e=new URL(t);return Boolean(e)&&e.protocol.startsWith("http")}catch(t){return!1}},validateBookmarksFile:t=>"/"!==t[0]&&"/"!==t[t.length-1],validateBookmarksFileGoogle:t=>!t.includes("/"),requestHistoryPermissions(){this.$store.dispatch(_.o.REQUEST_HISTORY_PERMISSIONS)}}};n(51765);const S=(0,n(14486).A)(w,f,[],!1,null,"49374c54",null).exports},89648:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i}),n(33110);var r=n(43376),s=n.n(r);class i extends(s()){constructor(t){super(),this.server=t}static getDefaultValues(){return{type:"fake"}}setData(t){this.server=t}getData(){return JSON.parse(JSON.stringify(this.server))}getLabel(){return"Fake account (floccus)"}}},93538:(t,e,n)=>{"use strict";n.d(e,{A:()=>z});var r=n(90849),s=n(16562),i=n(14569),a=n(99928),o=n(26528),l=n(23037),c=n(30089),d=n(39805),u=n(62029),p=n(74469),v=n(87450),h=n(99360),m=n(479),b=n(5426),f=n(46381),_=n(43765),k=n(88557),y=n(46721),g=n(40005),A=n(70065),w=n(89857),S=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Drawer",{attrs:{visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}}),t._v(" "),e(s.A,{attrs:{absolute:"",app:""}},[t.tree&&t.currentFolderId!==t.tree.id?e(l.A,{staticClass:"mr-2 ml-n2",attrs:{icon:""},on:{click:t.goBack}},[e(u.A,[t._v("mdi-arrow-left")])],1):e(i.A,{staticClass:"mr-2 ml-n2",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),e(w.A,{attrs:{value:t.searchQuery,label:t.tree&&t.currentFolderId!==t.tree.id?t.t("LabelSearchfolder",[t.currentFolder.title]):t.t("LabelSearch"),solo:"",flat:"",dense:"",clearable:"","hide-details":""},on:{input:t.onSearch}}),t._v(" "),e(g.A),t._v(" "),e(_.A,{attrs:{bottom:"",left:"","open-on-hover":"","open-delay":450,disabled:Boolean(t.syncing)||Boolean(t.scheduled)||!t.currentAccount},scopedSlots:t._u([{key:"activator",fn:function(n){let{on:r,attrs:s}=n;return[e(l.A,t._g(t._b({class:{"sync-dropdown-hint":!Boolean(t.syncing)},attrs:{icon:"",disabled:!t.currentAccount,color:t.syncing||t.scheduled?"primary":""},on:{click:t.onTriggerSync}},"v-btn",s,!1),r),[e(u.A,{class:{"sync--active":Boolean(t.syncing)}},[t._v("\n            "+t._s(t.scheduled?"mdi-timer-sync-outline":"mdi-sync")+"\n          ")])],1)]}}])},[t._v(" "),e(p.A,[e(v.A,{on:{click:function(e){return t.onTriggerSync("up")}}},[e(m.A,[e(u.A,[t._v("mdi-arrow-up-bold")])],1),t._v(" "),e(b.UZ,[t._v("\n            "+t._s(t.t("LabelSyncUpOnce"))+"\n          ")])],1),t._v(" "),e(v.A,{on:{click:function(e){return t.onTriggerSync("down")}}},[e(m.A,[e(u.A,[t._v("mdi-arrow-down-bold")])],1),t._v(" "),e(b.UZ,[t._v("\n            "+t._s(t.t("LabelSyncDownOnce"))+"\n          ")])],1)],1)],1),t._v(" "),e(_.A,{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(n){let{on:r,attrs:s}=n;return[e(l.A,t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),r),[e(u.A,[t._v(t._s(t.sortIcons[t.sortBy]))])],1)]}}])},[t._v(" "),e(p.A,[e(v.A,{on:{click:function(e){t.sortBy="title"}}},[e(m.A,[e(u.A,[t._v(t._s(t.sortIcons.title))])],1),t._v(" "),e(b.UZ,[t._v("\n            "+t._s(t.t("LabelSorttitle"))+"\n          ")])],1),t._v(" "),e(v.A,{on:{click:function(e){t.sortBy="url"}}},[e(m.A,[e(u.A,[t._v(t._s(t.sortIcons.url))])],1),t._v(" "),e(b.UZ,[t._v("\n            "+t._s(t.t("LabelSorturl"))+"\n          ")])],1),t._v(" "),e(v.A,{on:{click:function(e){t.sortBy="index"}}},[e(m.A,[e(u.A,[t._v(t._s(t.sortIcons.index))])],1),t._v(" "),e(b.UZ,[t._v("\n            "+t._s(t.t("LabelSortcustom"))+"\n          ")])],1)],1)],1),t._v(" "),t.currentAccount?e(l.A,{attrs:{icon:"",to:{name:t.routes.ACCOUNT_OPTIONS,params:{accountId:t.currentAccount?t.currentAccount.id:0}}}},[e(u.A,[t._v("mdi-cog")])],1):t._e()],1),t._v(" "),e(f.A,[t.syncProgress?e(y.A,{attrs:{value:100*t.syncProgress||0,color:"blue darken-1"}}):t._e(),t._v(" "),e(c.A,[t.breadcrumbs.length>1?e(a.A,{attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"item",fn:function(n){let{item:r}=n;return[e(o.A,{on:{click:function(e){t.currentFolderId=r.id}}},[r.id===t.tree.id?[e(u.A,[t._v("mdi-home")])]:[t._v("\n              "+t._s(r.title)+"\n            ")]],2)]}}],null,!1,3183329395)}):t._e()],1),t._v(" "),Boolean(t.syncError)?e(r.A,{staticClass:"ma-1",attrs:{dense:"",outlined:"",text:"",type:"warning"}},[t._v("\n      "+t._s(t.syncError)+"\n    ")]):t._e(),t._v(" "),t.scheduled?e(r.A,{staticClass:"ma-1",attrs:{dense:"",outlined:"",text:"",type:"info"}},[t._v("\n      "+t._s(t.t("DescriptionSyncscheduled"))+"\n      "),e(l.A,{staticClass:"float-right",attrs:{color:"info","x-small":""},on:{click:t.onForceSync}},[t._v("\n        "+t._s(t.t("LabelScheduledforcesync"))+"\n      ")])],1):t._e(),t._v(" "),t.loading?e(k.A,{staticClass:"loading",attrs:{indeterminate:"",color:"blue darken-1"}}):t.currentFolder&&t.items&&t.items.length?e(p.A,{class:{"pb-10":!0,"list-full-height":!(t.searchQuery&&t.otherSearchItems&&t.otherSearchItems.length)},attrs:{"two-line":""}},[t._l(t.items,(function(n){return[e(v.A,{key:n.type+n.id,staticClass:"pl-3",attrs:{dense:""},on:{click:function(e){return t.clickItem(n)}}},[e(m.A,["folder"===n.type?e(u.A,{attrs:{color:"blue darken-1",large:""}},[t._v("\n              mdi-folder\n            ")]):e("FaviconImage",{attrs:{url:n.url,"use-network":t.useNetwork}})],1),t._v(" "),e(b.pr,[e(b.UZ,[t._v(t._s(n.title))]),t._v(" "),"bookmark"===n.type?e(b.w,[t._v("\n              "+t._s(t._f("hostname")(n.url))+"\n            ")]):t._e()],1),t._v(" "),e(h.A,[e(_.A,{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(n){let{on:r,attrs:s}=n;return[e(l.A,t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),r),[e(u.A,[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),e(p.A,[e(v.A,{on:{click:function(e){return t.editItem(n)}}},[e(m.A,[e(u.A,[t._v("mdi-pencil")])],1),t._v(" "),e(b.UZ,[t._v("\n                    "+t._s(t.t("LabelEdititem"))+"\n                  ")])],1),t._v(" "),"bookmark"===n.type?e(v.A,{on:{click:function(e){return t.shareBookmark(n)}}},[e(m.A,[e(u.A,[t._v("mdi-share")])],1),t._v(" "),e(b.UZ,[t._v("\n                    "+t._s(t.t("LabelShareitem"))+"\n                  ")])],1):t._e(),t._v(" "),e(v.A,{on:{click:function(e){return t.deleteItem(n)}}},[e(m.A,[e(u.A,[t._v("mdi-delete")])],1),t._v(" "),e(b.UZ,[t._v("\n                    "+t._s(t.t("LabelDeleteitem"))+"\n                  ")])],1)],1)],1)],1)],1),t._v(" "),e(d.A,{key:String(n.id)+n.type+"divider"})]}))],2):e(c.A,{style:{height:"100vh",width:"100vw",padding:"10vh auto"},attrs:{flat:"",tile:""}},[e("img",{style:{width:"95%",maxHeight:"40vh"},attrs:{src:"icons/tree-swing.svg"}}),t._v(" "),e("h3",{staticClass:"text-center headline mt-5"},[t._v("\n        "+t._s(t.t("LabelNobookmarks"))+"\n      ")])]),t._v(" "),e(c.A,{staticClass:"pt-5"},[t.searchQuery&&t.otherSearchItems&&t.otherSearchItems.length?e(v.A,[e(m.A,[e(u.A,[t._v("mdi-select-search")])],1),t._v(" "+t._s(t.t("LabelSearchresultsotherfolders"))+"\n      ")],1):t._e()],1),t._v(" "),t.searchQuery&&t.otherSearchItems&&t.otherSearchItems.length?e(p.A,{staticClass:"list-full-height",attrs:{"two-line":""}},[t._l(t.otherSearchItems,(function(n){return[e(v.A,{key:n.type+n.id,staticClass:"pl-3",attrs:{dense:""},on:{click:function(e){return t.clickItem(n)}}},[e(m.A,["folder"===n.type?e(u.A,{attrs:{color:"blue darken-1",large:""}},[t._v("\n              mdi-folder\n            ")]):e("FaviconImage",{attrs:{url:n.url,"use-network":t.useNetwork}})],1),t._v(" "),e(b.pr,[e(b.UZ,[t._v(t._s(n.title))]),t._v(" "),"bookmark"===n.type?e(b.w,[t._v("\n              "+t._s(t._f("hostname")(n.url))+"\n            ")]):t._e()],1),t._v(" "),e(h.A,[e(_.A,{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(n){let{on:r,attrs:s}=n;return[e(l.A,t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),r),[e(u.A,[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),e(p.A,[e(v.A,{on:{click:function(e){return t.editItem(n)}}},[e(m.A,[e(u.A,[t._v("mdi-pencil")])],1),t._v(" "),e(b.UZ,[t._v("\n                    "+t._s(t.t("LabelEdititem"))+"\n                  ")])],1),t._v(" "),"bookmark"===n.type?e(v.A,{on:{click:function(e){return t.shareBookmark(n)}}},[e(m.A,[e(u.A,[t._v("mdi-share")])],1),t._v(" "),e(b.UZ,[t._v("\n                    "+t._s(t.t("LabelShareitem"))+"\n                  ")])],1):t._e(),t._v(" "),e(v.A,{on:{click:function(e){return t.deleteItem(n)}}},[e(m.A,[e(u.A,[t._v("mdi-delete")])],1),t._v(" "),e(b.UZ,[t._v("\n                    "+t._s(t.t("LabelDeleteitem"))+"\n                  ")])],1)],1)],1)],1)],1),t._v(" "),e(d.A,{key:String(n.id)+n.type+"divider"})]}))],2):t._e(),t._v(" "),e(A.A,{attrs:{fixed:"",bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(){return[e(l.A,{attrs:{color:"blue darken-1",dark:"",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?e(u.A,[t._v("\n            mdi-close\n          ")]):e(u.A,[t._v("\n            mdi-plus\n          ")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t._v(" "),e(l.A,{attrs:{color:"blue darken-1",dark:"",small:"",fab:""},on:{click:t.addFolder}},[e(u.A,[t._v("mdi-folder")])],1),t._v(" "),e(l.A,{attrs:{color:"blue darken-1",dark:"",small:"",fab:""},on:{click:t.addBookmark}},[e(u.A,[t._v("mdi-star")])],1),t._v(" "),e(l.A,{attrs:{color:"blue darken-1",dark:"",small:"",fab:""},on:{click:t.importBookmarks}},[e(u.A,[t._v("mdi-import")])],1)],1)],1),t._v(" "),t.isAddingBookmark?e("DialogEditBookmark",{attrs:{"is-new":!0,display:t.isAddingBookmark,tree:t.tree,"parent-folder":t.currentFolderId},on:{"update:display":function(e){t.isAddingBookmark=e},save:function(e){return t.createBookmark(e)}}}):t._e(),t._v(" "),t.isAddingFolder?e("DialogEditFolder",{attrs:{"is-new":!0,display:t.isAddingFolder,tree:t.tree,"parent-folder":t.currentFolderId},on:{"update:display":function(e){t.isAddingFolder=e},save:function(e){return t.createFolder(e)}}}):t._e(),t._v(" "),t.isEditingBookmark?e("DialogEditBookmark",{attrs:{"is-new":!1,bookmark:t.currentlyEditedBookmark,tree:t.tree,display:t.isEditingBookmark},on:{"update:display":function(e){t.isEditingBookmark=e},save:function(e){return t.editBookmark(e)}}}):t._e(),t._v(" "),t.isEditingFolder?e("DialogEditFolder",{attrs:{"is-new":!1,folder:t.currentlyEditedFolder,display:t.isEditingFolder,tree:t.tree},on:{"update:display":function(e){t.isEditingFolder=e},save:function(e){return t.editFolder(e)}}}):t._e(),t._v(" "),t.isImportingBookmarks?e("DialogImportBookmarks",{attrs:{"parent-folder":t.currentFolderId,display:t.isImportingBookmarks,"account-id":t.id},on:{"update:display":function(e){t.isImportingBookmarks=e}}}):t._e()],1)};S._withStripped=!0,n(23792),n(26910),n(3362),n(27495),n(98992),n(23215),n(54520),n(37550),n(62953),n(3296),n(27208),n(48408);var E=n(80214),T=n(21253),C=n(47261),L=function(){var t=this,e=t._self._c;return e(C.A,{attrs:{"max-width":"500px"},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(c.A,[e(T.ri,{staticClass:"text-h5"},[t._v("\n      "+t._s(t.isNew?t.t("LabelAddfolder"):t.t("LabelEditfolder"))+"\n    ")]),t._v(" "),e(T.OQ,[e(w.A,{attrs:{label:"Title","hide-details":""},model:{value:t.temporaryTitle,callback:function(e){t.temporaryTitle=e},expression:"temporaryTitle"}}),t._v(" "),e(w.A,{attrs:{readonly:"",error:Boolean(t.parentError),"error-messages":t.parentError,label:"Parent folder"},on:{click:t.onTriggerFolderChooser},scopedSlots:t._u([{key:"append",fn:function(){return[e(u.A,{attrs:{color:"blue darken-1"},on:{click:t.onTriggerFolderChooser}},[t._v("\n            mdi-folder\n          ")])]},proxy:!0}]),model:{value:t.parentTitle,callback:function(e){t.parentTitle=e},expression:"parentTitle"}})],1),t._v(" "),e(T.SL,[e(g.A),t._v(" "),e(l.A,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.$emit("update:display",!1)}}},[t._v("\n        "+t._s(t.t("LabelCancel"))+"\n      ")]),t._v(" "),e(l.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.onSave}},[t._v("\n        "+t._s(t.t("LabelSave"))+"\n      ")]),t._v(" "),e(g.A)],1)],1),t._v(" "),e("DialogChooseFolder",{attrs:{display:t.displayFolderChooser,tree:t.tree},on:{"update:display":function(e){t.displayFolderChooser=e}},model:{value:t.temporaryParent,callback:function(e){t.temporaryParent=e},expression:"temporaryParent"}})],1)};L._withStripped=!0;var I=n(28216);const O={name:"DialogEditFolder",components:{DialogChooseFolder:I.A},props:{folder:{type:Object,default:()=>({})},display:{type:Boolean},isNew:{type:Boolean},tree:{type:Object,required:!0},parentFolder:{type:Number,default:-1}},data:()=>({temporaryTitle:"",temporaryParent:null,displayFolderChooser:!1,parentError:null}),computed:{parentTitle(){if(null===this.temporaryParent)return"";const t=this.tree.findFolder(this.temporaryParent);return t?t.title||this.t("LabelUntitledfolder"):""}},watch:{temporaryParent(){this.tree.findFolder(this.temporaryParent)?this.folder&&this.tree.findFolder(this.folder.id).findFolder(this.temporaryParent)?this.parentError=this.t("ErrorFolderloopselected"):this.parentError=null:this.parentError=this.t("ErrorNofolderselected")}},mounted(){this.temporaryTitle=this.folder.title||"";const t=this.tree.findFolder(this.folder.parentId)||this.tree.findFolder(this.parentFolder)||this.tree.findFolder(this.$store.state.lastFolders[this.$route.params.accountId])||this.tree.findFolder(this.tree.id);this.temporaryParent=t.id},methods:{onTriggerFolderChooser(){this.displayFolderChooser=!0},onSave(){this.parentError||(this.$emit("save",{title:this.temporaryTitle,parentId:this.temporaryParent}),this.$emit("update:display",!1))}}};var F=n(14486);const x=(0,F.A)(O,L,[],!1,null,"3fa091e2",null).exports;var R=function(){var t=this,e=t._self._c;return e(C.A,{attrs:{"max-width":"500px"},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(c.A,[e(T.ri,{staticClass:"text-h5"},[t._v("\n      "+t._s(t.isNew?t.t("LabelAddbookmark"):t.t("LabelEditbookmark"))+"\n    ")]),t._v(" "),e(T.OQ,[e(w.A,{attrs:{label:"Title","hide-details":""},model:{value:t.temporaryTitle,callback:function(e){t.temporaryTitle=e},expression:"temporaryTitle"}}),t._v(" "),e(w.A,{attrs:{error:Boolean(t.urlError),"error-messages":t.urlError,label:"Link"},model:{value:t.temporaryUrl,callback:function(e){t.temporaryUrl=e},expression:"temporaryUrl"}}),t._v(" "),e(w.A,{attrs:{readonly:"",label:"Parent folder"},on:{click:t.onTriggerFolderChooser},scopedSlots:t._u([{key:"append",fn:function(){return[e(u.A,{attrs:{color:"blue darken-1"},on:{click:t.onTriggerFolderChooser}},[t._v("\n            mdi-folder\n          ")])]},proxy:!0}]),model:{value:t.parentTitle,callback:function(e){t.parentTitle=e},expression:"parentTitle"}})],1),t._v(" "),e(T.SL,[e(g.A),t._v(" "),e(l.A,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.$emit("update:display",!1)}}},[t._v("\n        "+t._s(t.t("LabelCancel"))+"\n      ")]),t._v(" "),e(l.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.onSave}},[t._v("\n        "+t._s(t.t("LabelSave"))+"\n      ")]),t._v(" "),e(g.A)],1)],1),t._v(" "),e("DialogChooseFolder",{attrs:{display:t.displayFolderChooser,tree:t.tree},on:{"update:display":function(e){t.displayFolderChooser=e}},model:{value:t.temporaryParent,callback:function(e){t.temporaryParent=e},expression:"temporaryParent"}})],1)};R._withStripped=!0;const B={name:"DialogEditBookmark",components:{DialogChooseFolder:I.A},props:{bookmark:{type:Object,default:()=>({})},display:{type:Boolean},isNew:{type:Boolean},tree:{type:Object,required:!0},parentFolder:{type:Number,default:-1}},data:()=>({temporaryTitle:"",temporaryUrl:"",urlError:null,temporaryParent:null,displayFolderChooser:!1}),computed:{parentTitle(){if(null===this.temporaryParent)return"";const t=this.tree.findFolder(this.temporaryParent);return t?t.title||this.t("LabelUntitledfolder"):""}},watch:{temporaryUrl(){this.urlError=null;try{new URL(this.temporaryUrl)}catch(t){this.urlError="Invalid URL"}},display(){this.display||(this.displayFolderChooser=!1)}},mounted(){this.temporaryTitle=this.bookmark.title||"",this.temporaryUrl=this.bookmark.url||"";const t=this.tree.findFolder(this.bookmark.parentId)||this.tree.findFolder(this.parentFolder)||this.tree.findFolder(this.$store.state.lastFolders[this.$route.params.accountId])||this.tree.findFolder(this.tree.id);this.temporaryParent=t.id},methods:{onSave(){this.temporaryUrl&&!this.urlError&&this.tree.findFolder(this.temporaryParent)&&(this.$emit("save",{title:this.temporaryTitle,url:this.temporaryUrl,parentId:this.temporaryParent}),this.$emit("update:display",!1))},onTriggerFolderChooser(){this.displayFolderChooser=!0}}},D=(0,F.A)(B,R,[],!1,null,"9e2c2256",null).exports;var $=function(){var t=this,e=t._self._c;return t.src?e("img",{ref:"img",attrs:{src:t.src},on:{error:t.onError}}):e(u.A,{attrs:{large:""}},[t._v("\n  mdi-star\n")])};$._withStripped=!0;var P=n(16546),N=n(39529);const U={name:"FaviconImage",props:{url:{type:String,required:!0},useNetwork:{type:Boolean,required:!0}},data:()=>({src:null}),watch:{loadError(){this.loadError&&(this.src=null)}},async mounted(){if(!this.useNetwork)return;await new Promise((t=>setTimeout(t,400*Math.random())));const t=`favicons[${this.url}]`,{value:e}=await N.Preferences.get({key:t});if(e)this.src=e;else try{const e=await P.CapacitorHttp.get({url:this.url}),n=function(t,e){const n=new URL(e);for(var r=(new DOMParser).parseFromString(t,"text/html").getElementsByTagName("link"),s=[],i=0;i<r.length;i++){var a=r[i],o=a.getAttribute("rel");if(o&&o.toLowerCase().indexOf("icon")>-1){var l=a.getAttribute("href");if(l)if(-1===l.toLowerCase().indexOf("https:")&&-1===l.toLowerCase().indexOf("http:")&&0!==l.indexOf("//")){var c=n.protocol+"//"+n.host;if(n.port&&(c+=":"+n.port),0===l.indexOf("/"))c+=l;else{var d=n.pathname.split("/");d.pop(),c+=d.join("/")+"/"+l}s.push(c)}else if(0===l.indexOf("//")){var u=n.protocol+l;s.push(u)}else s.push(l)}}return s.push(n.protocol+"//"+n.host+"/favicon.ico"),s}(e.data,e.url);this.src=n[0],await N.Preferences.set({key:t,value:this.src})}catch(t){console.log(t)}},methods:{onError(){this.src=null}}},K=(0,F.A)(U,$,[],!1,null,"a4e5d116",null).exports;var M=n(91149),G=n(2142),j=n(95099),Q=n(26186),W=n(33031),Y=n.n(W),H=function(){var t=this,e=t._self._c;return e(C.A,{attrs:{"max-width":"500px"},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(c.A,[e(T.ri,{staticClass:"text-h5"},[t._v("\n      "+t._s(t.t("LabelImportbookmarks"))+"\n    ")]),t._v(" "),e(T.OQ,[e("p",[t._v(t._s(t.t("DescriptionImportbookmarks")))]),t._v(" "),e("input",{ref:"filePicker",staticClass:"d-none",attrs:{type:"file",accept:"text/html"},on:{change:t.onFileSelect}}),t._v(" "),e(l.A,{attrs:{block:""},on:{click:t.onTriggerFilePicker}},[e(u.A,[t._v("mdi-import")]),t._v(t._s(t.t("LabelImportbookmarks"))+"\n      ")],1)],1),t._v(" "),e(T.SL,[e(l.A,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.$emit("update:display",!1)}}},[t._v("\n        "+t._s(t.t("LabelCancel"))+"\n      ")]),t._v(" "),e(g.A)],1)],1)],1)};H._withStripped=!0;const V={name:"DialogImportBookmarks",props:{display:{type:Boolean},accountId:{type:String,required:!0},parentFolder:{type:Number,default:-1}},methods:{onTriggerFilePicker(){this.$refs.filePicker.click()},async onFileSelect(){const t=this.$refs.filePicker.files[0];try{const e=await t.text();await this.$store.dispatch("IMPORT_BOOKMARKS",{accountId:this.accountId,parentFolder:this.parentFolder,html:e}),this.$emit("update:display",!1)}catch(t){throw alert(t.message),t}}}},q={name:"Tree",components:{DialogImportBookmarks:(0,F.A)(V,H,[],!1,null,"6bf19655",null).exports,FaviconImage:K,DialogEditBookmark:D,DialogEditFolder:x,Drawer:E.A},filters:{hostname(t){try{return new URL(t).hostname}catch(e){return console.error(`${e}: ${t}`),"(bad url)"}}},data:()=>({currentFolderId:0,drawer:!1,searchQuery:"",isEditingFolder:!1,currentlyEditedFolder:null,isEditingBookmark:!1,currentlyEditedBookmark:null,isAddingBookmark:!1,isAddingFolder:!1,isImportingBookmarks:!1,fab:!1,searchDebounceTimer:null,sortIcons:{title:"mdi-sort-alphabetical-ascending",url:"mdi-sort-bool-ascending",index:"mdi-sort-ascending"},sortBy:"index",syncProgress:0}),computed:{id(){return this.$route.params.accountId},loading(){return!(this.$store.state.accounts[this.id]&&this.$store.state.accounts[this.id].data&&Object.keys(this.$store.state.accounts[this.id].data).length&&this.tree)},tree(){return this.$store.state.tree},syncing(){return!this.loading&&this.$store.state.accounts[this.id].data.syncing},scheduled(){return!this.loading&&this.$store.state.accounts[this.id].data.scheduled},syncError(){return!this.loading&&this.$store.state.accounts[this.id].data.error},useNetwork(){return!this.loading&&this.$store.state.accounts[this.id].data.allowNetwork},items(){if(!this.currentFolder)return[];let t;return this.searchQuery&&this.searchQuery.trim().length>=2?this.search(this.searchQuery.toLowerCase().trim(),this.currentFolder):(t=this.currentFolder.children,"index"!==this.sortBy?Y()(t,[t=>{if("url"===this.sortBy){if(!t.url)return"0000000"+t.title.toLowerCase();try{return new URL(t.url).hostname}catch(e){return t.url.toLowerCase()}}return"folder"===t.type?"0000000"+t.title.toLowerCase():t[this.sortBy].toLowerCase()}]):t)},otherSearchItems(){return this.currentFolder||this.searchQuery&&!(this.searchQuery.trim().length<2)?this.search(this.searchQuery.toLowerCase().trim(),this.tree).filter((t=>!this.items.includes(t))):[]},routes:()=>M.J,currentAccount(){return this.$store.state.accounts[this.id]},currentFolder(){return this.findItem(this.currentFolderId,this.tree)},breadcrumbs(){const t=[this.currentFolder];for(;this.tree&&t[t.length-1]&&String(t[t.length-1].id)!==String(this.tree.id);)t.push(this.findItem(t[t.length-1].parentId,this.tree));return t.reverse()}},watch:{async $route(){await this.$store.dispatch(j.o.LOAD_TREE,this.$route.params.accountId),this.sortBy=this.$store.state.accounts[this.id].data.sortBy||"index"},async syncing(t,e){!t&&e?(this.syncProgress=1,setTimeout((()=>{this.syncProgress=0}),1e3)):this.syncProgress=t,t||await this.$store.dispatch(j.o.LOAD_TREE,this.$route.params.accountId)},async sortBy(t){await this.$store.dispatch(j.o.SET_SORTBY,{accountId:this.$route.params.accountId,sortBy:t})}},mounted(){this.$store.dispatch(j.o.LOAD_TREE,this.$route.params.accountId),this.sortBy=this.$store.state.accounts[this.id].data.sortBy||"index",Q.q.addListener("resume",(()=>this.$store.dispatch(j.o.LOAD_TREE_FROM_DISK,this.$route.params.accountId)))},backButton(){this.goBack()},methods:{clickItem(t){t.url?(this.$store.dispatch(j.o.COUNT_BOOKMARK_CLICK,{accountId:this.$route.params.accountId,bookmark:t}),window.location=t.url):(this.searchQuery="",this.currentFolderId=t.id)},findItem:(t,e)=>e?e.id===t?e:!e.url&&e.findFolder(t):null,onSearch(t){clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout((()=>{this.searchQuery=t}),500)},search:(t,e)=>Object.values(e.index.bookmark).filter((e=>{const n=!!e.title&&t.split(" ").every((t=>e.title.toLowerCase().split(" ").some((e=>e===t)))),r=!!e.title&&t.split(" ").every((t=>e.title.toLowerCase().includes(t)));return t.split(" ").every((t=>e.url.toLowerCase().includes(t)))||n||r})).sort(((e,n)=>{const r=!!e.title&&t.split(" ").every((t=>e.title.toLowerCase().includes(t))),s=!!n.title&&t.split(" ").every((t=>n.title.toLowerCase().includes(t)));return r?s?0:-1:1})).sort(((e,n)=>{const r=!!e.title&&t.split(" ").every((t=>e.title.toLowerCase().split(" ").some((e=>e===t)))),s=!!n.title&&t.split(" ").every((t=>n.title.toLowerCase().split(" ").some((e=>e===t))));return r?s?0:-1:1})),goBack(){this.isAddingBookmark?this.isAddingBookmark=!1:this.isEditingBookmark?this.isEditingBookmark=!1:this.isAddingFolder?this.isAddingFolder=!1:this.isEditingFolder?this.isEditingFolder=!1:this.searchQuery?this.searchQuery="":void 0===this.currentFolder.parentId?Q.q.exitApp():this.currentFolderId=this.currentFolder.parentId},editItem(t){t.url?(this.currentlyEditedBookmark=t,this.isEditingBookmark=!0):(this.currentlyEditedFolder=t,this.isEditingFolder=!0)},deleteItem(t){confirm(this.t("DescriptionReallydeleteitem"))&&("bookmark"===t.type?this.$store.dispatch(j.o.DELETE_BOOKMARK,{accountId:this.id,bookmark:t}):this.$store.dispatch(j.o.DELETE_FOLDER,{accountId:this.id,folder:t}))},addBookmark(){this.isAddingBookmark=!0},importBookmarks(){this.isImportingBookmarks=!0},createBookmark(t){this.$store.dispatch(j.o.CREATE_BOOKMARK,{accountId:this.id,bookmark:new G.Bookmark({id:null,parentId:this.currentFolderId,...t})})},addFolder(){this.isAddingFolder=!0},createFolder(t){this.$store.dispatch(j.o.CREATE_FOLDER,{accountId:this.id,folder:new G.Folder({...t,id:null,parentId:this.currentFolderId})})},editFolder(t){this.$store.dispatch(j.o.EDIT_FOLDER,{accountId:this.id,folder:new G.Folder({...this.currentlyEditedFolder,...t})})},editBookmark(t){this.$store.dispatch(j.o.EDIT_BOOKMARK,{accountId:this.id,bookmark:new G.Bookmark({...this.currentlyEditedBookmark,...t})})},shareBookmark(t){this.$store.dispatch(j.o.SHARE_BOOKMARK,new G.Bookmark(t))},onTriggerSync(t){if(!this.syncing&&!this.scheduled)switch(this.currentAccount.data.syncing=1e-4,t){case"down":this.$store.dispatch(j.o.TRIGGER_SYNC_DOWN,this.id);break;case"up":this.$store.dispatch(j.o.TRIGGER_SYNC_UP,this.id);break;default:this.$store.dispatch(j.o.TRIGGER_SYNC,this.id)}},onForceSync(){confirm(this.t("DescriptionScheduledforcesync"))&&this.$store.dispatch(j.o.FORCE_SYNC,this.id)}}};n(15760);const z=(0,F.A)(q,S,[],!1,null,"70344232",null).exports},95099:(t,e,n)=>{"use strict";n.d(e,{o:()=>r,z:()=>s});const r={LOAD_LOCKED:"LOAD_LOCKED",UNLOCK:"UNLOCK",SET_KEY:"SET_KEY",UNSET_KEY:"UNSET_KEY",LOAD_ACCOUNTS:"LOAD_ACCOUNTS",SELECT_ACCOUNT:"SELECT_ACCOUNT",LOAD_TREE:"LOAD_TREE",LOAD_TREE_FROM_DISK:"LOAD_TREE_FROM_DISK",CREATE_BOOKMARK:"CREATE_BOOKMARK",EDIT_BOOKMARK:"EDIT_BOOKMARK",DELETE_BOOKMARK:"DELETE_BOOKMARK",SHARE_BOOKMARK:"SHARE_BOOKMARK",CREATE_FOLDER:"CREATE_FOLDER",EDIT_FOLDER:"EDIT_FOLDER",DELETE_FOLDER:"DELETE_FOLDER",IMPORT_BOOKMARKS:"IMPORT_BOOKMARKS",CREATE_ACCOUNT:"CREATE_ACCOUNT",IMPORT_ACCOUNTS:"IMPORT_ACCOUNTS",EXPORT_ACCOUNTS:"EXPORT_ACCOUNTS",DELETE_ACCOUNT:"DELETE_ACCOUNT",RESET_ACCOUNT:"RESET_ACCOUNT",STORE_ACCOUNT:"STORE_ACCOUNT",TRIGGER_SYNC:"TRIGGER_SYNC",FORCE_SYNC:"FORCE_SYNC",TRIGGER_SYNC_ALL:"TRIGGER_SYNC_ALL",TRIGGER_SYNC_UP:"TRIGGER_SYNC_UP",TRIGGER_SYNC_DOWN:"TRIGGER_SYNC_DOWN",CANCEL_SYNC:"CANCEL_SYNC",DOWNLOAD_LOGS:"DOWNLOAD_LOGS",EXPORT_BOOKMARKS:"EXPORT_BOOKMARKS",TEST_WEBDAV_SERVER:"TEST_WEBDAV_SERVER",TEST_NEXTCLOUD_SERVER:"TEST_NEXTCLOUD_SERVER",TEST_LINKWARDEN_SERVER:"TEST_LINKWARDEN_SERVER",START_LOGIN_FLOW:"START_LOGIN_FLOW",STOP_LOGIN_FLOW:"STOP_LOGIN_FLOW",REQUEST_NETWORK_PERMISSIONS:"REQUEST_NETWORK_PERMISSIONS",COUNT_BOOKMARK_CLICK:"COUNT_BOOKMARK_CLICK",REQUEST_HISTORY_PERMISSIONS:"REQUEST_HISTORY_PERMISSIONS",SET_SORTBY:"SET_SORTBY"},s={LOADING_START:"LOADING_START",LOADING_END:"LOADING_END",SET_LOCKED:"SET_LOCKED",LOAD_ACCOUNTS:"LOAD_ACCOUNTS",STORE_ACCOUNT_DATA:"STORE_ACCOUNT_DATA",REMOVE_ACCOUNT:"REMOVE_ACCOUNT",LOAD_TREE:"LOAD_TREE",SET_LOGIN_FLOW_STATE:"SET_LOGIN_FLOW_STATE",SET_LAST_FOLDER:"SET_LAST_FOLDER"}}}]);
//# sourceMappingURL=510.js.map