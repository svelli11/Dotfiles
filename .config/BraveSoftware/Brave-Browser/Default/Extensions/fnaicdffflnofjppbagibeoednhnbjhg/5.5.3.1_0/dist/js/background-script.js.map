{"version":3,"file":"background-script.js","mappings":"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","sources":["webpack://floccus/webpack/runtime/chunk loaded","webpack://floccus/webpack/runtime/load script","webpack://floccus/./src/lib/browser/BrowserAccountStorage.js","webpack://floccus/./src/lib/browser/BrowserController.js","webpack://floccus/./src/entries/background-script.js","webpack://floccus/./node_modules/core-js/modules/es.string.match-all.js","webpack://floccus/./node_modules/lodash/uniqBy.js","webpack://floccus/./node_modules/core-js/internals/is-regexp.js","webpack://floccus/./node_modules/core-js/internals/regexp-get-flags.js","webpack://floccus/./src/lib/adapters/Fake.js","webpack://floccus/webpack/bootstrap","webpack://floccus/webpack/runtime/amd define","webpack://floccus/webpack/runtime/amd options","webpack://floccus/webpack/runtime/compat get default export","webpack://floccus/webpack/runtime/define property getters","webpack://floccus/webpack/runtime/ensure chunk","webpack://floccus/webpack/runtime/get javascript chunk filename","webpack://floccus/webpack/runtime/global","webpack://floccus/webpack/runtime/harmony module decorator","webpack://floccus/webpack/runtime/hasOwnProperty shorthand","webpack://floccus/webpack/runtime/make namespace object","webpack://floccus/webpack/runtime/node module decorator","webpack://floccus/webpack/runtime/publicPath","webpack://floccus/webpack/runtime/jsonp chunk loading","webpack://floccus/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"floccus:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import browser from '../browser-api'\nimport Cryptography from '../Crypto'\nimport DefunctCryptography from '../DefunctCrypto'\nimport Mappings from '../Mappings'\nimport { Folder, ItemLocation } from '../Tree'\nimport AsyncLock from 'async-lock'\nimport Logger from '../Logger'\n\nconst storageLock = new AsyncLock()\n\nexport default class BrowserAccountStorage {\n  constructor(id) {\n    this.accountId = id\n  }\n\n  static async changeEntry(entryName, fn, defaultVal) {\n    await storageLock.acquire(entryName, async() => {\n      let entry = await BrowserAccountStorage.getEntry(entryName, defaultVal)\n      entry = fn(entry)\n\n      await browser.storage.local.set({ [entryName]: JSON.stringify(entry) })\n    })\n  }\n\n  static async getEntry(entryName, defaultVal) {\n    let entry = await browser.storage.local.get(entryName)\n    try {\n      if (entry[entryName]) {\n        while (typeof entry[entryName] === 'string') {\n          entry[entryName] = JSON.parse(entry[entryName])\n        }\n        return entry[entryName]\n      } else {\n        return defaultVal\n      }\n    } catch (e) {\n      Logger.log('Error while parsing BrowserAccountStorage entry value ' + e.message)\n      console.error(e)\n      return defaultVal\n    }\n  }\n\n  static deleteEntry(entryName) {\n    return browser.storage.local.remove(entryName)\n  }\n\n  static async getAllAccounts() {\n    let accounts = await BrowserAccountStorage.getEntry(`accounts`, {})\n    return Object.keys(accounts)\n  }\n\n  async getAccountData(key) {\n    let accounts = await BrowserAccountStorage.getEntry(`accounts`, {})\n    let data = accounts[this.accountId]\n    if (key) {\n      if (data.iv) {\n        data.password = await DefunctCryptography.decryptAES(key, data.iv, data.password)\n        delete data.iv\n      } else {\n        data.password = await Cryptography.decryptAES(key, data.password, data.username)\n        if (data.passphrase) {\n          data.passphrase = await Cryptography.decryptAES(key, data.passphrase, data.username)\n        }\n      }\n    }\n    return data\n  }\n\n  async setAccountData(data, key) {\n    let encData = data\n    if (key) {\n      if (data.iv) {\n        delete data.iv\n      }\n      encData = {\n        ...data,\n        password: await Cryptography.encryptAES(key, data.password, data.username),\n        ...(data.passphrase && {passphrase: await Cryptography.encryptAES(key, data.passphrase, data.username)})\n      }\n    }\n    return BrowserAccountStorage.changeEntry(\n      `accounts`,\n      accounts => {\n        accounts[this.accountId] = encData\n        return accounts\n      },\n      {}\n    )\n  }\n\n  async deleteAccountData() {\n    await BrowserAccountStorage.changeEntry(`accounts`, accounts => {\n      delete accounts[this.accountId]\n      return accounts\n    })\n    await this.deleteCache()\n    await this.deleteMappings()\n  }\n\n  async initCache() {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].cache`,\n      () => ({})\n    )\n  }\n\n  async getCache() {\n    const data = await BrowserAccountStorage.getEntry(\n      `bookmarks[${this.accountId}].cache`\n    )\n    return Folder.hydrate(data && Object.keys(data).length ? data : {location: ItemLocation.LOCAL})\n  }\n\n  async setCache(data) {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].cache`,\n      () => data\n    )\n  }\n\n  async deleteCache() {\n    await BrowserAccountStorage.deleteEntry(`bookmarks[${this.accountId}].cache`)\n  }\n\n  async initMappings() {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].mappings`,\n      () => ({})\n    )\n  }\n\n  async getMappings() {\n    const data = await BrowserAccountStorage.getEntry(\n      `bookmarks[${this.accountId}].mappings`\n    )\n    return new Mappings(\n      this,\n      data && Object.keys(data).length\n        ? data\n        : {\n          bookmarks: {\n            ServerToLocal: {},\n            LocalToServer: {}\n          },\n          folders: {\n            ServerToLocal: {},\n            LocalToServer: {}\n          }\n        }\n    )\n  }\n\n  async setMappings(data) {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].mappings`,\n      () => data\n    )\n  }\n\n  async deleteMappings() {\n    await BrowserAccountStorage.deleteEntry(`bookmarks[${this.accountId}].mappings`)\n  }\n\n  async getCurrentContinuation() {\n    return BrowserAccountStorage.getEntry(`bookmarks[${this.accountId}].continuation`)\n  }\n\n  async setCurrentContinuation(continuation) {\n    await BrowserAccountStorage.changeEntry(`bookmarks[${this.accountId}].continuation`, (_) => ({...continuation, createdAt: Date.now()}), null)\n  }\n}\n","import browser from '../browser-api'\nimport Controller from '../Controller'\nimport BrowserAccount from './BrowserAccount'\nimport BrowserTree from './BrowserTree'\nimport Cryptography from '../Crypto'\nimport packageJson from '../../../package.json'\nimport BrowserAccountStorage from './BrowserAccountStorage'\nimport uniqBy from 'lodash/uniqBy'\nimport Account from '../Account'\nimport { STATUS_ALLGOOD, STATUS_DISABLED, STATUS_ERROR, STATUS_SYNCING } from '../interfaces/Controller'\nimport * as Sentry from '@sentry/browser'\n\nconst INACTIVITY_TIMEOUT = 7 * 1000 // 7 seconds\nconst MAX_BACKOFF_INTERVAL = 1000 * 60 * 60 // 1 hour\nconst DEFAULT_SYNC_INTERVAL = 15 // 15 minutes\nconst STALE_SYNC_TIME = 1000 * 60 * 60 * 24 * 2 // two days\nconst INTERVENTION_INTERVAL = 1000 * 60 * 60 * 24 * 182 // 182 days\n\nclass AlarmManager {\n  constructor(ctl) {\n    this.ctl = ctl\n  }\n\n  async checkSync() {\n    const accounts = await BrowserAccountStorage.getAllAccounts()\n    const promises = []\n    for (let accountId of accounts) {\n      const account = await Account.get(accountId)\n      const data = account.getData()\n      const lastSync = data.lastSync || 0\n      const interval = data.syncInterval || DEFAULT_SYNC_INTERVAL\n      if (data.scheduled) {\n        promises.push(this.ctl.scheduleSync(accountId))\n        continue\n      }\n      if (data.error && data.errorCount > 1) {\n        if (Date.now() > this.getBackoffInterval(interval, data.errorCount, lastSync) + lastSync) {\n          promises.push(this.ctl.scheduleSync(accountId))\n          continue\n        }\n        continue\n      }\n      if (\n        Date.now() >\n        interval * 1000 * 60 + lastSync\n      ) {\n        promises.push(this.ctl.scheduleSync(accountId))\n      }\n    }\n    await Promise.all(promises)\n  }\n\n  /**\n   * Calculates the backoff interval based on the synchronization interval and the error count.\n   *\n   * This method determines the delay before retrying a synchronization\n   * after one or more errors have occurred. It uses an exponential\n   * backoff algorithm with a cap at the maximum backoff interval.\n   *\n   * @param {number} interval - The synchronization interval in minutes.\n   * @param {number} errorCount - The number of consecutive errors encountered.\n   * @param {number} lastSync - The timestamp of when the last successful sync happened.\n   * @returns {number} - The calculated backoff interval in milliseconds.\n   */\n  getBackoffInterval(interval, errorCount, lastSync) {\n    const maxErrorCount = Math.log2(MAX_BACKOFF_INTERVAL / (interval * 1000 * 60))\n    if (errorCount < maxErrorCount || lastSync + MAX_BACKOFF_INTERVAL > Date.now()) {\n      return Math.min(MAX_BACKOFF_INTERVAL, interval * 1000 * 60 * Math.pow(2, errorCount))\n    } else {\n      return MAX_BACKOFF_INTERVAL + MAX_BACKOFF_INTERVAL * (errorCount - maxErrorCount)\n    }\n  }\n}\n\nexport default class BrowserController {\n  constructor() {\n    this.schedule = {}\n    this.listeners = []\n\n    this.alarms = new AlarmManager(this)\n\n    this.unlocked = true\n    this.setEnabled(true)\n\n    Controller.singleton = this\n\n    // set up change listener\n    browser.bookmarks.onChanged.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n    browser.bookmarks.onMoved.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n    browser.bookmarks.onRemoved.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n    browser.bookmarks.onCreated.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n\n    browser.permissions.contains({permissions: ['history']}).then((historyAllowed) => {\n      if (historyAllowed) {\n        browser.history.onVisited.addListener((historyItem) => this.onVisitUrl(historyItem))\n      }\n    })\n\n    // Set up the alarms\n\n    browser.alarms.create('checkSync', { periodInMinutes: 1 })\n    browser.alarms.onAlarm.addListener(async alarm => {\n      await this.alarms[alarm.name]()\n    })\n\n    // lock accounts when locking is enabled\n\n    browser.storage.local.get('accountsLocked').then(async d => {\n      this.setEnabled(!d.accountsLocked)\n      this.unlocked = !d.accountsLocked\n      if (d.accountsLocked) {\n        this.key = null\n      }\n    })\n\n    // do some cleaning if this is a new version\n\n    browser.storage.local.get(['currentVersion', 'lastInterventionAt']).then(async d => {\n      if (packageJson.version === d.currentVersion) return\n      await browser.storage.local.set({\n        currentVersion: packageJson.version\n      })\n\n      const packageVersion = packageJson.version.split('.')\n      const accounts = await Account.getAllAccounts()\n      const lastVersion = d.currentVersion ? d.currentVersion.split('.') : []\n      if ((packageVersion[0] !== lastVersion[0] || packageVersion[1] !== lastVersion[1]) && accounts.length !== 0) {\n        if (d.lastInterventionAt && d.lastInterventionAt > Date.now() - INTERVENTION_INTERVAL) {\n          return\n        }\n        browser.tabs.create({\n          url: '/dist/html/options.html#/update',\n          active: false\n        })\n        browser.storage.local.set({ lastInterventionAt: Date.now() })\n      }\n    })\n\n    browser.storage.local.get('lastInterventionAt').then(async d => {\n      const accounts = await Account.getAllAccounts()\n      if (d.lastInterventionAt && d.lastInterventionAt < Date.now() - INTERVENTION_INTERVAL && accounts.length !== 0) {\n        browser.tabs.create({\n          url: 'https://floccus.org/donate/',\n          active: false\n        })\n        browser.storage.local.set({ lastInterventionAt: Date.now() })\n      }\n    })\n\n    // Set correct badge after waiting a bit\n    setTimeout(() => this.updateStatus(), 3000)\n\n    // Setup service worker messaging\n\n    // eslint-disable-next-line no-undef\n    if (!navigator.userAgent.includes('Firefox') && typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope) {\n      addEventListener('message', (event) => this._receiveEvent(event.data, (data) => event.source.postMessage(data)))\n    } else {\n      browser.runtime.onMessage.addListener((data) => void (this._receiveEvent(data, (data) => {\n        try {\n          browser.runtime.sendMessage(data)\n        } catch (e) {\n          console.warn(e)\n        }\n      })))\n    }\n    this.onStatusChange(async() => {\n      if (self?.clients) {\n        const clientList = await self.clients.matchAll()\n        clientList.forEach(client => {\n          try {\n            client.postMessage({ type: 'status:update', params: [] })\n          } catch (e) {\n            console.warn(e)\n          }\n        })\n      } else {\n        try {\n          await browser.runtime.sendMessage({ type: 'status:update', params: [] })\n        } catch (e) {\n          console.warn(e)\n        }\n      }\n    })\n\n    // Run some things on browser startup\n    browser.runtime.onStartup.addListener(this.onStartup)\n  }\n\n  async _receiveEvent(data, sendResponse) {\n    const {type, params} = data\n    const result = await this[type](...params)\n    sendResponse({type: type + 'Response', params: [result]})\n\n    // checkSync after waiting a bit\n    setTimeout(() => this.alarms.checkSync(), 3000)\n  }\n\n  setEnabled(enabled) {\n    this.enabled = enabled\n    if (enabled) {\n      // Sync after 7s\n      setTimeout(() => {\n        this.alarms.checkSync()\n      }, 7000)\n    }\n  }\n\n  async unlock(key) {\n    let d = await browser.storage.local.get({ 'accountsLocked': null })\n    if (d.accountsLocked) {\n      let hashedKey = await Cryptography.sha256(key)\n      let decryptedHash = await Cryptography.decryptAES(\n        key,\n        d.accountsLocked,\n        'FLOCCUS'\n      )\n\n      if (decryptedHash !== hashedKey) {\n        throw new Error('The provided key was wrong')\n      }\n      this.key = key\n    }\n    this.unlocked = true\n    this.setEnabled(true)\n\n    // remove encryption\n    this.key = null\n    await browser.storage.local.set({ accountsLocked: null })\n    const accountIds = await BrowserAccountStorage.getAllAccounts()\n    for (let accountId of accountIds) {\n      const storage = new BrowserAccountStorage(accountId)\n      const data = await storage.getAccountData(key)\n      await storage.setAccountData(data, null)\n    }\n    let accounts = await BrowserAccount.getAllAccounts()\n    await Promise.all(accounts.map(a => a.updateFromStorage()))\n  }\n\n  getUnlocked() {\n    return Promise.resolve(this.unlocked)\n  }\n\n  async onchange(localId, details) {\n    if (!this.enabled) {\n      return\n    }\n    // Debounce this function\n    this.setEnabled(false)\n\n    const allAccounts = await BrowserAccount.getAllAccounts()\n\n    // Check which accounts contain the bookmark and which used to contain (track) it\n    const trackingAccountsFilter = await Promise.all(\n      allAccounts.map(account => {\n        return account.tracksBookmark(localId)\n      })\n    )\n\n    let accountsToSync = allAccounts\n      // Filter out any accounts that are not tracking the bookmark\n      .filter((account, i) => trackingAccountsFilter[i])\n\n    // Now we check the account of the new folder\n\n    let containingAccounts = []\n    try {\n      const ancestors = await BrowserTree.getIdPathFromLocalId(localId)\n      containingAccounts = await BrowserAccount.getAccountsContainingLocalId(\n        localId,\n        ancestors,\n        allAccounts\n      )\n    } catch (e) {\n      console.log(e)\n      console.log('Could not detect containing account from localId ', localId)\n    }\n\n    accountsToSync = uniqBy(\n      accountsToSync.concat(containingAccounts),\n      acc => acc.id\n    )\n      // Filter out accounts that are not enabled\n      .filter(account => account.getData().enabled)\n      // Filter out accounts that are syncing, because the event may stem from the sync run\n      .filter(account => !account.getData().syncing)\n\n    // schedule a new sync for all accounts involved\n    accountsToSync.forEach(account => {\n      this.scheduleSync(account.id, true)\n    })\n\n    this.setEnabled(true)\n  }\n\n  async scheduleSync(accountId, wait) {\n    if (wait) {\n      if (this.schedule[accountId]) {\n        clearTimeout(this.schedule[accountId])\n      }\n      console.log('scheduleSync: setting a timeout in ms :', INACTIVITY_TIMEOUT)\n      this.schedule[accountId] = setTimeout(\n        () => this.scheduleSync(accountId),\n        INACTIVITY_TIMEOUT\n      )\n      return\n    }\n\n    let account = await Account.get(accountId)\n    if (account.getData().syncing) {\n      return\n    }\n    // if the account is already scheduled, don't prevent it, to avoid getting stuck\n    if (!account.getData().enabled && !account.getData().scheduled) {\n      return\n    }\n\n    const status = await this.getStatus()\n    if (status === STATUS_SYNCING) {\n      await account.setData({ scheduled: account.getData().scheduled || true })\n      return\n    }\n\n    if (account.getData().scheduled === true) {\n      await this.syncAccount(accountId)\n    } else {\n      await this.syncAccount(accountId, account.getData().scheduled)\n    }\n  }\n\n  async scheduleAll() {\n    const accounts = await Account.getAllAccounts()\n    for (const account of accounts) {\n      await account.setData({ scheduled: true })\n    }\n    this.updateStatus()\n  }\n\n  async cancelSync(accountId, keepEnabled) {\n    let account = await Account.get(accountId)\n    // Avoid starting it again automatically\n    if (!keepEnabled) {\n      await account.setData({ enabled: false })\n    }\n    await account.cancelSync()\n  }\n\n  async syncAccount(accountId, strategy, forceSync = false) {\n    if (!this.enabled) {\n      return\n    }\n    let account = await Account.get(accountId)\n    if (account.getData().syncing) {\n      return\n    }\n    // executes long-running async work without letting the service worker to die\n    const interval = setInterval(() => browser.tabs.getCurrent(), 2e4)\n    setTimeout(() => this.updateStatus(), 500)\n    try {\n      await account.sync(strategy, forceSync)\n    } catch (error) {\n      console.error(error)\n    }\n    clearInterval(interval)\n    this.updateStatus()\n  }\n\n  async updateStatus() {\n    await this.updateBadge()\n    this.listeners.forEach(fn => fn())\n  }\n\n  onStatusChange(listener) {\n    this.listeners.push(listener)\n    let unregistered = false\n    return () => {\n      if (unregistered) return\n      this.listeners.splice(this.listeners.indexOf(listener), 1)\n      unregistered = true\n    }\n  }\n\n  async getStatus() {\n    if (!this.unlocked) {\n      return STATUS_ERROR\n    }\n    const accounts = await Account.getAllAccounts()\n    let overallStatus = accounts.reduce((status, account) => {\n      const accData = account.getData()\n      if (status === STATUS_SYNCING || accData.syncing || account.syncing) {\n        // Show syncing symbol if any account is syncing\n        return STATUS_SYNCING\n      } else if (status === STATUS_ERROR || (accData.error && !accData.syncing) || (accData.enabled && accData.lastSync < Date.now() - STALE_SYNC_TIME)) {\n        // Show error symbol if any account has an error and not currently syncing, or if any account is enabled but hasn't been synced for two days\n        return STATUS_ERROR\n      } else {\n        // show allgood symbol otherwise\n        return STATUS_ALLGOOD\n      }\n    }, STATUS_ALLGOOD)\n\n    if (overallStatus === STATUS_ALLGOOD) {\n      if (accounts.every(account => !account.getData().enabled)) {\n        // if status is allgood but no account is enabled, show disabled\n        overallStatus = STATUS_DISABLED\n      }\n    }\n\n    return overallStatus\n  }\n\n  async updateBadge() {\n    await this.setStatusBadge(await this.getStatus())\n  }\n\n  async setStatusBadge(status) {\n    const icon = {\n      [STATUS_ALLGOOD]: {path: '/icons/logo_32.png'},\n      [STATUS_SYNCING]: {path: '/icons/syncing_32.png'},\n      [STATUS_ERROR]: {path: '/icons/error_32.png'},\n      [STATUS_DISABLED]: {path: '/icons/disabled_32.png'}\n    }\n\n    if (icon[status]) {\n      if (browser.browserAction) {\n        await browser.browserAction.setIcon(icon[status])\n      } else if (browser.action) {\n        await browser.action.setIcon(icon[status])\n      }\n    }\n  }\n\n  async onStartup() {\n    const accounts = await Account.getAllAccounts()\n    await Promise.all(\n      accounts.map(async acc => {\n        if (acc.getData().syncing) {\n          await acc.setData({\n            syncing: false,\n            scheduled: acc.getData().enabled,\n          })\n        }\n        if (acc.getData().localRoot === 'tabs') {\n          await acc.init()\n        }\n      })\n    )\n  }\n\n  async onLoad() {\n    browser.storage.local.get('telemetryEnabled').then(async d => {\n      if (!d.telemetryEnabled) {\n        return\n      }\n      Sentry.init({\n        dsn: 'https://836f0f772fbf2e12b9dd651b8e6b6338@o4507214911307776.ingest.de.sentry.io/4507216408870992',\n        integrations: [],\n        sampleRate: 0.15,\n        release: packageJson.version,\n        debug: true,\n      })\n    })\n  }\n\n  async onVisitUrl(historyItem) {\n    if (!historyItem.url) {\n      return\n    }\n    let accounts = await Account.getAllAccounts()\n    accounts = accounts.filter(account => account.getData().clickCountEnabled)\n    if (!accounts.length) {\n      return\n    }\n    const bookmarks = await browser.bookmarks.search({url: historyItem.url})\n    for (let bookmark of bookmarks) {\n      let matchingAccounts = []\n      try {\n        const ancestors = await BrowserTree.getIdPathFromLocalId(bookmark.id)\n        matchingAccounts = await BrowserAccount.getAccountsContainingLocalId(\n          bookmark.id,\n          ancestors,\n          accounts,\n          true\n        )\n      } catch (e) {\n        console.log(e)\n        console.log('Could not detect containing account from localId ', bookmark.id)\n      }\n      if (matchingAccounts.length) {\n        await Promise.all(\n          matchingAccounts.map(async account => {\n            const server = await account.getServer()\n            if (server.countClick) {\n              await server.countClick(historyItem.url)\n            }\n          })\n        )\n      }\n    }\n  }\n}\n","import BrowserController from '../lib/browser/BrowserController'\n\nconst controller = new BrowserController\ncontroller.onLoad()\n","'use strict';\n/* eslint-disable es/no-string-prototype-matchall -- safe */\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar createIteratorConstructor = require('../internals/iterator-create-constructor');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar anObject = require('../internals/an-object');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar classof = require('../internals/classof-raw');\nvar isRegExp = require('../internals/is-regexp');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar getMethod = require('../internals/get-method');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\nvar InternalStateModule = require('../internals/internal-state');\nvar IS_PURE = require('../internals/is-pure');\n\nvar MATCH_ALL = wellKnownSymbol('matchAll');\nvar REGEXP_STRING = 'RegExp String';\nvar REGEXP_STRING_ITERATOR = REGEXP_STRING + ' Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(REGEXP_STRING_ITERATOR);\nvar RegExpPrototype = RegExp.prototype;\nvar $TypeError = TypeError;\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar nativeMatchAll = uncurryThis(''.matchAll);\n\nvar WORKS_WITH_NON_GLOBAL_REGEX = !!nativeMatchAll && !fails(function () {\n  nativeMatchAll('a', /./);\n});\n\nvar $RegExpStringIterator = createIteratorConstructor(function RegExpStringIterator(regexp, string, $global, fullUnicode) {\n  setInternalState(this, {\n    type: REGEXP_STRING_ITERATOR,\n    regexp: regexp,\n    string: string,\n    global: $global,\n    unicode: fullUnicode,\n    done: false\n  });\n}, REGEXP_STRING, function next() {\n  var state = getInternalState(this);\n  if (state.done) return createIterResultObject(undefined, true);\n  var R = state.regexp;\n  var S = state.string;\n  var match = regExpExec(R, S);\n  if (match === null) {\n    state.done = true;\n    return createIterResultObject(undefined, true);\n  }\n  if (state.global) {\n    if (toString(match[0]) === '') R.lastIndex = advanceStringIndex(S, toLength(R.lastIndex), state.unicode);\n    return createIterResultObject(match, false);\n  }\n  state.done = true;\n  return createIterResultObject(match, false);\n});\n\nvar $matchAll = function (string) {\n  var R = anObject(this);\n  var S = toString(string);\n  var C = speciesConstructor(R, RegExp);\n  var flags = toString(getRegExpFlags(R));\n  var matcher, $global, fullUnicode;\n  matcher = new C(C === RegExp ? R.source : R, flags);\n  $global = !!~stringIndexOf(flags, 'g');\n  fullUnicode = !!~stringIndexOf(flags, 'u');\n  matcher.lastIndex = toLength(R.lastIndex);\n  return new $RegExpStringIterator(matcher, S, $global, fullUnicode);\n};\n\n// `String.prototype.matchAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.matchall\n$({ target: 'String', proto: true, forced: WORKS_WITH_NON_GLOBAL_REGEX }, {\n  matchAll: function matchAll(regexp) {\n    var O = requireObjectCoercible(this);\n    var flags, S, matcher, rx;\n    if (!isNullOrUndefined(regexp)) {\n      if (isRegExp(regexp)) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(regexp)));\n        if (!~stringIndexOf(flags, 'g')) throw new $TypeError('`.matchAll` does not allow non-global regexes');\n      }\n      if (WORKS_WITH_NON_GLOBAL_REGEX) return nativeMatchAll(O, regexp);\n      matcher = getMethod(regexp, MATCH_ALL);\n      if (matcher === undefined && IS_PURE && classof(regexp) === 'RegExp') matcher = $matchAll;\n      if (matcher) return call(matcher, regexp, O);\n    } else if (WORKS_WITH_NON_GLOBAL_REGEX) return nativeMatchAll(O, regexp);\n    S = toString(O);\n    rx = new RegExp(regexp, 'g');\n    return IS_PURE ? call($matchAll, rx, S) : rx[MATCH_ALL](S);\n  }\n});\n\nIS_PURE || MATCH_ALL in RegExpPrototype || defineBuiltIn(RegExpPrototype, MATCH_ALL, $matchAll);\n","var baseIteratee = require('./_baseIteratee'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * uniqueness is computed. The order of result values is determined by the\n * order they occur in the array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniqBy(array, iteratee) {\n  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];\n}\n\nmodule.exports = uniqBy;\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","import CachingAdapter from './Caching'\n\nexport default class FakeAdapter extends CachingAdapter {\n  constructor(server) {\n    super()\n    this.server = server\n  }\n\n  static getDefaultValues() {\n    return {\n      type: 'fake'\n    }\n  }\n\n  setData(data) {\n    this.server = data\n  }\n\n  getData() {\n    return JSON.parse(JSON.stringify(this.server))\n  }\n\n  getLabel() {\n    return 'Fake account (floccus)'\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/dist/js/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t393: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkfloccus\"] = globalThis[\"webpackChunkfloccus\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [754,890,389,546,991], () => (__webpack_require__(17392)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","storageLock","AsyncLock","BrowserAccountStorage","constructor","id","this","accountId","changeEntry","entryName","fn","defaultVal","acquire","async","entry","getEntry","browser","storage","local","set","JSON","stringify","get","parse","e","Logger","log","message","console","error","deleteEntry","remove","getAllAccounts","accounts","Object","keys","getAccountData","key","data","iv","password","DefunctCryptography","decryptAES","Cryptography","username","passphrase","setAccountData","encData","deleteAccountData","deleteCache","deleteMappings","initCache","getCache","Folder","hydrate","length","location","ItemLocation","LOCAL","setCache","initMappings","getMappings","Mappings","bookmarks","ServerToLocal","LocalToServer","folders","setMappings","getCurrentContinuation","setCurrentContinuation","continuation","_","createdAt","Date","now","MAX_BACKOFF_INTERVAL","INTERVENTION_INTERVAL","AlarmManager","ctl","checkSync","promises","Account","getData","lastSync","interval","syncInterval","scheduled","push","scheduleSync","errorCount","getBackoffInterval","Promise","all","maxErrorCount","Math","log2","min","pow","schedule","listeners","alarms","unlocked","setEnabled","Controller","onChanged","addListener","localId","details","onchange","onMoved","onRemoved","onCreated","permissions","contains","then","historyAllowed","history","onVisited","historyItem","onVisitUrl","create","periodInMinutes","onAlarm","alarm","name","d","accountsLocked","packageJson","currentVersion","packageVersion","split","lastVersion","lastInterventionAt","tabs","url","active","setTimeout","updateStatus","navigator","userAgent","includes","WorkerGlobalScope","self","addEventListener","event","_receiveEvent","source","postMessage","runtime","onMessage","sendMessage","warn","onStatusChange","_self","clients","matchAll","forEach","client","type","params","onStartup","sendResponse","enabled","unlock","hashedKey","Error","accountIds","BrowserAccount","map","a","updateFromStorage","getUnlocked","resolve","allAccounts","trackingAccountsFilter","account","tracksBookmark","accountsToSync","filter","i","containingAccounts","ancestors","BrowserTree","uniqBy","concat","acc","syncing","wait","clearTimeout","getStatus","STATUS_SYNCING","syncAccount","setData","scheduleAll","cancelSync","keepEnabled","strategy","forceSync","arguments","undefined","setInterval","getCurrent","sync","clearInterval","updateBadge","listener","unregistered","splice","indexOf","STATUS_ERROR","overallStatus","reduce","status","accData","STATUS_ALLGOOD","every","STATUS_DISABLED","setStatusBadge","icon","path","browserAction","setIcon","action","localRoot","init","onLoad","telemetryEnabled","Sentry","dsn","integrations","sampleRate","release","debug","clickCountEnabled","search","bookmark","matchingAccounts","server","getServer","countClick","$","call","uncurryThis","createIteratorConstructor","createIterResultObject","requireObjectCoercible","toLength","toString","anObject","isNullOrUndefined","classof","isRegExp","getRegExpFlags","getMethod","defineBuiltIn","fails","wellKnownSymbol","speciesConstructor","advanceStringIndex","regExpExec","InternalStateModule","IS_PURE","MATCH_ALL","REGEXP_STRING","REGEXP_STRING_ITERATOR","setInternalState","getInternalState","getterFor","RegExpPrototype","RegExp","prototype","$TypeError","TypeError","stringIndexOf","nativeMatchAll","WORKS_WITH_NON_GLOBAL_REGEX","$RegExpStringIterator","regexp","string","$global","fullUnicode","global","unicode","done","state","R","S","match","lastIndex","$matchAll","matcher","C","flags","target","proto","forced","rx","O","baseIteratee","baseUniq","module","exports","array","iteratee","isObject","MATCH","it","hasOwn","isPrototypeOf","regExpFlags","FakeAdapter","CachingAdapter","super","getDefaultValues","getLabel","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","m","amdD","amdO","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","r","n","getter","__esModule","definition","o","defineProperty","enumerable","f","chunkId","u","g","globalThis","Function","window","hmd","children","obj","prop","hasOwnProperty","l","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","value","nmd","paths","p","installedChunks","installedChunkData","promise","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}